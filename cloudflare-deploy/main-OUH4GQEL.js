var $P=Object.defineProperty,qP=Object.defineProperties;var XP=Object.getOwnPropertyDescriptors;var N0=Object.getOwnPropertySymbols;var qy=Object.prototype.hasOwnProperty,Xy=Object.prototype.propertyIsEnumerable;var $y=(n,e,t)=>e in n?$P(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Z=(n,e)=>{for(var t in e||={})qy.call(e,t)&&$y(n,t,e[t]);if(N0)for(var t of N0(e))Xy.call(e,t)&&$y(n,t,e[t]);return n},lt=(n,e)=>qP(n,XP(e));var nd=(n,e)=>{var t={};for(var i in n)qy.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&N0)for(var i of N0(n))e.indexOf(i)<0&&Xy.call(n,i)&&(t[i]=n[i]);return t};var Xt=(n,e,t)=>new Promise((i,r)=>{var o=c=>{try{a(t.next(c))}catch(l){r(l)}},s=c=>{try{a(t.throw(c))}catch(l){r(l)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});function L0(n,e){return Object.is(n,e)}var hi=null,O0=!1,R8=1,Yi=Symbol("SIGNAL");function It(n){let e=hi;return hi=n,e}function k8(){return hi}var Vl={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Hl(n){if(O0)throw new Error("");if(hi===null)return;hi.consumerOnSignalRead(n);let e=hi.nextProducerIndex++;if(H0(hi),e<hi.producerNode.length&&hi.producerNode[e]!==n&&rd(hi)){let t=hi.producerNode[e];V0(t,hi.producerIndexOfThis[e])}hi.producerNode[e]!==n&&(hi.producerNode[e]=n,hi.producerIndexOfThis[e]=rd(hi)?Zy(n,hi,e):0),hi.producerLastReadVersion[e]=n.version}function Ky(){R8++}function Bl(n){if(!(rd(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===R8)){if(!n.producerMustRecompute(n)&&!L8(n)){id(n);return}n.producerRecomputeValue(n),id(n)}}function N8(n){if(n.liveConsumerNode===void 0)return;let e=O0;O0=!0;try{for(let t of n.liveConsumerNode)t.dirty||KP(t)}finally{O0=e}}function O8(){return hi?.consumerAllowSignalWrites!==!1}function KP(n){n.dirty=!0,N8(n),n.consumerMarkedDirty?.(n)}function id(n){n.dirty=!1,n.lastCleanEpoch=R8}function od(n){return n&&(n.nextProducerIndex=0),It(n)}function F0(n,e){if(It(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(rd(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)V0(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function L8(n){H0(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(Bl(t),i!==t.version))return!0}return!1}function F8(n){if(H0(n),rd(n))for(let e=0;e<n.producerNode.length;e++)V0(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Zy(n,e,t){if(Qy(n),n.liveConsumerNode.length===0&&Jy(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=Zy(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function V0(n,e){if(Qy(n),n.liveConsumerNode.length===1&&Jy(n))for(let i=0;i<n.producerNode.length;i++)V0(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];H0(r),r.producerIndexOfThis[i]=e}}function rd(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function H0(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Qy(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Jy(n){return n.producerNode!==void 0}function B0(n,e){let t=Object.create(ZP);t.computation=n,e!==void 0&&(t.equal=e);let i=()=>{if(Bl(t),Hl(t),t.value===ha)throw t.error;return t.value};return i[Yi]=t,i}var fc=Symbol("UNSET"),Fl=Symbol("COMPUTING"),ha=Symbol("ERRORED"),ZP=lt(Z({},Vl),{value:fc,dirty:!0,error:null,equal:L0,kind:"computed",producerMustRecompute(n){return n.value===fc||n.value===Fl},producerRecomputeValue(n){if(n.value===Fl)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Fl;let t=od(n),i,r=!1;try{i=n.computation(),It(null),r=e!==fc&&e!==ha&&i!==ha&&n.equal(e,i)}catch(o){i=ha,n.error=o}finally{F0(n,t)}if(r){n.value=e;return}n.value=i,n.version++}});function QP(){throw new Error}var e_=QP;function t_(n){e_(n)}function V8(n){e_=n}var JP=null;function H8(n,e){let t=Object.create(Y0);t.value=n,e!==void 0&&(t.equal=e);let i=()=>(Hl(t),t.value);return i[Yi]=t,i}function Ul(n,e){O8()||t_(n),n.equal(n.value,e)||(n.value=e,eR(n))}function U0(n,e){O8()||t_(n),Ul(n,e(n.value))}var Y0=lt(Z({},Vl),{equal:L0,value:void 0,kind:"signal"});function eR(n){n.version++,Ky(),N8(n),JP?.()}function j0(n,e,t){let i=Object.create(tR);i.source=n,i.computation=e,t!=null&&(i.equal=t);let o=()=>{if(Bl(i),Hl(i),i.value===ha)throw i.error;return i.value};return o[Yi]=i,o}function B8(n,e){Bl(n),Ul(n,e),id(n)}function U8(n,e){Bl(n),U0(n,e),id(n)}var tR=lt(Z({},Vl),{value:fc,dirty:!0,error:null,equal:L0,kind:"linkedSignal",producerMustRecompute(n){return n.value===fc||n.value===Fl},producerRecomputeValue(n){if(n.value===Fl)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Fl;let t=od(n),i;try{let r=n.source(),o=e===fc||e===ha?void 0:{source:n.sourceValue,value:e};i=n.computation(r,o),n.sourceValue=r}catch(r){i=ha,n.error=r}finally{F0(n,t)}if(e!==fc&&i!==ha&&n.equal(e,i)){n.value=e;return}n.value=i,n.version++}});function Y8(n){let e=It(null);try{return n()}finally{It(e)}}var j8;function sd(){return j8}function Ss(n){let e=j8;return j8=n,e}var G0=Symbol("NotFound");function ut(n){return typeof n=="function"}function Yl(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var W0=Yl(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function pc(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Kt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(ut(i))try{i()}catch(o){e=o instanceof W0?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{n_(o)}catch(s){e=e??[],s instanceof W0?e=[...e,...s.errors]:e.push(s)}}if(e)throw new W0(e)}}add(e){var t;if(e&&e!==this)if(this.closed)n_(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&pc(t,e)}remove(e){let{_finalizers:t}=this;t&&pc(t,e),e instanceof n&&e._removeParent(this)}};Kt.EMPTY=(()=>{let n=new Kt;return n.closed=!0,n})();var G8=Kt.EMPTY;function $0(n){return n instanceof Kt||n&&"closed"in n&&ut(n.remove)&&ut(n.add)&&ut(n.unsubscribe)}function n_(n){ut(n)?n():n.unsubscribe()}var fo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var jl={setTimeout(n,e,...t){let{delegate:i}=jl;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=jl;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function q0(n){jl.setTimeout(()=>{let{onUnhandledError:e}=fo;if(e)e(n);else throw n})}function ws(){}var i_=W8("C",void 0,void 0);function r_(n){return W8("E",void 0,n)}function o_(n){return W8("N",n,void 0)}function W8(n,e,t){return{kind:n,value:e,error:t}}var mc=null;function Gl(n){if(fo.useDeprecatedSynchronousErrorHandling){let e=!mc;if(e&&(mc={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=mc;if(mc=null,t)throw i}}else n()}function s_(n){fo.useDeprecatedSynchronousErrorHandling&&mc&&(mc.errorThrown=!0,mc.error=n)}var gc=class extends Kt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,$0(e)&&e.add(this)):this.destination=rR}static create(e,t,i){return new Cs(e,t,i)}next(e){this.isStopped?q8(o_(e),this):this._next(e)}error(e){this.isStopped?q8(r_(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?q8(i_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},nR=Function.prototype.bind;function $8(n,e){return nR.call(n,e)}var X8=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){X0(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){X0(i)}else X0(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){X0(t)}}},Cs=class extends gc{constructor(e,t,i){super();let r;if(ut(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&fo.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&$8(e.next,o),error:e.error&&$8(e.error,o),complete:e.complete&&$8(e.complete,o)}):r=e}this.destination=new X8(r)}};function X0(n){fo.useDeprecatedSynchronousErrorHandling?s_(n):q0(n)}function iR(n){throw n}function q8(n,e){let{onStoppedNotification:t}=fo;t&&jl.setTimeout(()=>t(n,e))}var rR={closed:!0,next:ws,error:iR,complete:ws};var Wl=typeof Symbol=="function"&&Symbol.observable||"@@observable";function nr(n){return n}function K8(...n){return Z8(n)}function Z8(n){return n.length===0?nr:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var it=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let o=sR(t)?t:new Cs(t,i,r);return Gl(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=a_(i),new i((r,o)=>{let s=new Cs({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[Wl](){return this}pipe(...t){return Z8(t)(this)}toPromise(t){return t=a_(t),new t((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function a_(n){var e;return(e=n??fo.Promise)!==null&&e!==void 0?e:Promise}function oR(n){return n&&ut(n.next)&&ut(n.error)&&ut(n.complete)}function sR(n){return n&&n instanceof gc||oR(n)&&$0(n)}function Q8(n){return ut(n?.lift)}function St(n){return e=>{if(Q8(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function yt(n,e,t,i,r){return new J8(n,e,t,i,r)}var J8=class extends gc{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function $l(){return St((n,e)=>{let t=null;n._refCount++;let i=yt(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var ql=class extends it{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Q8(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Kt;let t=this.getSubject();e.add(this.source.subscribe(yt(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Kt.EMPTY)}return e}refCount(){return $l()(this)}};var c_=Yl(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ce=(()=>{class n extends it{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new K0(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new c_}next(t){Gl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){Gl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Gl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:o}=this;return i||r?G8:(this.currentObservers=null,o.push(t),new Kt(()=>{this.currentObservers=null,pc(o,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){let t=new it;return t.source=this,t}}return n.create=(e,t)=>new K0(e,t),n})(),K0=class extends ce{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:G8}};var Qt=class extends ce{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var ad={now(){return(ad.delegate||Date).now()},delegate:void 0};var fa=class extends ce{constructor(e=1/0,t=1/0,i=ad){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;t||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=t.now(),a=0;for(let c=1;c<i.length&&i[c]<=s;c+=2)a=c;a&&i.splice(0,a+1)}}};var Z0=class extends Kt{constructor(e,t){super()}schedule(e,t=0){return this}};var cd={setInterval(n,e,...t){let{delegate:i}=cd;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=cd;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Xl=class extends Z0{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return cd.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&cd.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,pc(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var aR=1,e6,t6={};function l_(n){return n in t6?(delete t6[n],!0):!1}var u_={setImmediate(n){let e=aR++;return t6[e]=!0,e6||(e6=Promise.resolve()),e6.then(()=>l_(e)&&n()),e},clearImmediate(n){l_(n)}};var{setImmediate:cR,clearImmediate:lR}=u_,ld={setImmediate(...n){let{delegate:e}=ld;return(e?.setImmediate||cR)(...n)},clearImmediate(n){let{delegate:e}=ld;return(e?.clearImmediate||lR)(n)},delegate:void 0};var Q0=class extends Xl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return i!==null&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=ld.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(i!=null?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);let{actions:o}=e;t!=null&&((r=o[o.length-1])===null||r===void 0?void 0:r.id)!==t&&(ld.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}};var Kl=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};Kl.now=ad.now;var Zl=class extends Kl{constructor(e,t=Kl.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var J0=class extends Zl{flush(e){this._active=!0;let t=this._scheduled;this._scheduled=void 0;let{actions:i}=this,r;e=e||i.shift();do if(r=e.execute(e.state,e.delay))break;while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}};var e4=new J0(Q0);var ud=new Zl(Xl),d_=ud;var fi=new it(n=>n.complete());function t4(n){return n&&ut(n.schedule)}function n6(n){return n[n.length-1]}function n4(n){return ut(n6(n))?n.pop():void 0}function Yo(n){return t4(n6(n))?n.pop():void 0}function h_(n,e){return typeof n6(n)=="number"?n.pop():e}function On(n,e,t,i,r,o){function s(m){if(m!==void 0&&typeof m!="function")throw new TypeError("Function expected");return m}for(var a=i.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!e&&n?i.static?n:n.prototype:null,u=e||(l?Object.getOwnPropertyDescriptor(l,i.name):{}),d,h=!1,f=t.length-1;f>=0;f--){var p={};for(var v in i)p[v]=v==="access"?{}:i[v];for(var v in i.access)p.access[v]=i.access[v];p.addInitializer=function(m){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(m||null))};var g=(0,t[f])(a==="accessor"?{get:u.get,set:u.set}:u[c],p);if(a==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(d=s(g.get))&&(u.get=d),(d=s(g.set))&&(u.set=d),(d=s(g.init))&&r.unshift(d)}else(d=s(g))&&(a==="field"?r.unshift(d):u[c]=d)}l&&Object.defineProperty(l,i.name,u),h=!0}function Ct(n,e,t){for(var i=arguments.length>2,r=0;r<e.length;r++)t=i?e[r].call(n,t):e[r].call(n);return i?t:void 0}function p_(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{l(i.next(u))}catch(d){s(d)}}function c(u){try{l(i.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):r(u.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}function f_(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function vc(n){return this instanceof vc?(this.v=n,this):new vc(n)}function m_(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){i[f]&&(r[f]=function(v){return new Promise(function(g,m){o.push([f,v,g,m])>1||c(f,v)})},p&&(r[f]=p(r[f])))}function c(f,p){try{l(i[f](p))}catch(v){h(o[0][3],v)}}function l(f){f.value instanceof vc?Promise.resolve(f.value.v).then(u,d):h(o[0][2],f)}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,p){f(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}function g_(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof f_=="function"?f_(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),r(a,c,s.done,s.value)})}}function r(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Ql=n=>n&&typeof n.length=="number"&&typeof n!="function";function i4(n){return ut(n?.then)}function r4(n){return ut(n[Wl])}function o4(n){return Symbol.asyncIterator&&ut(n?.[Symbol.asyncIterator])}function s4(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function uR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var a4=uR();function c4(n){return ut(n?.[a4])}function l4(n){return m_(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield vc(t.read());if(r)return yield vc(void 0);yield yield vc(i)}}finally{t.releaseLock()}})}function u4(n){return ut(n?.getReader)}function rn(n){if(n instanceof it)return n;if(n!=null){if(r4(n))return dR(n);if(Ql(n))return hR(n);if(i4(n))return fR(n);if(o4(n))return v_(n);if(c4(n))return pR(n);if(u4(n))return mR(n)}throw s4(n)}function dR(n){return new it(e=>{let t=n[Wl]();if(ut(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function hR(n){return new it(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function fR(n){return new it(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,q0)})}function pR(n){return new it(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function v_(n){return new it(e=>{gR(n,e).catch(t=>e.error(t))})}function mR(n){return v_(l4(n))}function gR(n,e){var t,i,r,o;return p_(this,void 0,void 0,function*(){try{for(t=g_(n);i=yield t.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function ur(n,e,t,i=0,r=!1){let o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function d4(n,e=0){return St((t,i)=>{t.subscribe(yt(i,r=>ur(i,n,()=>i.next(r),e),()=>ur(i,n,()=>i.complete(),e),r=>ur(i,n,()=>i.error(r),e)))})}function h4(n,e=0){return St((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function y_(n,e){return rn(n).pipe(h4(e),d4(e))}function __(n,e){return rn(n).pipe(h4(e),d4(e))}function b_(n,e){return new it(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function x_(n,e){return new it(t=>{let i;return ur(t,e,()=>{i=n[a4](),ur(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){t.error(s);return}o?t.complete():t.next(r)},0,!0)}),()=>ut(i?.return)&&i.return()})}function f4(n,e){if(!n)throw new Error("Iterable cannot be null");return new it(t=>{ur(t,e,()=>{let i=n[Symbol.asyncIterator]();ur(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function M_(n,e){return f4(l4(n),e)}function S_(n,e){if(n!=null){if(r4(n))return y_(n,e);if(Ql(n))return b_(n,e);if(i4(n))return __(n,e);if(o4(n))return f4(n,e);if(c4(n))return x_(n,e);if(u4(n))return M_(n,e)}throw s4(n)}function ln(n,e){return e?S_(n,e):rn(n)}function Ae(...n){let e=Yo(n);return ln(n,e)}function Jl(n,e){let t=ut(n)?n:()=>n,i=r=>r.error(t());return new it(e?r=>e.schedule(i,0,r):i)}function dd(n){return!!n&&(n instanceof it||ut(n.lift)&&ut(n.subscribe))}var Ts=Yl(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function w_(n){return n instanceof Date&&!isNaN(n)}function Pe(n,e){return St((t,i)=>{let r=0;t.subscribe(yt(i,o=>{i.next(n.call(e,o,r++))}))})}var{isArray:vR}=Array;function yR(n,e){return vR(e)?n(...e):n(e)}function eu(n){return Pe(e=>yR(n,e))}var{isArray:_R}=Array,{getPrototypeOf:bR,prototype:xR,keys:MR}=Object;function p4(n){if(n.length===1){let e=n[0];if(_R(e))return{args:e,keys:null};if(SR(e)){let t=MR(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function SR(n){return n&&typeof n=="object"&&bR(n)===xR}function m4(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function jo(...n){let e=Yo(n),t=n4(n),{args:i,keys:r}=p4(n);if(i.length===0)return ln([],e);let o=new it(wR(i,e,r?s=>m4(r,s):nr));return t?o.pipe(eu(t)):o}function wR(n,e,t=nr){return i=>{C_(e,()=>{let{length:r}=n,o=new Array(r),s=r,a=r;for(let c=0;c<r;c++)C_(e,()=>{let l=ln(n[c],e),u=!1;l.subscribe(yt(i,d=>{o[c]=d,u||(u=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function C_(n,e,t){n?ur(t,n,e):e()}function T_(n,e,t,i,r,o,s,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=v=>l<i?p(v):c.push(v),p=v=>{o&&e.next(v),l++;let g=!1;rn(t(v,u++)).subscribe(yt(e,m=>{r?.(m),o?f(m):e.next(m)},()=>{g=!0},void 0,()=>{if(g)try{for(l--;c.length&&l<i;){let m=c.shift();s?ur(e,s,()=>p(m)):p(m)}h()}catch(m){e.error(m)}}))};return n.subscribe(yt(e,f,()=>{d=!0,h()})),()=>{a?.()}}function mn(n,e,t=1/0){return ut(e)?mn((i,r)=>Pe((o,s)=>e(i,o,r,s))(rn(n(i,r))),t):(typeof e=="number"&&(t=e),St((i,r)=>T_(i,r,n,t)))}function pa(n=1/0){return mn(nr,n)}function E_(){return pa(1)}function ma(...n){return E_()(ln(n,Yo(n)))}function g4(n){return new it(e=>{rn(n()).subscribe(e)})}function i6(...n){let e=n4(n),{args:t,keys:i}=p4(n),r=new it(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;rn(t[u]).subscribe(yt(o,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(i?m4(i,a):a),o.complete())}))}});return e?r.pipe(eu(e)):r}var CR=["addListener","removeListener"],TR=["addEventListener","removeEventListener"],ER=["on","off"];function yc(n,e,t,i){if(ut(t)&&(i=t,t=void 0),i)return yc(n,e,t).pipe(eu(i));let[r,o]=AR(n)?TR.map(s=>a=>n[s](e,a,t)):DR(n)?CR.map(D_(n,e)):zR(n)?ER.map(D_(n,e)):[];if(!r&&Ql(n))return mn(s=>yc(s,e,t))(rn(n));if(!r)throw new TypeError("Invalid event target");return new it(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return r(a),()=>o(a)})}function D_(n,e){return t=>i=>n[t](e,i)}function DR(n){return ut(n.addListener)&&ut(n.removeListener)}function zR(n){return ut(n.on)&&ut(n.off)}function AR(n){return ut(n.addEventListener)&&ut(n.removeEventListener)}function _c(n=0,e,t=d_){let i=-1;return e!=null&&(t4(e)?t=e:i=e),new it(r=>{let o=w_(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function ga(...n){let e=Yo(n),t=h_(n,1/0),i=n;return i.length?i.length===1?rn(i[0]):pa(t)(ln(i,e)):fi}function xt(n,e){return St((t,i)=>{let r=0;t.subscribe(yt(i,o=>n.call(e,o,r++)&&i.next(o)))})}function z_(n){return St((e,t)=>{let i=!1,r=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;let l=r;r=null,t.next(l)}s&&t.complete()},c=()=>{o=null,s&&t.complete()};e.subscribe(yt(t,l=>{i=!0,r=l,o||rn(n(l)).subscribe(o=yt(t,a,c))},()=>{s=!0,(!i||!o||o.closed)&&t.complete()}))})}function va(n,e=ud){return z_(()=>_c(n,e))}function po(n){return St((e,t)=>{let i=null,r=!1,o;i=e.subscribe(yt(t,void 0,void 0,s=>{o=rn(n(s,po(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function A_(n,e,t,i,r){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(yt(s,u=>{let d=l++;c=a?n(c,u,d):(a=!0,u),i&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}function Go(n,e){return ut(e)?mn(n,e,1):mn(n,1)}function r6(n){return St((e,t)=>{let i=!1,r=null,o=null,s=()=>{if(o?.unsubscribe(),o=null,i){i=!1;let a=r;r=null,t.next(a)}};e.subscribe(yt(t,a=>{o?.unsubscribe(),i=!0,r=a,o=yt(t,s,ws),rn(n(a)).subscribe(o)},()=>{s(),t.complete()},void 0,()=>{r=o=null}))})}function ya(n){return St((e,t)=>{let i=!1;e.subscribe(yt(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Ei(n){return n<=0?()=>fi:St((e,t)=>{let i=0;e.subscribe(yt(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function I_(){return St((n,e)=>{n.subscribe(yt(e,ws))})}function P_(n){return Pe(()=>n)}function o6(n,e){return e?t=>ma(e.pipe(Ei(1),I_()),t.pipe(o6(n))):mn((t,i)=>rn(n(t,i)).pipe(Ei(1),P_(t)))}function s6(n,e=ud){let t=_c(n,e);return o6(()=>t)}function ki(n,e=nr){return n=n??IR,St((t,i)=>{let r,o=!0;t.subscribe(yt(i,s=>{let a=e(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}function IR(n,e){return n===e}function v4(n=PR){return St((e,t)=>{let i=!1;e.subscribe(yt(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function PR(){return new Ts}function mo(n){return St((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Es(n,e){let t=arguments.length>=2;return i=>i.pipe(n?xt((r,o)=>n(r,o,i)):nr,Ei(1),t?ya(e):v4(()=>new Ts))}function tu(n){return n<=0?()=>fi:St((e,t)=>{let i=[];e.subscribe(yt(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function a6(n,e){let t=arguments.length>=2;return i=>i.pipe(n?xt((r,o)=>n(r,o,i)):nr,tu(1),t?ya(e):v4(()=>new Ts))}function c6(n,e){return St(A_(n,e,arguments.length>=2,!0))}function u6(n={}){let{connector:e=()=>new ce,resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,c,l=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=c=void 0,u=d=!1},p=()=>{let v=s;f(),v?.unsubscribe()};return St((v,g)=>{l++,!d&&!u&&h();let m=c=c??e();g.add(()=>{l--,l===0&&!d&&!u&&(a=l6(p,r))}),m.subscribe(g),!s&&l>0&&(s=new Cs({next:C=>m.next(C),error:C=>{d=!0,h(),a=l6(f,t,C),m.error(C)},complete:()=>{u=!0,h(),a=l6(f,i),m.complete()}}),rn(v).subscribe(s))})(o)}}function l6(n,e,...t){if(e===!0){n();return}if(e===!1)return;let i=new Cs({next:()=>{i.unsubscribe(),n()}});return rn(e(...t)).subscribe(i)}function d6(n){return xt((e,t)=>n<=t)}function Di(...n){let e=Yo(n);return St((t,i)=>{(e?ma(n,t,e):ma(n,t)).subscribe(i)})}function Dn(n,e){return St((t,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();t.subscribe(yt(i,c=>{r?.unsubscribe();let l=0,u=o++;rn(n(c,u)).subscribe(r=yt(i,d=>i.next(e?e(c,d,u,l++):d),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function _e(n){return St((e,t)=>{rn(n).subscribe(yt(t,()=>t.complete(),ws)),!t.closed&&e.subscribe(t)})}function h6(n,e=!1){return St((t,i)=>{let r=0;t.subscribe(yt(i,o=>{let s=n(o,r++);(s||e)&&i.next(o),!s&&i.complete()}))})}function Bn(n,e,t){let i=ut(n)||e||t?{next:n,error:e,complete:t}:n;return i?St((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(yt(o,c=>{var l;(l=i.next)===null||l===void 0||l.call(i,c),o.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),o.complete()},c=>{var l;a=!1,(l=i.error)===null||l===void 0||l.call(i,c),o.error(c)},()=>{var c,l;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(l=i.finalize)===null||l===void 0||l.call(i)}))}):nr}var zb="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",se=class extends Error{code;constructor(e,t){super(Q4(e,t)),this.code=e}};function RR(n){return`NG0${Math.abs(n)}`}function Q4(n,e){return`${RR(n)}${e?": "+e:""}`}var Ab=Symbol("InputSignalNode#UNSET"),kR=lt(Z({},Y0),{transformFn:void 0,applyValueToInputSignal(n,e){Ul(n,e)}});function Ib(n,e){let t=Object.create(kR);t.value=n,t.transformFn=e?.transform;function i(){if(Hl(t),t.value===Ab){let r=null;throw new se(-950,r)}return t.value}return i[Yi]=t,i}function J4(n){return{toString:n}.toString()}var cu=globalThis;function zn(n){for(let e in n)if(n[e]===zn)return e;throw Error("Could not find renamed property on target object.")}function NR(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function dr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(dr).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}function E6(n,e){return n?e?`${n} ${e}`:n:e||""}var OR=zn({__forward_ref__:zn});function kr(n){return n.__forward_ref__=kr,n.toString=function(){return dr(this())},n}function Ni(n){return Pb(n)?n():n}function Pb(n){return typeof n=="function"&&n.hasOwnProperty(OR)&&n.__forward_ref__===kr}function re(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Re(n){return{providers:n.providers||[],imports:n.imports||[]}}function e2(n){return R_(n,kb)||R_(n,Nb)}function Rb(n){return e2(n)!==null}function R_(n,e){return n.hasOwnProperty(e)?n[e]:null}function LR(n){let e=n&&(n[kb]||n[Nb]);return e||null}function k_(n){return n&&(n.hasOwnProperty(N_)||n.hasOwnProperty(FR))?n[N_]:null}var kb=zn({\u0275prov:zn}),N_=zn({\u0275inj:zn}),Nb=zn({ngInjectableDef:zn}),FR=zn({ngInjectorDef:zn}),de=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=re({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ob(n){return n&&!!n.\u0275providers}var VR=zn({\u0275cmp:zn}),HR=zn({\u0275dir:zn}),BR=zn({\u0275pipe:zn}),UR=zn({\u0275mod:zn}),D4=zn({\u0275fac:zn}),md=zn({__NG_ELEMENT_ID__:zn}),O_=zn({__NG_ENV_ID__:zn});function Mc(n){return typeof n=="string"?n:n==null?"":String(n)}function YR(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Mc(n)}function Lb(n,e){throw new se(-200,n)}function Rm(n,e){throw new se(-201,!1)}var Lt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Lt||{}),D6;function Fb(){return D6}function Jr(n){let e=D6;return D6=n,e}function Vb(n,e,t){let i=e2(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&Lt.Optional)return null;if(e!==void 0)return e;Rm(n,"Injector")}var jR={},bc=jR,GR="__NG_DI_FLAG__",z4=class{injector;constructor(e){this.injector=e}retrieve(e,t){let i=t;return this.injector.get(e,i.optional?G0:bc,i)}},A4="ngTempTokenPath",WR="ngTokenPath",$R=/\n/gm,qR="\u0275",L_="__source";function XR(n,e=Lt.Default){if(sd()===void 0)throw new se(-203,!1);if(sd()===null)return Vb(n,void 0,e);{let t=sd(),i;return t instanceof z4?i=t.injector:i=t,i.get(n,e&Lt.Optional?null:void 0,e)}}function Me(n,e=Lt.Default){return(Fb()||XR)(Ni(n),e)}function T(n,e=Lt.Default){return Me(n,t2(e))}function t2(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function z6(n){let e=[];for(let t=0;t<n.length;t++){let i=Ni(n[t]);if(Array.isArray(i)){if(i.length===0)throw new se(900,!1);let r,o=Lt.Default;for(let s=0;s<i.length;s++){let a=i[s],c=KR(a);typeof c=="number"?c===-1?r=a.token:o|=c:r=a}e.push(Me(r,o))}else e.push(Me(i))}return e}function KR(n){return n[GR]}function ZR(n,e,t,i){let r=n[A4];throw e[L_]&&r.unshift(e[L_]),n.message=QR(`
`+n.message,r,t,i),n[WR]=r,n[A4]=null,n}function QR(n,e,t,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==qR?n.slice(2):n;let r=dr(e);if(Array.isArray(e))r=e.map(dr).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):dr(a)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace($R,`
  `)}`}function lu(n,e){let t=n.hasOwnProperty(D4);return t?n[D4]:null}function JR(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function ek(n){return n.flat(Number.POSITIVE_INFINITY)}function km(n,e){n.forEach(t=>Array.isArray(t)?km(t,e):e(t))}function Hb(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function I4(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function tk(n,e){let t=[];for(let i=0;i<n;i++)t.push(e);return t}function nk(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=t,n[e+1]=i}}function Mu(n,e,t){let i=Md(n,e);return i>=0?n[i|1]=t:(i=~i,nk(n,i,e,t)),i}function f6(n,e){let t=Md(n,e);if(t>=0)return n[t|1]}function Md(n,e){return ik(n,e,1)}function ik(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}var $o={},ir=[],uu=new de(""),Bb=new de("",-1),Ub=new de(""),P4=class{get(e,t=bc){if(t===bc){let i=new Error(`NullInjectorError: No provider for ${dr(e)}!`);throw i.name="NullInjectorError",i}return t}};function Yb(n,e){let t=n[UR]||null;if(!t&&e===!0)throw new Error(`Type ${dr(n)} does not have '\u0275mod' property.`);return t}function xa(n){return n[VR]||null}function jb(n){return n[HR]||null}function rk(n){return n[BR]||null}function hr(n){return{\u0275providers:n}}function ok(...n){return{\u0275providers:Gb(!0,n),\u0275fromNgModule:!0}}function Gb(n,...e){let t=[],i=new Set,r,o=s=>{t.push(s)};return km(e,s=>{let a=s;A6(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&Wb(r,o),t}function Wb(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];Nm(r,o=>{e(o,i)})}}function A6(n,e,t,i){if(n=Ni(n),!n)return!1;let r=null,o=k_(n),s=!o&&xa(n);if(!o&&!s){let c=n.ngModule;if(o=k_(c),o)r=c;else return!1}else{if(s&&!s.standalone)return!1;r=n}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)A6(l,e,t,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let l;try{km(o.imports,u=>{A6(u,e,t,i)&&(l||=[],l.push(u))})}finally{}l!==void 0&&Wb(l,e)}if(!a){let l=lu(r)||(()=>new r);e({provide:r,useFactory:l,deps:ir},r),e({provide:Ub,useValue:r,multi:!0},r),e({provide:uu,useValue:()=>Me(r),multi:!0},r)}let c=o.providers;if(c!=null&&!a){let l=n;Nm(c,u=>{e(u,l)})}}else return!1;return r!==n&&n.providers!==void 0}function Nm(n,e){for(let t of n)Ob(t)&&(t=t.\u0275providers),Array.isArray(t)?Nm(t,e):e(t)}var sk=zn({provide:String,useValue:zn});function $b(n){return n!==null&&typeof n=="object"&&sk in n}function ak(n){return!!(n&&n.useExisting)}function ck(n){return!!(n&&n.useFactory)}function du(n){return typeof n=="function"}function lk(n){return!!n.useClass}var n2=new de(""),M4={},F_={},p6;function i2(){return p6===void 0&&(p6=new P4),p6}var Jn=class{},gd=class extends Jn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,P6(e,s=>this.processProvider(s)),this.records.set(Bb,nu(void 0,this)),r.has("environment")&&this.records.set(Jn,nu(void 0,this));let o=this.records.get(n2);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Ub,ir,Lt.Self))}retrieve(e,t){let i=t;return this.get(e,i.optional?G0:bc,i)}destroy(){fd(this),this._destroyed=!0;let e=It(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),It(e)}}onDestroy(e){return fd(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){fd(this);let t=Ss(this),i=Jr(void 0),r;try{return e()}finally{Ss(t),Jr(i)}}get(e,t=bc,i=Lt.Default){if(fd(this),e.hasOwnProperty(O_))return e[O_](this);i=t2(i);let r,o=Ss(this),s=Jr(void 0);try{if(!(i&Lt.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=pk(e)&&e2(e);l&&this.injectableDefInScope(l)?c=nu(I6(e),M4):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,i)}let a=i&Lt.Self?i2():this.parent;return t=i&Lt.Optional&&t===bc?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[A4]=a[A4]||[]).unshift(dr(e)),o)throw a;return ZR(a,e,"R3InjectorError",this.source)}else throw a}finally{Jr(s),Ss(o)}}resolveInjectorInitializers(){let e=It(null),t=Ss(this),i=Jr(void 0),r;try{let o=this.get(uu,ir,Lt.Self);for(let s of o)s()}finally{Ss(t),Jr(i),It(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(dr(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ni(e);let t=du(e)?e:Ni(e&&e.provide),i=dk(e);if(!du(e)&&e.multi===!0){let r=this.records.get(t);r||(r=nu(void 0,M4,!0),r.factory=()=>z6(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t,i){let r=It(null);try{return t.value===F_?Lb(dr(e)):t.value===M4&&(t.value=F_,t.value=t.factory(void 0,i)),typeof t.value=="object"&&t.value&&fk(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{It(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ni(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function I6(n){let e=e2(n),t=e!==null?e.factory:lu(n);if(t!==null)return t;if(n instanceof de)throw new se(204,!1);if(n instanceof Function)return uk(n);throw new se(204,!1)}function uk(n){if(n.length>0)throw new se(204,!1);let t=LR(n);return t!==null?()=>t.factory(n):()=>new n}function dk(n){if($b(n))return nu(void 0,n.useValue);{let e=qb(n);return nu(e,M4)}}function qb(n,e,t){let i;if(du(n)){let r=Ni(n);return lu(r)||I6(r)}else if($b(n))i=()=>Ni(n.useValue);else if(ck(n))i=()=>n.useFactory(...z6(n.deps||[]));else if(ak(n))i=(r,o)=>Me(Ni(n.useExisting),o!==void 0&&o&Lt.Optional?Lt.Optional:void 0);else{let r=Ni(n&&(n.useClass||n.provide));if(hk(n))i=()=>new r(...z6(n.deps));else return lu(r)||I6(r)}return i}function fd(n){if(n.destroyed)throw new se(205,!1)}function nu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function hk(n){return!!n.deps}function fk(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function pk(n){return typeof n=="function"||typeof n=="object"&&n instanceof de}function P6(n,e){for(let t of n)Array.isArray(t)?P6(t,e):t&&Ob(t)?P6(t.\u0275providers,e):e(t)}function fr(n,e){let t;n instanceof gd?(fd(n),t=n):t=new z4(n);let i,r=Ss(t),o=Jr(void 0);try{return e()}finally{Ss(r),Jr(o)}}function Xb(){return Fb()!==void 0||sd()!=null}function Sd(n){if(!Xb())throw new se(-203,!1)}var Kb=Function;function mk(n){return typeof n=="function"}var Zo=0,Pt=1,Tt=2,Gi=3,vo=4,pr=5,hu=6,R4=7,mi=8,fu=9,Ds=10,qn=11,vd=12,V_=13,Su=14,Rr=15,Sc=16,iu=17,zs=18,r2=19,Zb=20,_a=21,m6=22,k4=23,eo=24,su=25,Wi=26,Om=1;var wc=7,N4=8,pu=9,ji=10;function ba(n){return Array.isArray(n)&&typeof n[Om]=="object"}function Ps(n){return Array.isArray(n)&&n[Om]===!0}function Lm(n){return(n.flags&4)!==0}function wu(n){return n.componentOffset>-1}function o2(n){return(n.flags&1)===1}function yo(n){return!!n.template}function O4(n){return(n[Tt]&512)!==0}function Cu(n){return(n[Tt]&256)===256}var R6=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function Qb(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var $e=(()=>{let n=()=>Jb;return n.ngInherit=!0,n})();function Jb(n){return n.type.prototype.ngOnChanges&&(n.setInput=vk),gk}function gk(){let n=tx(this),e=n?.current;if(e){let t=n.previous;if(t===$o)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function vk(n,e,t,i,r){let o=this.declaredInputs[i],s=tx(n)||yk(n,{previous:$o,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new R6(l&&l.currentValue,t,c===$o),Qb(n,e,r,t)}var ex="__ngSimpleChanges__";function tx(n){return n[ex]||null}function yk(n,e){return n[ex]=e}var H_=null;var xn=function(n,e=null,t){H_?.(n,e,t)},nx="svg",_k="math";function qo(n){for(;Array.isArray(n);)n=n[Zo];return n}function bk(n){for(;Array.isArray(n);){if(typeof n[Om]=="object")return n;n=n[Zo]}return null}function ix(n,e){return qo(e[n])}function Qo(n,e){return qo(e[n.index])}function Fm(n,e){return n.data[e]}function xk(n,e){return n[e]}function Xo(n,e){let t=e[n];return ba(t)?t:t[Zo]}function Mk(n){return(n[Tt]&4)===4}function Vm(n){return(n[Tt]&128)===128}function Sk(n){return Ps(n[Gi])}function Ma(n,e){return e==null?null:n[e]}function rx(n){n[iu]=0}function ox(n){n[Tt]&1024||(n[Tt]|=1024,Vm(n)&&wd(n))}function wk(n,e){for(;n>0;)e=e[Su],n--;return e}function s2(n){return!!(n[Tt]&9216||n[eo]?.dirty)}function k6(n){n[Ds].changeDetectionScheduler?.notify(8),n[Tt]&64&&(n[Tt]|=1024),s2(n)&&wd(n)}function wd(n){n[Ds].changeDetectionScheduler?.notify(0);let e=Cc(n);for(;e!==null&&!(e[Tt]&8192||(e[Tt]|=8192,!Vm(e)));)e=Cc(e)}function sx(n,e){if(Cu(n))throw new se(911,!1);n[_a]===null&&(n[_a]=[]),n[_a].push(e)}function Ck(n,e){if(n[_a]===null)return;let t=n[_a].indexOf(e);t!==-1&&n[_a].splice(t,1)}function Cc(n){let e=n[Gi];return Ps(e)?e[Gi]:e}function Hm(n){return n[R4]??=[]}function Bm(n){return n.cleanup??=[]}function Tk(n,e,t,i){let r=Hm(e);r.push(t),n.firstCreatePass&&Bm(n).push(i,r.length-1)}var Ft={lFrame:fx(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var N6=!1;function Ek(){return Ft.lFrame.elementDepthCount}function Dk(){Ft.lFrame.elementDepthCount++}function zk(){Ft.lFrame.elementDepthCount--}function Um(){return Ft.bindingsEnabled}function ax(){return Ft.skipHydrationRootTNode!==null}function Ak(n){return Ft.skipHydrationRootTNode===n}function Ik(){Ft.skipHydrationRootTNode=null}function Et(){return Ft.lFrame.lView}function ei(){return Ft.lFrame.tView}function je(n){return Ft.lFrame.contextLView=n,n[mi]}function Ge(n){return Ft.lFrame.contextLView=null,n}function $i(){let n=cx();for(;n!==null&&n.type===64;)n=n.parent;return n}function cx(){return Ft.lFrame.currentTNode}function Pk(){let n=Ft.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ac(n,e){let t=Ft.lFrame;t.currentTNode=n,t.isParent=e}function Ym(){return Ft.lFrame.isParent}function jm(){Ft.lFrame.isParent=!1}function Rk(){return Ft.lFrame.contextLView}function lx(){return N6}function B_(n){let e=N6;return N6=n,e}function Gm(){let n=Ft.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function kk(){return Ft.lFrame.bindingIndex}function Nk(n){return Ft.lFrame.bindingIndex=n}function Ic(){return Ft.lFrame.bindingIndex++}function Wm(n){let e=Ft.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Ok(){return Ft.lFrame.inI18n}function Lk(n,e){let t=Ft.lFrame;t.bindingIndex=t.bindingRootIndex=n,O6(e)}function Fk(){return Ft.lFrame.currentDirectiveIndex}function O6(n){Ft.lFrame.currentDirectiveIndex=n}function ux(n){let e=Ft.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function $m(){return Ft.lFrame.currentQueryIndex}function a2(n){Ft.lFrame.currentQueryIndex=n}function Vk(n){let e=n[Pt];return e.type===2?e.declTNode:e.type===1?n[pr]:null}function dx(n,e,t){if(t&Lt.SkipSelf){let r=e,o=n;for(;r=r.parent,r===null&&!(t&Lt.Host);)if(r=Vk(o),r===null||(o=o[Su],r.type&10))break;if(r===null)return!1;e=r,n=o}let i=Ft.lFrame=hx();return i.currentTNode=e,i.lView=n,!0}function qm(n){let e=hx(),t=n[Pt];Ft.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function hx(){let n=Ft.lFrame,e=n===null?null:n.child;return e===null?fx(n):e}function fx(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function px(){let n=Ft.lFrame;return Ft.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var mx=px;function Xm(){let n=px();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Hk(n){return(Ft.lFrame.contextLView=wk(n,Ft.lFrame.contextLView))[mi]}function wa(){return Ft.lFrame.selectedIndex}function Tc(n){Ft.lFrame.selectedIndex=n}function c2(){let n=Ft.lFrame;return Fm(n.tView,n.selectedIndex)}function Tu(){Ft.lFrame.currentNamespace=nx}function Bk(){return Ft.lFrame.currentNamespace}var gx=!0;function l2(){return gx}function u2(n){gx=n}function Uk(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=Jb(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Km(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function S4(n,e,t){vx(n,e,3,t)}function w4(n,e,t,i){(n[Tt]&3)===t&&vx(n,e,t,i)}function g6(n,e){let t=n[Tt];(t&3)===e&&(t&=16383,t+=1,n[Tt]=t)}function vx(n,e,t,i){let r=i!==void 0?n[iu]&65535:0,o=i??-1,s=e.length-1,a=0;for(let c=r;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],i!=null&&a>=i)break}else e[c]<0&&(n[iu]+=65536),(a<o||o==-1)&&(Yk(n,t,e,c),n[iu]=(n[iu]&4294901760)+c+2),c++}function U_(n,e){xn(4,n,e);let t=It(null);try{e.call(n)}finally{It(t),xn(5,n,e)}}function Yk(n,e,t,i){let r=t[i]<0,o=t[i+1],s=r?-t[i]:t[i],a=n[s];r?n[Tt]>>14<n[iu]>>16&&(n[Tt]&3)===e&&(n[Tt]+=16384,U_(a,o)):U_(a,o)}var au=-1,Ec=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=i}};function jk(n){return(n.flags&8)!==0}function Gk(n){return(n.flags&16)!==0}function Wk(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{let o=r,s=t[++i];$k(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function yx(n){return n===3||n===4||n===6}function $k(n){return n.charCodeAt(0)===64}function mu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?Y_(n,t,r,null,e[++i]):Y_(n,t,r,null,null))}}return n}function Y_(n,e,t,i,r){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){r!==null&&(n[o+1]=r);return}o++,r!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r)}function _x(n){return n!==au}function L4(n){return n&32767}function qk(n){return n>>16}function F4(n,e){let t=qk(n),i=e;for(;t>0;)i=i[Su],t--;return i}var L6=!0;function j_(n){let e=L6;return L6=n,e}var Xk=256,bx=Xk-1,xx=5,Kk=0,Wo={};function Zk(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(md)&&(i=t[md]),i==null&&(i=t[md]=Kk++);let r=i&bx,o=1<<r;e.data[n+(r>>xx)]|=o}function V4(n,e){let t=Mx(n,e);if(t!==-1)return t;let i=e[Pt];i.firstCreatePass&&(n.injectorIndex=e.length,v6(i.data,n),v6(e,null),v6(i.blueprint,null));let r=Zm(n,e),o=n.injectorIndex;if(_x(r)){let s=L4(r),a=F4(r,e),c=a[Pt].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=r,o}function v6(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Mx(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Zm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=Ex(r),i===null)return au;if(t++,r=r[Su],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return au}function F6(n,e,t){Zk(n,e,t)}function Qk(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let o=t[r];if(yx(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(o===e)return t[r+1];r=r+2}}}return null}function Sx(n,e,t){if(t&Lt.Optional||n!==void 0)return n;Rm(e,"NodeInjector")}function wx(n,e,t,i){if(t&Lt.Optional&&i===void 0&&(i=null),(t&(Lt.Self|Lt.Host))===0){let r=n[fu],o=Jr(void 0);try{return r?r.get(e,i,t&Lt.Optional):Vb(e,i,t&Lt.Optional)}finally{Jr(o)}}return Sx(i,e,t)}function Cx(n,e,t,i=Lt.Default,r){if(n!==null){if(e[Tt]&2048&&!(i&Lt.Self)){let s=nN(n,e,t,i,Wo);if(s!==Wo)return s}let o=Tx(n,e,t,i,Wo);if(o!==Wo)return o}return wx(e,t,i,r)}function Tx(n,e,t,i,r){let o=eN(t);if(typeof o=="function"){if(!dx(e,n,i))return i&Lt.Host?Sx(r,t,i):wx(e,t,i,r);try{let s;if(s=o(i),s==null&&!(i&Lt.Optional))Rm(t);else return s}finally{mx()}}else if(typeof o=="number"){let s=null,a=Mx(n,e),c=au,l=i&Lt.Host?e[Rr][pr]:null;for((a===-1||i&Lt.SkipSelf)&&(c=a===-1?Zm(n,e):e[a+8],c===au||!W_(i,!1)?a=-1:(s=e[Pt],a=L4(c),e=F4(c,e)));a!==-1;){let u=e[Pt];if(G_(o,a,u.data)){let d=Jk(a,e,t,s,i,l);if(d!==Wo)return d}c=e[a+8],c!==au&&W_(i,e[Pt].data[a+8]===l)&&G_(o,a,e)?(s=u,a=L4(c),e=F4(c,e)):a=-1}}return r}function Jk(n,e,t,i,r,o){let s=e[Pt],a=s.data[n+8],c=i==null?wu(a)&&L6:i!=s&&(a.type&3)!==0,l=r&Lt.Host&&o===a,u=C4(a,s,t,c,l);return u!==null?yd(e,s,u,a,r):Wo}function C4(n,e,t,i,r){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,u=o>>20,d=i?a:a+u,h=r?a+u:l;for(let f=d;f<h;f++){let p=s[f];if(f<c&&t===p||f>=c&&p.type===t)return f}if(r){let f=s[c];if(f&&yo(f)&&f.type===t)return c}return null}function yd(n,e,t,i,r){let o=n[t],s=e.data;if(o instanceof Ec){let a=o;a.resolving&&Lb(YR(s[t]));let c=j_(a.canSeeViewProviders);a.resolving=!0;let l,u=a.injectImpl?Jr(a.injectImpl):null,d=dx(n,i,Lt.Default);try{o=n[t]=a.factory(void 0,r,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&Uk(t,s[t],e)}finally{u!==null&&Jr(u),j_(c),a.resolving=!1,mx()}}return o}function eN(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(md)?n[md]:void 0;return typeof e=="number"?e>=0?e&bx:tN:e}function G_(n,e,t){let i=1<<n;return!!(t[e+(n>>xx)]&i)}function W_(n,e){return!(n&Lt.Self)&&!(n&Lt.Host&&e)}var xc=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return Cx(this._tNode,this._lView,e,t2(i),t)}};function tN(){return new xc($i(),Et())}function qi(n){return J4(()=>{let e=n.prototype.constructor,t=e[D4]||V6(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[D4]||V6(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function V6(n){return Pb(n)?()=>{let e=V6(Ni(n));return e&&e()}:lu(n)}function nN(n,e,t,i,r){let o=n,s=e;for(;o!==null&&s!==null&&s[Tt]&2048&&!O4(s);){let a=Tx(o,s,t,i|Lt.Self,Wo);if(a!==Wo)return a;let c=o.parent;if(!c){let l=s[Zb];if(l){let u=l.get(t,Wo,i);if(u!==Wo)return u}c=Ex(s),s=s[Su]}o=c}return r}function Ex(n){let e=n[Pt],t=e.type;return t===2?e.declTNode:t===1?n[pr]:null}function Qm(n){return Qk($i(),n)}function $_(n,e=null,t=null,i){let r=Dx(n,e,t,i);return r.resolveInjectorInitializers(),r}function Dx(n,e=null,t=null,i,r=new Set){let o=[t||ir,ok(n)];return i=i||(typeof n=="object"?void 0:dr(n)),new gd(o,e||i2(),i||null,r)}var Ln=class n{static THROW_IF_NOT_FOUND=bc;static NULL=new P4;static create(e,t){if(Array.isArray(e))return $_({name:""},t,e,"");{let i=e.name??"";return $_({name:i},e.parent,e.providers,i)}}static \u0275prov=re({token:n,providedIn:"any",factory:()=>Me(Bb)});static __NG_ELEMENT_ID__=-1};var iN=new de("");iN.__NG_ELEMENT_ID__=n=>{let e=$i();if(e===null)throw new se(204,!1);if(e.type&2)return e.value;if(n&Lt.Optional)return null;throw new se(204,!1)};var zx=!1,Nr=(()=>{class n{static __NG_ELEMENT_ID__=rN;static __NG_ENV_ID__=t=>t}return n})(),H6=class extends Nr{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return Cu(t)?(e(),()=>{}):(sx(t,e),()=>Ck(t,e))}};function rN(){return new H6(Et())}var gu=class{},d2=new de("",{providedIn:"root",factory:()=>!1});var Ax=new de(""),Ix=new de(""),Ca=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Qt(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})();var B6=class extends ce{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Xb()&&(this.destroyRef=T(Nr,{optional:!0})??void 0,this.pendingTasks=T(Ca,{optional:!0})??void 0)}emit(e){let t=It(null);try{super.next(e)}finally{It(t)}}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof Kt&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},pt=B6;function H4(...n){}function Px(n){let e,t;function i(){n=H4;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function q_(n){return queueMicrotask(()=>n()),()=>{n=H4}}var Jm="isAngularZone",B4=Jm+"_ID",oN=0,_t=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new pt(!1);onMicrotaskEmpty=new pt(!1);onStable=new pt(!1);onError=new pt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=zx}=e;if(typeof Zone>"u")throw new se(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,cN(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Jm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new se(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new se(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,sN,H4,H4);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},sN={};function eg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function aN(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Px(()=>{n.callbackScheduled=!1,U6(n),n.isCheckStableRunning=!0,eg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),U6(n)}function cN(n){let e=()=>{aN(n)},t=oN++;n._inner=n._inner.fork({name:"angular",properties:{[Jm]:!0,[B4]:t,[B4+t]:!0},onInvokeTask:(i,r,o,s,a,c)=>{if(lN(c))return i.invokeTask(o,s,a,c);try{return X_(n),i.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),K_(n)}},onInvoke:(i,r,o,s,a,c,l)=>{try{return X_(n),i.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!uN(c)&&e(),K_(n)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,U6(n),eg(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function U6(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function X_(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function K_(n){n._nesting--,eg(n)}var Y6=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new pt;onMicrotaskEmpty=new pt;onStable=new pt;onError=new pt;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function lN(n){return Rx(n,"__ignore_ng_zone__")}function uN(n){return Rx(n,"__scheduler_tick__")}function Rx(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var _o=class{_console=console;handleError(e){this._console.error("ERROR",e)}},dN=new de("",{providedIn:"root",factory:()=>{let n=T(_t),e=T(_o);return t=>n.runOutsideAngular(()=>e.handleError(t))}}),j6=class{destroyed=!1;listeners=null;errorHandler=T(_o,{optional:!0});destroyRef=T(Nr);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new se(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let t=this.listeners?.indexOf(e);t!==void 0&&t!==-1&&this.listeners?.splice(t,1)}}}emit(e){if(this.destroyed){console.warn(Q4(953,!1));return}if(this.listeners===null)return;let t=It(null);try{for(let i of this.listeners)try{i(e)}catch(r){this.errorHandler?.handleError(r)}}finally{It(t)}}};function h2(n){return new j6}function Z_(n,e){return Ib(n,e)}function hN(n){return Ib(Ab,n)}var Kn=(Z_.required=hN,Z_);function fN(){return Eu($i(),Et())}function Eu(n,e){return new Je(Qo(n,e))}var Je=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=fN}return n})();function kx(n){return n instanceof Je?n.nativeElement:n}function pN(n){return typeof n=="function"&&n[Yi]!==void 0}function gi(n,e){let t=H8(n,e?.equal),i=t[Yi];return t.set=r=>Ul(i,r),t.update=r=>U0(i,r),t.asReadonly=Nx.bind(t),t}function Nx(){let n=this[Yi];if(n.readonlyFn===void 0){let e=()=>this();e[Yi]=n,n.readonlyFn=e}return n.readonlyFn}function Ox(n){return pN(n)&&typeof n.set=="function"}function mN(){return this._results[Symbol.iterator]()}var G6=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ce}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=ek(e);(this._changesDetected=!JR(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=mN};function Lx(n){return(n.flags&128)===128}var Fx=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Fx||{}),Vx=new Map,gN=0;function vN(){return gN++}function yN(n){Vx.set(n[r2],n)}function W6(n){Vx.delete(n[r2])}var Q_="__ngContext__";function Du(n,e){ba(e)?(n[Q_]=e[r2],yN(e)):n[Q_]=e}function Hx(n){return Ux(n[vd])}function Bx(n){return Ux(n[vo])}function Ux(n){for(;n!==null&&!Ps(n);)n=n[vo];return n}var $6;function Yx(n){$6=n}function jx(){if($6!==void 0)return $6;if(typeof document<"u")return document;throw new se(210,!1)}var Cd=new de("",{providedIn:"root",factory:()=>_N}),_N="ng",tg=new de(""),Jo=new de("",{providedIn:"platform",factory:()=>"unknown"});var es=new de(""),Rs=new de("",{providedIn:"root",factory:()=>jx().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var bN="h",xN="b";var Gx=!1,MN=new de("",{providedIn:"root",factory:()=>Gx});var ng=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(ng||{}),zu=new de(""),J_=new Set;function bo(n){J_.has(n)||(J_.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Wx=(()=>{class n{view;node;constructor(t,i){this.view=t,this.node=i}static __NG_ELEMENT_ID__=SN}return n})();function SN(){return new Wx(Et(),$i())}var ru=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ru||{}),$x=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})(),wN=[ru.EarlyRead,ru.Write,ru.MixedReadWrite,ru.Read],CN=(()=>{class n{ngZone=T(_t);scheduler=T(gu);errorHandler=T(_o,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){T(zu,{optional:!0})}execute(){let t=this.sequences.size>0;t&&xn(16),this.executing=!0;for(let i of wN)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=r.hooks[i];return o(r.pipelinedValue)},r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&xn(17)}register(t){let{view:i}=t;i!==void 0?((i[su]??=[]).push(t),wd(i),i[Tt]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,i){return i?i.run(ng.AFTER_NEXT_RENDER,t):t()}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})(),q6=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,i,r,o,s=null){this.impl=e,this.hooks=t,this.view=i,this.once=r,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[su];e&&(this.view[su]=e.filter(t=>t!==this))}};function ig(n,e){!e?.injector&&Sd(ig);let t=e?.injector??T(Ln);return bo("NgAfterRender"),qx(n,t,e,!1)}function xo(n,e){!e?.injector&&Sd(xo);let t=e?.injector??T(Ln);return bo("NgAfterNextRender"),qx(n,t,e,!0)}function TN(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function qx(n,e,t,i){let r=e.get($x);r.impl??=e.get(CN);let o=e.get(zu,null,{optional:!0}),s=t?.phase??ru.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(Nr):null,c=e.get(Wx,null,{optional:!0}),l=new q6(r.impl,TN(n,s),c?.view,i,a,o?.snapshot(null));return r.impl.register(l),l}var EN=(n,e,t,i)=>{};function DN(n,e,t,i){EN(n,e,t,i)}var zN=()=>null;function Xx(n,e,t=!1){return zN(n,e,t)}function Kx(n,e){let t=n.contentQueries;if(t!==null){let i=It(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s!==-1){let a=n.data[s];a2(o),a.contentQueries(2,e[s],s)}}}finally{It(i)}}}function X6(n,e,t){a2(0);let i=It(null);try{e(n,t)}finally{It(i)}}function rg(n,e,t){if(Lm(e)){let i=It(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{It(i)}}}var Ko=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ko||{}),y4;function AN(){if(y4===void 0&&(y4=null,cu.trustedTypes))try{y4=cu.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return y4}function f2(n){return AN()?.createHTML(n)||n}var _4;function Zx(){if(_4===void 0&&(_4=null,cu.trustedTypes))try{_4=cu.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return _4}function eb(n){return Zx()?.createHTML(n)||n}function tb(n){return Zx()?.createScriptURL(n)||n}var As=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${zb})`}},K6=class extends As{getTypeName(){return"HTML"}},Z6=class extends As{getTypeName(){return"Style"}},Q6=class extends As{getTypeName(){return"Script"}},J6=class extends As{getTypeName(){return"URL"}},em=class extends As{getTypeName(){return"ResourceURL"}};function Or(n){return n instanceof As?n.changingThisBreaksApplicationSecurity:n}function ks(n,e){let t=IN(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${zb})`)}return t===e}function IN(n){return n instanceof As&&n.getTypeName()||null}function Qx(n){return new K6(n)}function Jx(n){return new Z6(n)}function eM(n){return new Q6(n)}function tM(n){return new J6(n)}function nM(n){return new em(n)}function PN(n){let e=new nm(n);return RN()?new tm(e):e}var tm=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(f2(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},nm=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=f2(e),t}};function RN(){try{return!!new window.DOMParser().parseFromString(f2(""),"text/html")}catch{return!1}}var kN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function p2(n){return n=String(n),n.match(kN)?n:"unsafe:"+n}function Ns(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Td(...n){let e={};for(let t of n)for(let i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}var iM=Ns("area,br,col,hr,img,wbr"),rM=Ns("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),oM=Ns("rp,rt"),NN=Td(oM,rM),ON=Td(rM,Ns("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),LN=Td(oM,Ns("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),nb=Td(iM,ON,LN,NN),sM=Ns("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),FN=Ns("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),VN=Ns("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),HN=Td(sM,FN,VN),BN=Ns("script,style,template"),im=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,i=!0,r=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild){r.push(t),t=jN(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=YN(t);if(o){t=o;break}t=r.pop()}}return this.buf.join("")}startElement(e){let t=ib(e).toLowerCase();if(!nb.hasOwnProperty(t))return this.sanitizedSomething=!0,!BN.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let i=e.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,a=s.toLowerCase();if(!HN.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;sM[a]&&(c=p2(c)),this.buf.push(" ",s,'="',rb(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=ib(e).toLowerCase();nb.hasOwnProperty(t)&&!iM.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(rb(e))}};function UN(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function YN(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw aM(e);return e}function jN(n){let e=n.firstChild;if(e&&UN(n,e))throw aM(e);return e}function ib(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function aM(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var GN=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,WN=/([^\#-~ |!])/g;function rb(n){return n.replace(/&/g,"&amp;").replace(GN,function(e){let t=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((t-55296)*1024+(i-56320)+65536)+";"}).replace(WN,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var b4;function og(n,e){let t=null;try{b4=b4||PN(n);let i=e?String(e):"";t=b4.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=b4.getInertBodyElement(i)}while(i!==o);let a=new im().sanitizeChildren(ob(t)||t);return f2(a)}finally{if(t){let i=ob(t)||t;for(;i.firstChild;)i.firstChild.remove()}}}function ob(n){return"content"in n&&$N(n)?n.content:null}function $N(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Lr=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Lr||{});function cM(n){let e=sg();return e?eb(e.sanitize(Lr.HTML,n)||""):ks(n,"HTML")?eb(Or(n)):og(jx(),Mc(n))}function Au(n){let e=sg();return e?e.sanitize(Lr.URL,n)||"":ks(n,"URL")?Or(n):p2(Mc(n))}function qN(n){let e=sg();if(e)return tb(e.sanitize(Lr.RESOURCE_URL,n)||"");if(ks(n,"ResourceURL"))return tb(Or(n));throw new se(904,!1)}function XN(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?qN:Au}function lM(n,e,t){return XN(e,t)(n)}function sg(){let n=Et();return n&&n[Ds].sanitizer}var KN=/^>|^->|<!--|-->|--!>|<!-$/g,ZN=/(<|>)/g,QN="\u200B$1\u200B";function JN(n){return n.replace(KN,e=>e.replace(ZN,QN))}function uM(n){return n instanceof Function?n():n}function eO(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}var dM="ng-template";function tO(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&eO(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(ag(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function ag(n){return n.type===4&&n.value!==dM}function nO(n,e,t){let i=n.type===4&&!t?dM:n.value;return e===i}function iO(n,e,t){let i=4,r=n.attrs,o=r!==null?sO(r):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!go(i)&&!go(c))return!1;if(s&&go(c))continue;s=!1,i=c|i&1;continue}if(!s)if(i&4){if(i=2|i&1,c!==""&&!nO(n,c,t)||c===""&&e.length===1){if(go(i))return!1;s=!0}}else if(i&8){if(r===null||!tO(n,r,c,t)){if(go(i))return!1;s=!0}}else{let l=e[++a],u=rO(c,r,ag(n),t);if(u===-1){if(go(i))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=r[u+1].toLowerCase(),i&2&&l!==d){if(go(i))return!1;s=!0}}}}return go(i)||s}function go(n){return(n&1)===0}function rO(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){let s=e[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return aO(e,n)}function hM(n,e,t=!1){for(let i=0;i<e.length;i++)if(iO(n,e[i],t))return!0;return!1}function oO(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function sO(n){for(let e=0;e<n.length;e++){let t=n[e];if(yx(t))return e}return n.length}function aO(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function cO(n,e){e:for(let t=0;t<e.length;t++){let i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function sb(n,e){return n?":not("+e.trim()+")":e}function lO(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(i&2){let a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!go(s)&&(e+=sb(o,r),r=""),i=s,o=o||!go(i);t++}return r!==""&&(e+=sb(o,r)),e}function uO(n){return n.map(lO).join(",")}function dO(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++i]):r===8&&t.push(o);else{if(!go(r))break;r=o}i++}return t.length&&e.push(1,...t),e}var io={};function hO(n,e){return n.createText(e)}function fO(n,e,t){n.setValue(e,t)}function pO(n,e){return n.createComment(JN(e))}function fM(n,e,t){return n.createElement(e,t)}function U4(n,e,t,i,r){n.insertBefore(e,t,i,r)}function pM(n,e,t){n.appendChild(e,t)}function ab(n,e,t,i,r){i!==null?U4(n,e,t,i,r):pM(n,e,t)}function mO(n,e,t){n.removeChild(null,e,t)}function gO(n,e,t){n.setAttribute(e,"style",t)}function vO(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function mM(n,e,t){let{mergedAttrs:i,classes:r,styles:o}=t;i!==null&&Wk(n,e,i),r!==null&&vO(n,e,r),o!==null&&gO(n,e,o)}function cg(n,e,t,i,r,o,s,a,c,l,u){let d=Wi+i,h=d+r,f=yO(d,h),p=typeof l=="function"?l():l;return f[Pt]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function yO(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:io);return t}function _O(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=cg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function lg(n,e,t,i,r,o,s,a,c,l,u){let d=e.blueprint.slice();return d[Zo]=r,d[Tt]=i|4|128|8|64|1024,(l!==null||n&&n[Tt]&2048)&&(d[Tt]|=2048),rx(d),d[Gi]=d[Su]=n,d[mi]=t,d[Ds]=s||n&&n[Ds],d[qn]=a||n&&n[qn],d[fu]=c||n&&n[fu]||null,d[pr]=o,d[r2]=vN(),d[hu]=u,d[Zb]=l,d[Rr]=e.type==2?n[Rr]:d,d}function bO(n,e,t){let i=Qo(e,n),r=_O(t),o=n[Ds].rendererFactory,s=ug(n,lg(n,r,null,gM(t),i,e,null,o.createRenderer(i,t),null,null,null));return n[e.index]=s}function gM(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function vM(n,e,t,i){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function ug(n,e){return n[vd]?n[V_][vo]=e:n[vd]=e,n[V_]=e,e}function O(n=1){yM(ei(),Et(),wa()+n,!1)}function yM(n,e,t,i){if(!i)if((e[Tt]&3)===3){let o=n.preOrderCheckHooks;o!==null&&S4(e,o,t)}else{let o=n.preOrderHooks;o!==null&&w4(e,o,0,t)}Tc(t)}var m2=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(m2||{});function rm(n,e,t,i){let r=It(null);try{let[o,s,a]=n.inputs[t],c=null;(s&m2.SignalBased)!==0&&(c=e[o][Yi]),c!==null&&c.transformFn!==void 0?i=c.transformFn(i):a!==null&&(i=a.call(e,i)),n.setInput!==null?n.setInput(e,c,i,t,o):Qb(e,c,o,i)}finally{It(r)}}function _M(n,e,t,i,r){let o=wa(),s=i&2;try{Tc(-1),s&&e.length>Wi&&yM(n,e,Wi,!1),xn(s?2:0,r),t(i,r)}finally{Tc(o),xn(s?3:1,r)}}function g2(n,e,t){TO(n,e,t),(t.flags&64)===64&&EO(n,e,t)}function dg(n,e,t=Qo){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?t(e,n):n[s];n[r++]=a}}}function xO(n,e,t,i){let o=i.get(MN,Gx)||t===Ko.ShadowDom,s=n.selectRootElement(e,o);return MO(s),s}function MO(n){SO(n)}var SO=()=>null;function wO(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function hg(n,e,t,i,r,o,s,a){if(!a&&pg(e,n,t,i,r)){wu(e)&&CO(t,e.index);return}if(e.type&3){let c=Qo(e,t);i=wO(i),r=s!=null?s(r,e.value||"",i):r,o.setProperty(c,i,r)}else e.type&12}function CO(n,e){let t=Xo(e,n);t[Tt]&16||(t[Tt]|=64)}function TO(n,e,t){let i=t.directiveStart,r=t.directiveEnd;wu(t)&&bO(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||V4(t,e);let o=t.initialInputs;for(let s=i;s<r;s++){let a=n.data[s],c=yd(e,n,s,t);if(Du(c,e),o!==null&&IO(e,s-i,c,a,t,o),yo(a)){let l=Xo(t.index,e);l[mi]=yd(e,n,s,t)}}}function EO(n,e,t){let i=t.directiveStart,r=t.directiveEnd,o=t.index,s=Fk();try{Tc(o);for(let a=i;a<r;a++){let c=n.data[a],l=e[a];O6(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&DO(c,l)}}finally{Tc(-1),O6(s)}}function DO(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function fg(n,e){let t=n.directiveRegistry,i=null;if(t)for(let r=0;r<t.length;r++){let o=t[r];hM(e,o.selectors,!1)&&(i??=[],yo(o)?i.unshift(o):i.push(o))}return i}function zO(n,e,t,i,r,o){let s=Qo(n,e);AO(e[qn],s,o,n.value,t,i,r)}function AO(n,e,t,i,r,o,s){if(o==null)n.removeAttribute(e,r,t);else{let a=s==null?Mc(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}function IO(n,e,t,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];rm(i,t,c,l)}}function PO(n,e,t){return(n===null||yo(n))&&(t=bk(t[e.index])),t[qn]}function RO(n,e){let t=n[fu],i=t?t.get(_o,null):null;i&&i.handleError(e)}function pg(n,e,t,i,r){let o=n.inputs?.[i],s=n.hostDirectiveInputs?.[i],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],d=e.data[l];rm(d,t[l],u,r),a=!0}if(o)for(let c of o){let l=t[c],u=e.data[c];rm(u,l,i,r),a=!0}return a}function kO(n,e){let t=Xo(e,n),i=t[Pt];NO(i,t);let r=t[Zo];r!==null&&t[hu]===null&&(t[hu]=Xx(r,t[fu])),xn(18),mg(i,t,t[mi]),xn(19,t[mi])}function NO(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function mg(n,e,t){qm(e);try{let i=n.viewQuery;i!==null&&X6(1,i,t);let r=n.template;r!==null&&_M(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[zs]?.finishViewCreation(n),n.staticContentQueries&&Kx(n,e),n.staticViewQueries&&X6(2,n.viewQuery,t);let o=n.components;o!==null&&OO(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Tt]&=-5,Xm()}}function OO(n,e){for(let t=0;t<e.length;t++)kO(n,e[t])}function Ed(n,e,t,i){let r=It(null);try{let o=e.tView,a=n[Tt]&4096?4096:16,c=lg(n,o,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),l=n[e.index];c[Sc]=l;let u=n[zs];return u!==null&&(c[zs]=u.createEmbeddedView(o)),mg(o,c,t),c}finally{It(r)}}function vu(n,e){return!e||e.firstChild===null||Lx(n)}var LO;function gg(n,e){return LO(n,e)}var Is=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Is||{});function vg(n){return(n.flags&32)===32}function ou(n,e,t,i,r){if(i!=null){let o,s=!1;Ps(i)?o=i:ba(i)&&(s=!0,i=i[Zo]);let a=qo(i);n===0&&t!==null?r==null?pM(e,t,a):U4(e,t,a,r||null,!0):n===1&&t!==null?U4(e,t,a,r||null,!0):n===2?mO(e,a,s):n===3&&e.destroyNode(a),o!=null&&$O(e,n,o,t,r)}}function FO(n,e){bM(n,e),e[Zo]=null,e[pr]=null}function VO(n,e,t,i,r,o){i[Zo]=r,i[pr]=e,_2(n,i,t,1,r,o)}function bM(n,e){e[Ds].changeDetectionScheduler?.notify(9),_2(n,e,e[qn],2,null,null)}function HO(n){let e=n[vd];if(!e)return y6(n[Pt],n);for(;e;){let t=null;if(ba(e))t=e[vd];else{let i=e[ji];i&&(t=i)}if(!t){for(;e&&!e[vo]&&e!==n;)ba(e)&&y6(e[Pt],e),e=e[Gi];e===null&&(e=n),ba(e)&&y6(e[Pt],e),t=e&&e[vo]}e=t}}function yg(n,e){let t=n[pu],i=t.indexOf(e);t.splice(i,1)}function v2(n,e){if(Cu(e))return;let t=e[qn];t.destroyNode&&_2(n,e,t,3,null,null),HO(e)}function y6(n,e){if(Cu(e))return;let t=It(null);try{e[Tt]&=-129,e[Tt]|=256,e[eo]&&F8(e[eo]),UO(n,e),BO(n,e),e[Pt].type===1&&e[qn].destroy();let i=e[Sc];if(i!==null&&Ps(e[Gi])){i!==e[Gi]&&yg(i,e);let r=e[zs];r!==null&&r.detachView(n)}W6(e)}finally{It(t)}}function BO(n,e){let t=n.cleanup,i=e[R4];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?i[a]():i[-a].unsubscribe(),s+=2}else{let a=i[t[s+1]];t[s].call(a)}i!==null&&(e[R4]=null);let r=e[_a];if(r!==null){e[_a]=null;for(let s=0;s<r.length;s++){let a=r[s];a()}}let o=e[k4];if(o!==null){e[k4]=null;for(let s of o)s.destroy()}}function UO(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof Ec)){let o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],c=o[s+1];xn(4,a,c);try{c.call(a)}finally{xn(5,a,c)}}else{xn(4,r,o);try{o.call(r)}finally{xn(5,r,o)}}}}}function xM(n,e,t){return YO(n,e.parent,t)}function YO(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[Zo];if(wu(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===Ko.None||r===Ko.Emulated)return null}return Qo(i,t)}function MM(n,e,t){return GO(n,e,t)}function jO(n,e,t){return n.type&40?Qo(n,t):null}var GO=jO,cb;function y2(n,e,t,i){let r=xM(n,i,e),o=e[qn],s=i.parent||e[pr],a=MM(s,i,e);if(r!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)ab(o,r,t[c],a,!1);else ab(o,r,t,a,!1);cb!==void 0&&cb(o,i,e,t,r)}function pd(n,e){if(e!==null){let t=e.type;if(t&3)return Qo(e,n);if(t&4)return om(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return pd(n,i);{let r=n[e.index];return Ps(r)?om(-1,r):qo(r)}}else{if(t&128)return pd(n,e.next);if(t&32)return gg(e,n)()||qo(n[e.index]);{let i=SM(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Cc(n[Rr]);return pd(r,i)}else return pd(n,e.next)}}}return null}function SM(n,e){if(e!==null){let i=n[Rr][pr],r=e.projection;return i.projection[r]}return null}function om(n,e){let t=ji+n+1;if(t<e.length){let i=e[t],r=i[Pt].firstChild;if(r!==null)return pd(i,r)}return e[wc]}function _g(n,e,t,i,r,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=i[t.index],c=t.type;if(s&&e===0&&(a&&Du(qo(a),i),t.flags|=2),!vg(t))if(c&8)_g(n,e,t.child,i,r,o,!1),ou(e,n,r,a,o);else if(c&32){let l=gg(t,i),u;for(;u=l();)ou(e,n,r,u,o);ou(e,n,r,a,o)}else c&16?wM(n,e,i,t,r,o):ou(e,n,r,a,o);t=s?t.projectionNext:t.next}}function _2(n,e,t,i,r,o){_g(t,i,n.firstChild,e,r,o,!1)}function WO(n,e,t){let i=e[qn],r=xM(n,t,e),o=t.parent||e[pr],s=MM(o,t,e);wM(i,0,e,t,r,s)}function wM(n,e,t,i,r,o){let s=t[Rr],c=s[pr].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];ou(e,n,r,u,o)}else{let l=c,u=s[Gi];Lx(i)&&(l.flags|=128),_g(n,e,l,u,r,o,!0)}}function $O(n,e,t,i,r){let o=t[wc],s=qo(t);o!==s&&ou(e,n,i,o,r);for(let a=ji;a<t.length;a++){let c=t[a];_2(c[Pt],c,n,e,i,o)}}function qO(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=i.indexOf("-")===-1?void 0:Is.DashCase;r==null?n.removeStyle(t,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Is.Important),n.setStyle(t,i,r,o))}}function Y4(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&i.push(qo(o)),Ps(o)&&XO(o,i);let s=t.type;if(s&8)Y4(n,e,t.child,i);else if(s&32){let a=gg(t,e),c;for(;c=a();)i.push(c)}else if(s&16){let a=SM(e,t);if(Array.isArray(a))i.push(...a);else{let c=Cc(e[Rr]);Y4(c[Pt],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function XO(n,e){for(let t=ji;t<n.length;t++){let i=n[t],r=i[Pt].firstChild;r!==null&&Y4(i[Pt],i,r,e)}n[wc]!==n[Zo]&&e.push(n[wc])}function CM(n){if(n[su]!==null){for(let e of n[su])e.impl.addSequence(e);n[su].length=0}}var TM=[];function KO(n){return n[eo]??ZO(n)}function ZO(n){let e=TM.pop()??Object.create(JO);return e.lView=n,e}function QO(n){n.lView[eo]!==n&&(n.lView=null,TM.push(n))}var JO=lt(Z({},Vl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{wd(n.lView)},consumerOnSignalRead(){this.lView[eo]=this}});function eL(n){let e=n[eo]??Object.create(tL);return e.lView=n,e}var tL=lt(Z({},Vl),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Cc(n.lView);for(;e&&!EM(e[Pt]);)e=Cc(e);e&&ox(e)},consumerOnSignalRead(){this.lView[eo]=this}});function EM(n){return n.type!==2}function DM(n){if(n[k4]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[k4])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[Tt]&8192)}}var nL=100;function zM(n,e=!0,t=0){let r=n[Ds].rendererFactory,o=!1;o||r.begin?.();try{iL(n,t)}catch(s){throw e&&RO(n,s),s}finally{o||r.end?.()}}function iL(n,e){let t=lx();try{B_(!0),sm(n,e);let i=0;for(;s2(n);){if(i===nL)throw new se(103,!1);i++,sm(n,1)}}finally{B_(t)}}function rL(n,e,t,i){if(Cu(e))return;let r=e[Tt],o=!1,s=!1;qm(e);let a=!0,c=null,l=null;o||(EM(n)?(l=KO(e),c=od(l)):k8()===null?(a=!1,l=eL(e),c=od(l)):e[eo]&&(F8(e[eo]),e[eo]=null));try{rx(e),Nk(n.bindingStartIndex),t!==null&&_M(n,e,t,2,i);let u=(r&3)===3;if(!o)if(u){let f=n.preOrderCheckHooks;f!==null&&S4(e,f,null)}else{let f=n.preOrderHooks;f!==null&&w4(e,f,0,null),g6(e,0)}if(s||oL(e),DM(e),AM(e,0),n.contentQueries!==null&&Kx(n,e),!o)if(u){let f=n.contentCheckHooks;f!==null&&S4(e,f)}else{let f=n.contentHooks;f!==null&&w4(e,f,1),g6(e,1)}aL(n,e);let d=n.components;d!==null&&PM(e,d,0);let h=n.viewQuery;if(h!==null&&X6(2,h,i),!o)if(u){let f=n.viewCheckHooks;f!==null&&S4(e,f)}else{let f=n.viewHooks;f!==null&&w4(e,f,2),g6(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[m6]){for(let f of e[m6])f();e[m6]=null}o||(CM(e),e[Tt]&=-73)}catch(u){throw o||wd(e),u}finally{l!==null&&(F0(l,c),a&&QO(l)),Xm()}}function AM(n,e){for(let t=Hx(n);t!==null;t=Bx(t))for(let i=ji;i<t.length;i++){let r=t[i];IM(r,e)}}function oL(n){for(let e=Hx(n);e!==null;e=Bx(e)){if(!(e[Tt]&2))continue;let t=e[pu];for(let i=0;i<t.length;i++){let r=t[i];ox(r)}}}function sL(n,e,t){xn(18);let i=Xo(e,n);IM(i,t),xn(19,i[mi])}function IM(n,e){Vm(n)&&sm(n,e)}function sm(n,e){let i=n[Pt],r=n[Tt],o=n[eo],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&L8(o)),s||=!1,o&&(o.dirty=!1),n[Tt]&=-9217,s)rL(i,n,i.template,n[mi]);else if(r&8192){DM(n),AM(n,1);let a=i.components;a!==null&&PM(n,a,1),CM(n)}}function PM(n,e,t){for(let i=0;i<e.length;i++)sL(n,e[i],t)}function aL(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)Tc(~r);else{let o=r,s=t[++i],a=t[++i];Lk(s,o);let c=e[o];xn(24,c),a(2,c),xn(25,c)}}}finally{Tc(-1)}}function bg(n,e){let t=lx()?64:1088;for(n[Ds].changeDetectionScheduler?.notify(e);n;){n[Tt]|=t;let i=Cc(n);if(O4(n)&&!i)return n;n=i}return null}function RM(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function kM(n,e){let t=ji+e;if(t<n.length)return n[t]}function Dd(n,e,t,i=!0){let r=e[Pt];if(cL(r,e,n,t),i){let s=om(t,n),a=e[qn],c=a.parentNode(n[wc]);c!==null&&VO(r,n[pr],a,e,c,s)}let o=e[hu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function NM(n,e){let t=_d(n,e);return t!==void 0&&v2(t[Pt],t),t}function _d(n,e){if(n.length<=ji)return;let t=ji+e,i=n[t];if(i){let r=i[Sc];r!==null&&r!==n&&yg(r,i),e>0&&(n[t-1][vo]=i[vo]);let o=I4(n,ji+e);FO(i[Pt],i);let s=o[zs];s!==null&&s.detachView(o[Pt]),i[Gi]=null,i[vo]=null,i[Tt]&=-129}return i}function cL(n,e,t,i){let r=ji+i,o=t.length;i>0&&(t[r-1][vo]=e),i<o-ji?(e[vo]=t[r],Hb(t,ji+i,e)):(t.push(e),e[vo]=null),e[Gi]=t;let s=e[Sc];s!==null&&t!==s&&OM(s,e);let a=e[zs];a!==null&&a.insertView(n),k6(e),e[Tt]|=128}function OM(n,e){let t=n[pu],i=e[Gi];if(ba(i))n[Tt]|=2;else{let r=i[Gi][Rr];e[Rr]!==r&&(n[Tt]|=2)}t===null?n[pu]=[e]:t.push(e)}var bd=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[Pt];return Y4(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i}get context(){return this._lView[mi]}set context(e){this._lView[mi]=e}get destroyed(){return Cu(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Gi];if(Ps(e)){let t=e[N4],i=t?t.indexOf(this):-1;i>-1&&(_d(e,i),I4(t,i))}this._attachedToViewContainer=!1}v2(this._lView[Pt],this._lView)}onDestroy(e){sx(this._lView,e)}markForCheck(){bg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Tt]&=-129}reattach(){k6(this._lView),this._lView[Tt]|=128}detectChanges(){this._lView[Tt]|=1024,zM(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=O4(this._lView),t=this._lView[Sc];t!==null&&!e&&yg(t,this._lView),bM(this._lView[Pt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new se(902,!1);this._appRef=e;let t=O4(this._lView),i=this._lView[Sc];i!==null&&!t&&OM(i,this._lView),k6(this._lView)}};var ui=(()=>{class n{static __NG_ELEMENT_ID__=dL}return n})(),lL=ui,uL=class extends lL{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){let r=Ed(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new bd(r)}};function dL(){return b2($i(),Et())}function b2(n,e){return n.type&4?new uL(e,n,Eu(n,e)):null}function zd(n,e,t,i,r){let o=n.data[e];if(o===null)o=hL(n,e,t,i,r),Ok()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=i,o.attrs=r;let s=Pk();o.injectorIndex=s===null?-1:s.injectorIndex}return Ac(o,!0),o}function hL(n,e,t,i,r){let o=cx(),s=Ym(),a=s?o:o&&o.parent,c=n.data[e]=pL(n,a,t,e,i,r);return fL(n,c,o,s),c}function fL(n,e,t,i){n.firstChild===null&&(n.firstChild=e),t!==null&&(i?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function pL(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,a=0;return ax()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Fue=new RegExp(`^(\\d+)*(${xN}|${bN})*(.*)`);var mL=()=>null;function yu(n,e){return mL(n,e)}var gL=class{},LM=class{},am=class{resolveComponentFactory(e){throw Error(`No component factory found for ${dr(e)}.`)}},x2=class{static NULL=new am},Xn=class{},Mn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>vL()}return n})();function vL(){let n=Et(),e=$i(),t=Xo(e.index,n);return(ba(t)?t:n)[qn]}var yL=(()=>{class n{static \u0275prov=re({token:n,providedIn:"root",factory:()=>null})}return n})();var _6={},cm=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=t2(i);let r=this.injector.get(e,_6,i);return r!==_6||t===_6?r:this.parentInjector.get(e,t,i)}};function lm(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=E6(r,a);else if(o==2){let c=a,l=e[++s];i=E6(i,c+": "+l+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function Y(n,e=Lt.Default){let t=Et();if(t===null)return Me(n,e);let i=$i();return Cx(i,t,Ni(n),e)}function FM(){let n="invalid";throw new Error(n)}function xg(n,e,t,i,r){let o=i===null?null:{"":-1},s=r(n,t);if(s!==null){let a,c=null,l=null,u=bL(s);u===null?a=s:[a,c,l]=u,SL(n,e,t,a,o,c,l)}o!==null&&i!==null&&_L(t,i,o)}function _L(n,e,t){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new se(-301,!1);i.push(e[r],o)}}function bL(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&yo(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let i=null,r=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(i??=[],r??=new Map,o??=new Map,xL(s,i,o,r)),s===e&&(i??=[],i.push(s));return i!==null?(i.push(...e===null?n:n.slice(1)),[i,r,o]):null}function xL(n,e,t,i){let r=e.length;n.findHostDirectiveDefs(n,e,i),t.set(n,[r,e.length-1])}function ML(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function SL(n,e,t,i,r,o,s){let a=i.length,c=!1;for(let h=0;h<a;h++){let f=i[h];!c&&yo(f)&&(c=!0,ML(n,t,h)),F6(V4(t,e),n,f.type)}zL(t,n.data.length,a);for(let h=0;h<a;h++){let f=i[h];f.providersResolver&&f.providersResolver(f)}let l=!1,u=!1,d=vM(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=i[h];if(t.mergedAttrs=mu(t.mergedAttrs,f.hostAttrs),CL(n,t,e,d,f),DL(d,f,r),s!==null&&s.has(f)){let[v,g]=s.get(f);t.directiveToIndex.set(f.type,[d,v+t.directiveStart,g+t.directiveStart])}else(o===null||!o.has(f))&&t.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(t.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(t.flags|=64);let p=f.type.prototype;!l&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!u&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),d++}wL(n,t,o)}function wL(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=n.data[i];if(t===null||!t.has(r))lb(0,e,r,i),lb(1,e,r,i),db(e,i,!1);else{let o=t.get(r);ub(0,e,o,i),ub(1,e,o,i),db(e,i,!0)}}}function lb(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(i),VM(e,o)}}function ub(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s=r[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(i,o),VM(e,s)}}function VM(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function db(n,e,t){let{attrs:i,inputs:r,hostDirectiveInputs:o}=n;if(i===null||!t&&r===null||t&&o===null||ag(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<i.length;){let c=i[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&r.hasOwnProperty(c)){let l=r[c];for(let u of l)if(u===e){s??=[],s.push(c,i[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){s??=[],s.push(l[u+1],i[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function CL(n,e,t,i,r){n.data[i]=r;let o=r.factory||(r.factory=lu(r.type,!0)),s=new Ec(o,yo(r),Y);n.blueprint[i]=s,t[i]=s,TL(n,e,i,vM(n,t,r.hostVars,io),r)}function TL(n,e,t,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;EL(s)!=a&&s.push(a),s.push(t,i,o)}}function EL(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function DL(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;yo(e)&&(t[""]=n)}}function zL(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function HM(n,e,t,i,r,o,s,a){let c=e.consts,l=Ma(c,s),u=zd(e,n,2,i,l);return o&&xg(e,t,u,Ma(c,a),r),u.mergedAttrs=mu(u.mergedAttrs,u.attrs),u.attrs!==null&&lm(u,u.attrs,!1),u.mergedAttrs!==null&&lm(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function BM(n,e){Km(n,e),Lm(e)&&n.queries.elementEnd(e)}var j4=class extends x2{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=xa(e);return new Dc(t,this.ngModule)}};function AL(n){return Object.keys(n).map(e=>{let[t,i,r]=n[e],o={propName:t,templateName:e,isSignal:(i&m2.SignalBased)!==0};return r&&(o.transform=r),o})}function IL(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function PL(n,e,t){let i=e instanceof Jn?e:e?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new cm(t,i):t}function RL(n){let e=n.get(Xn,null);if(e===null)throw new se(407,!1);let t=n.get(yL,null),i=n.get(gu,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:i}}function kL(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return fM(e,t,t==="svg"?nx:t==="math"?_k:null)}var Dc=class extends LM{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=AL(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=IL(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=uO(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r){xn(22);let o=It(null);try{let s=this.componentDef,a=i?["ng-version","19.2.14"]:dO(this.componentDef.selectors[0]),c=cg(0,null,null,1,0,null,null,null,null,[a],null),l=PL(s,r||this.ngModule,e),u=RL(l),d=u.rendererFactory.createRenderer(null,s),h=i?xO(d,i,s.encapsulation,l):kL(s,d),f=lg(null,c,null,512|gM(s),null,null,u,d,l,null,Xx(h,l,!0));f[Wi]=h,qm(f);let p=null;try{let v=HM(Wi,c,f,"#host",()=>[this.componentDef],!0,0);h&&(mM(d,h,v),Du(h,f)),g2(c,f,v),rg(c,v,f),BM(c,v),t!==void 0&&NL(v,this.ngContentSelectors,t),p=Xo(v.index,f),f[mi]=p[mi],mg(c,f,null)}catch(v){throw p!==null&&W6(p),W6(f),v}finally{xn(23),Xm()}return new um(this.componentType,f)}finally{It(o)}}},um=class extends gL{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=Fm(t[Pt],Wi),this.location=Eu(this._tNode,t),this.instance=Xo(this._tNode.index,t)[mi],this.hostView=this.changeDetectorRef=new bd(t,void 0,!1),this.componentType=e}setInput(e,t){let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let r=this._rootLView,o=pg(i,r[Pt],r,e,t);this.previousInputValues.set(e,t);let s=Xo(i.index,r);bg(s,1)}get injector(){return new xc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function NL(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let o=t[r];i.push(o!=null&&o.length?Array.from(o):null)}}var zi=(()=>{class n{static __NG_ELEMENT_ID__=OL}return n})();function OL(){let n=$i();return YM(n,Et())}var LL=zi,UM=class extends LL{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Eu(this._hostTNode,this._hostLView)}get injector(){return new xc(this._hostTNode,this._hostLView)}get parentInjector(){let e=Zm(this._hostTNode,this._hostLView);if(_x(e)){let t=F4(e,this._hostLView),i=L4(e),r=t[Pt].data[i+8];return new xc(r,t)}else return new xc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=hb(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-ji}createEmbeddedView(e,t,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=yu(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,r,vu(this._hostTNode,s)),a}createComponent(e,t,i,r,o){let s=e&&!mk(e),a;if(s)a=t;else{let p=t||{};a=p.index,i=p.injector,r=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let c=s?e:new Dc(xa(e)),l=i||this.parentInjector;if(!o&&c.ngModule==null){let v=(s?l:this.parentInjector).get(Jn,null);v&&(o=v)}let u=xa(c.componentType??{}),d=yu(this._lContainer,u?.id??null),h=d?.firstChild??null,f=c.create(l,r,h,o);return this.insertImpl(f.hostView,a,vu(this._hostTNode,d)),f}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(Sk(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[Gi],l=new UM(c,c[pr],c[Gi]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Dd(s,r,o,i),e.attachToViewContainerRef(),Hb(b6(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=hb(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=_d(this._lContainer,t);i&&(I4(b6(this._lContainer),t),v2(i[Pt],i))}detach(e){let t=this._adjustIndex(e,-1),i=_d(this._lContainer,t);return i&&I4(b6(this._lContainer),t)!=null?new bd(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function hb(n){return n[N4]}function b6(n){return n[N4]||(n[N4]=[])}function YM(n,e){let t,i=e[n.index];return Ps(i)?t=i:(t=RM(i,e,null,n),e[n.index]=t,ug(e,t)),VL(t,e,n,i),new UM(t,n,e)}function FL(n,e){let t=n[qn],i=t.createComment(""),r=Qo(e,n),o=t.parentNode(r);return U4(t,o,i,t.nextSibling(r),!1),i}var VL=UL,HL=()=>!1;function BL(n,e,t){return HL(n,e,t)}function UL(n,e,t,i){if(n[wc])return;let r;t.type&8?r=qo(i):r=FL(e,t),n[wc]=r}var dm=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},hm=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Sg(e,t).matches!==null&&this.queries[t].setDirty()}},G4=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=$L(e):this.predicate=e}},fm=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},pm=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,t,YL(t,o)),this.matchTNodeWithReadOption(e,t,C4(t,e,o,!1,!1))}else i===ui?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,C4(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Je||r===zi||r===ui&&t.type&4)this.addMatch(t.index,-2);else{let o=C4(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function YL(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function jL(n,e){return n.type&11?Eu(n,e):n.type&4?b2(n,e):null}function GL(n,e,t,i){return t===-1?jL(e,n):t===-2?WL(n,e,i):yd(n,n[Pt],t,e)}function WL(n,e,t){if(t===Je)return Eu(e,n);if(t===ui)return b2(e,n);if(t===zi)return YM(e,n)}function jM(n,e,t,i){let r=e[zs].queries[i];if(r.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push(GL(e,u,s[c+1],t.metadata.read))}}r.matches=a}return r.matches}function mm(n,e,t,i){let r=n.queries.getByIndex(t),o=r.matches;if(o!==null){let s=jM(n,e,r,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)i.push(s[a/2]);else{let l=o[a+1],u=e[-c];for(let d=ji;d<u.length;d++){let h=u[d];h[Sc]===h[Gi]&&mm(h[Pt],h,l,i)}if(u[pu]!==null){let d=u[pu];for(let h=0;h<d.length;h++){let f=d[h];mm(f[Pt],f,l,i)}}}}}return i}function Mg(n,e){return n[zs].queries[e].queryList}function GM(n,e,t){let i=new G6((t&4)===4);return Tk(n,e,i,i.destroy),(e[zs]??=new hm).queries.push(new dm(i))-1}function WM(n,e,t){let i=ei();return i.firstCreatePass&&(qM(i,new G4(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),GM(i,Et(),e)}function $M(n,e,t,i){let r=ei();if(r.firstCreatePass){let o=$i();qM(r,new G4(e,t,i),o.index),qL(r,n),(t&2)===2&&(r.staticContentQueries=!0)}return GM(r,Et(),t)}function $L(n){return n.split(",").map(e=>e.trim())}function qM(n,e,t){n.queries===null&&(n.queries=new fm),n.queries.track(new pm(e,t))}function qL(n,e){let t=n.contentQueries||(n.contentQueries=[]),i=t.length?t[t.length-1]:-1;e!==i&&t.push(n.queries.length-1,e)}function Sg(n,e){return n.queries.getByIndex(e)}function XM(n,e){let t=n[Pt],i=Sg(t,e);return i.crossesNgTemplate?mm(t,n,e,[]):jM(t,n,i,e)}function KM(n,e,t){let i,r=B0(()=>{i._dirtyCounter();let o=XL(i,n);if(e&&o===void 0)throw new se(-951,!1);return o});return i=r[Yi],i._dirtyCounter=gi(0),i._flatValue=void 0,r}function ZM(n){return KM(!0,!1,n)}function QM(n){return KM(!0,!0,n)}function JM(n,e){let t=n[Yi];t._lView=Et(),t._queryIndex=e,t._queryList=Mg(t._lView,e),t._queryList.onDirty(()=>t._dirtyCounter.update(i=>i+1))}function XL(n,e){let t=n._lView,i=n._queryIndex;if(t===void 0||i===void 0||t[Tt]&4)return e?void 0:ir;let r=Mg(t,i),o=XM(t,i);return r.reset(o,kx),e?r.first:r._changesDetected||n._flatValue===void 0?n._flatValue=r.toArray():n._flatValue}function fb(n,e){return ZM(e)}function KL(n,e){return QM(e)}var wg=(fb.required=KL,fb);function pb(n,e){return ZM(e)}function ZL(n,e){return QM(e)}var Ad=(pb.required=ZL,pb);var Sa=class{},Cg=class{};var gm=class extends Sa{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new j4(this);constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t;let o=Yb(e);this._bootstrapComponents=uM(o.bootstrap),this._r3Injector=Dx(e,t,[{provide:Sa,useValue:this},{provide:x2,useValue:this.componentFactoryResolver},...i],dr(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},vm=class extends Cg{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new gm(this.moduleType,e,[])}};var W4=class extends Sa{injector;componentFactoryResolver=new j4(this);instance=null;constructor(e){super();let t=new gd([...e.providers,{provide:Sa,useValue:this},{provide:x2,useValue:this.componentFactoryResolver}],e.parent||i2(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Id(n,e,t=null){return new W4({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var QL=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=Gb(!1,t.type),r=i.length>0?Id([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=re({token:n,providedIn:"environment",factory:()=>new n(Me(Jn))})}return n})();function Fe(n){return J4(()=>{let e=eS(n),t=lt(Z({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Fx.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(QL).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ko.Emulated,styles:n.styles||ir,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&bo("NgStandalone"),tS(t);let i=n.dependencies;return t.directiveDefs=mb(i,!1),t.pipeDefs=mb(i,!0),t.id=iF(t),t})}function JL(n){return xa(n)||jb(n)}function eF(n){return n!==null}function ke(n){return J4(()=>({type:n.type,bootstrap:n.bootstrap||ir,declarations:n.declarations||ir,imports:n.imports||ir,exports:n.exports||ir,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function tF(n,e){if(n==null)return $o;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,a,c;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o,c=r[3]||null):(o=r,s=r,a=m2.None,c=null),t[o]=[i,a,c],e[o]=s}return t}function nF(n){if(n==null)return $o;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Oe(n){return J4(()=>{let e=eS(n);return tS(e),e})}function eS(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||$o,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||ir,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:tF(n.inputs,e),outputs:nF(n.outputs),debugInfo:null}}function tS(n){n.features?.forEach(e=>e(n))}function mb(n,e){if(!n)return null;let t=e?rk:JL;return()=>(typeof n=="function"?n():n).map(i=>t(i)).filter(eF)}function iF(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of i.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function rF(n){return Object.getPrototypeOf(n.prototype).constructor}function vi(n){let e=rF(n.type),t=!0,i=[n];for(;e;){let r;if(yo(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new se(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let s=n;s.inputs=x6(n.inputs),s.declaredInputs=x6(n.declaredInputs),s.outputs=x6(n.outputs);let a=r.hostBindings;a&&lF(n,a);let c=r.viewQuery,l=r.contentQueries;if(c&&aF(n,c),l&&cF(n,l),oF(n,r),NR(n.outputs,r.outputs),yo(r)&&r.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===vi&&(t=!1)}}e=Object.getPrototypeOf(e)}sF(i)}function oF(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t])}}function sF(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=mu(r.hostAttrs,t=mu(t,r.hostAttrs))}}function x6(n){return n===$o?{}:n===ir?[]:n}function aF(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function cF(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,o)=>{e(i,r,o),t(i,r,o)}:n.contentQueries=e}function lF(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function Pc(n){let e=t=>{let i=Array.isArray(n);t.hostDirectives===null?(t.findHostDirectiveDefs=nS,t.hostDirectives=i?n.map(ym):[n]):i?t.hostDirectives.unshift(...n.map(ym)):t.hostDirectives.unshift(n)};return e.ngInherit=!0,e}function nS(n,e,t){if(n.hostDirectives!==null)for(let i of n.hostDirectives)if(typeof i=="function"){let r=i();for(let o of r)gb(ym(o),e,t)}else gb(i,e,t)}function gb(n,e,t){let i=jb(n.directive);uF(i.declaredInputs,n.inputs),nS(i,e,t),t.set(i,n),e.push(i)}function ym(n){return typeof n=="function"?{directive:Ni(n),inputs:$o,outputs:$o}:{directive:Ni(n.directive),inputs:vb(n.inputs),outputs:vb(n.outputs)}}function vb(n){if(n===void 0||n.length===0)return $o;let e={};for(let t=0;t<n.length;t+=2)e[n[t]]=n[t+1];return e}function uF(n,e){for(let t in e)if(e.hasOwnProperty(t)){let i=e[t],r=n[t];n[i]=r}}function Tg(n,e,t){return n[e]=t}function dF(n,e){return n[e]}function to(n,e,t){let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function iS(n,e,t,i){let r=to(n,e,t);return to(n,e+1,i)||r}function hF(n,e,t,i,r,o,s,a,c){let l=e.consts,u=zd(e,n,4,s||null,a||null);Um()&&xg(e,t,u,Ma(l,c),fg),u.mergedAttrs=mu(u.mergedAttrs,u.attrs),Km(e,u);let d=u.tView=cg(2,u,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function $4(n,e,t,i,r,o,s,a,c,l){let u=t+Wi,d=e.firstCreatePass?hF(u,e,n,i,r,o,s,a,c):e.data[u];Ac(d,!1);let h=fF(e,n,d,t);l2()&&y2(e,n,h,d),Du(h,n);let f=RM(h,n,h,d);return n[u]=f,ug(n,f),BL(f,d,n),o2(d)&&g2(e,n,d),c!=null&&dg(n,d,l),d}function G(n,e,t,i,r,o,s,a){let c=Et(),l=ei(),u=Ma(l.consts,o);return $4(c,l,n,e,t,i,r,u,s,a),G}var fF=pF;function pF(n,e,t,i){return u2(!0),e[qn].createComment("")}var Eg=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var rS=new de("");var mF=(()=>{class n{static \u0275prov=re({token:n,providedIn:"root",factory:()=>new _m})}return n})(),_m=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,i=this.queues.get(t);i.has(e)&&(i.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||(this.queuedEffectCount++,i.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Rc(n){return!!n&&typeof n.then=="function"}function oS(n){return!!n&&typeof n.subscribe=="function"}var sS=new de("");function Dg(n){return hr([{provide:sS,multi:!0,useValue:n}])}var aS=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=T(sS,{optional:!0})??[];injector=T(Ln);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=fr(this.injector,r);if(Rc(o))t.push(o);else if(oS(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),M2=new de("");function gF(){V8(()=>{throw new se(600,!1)})}function vF(n){return n.isBoundToModule}var yF=10;var no=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=T(dN);afterRenderManager=T($x);zonelessEnabled=T(d2);rootEffectScheduler=T(mF);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new ce;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=T(Ca).hasPendingTasks.pipe(Pe(t=>!t));constructor(){T(zu,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=T(Jn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){return this.bootstrapImpl(t,i)}bootstrapImpl(t,i,r=Ln.NULL){xn(10);let o=t instanceof LM;if(!this._injector.get(aS).done){let f="";throw new se(405,f)}let a;o?a=t:a=this._injector.get(x2).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let c=vF(a)?void 0:this._injector.get(Sa),l=i||a.selector,u=a.create(r,[],l,c),d=u.location.nativeElement,h=u.injector.get(rS,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),T4(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),xn(11,u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){xn(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(ng.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new se(101,!1);let t=It(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,It(t),this.afterTick.next(),xn(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Xn,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<yF;)xn(14),this.synchronizeOnce(),xn(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i,notifyErrorHandler:r}of this.allViews)_F(i,r,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>s2(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;T4(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(M2,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>T4(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new se(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function T4(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function _F(n,e,t,i){if(!t&&!s2(n))return;zM(n,e,t&&!i?0:1)}function fn(n,e,t,i){let r=Et(),o=Ic();if(to(r,o,e)){let s=ei(),a=c2();zO(a,r,n,e,t,i)}return fn}function cS(n,e,t,i){return to(n,Ic(),t)?e+Mc(t)+i:io}function bF(n,e,t,i,r,o){let s=kk(),a=iS(n,s,t,r);return Wm(2),a?e+Mc(t)+i+Mc(r)+o:io}function x4(n,e){return n<<17|e<<2}function zc(n){return n>>17&32767}function xF(n){return(n&2)==2}function MF(n,e){return n&131071|e<<17}function bm(n){return n|2}function _u(n){return(n&131068)>>2}function M6(n,e){return n&-131069|e<<2}function SF(n){return(n&1)===1}function xm(n){return n|1}function wF(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=zc(s),c=_u(s);n[i]=t;let l=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||Md(d,u)>0)&&(l=!0)}else u=t;if(r)if(c!==0){let h=zc(n[a+1]);n[i+1]=x4(h,a),h!==0&&(n[h+1]=M6(n[h+1],i)),n[a+1]=MF(n[a+1],i)}else n[i+1]=x4(a,0),a!==0&&(n[a+1]=M6(n[a+1],i)),a=i;else n[i+1]=x4(c,0),a===0?a=i:n[c+1]=M6(n[c+1],i),c=i;l&&(n[i+1]=bm(n[i+1])),yb(n,u,i,!0),yb(n,u,i,!1),CF(e,u,n,i,o),s=x4(a,c),o?e.classBindings=s:e.styleBindings=s}function CF(n,e,t,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Md(o,e)>=0&&(t[i+1]=xm(t[i+1]))}function yb(n,e,t,i){let r=n[t+1],o=e===null,s=i?zc(r):_u(r),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];TF(c,e)&&(a=!0,n[s+1]=i?xm(l):bm(l)),s=i?zc(l):_u(l)}a&&(n[t+1]=i?bm(r):xm(r))}function TF(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Md(n,e)>=0:!1}var pi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function lS(n){return n.substring(pi.key,pi.keyEnd)}function EF(n){return n.substring(pi.value,pi.valueEnd)}function DF(n){return hS(n),uS(n,bu(n,0,pi.textEnd))}function uS(n,e){let t=pi.textEnd;return t===e?-1:(e=pi.keyEnd=AF(n,pi.key=e,t),bu(n,e,t))}function zF(n){return hS(n),dS(n,bu(n,0,pi.textEnd))}function dS(n,e){let t=pi.textEnd,i=pi.key=bu(n,e,t);return t===i?-1:(i=pi.keyEnd=IF(n,i,t),i=_b(n,i,t,58),i=pi.value=bu(n,i,t),i=pi.valueEnd=PF(n,i,t),_b(n,i,t,59))}function hS(n){pi.key=0,pi.keyEnd=0,pi.value=0,pi.valueEnd=0,pi.textEnd=n.length}function bu(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function AF(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function IF(n,e,t){let i;for(;e<t&&((i=n.charCodeAt(e))===45||i===95||(i&-33)>=65&&(i&-33)<=90||i>=48&&i<=57);)e++;return e}function _b(n,e,t,i){return e=bu(n,e,t),e<t&&e++,e}function PF(n,e,t){let i=-1,r=-1,o=-1,s=e,a=s;for(;s<t;){let c=n.charCodeAt(s++);if(c===59)return a;c===34||c===39?a=s=bb(n,c,s,t):e===s-4&&o===85&&r===82&&i===76&&c===40?a=s=bb(n,41,s,t):c>32&&(a=s),o=r,r=i,i=c&-33}return a}function bb(n,e,t,i){let r=-1,o=t;for(;o<i;){let s=n.charCodeAt(o++);if(s==e&&r!==92)return o;s==92&&r===92?r=0:r=s}throw new Error}function $(n,e,t){let i=Et(),r=Ic();if(to(i,r,e)){let o=ei(),s=c2();hg(o,s,i,n,e,i[qn],t,!1)}return $}function Mm(n,e,t,i,r){pg(e,n,t,r?"class":"style",i)}function Sn(n,e,t){return fS(n,e,t,!1),Sn}function ze(n,e){return fS(n,e,null,!0),ze}function mr(n){S2(gS,RF,n,!1)}function RF(n,e){for(let t=zF(e);t>=0;t=dS(e,t))gS(n,lS(e),EF(e))}function si(n){S2(VF,zg,n,!0)}function zg(n,e){for(let t=DF(e);t>=0;t=uS(e,t))Mu(n,lS(e),!0)}function fS(n,e,t,i){let r=Et(),o=ei(),s=Wm(2);if(o.firstUpdatePass&&mS(o,n,s,i),e!==io&&to(r,s,e)){let a=o.data[wa()];vS(o,a,r,r[qn],n,r[s+1]=BF(e,t),i,s)}}function S2(n,e,t,i){let r=ei(),o=Wm(2);r.firstUpdatePass&&mS(r,null,o,i);let s=Et();if(t!==io&&to(s,o,t)){let a=r.data[wa()];if(yS(a,i)&&!pS(r,o)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=E6(c,t||"")),Mm(r,a,s,t,i)}else HF(r,a,s,s[qn],s[o+1],s[o+1]=FF(n,e,t),i,o)}}function pS(n,e){return e>=n.expandoStartIndex}function mS(n,e,t,i){let r=n.data;if(r[t+1]===null){let o=r[wa()],s=pS(n,t);yS(o,i)&&e===null&&!s&&(e=!1),e=kF(r,o,e,i),wF(r,o,e,t,s,i)}}function kF(n,e,t,i){let r=ux(n),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=S6(null,n,e,t,i),t=xd(t,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==r)if(t=S6(r,n,e,t,i),o===null){let c=NF(n,e,i);c!==void 0&&Array.isArray(c)&&(c=S6(null,n,e,c[1],i),c=xd(c,e.attrs,i),OF(n,e,i,c))}else o=LF(n,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),t}function NF(n,e,t){let i=t?e.classBindings:e.styleBindings;if(_u(i)!==0)return n[zc(i)]}function OF(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[zc(r)]=i}function LF(n,e,t){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=xd(i,s,t)}return xd(i,e.attrs,t)}function S6(n,e,t,i,r){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],i=xd(i,o.hostAttrs,r),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function xd(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Mu(n,s,t?!0:e[++o]))}return n===void 0?null:n}function FF(n,e,t){if(t==null||t==="")return ir;let i=[],r=Or(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function gS(n,e,t){Mu(n,e,Or(t))}function VF(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&Mu(n,i,t)}function HF(n,e,t,i,r,o,s,a){r===io&&(r=ir);let c=0,l=0,u=0<r.length?r[0]:null,d=0<o.length?o[0]:null;for(;u!==null||d!==null;){let h=c<r.length?r[c+1]:void 0,f=l<o.length?o[l+1]:void 0,p=null,v;u===d?(c+=2,l+=2,h!==f&&(p=d,v=f)):d===null||u!==null&&u<d?(c+=2,p=u):(l+=2,p=d,v=f),p!==null&&vS(n,e,t,i,p,v,s,a),u=c<r.length?r[c]:null,d=l<o.length?o[l]:null}}function vS(n,e,t,i,r,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=SF(l)?xb(c,e,t,r,_u(l),s):void 0;if(!q4(u)){q4(o)||xF(l)&&(o=xb(c,null,t,r,a,s));let d=ix(wa(),t);qO(i,s,d,r,o)}}function xb(n,e,t,i,r,o){let s=e===null,a;for(;r>0;){let c=n[r],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=t[r+1];h===io&&(h=d?ir:void 0);let f=d?f6(h,i):u===i?h:void 0;if(l&&!q4(f)&&(f=f6(c,i)),q4(f)&&(a=f,s))return a;let p=n[r+1];r=s?zc(p):_u(p)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=f6(c,i))}return a}function q4(n){return n!==void 0}function BF(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=dr(Or(n)))),n}function yS(n,e){return(n.flags&(e?8:16))!==0}function Ag(n,e,t){let i=Et(),r=cS(i,n,e,t);S2(Mu,zg,r,!0)}function _S(n,e,t,i,r){let o=Et(),s=bF(o,n,e,t,i,r);S2(Mu,zg,s,!0)}var Sm=class{destroy(e){}updateValue(e,t){}swap(e,t){let i=Math.min(e,t),r=Math.max(e,t),o=this.detach(r);if(r-i>1){let s=this.detach(i);this.attach(i,o),this.attach(r,s)}else this.attach(i,o)}move(e,t){this.attach(t,this.detach(e))}};function w6(n,e,t,i,r){return n===t&&Object.is(e,i)?1:Object.is(r(n,e),r(t,i))?-1:0}function UF(n,e,t){let i,r,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){let l=n.at(o),u=e[o],d=w6(o,l,o,u,t);if(d!==0){d<0&&n.updateValue(o,u),o++;continue}let h=n.at(s),f=e[c],p=w6(s,h,c,f,t);if(p!==0){p<0&&n.updateValue(s,f),s--,c--;continue}let v=t(o,l),g=t(s,h),m=t(o,u);if(Object.is(m,g)){let C=t(c,f);Object.is(C,v)?(n.swap(o,s),n.updateValue(s,f),c--,s--):n.move(s,o),n.updateValue(o,u),o++;continue}if(i??=new X4,r??=Sb(n,o,s,t),wm(n,i,o,m))n.updateValue(o,u),o++,s++;else if(r.has(m))i.set(v,n.detach(o)),s--;else{let C=n.create(o,e[o]);n.attach(o,C),o++,s++}}for(;o<=c;)Mb(n,i,t,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),l=c.next();for(;!l.done&&o<=s;){let u=n.at(o),d=l.value,h=w6(o,u,o,d,t);if(h!==0)h<0&&n.updateValue(o,d),o++,l=c.next();else{i??=new X4,r??=Sb(n,o,s,t);let f=t(o,d);if(wm(n,i,o,f))n.updateValue(o,d),o++,s++,l=c.next();else if(!r.has(f))n.attach(o,n.create(o,d)),o++,s++,l=c.next();else{let p=t(o,u);i.set(p,n.detach(o)),s--}}}for(;!l.done;)Mb(n,i,t,n.length,l.value),l=c.next()}for(;o<=s;)n.destroy(n.detach(s--));i?.forEach(c=>{n.destroy(c)})}function wm(n,e,t,i){return e!==void 0&&e.has(i)?(n.attach(t,e.get(i)),e.delete(i),!0):!1}function Mb(n,e,t,i,r){if(wm(n,e,i,t(i,r)))n.updateValue(i,r);else{let o=n.create(i,r);n.attach(i,o)}}function Sb(n,e,t,i){let r=new Set;for(let o=e;o<=t;o++)r.add(i(o,n.at(o)));return r}var X4=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,i]of this.kvMap)if(e(i,t),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,t)}}};function le(n,e){bo("NgControlFlow");let t=Et(),i=Ic(),r=t[i]!==io?t[i]:-1,o=r!==-1?K4(t,Wi+r):void 0,s=0;if(to(t,i,n)){let a=It(null);try{if(o!==void 0&&NM(o,s),n!==-1){let c=Wi+n,l=K4(t,c),u=Dm(t[Pt],c),d=yu(l,u.tView.ssrId),h=Ed(t,u,e,{dehydratedView:d});Dd(l,h,s,vu(u,d))}}finally{It(a)}}else if(o!==void 0){let a=kM(o,s);a!==void 0&&(a[mi]=e)}}var Cm=class{lContainer;$implicit;$index;constructor(e,t,i){this.lContainer=e,this.$implicit=t,this.$index=i}get $count(){return this.lContainer.length-ji}};function Ta(n){return n}function Ea(n,e){return e}var Tm=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,i){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=i}};function Xi(n,e,t,i,r,o,s,a,c,l,u,d,h){bo("NgControlFlow");let f=Et(),p=ei(),v=c!==void 0,g=Et(),m=a?s.bind(g[Rr][mi]):s,C=new Tm(v,m);g[Wi+n]=C,$4(f,p,n+1,e,t,i,r,Ma(p.consts,o)),v&&$4(f,p,n+2,c,l,u,d,Ma(p.consts,h))}var Em=class extends Sm{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,i){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=i}get length(){return this.lContainer.length-ji}at(e){return this.getLView(e)[mi].$implicit}attach(e,t){let i=t[hu];this.needsIndexUpdate||=e!==this.length,Dd(this.lContainer,t,e,vu(this.templateTNode,i))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,YF(this.lContainer,e)}create(e,t){let i=yu(this.lContainer,this.templateTNode.tView.ssrId),r=Ed(this.hostLView,this.templateTNode,new Cm(this.lContainer,t,e),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(e){v2(e[Pt],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[mi].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[mi].$index=e}getLView(e){return jF(this.lContainer,e)}};function Ki(n){let e=It(null),t=wa();try{let i=Et(),r=i[Pt],o=i[t],s=t+1,a=K4(i,s);if(o.liveCollection===void 0){let l=Dm(r,s);o.liveCollection=new Em(a,i,l)}else o.liveCollection.reset();let c=o.liveCollection;if(UF(c,n,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let l=Ic(),u=c.length===0;if(to(i,l,u)){let d=t+2,h=K4(i,d);if(u){let f=Dm(r,d),p=yu(h,f.tView.ssrId),v=Ed(i,f,void 0,{dehydratedView:p});Dd(h,v,0,vu(f,p))}else NM(h,0)}}}finally{It(e)}}function K4(n,e){return n[e]}function YF(n,e){return _d(n,e)}function jF(n,e){return kM(n,e)}function Dm(n,e){return Fm(n,e)}function j(n,e,t,i){let r=Et(),o=ei(),s=Wi+n,a=r[qn],c=o.firstCreatePass?HM(s,o,r,e,fg,Um(),t,i):o.data[s],l=GF(o,r,c,a,e,n);r[s]=l;let u=o2(c);return Ac(c,!0),mM(a,l,c),!vg(c)&&l2()&&y2(o,r,l,c),(Ek()===0||u)&&Du(l,r),Dk(),u&&(g2(o,r,c),rg(o,c,r)),i!==null&&dg(r,c),j}function q(){let n=$i();Ym()?jm():(n=n.parent,Ac(n,!1));let e=n;Ak(e)&&Ik(),zk();let t=ei();return t.firstCreatePass&&BM(t,e),e.classesWithoutHost!=null&&jk(e)&&Mm(t,e,Et(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Gk(e)&&Mm(t,e,Et(),e.stylesWithoutHost,!1),q}function me(n,e,t,i){return j(n,e,t,i),q(),me}var GF=(n,e,t,i,r,o)=>(u2(!0),fM(i,r,Bk()));function WF(n,e,t,i,r){let o=e.consts,s=Ma(o,i),a=zd(e,n,8,"ng-container",s);s!==null&&lm(a,s,!0);let c=Ma(o,r);return Um()&&xg(e,t,a,c,fg),a.mergedAttrs=mu(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function An(n,e,t){let i=Et(),r=ei(),o=n+Wi,s=r.firstCreatePass?WF(o,r,i,e,t):r.data[o];Ac(s,!0);let a=$F(r,i,s,n);return i[o]=a,l2()&&y2(r,i,a,s),Du(a,i),o2(s)&&(g2(r,i,s),rg(r,s,i)),t!=null&&dg(i,s),An}function In(){let n=$i(),e=ei();return Ym()?jm():(n=n.parent,Ac(n,!1)),e.firstCreatePass&&(Km(e,n),Lm(n)&&e.queries.elementEnd(n)),In}function kc(n,e,t){return An(n,e,t),In(),kc}var $F=(n,e,t,i)=>(u2(!0),pO(e[qn],""));function un(){return Et()}function w2(n,e,t){let i=Et(),r=Ic();if(to(i,r,e)){let o=ei(),s=c2(),a=ux(o.data),c=PO(a,s,i);hg(o,s,i,n,e,c,t,!0)}return w2}var Z4="en-US";var qF=Z4;function XF(n){typeof n=="string"&&(qF=n.toLowerCase().replace(/_/g,"-"))}function wb(n,e,t){return function i(r){if(r===Function)return t;let o=wu(n)?Xo(n.index,e):e;bg(o,5);let s=e[mi],a=Cb(e,s,t,r),c=i.__ngNextListenerFn__;for(;c;)a=Cb(e,s,c,r)&&a,c=c.__ngNextListenerFn__;return a}}function Cb(n,e,t,i){let r=It(null);try{return xn(6,e,t),t(i)!==!1}catch(o){return KF(n,o),!1}finally{xn(7,e,t),It(r)}}function KF(n,e){let t=n[fu],i=t?t.get(_o,null):null;i&&i.handleError(e)}function Tb(n,e,t,i,r,o){let s=e[t],a=e[Pt],l=a.data[t].outputs[i],u=s[l],d=a.firstCreatePass?Bm(a):null,h=Hm(e),f=u.subscribe(o),p=h.length;h.push(o,f),d&&d.push(r,n.index,p,-(p+1))}function We(n,e,t,i){let r=Et(),o=ei(),s=$i();return bS(o,r,r[qn],s,n,e,i),We}function ZF(n,e,t,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===t&&r[o+1]===i){let a=e[R4],c=r[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function bS(n,e,t,i,r,o,s){let a=o2(i),l=n.firstCreatePass?Bm(n):null,u=Hm(e),d=!0;if(i.type&3||s){let h=Qo(i,e),f=s?s(h):h,p=u.length,v=s?m=>s(qo(m[i.index])):i.index,g=null;if(!s&&a&&(g=ZF(n,e,r,i.index)),g!==null){let m=g.__ngLastListenerFn__||g;m.__ngNextListenerFn__=o,g.__ngLastListenerFn__=o,d=!1}else{o=wb(i,e,o),DN(e,f,r,o);let m=t.listen(f,r,o);u.push(o,m),l&&l.push(r,v,p,p+1)}}else o=wb(i,e,o);if(d){let h=i.outputs?.[r],f=i.hostDirectiveOutputs?.[r];if(f&&f.length)for(let p=0;p<f.length;p+=2){let v=f[p],g=f[p+1];Tb(i,e,v,g,r,o)}if(h&&h.length)for(let p of h)Tb(i,e,p,r,r,o)}}function R(n=1){return Hk(n)}function QF(n,e){let t=null,i=oO(n);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){t=r;continue}if(i===null?hM(n,o,!0):cO(i,o))return r}return t}function Zt(n){let e=Et()[Rr][pr];if(!e.projection){let t=n?n.length:1,i=e.projection=tk(t,null),r=i.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=n?QF(o,n):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o)}o=o.next}}}function Rt(n,e=0,t,i,r,o){let s=Et(),a=ei(),c=i?n+1:null;c!==null&&$4(s,a,c,i,r,o,null,t);let l=zd(a,Wi+n,16,null,t||null);l.projection===null&&(l.projection=e),jm();let d=!s[hu]||ax();s[Rr][pr].projection[l.projection]===null&&c!==null?JF(s,a,c):d&&!vg(l)&&WO(a,s,l)}function JF(n,e,t){let i=Wi+t,r=e.data[i],o=n[i],s=yu(o,r.tView.ssrId),a=Ed(n,r,void 0,{dehydratedView:s});Dd(o,a,0,vu(r,s))}function ai(n,e,t,i){$M(n,e,t,i)}function Ai(n,e,t){WM(n,e,t)}function Wt(n){let e=Et(),t=ei(),i=$m();a2(i+1);let r=Sg(t,i);if(n.dirty&&Mk(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=XM(e,i);n.reset(o,kx),n.notifyOnChanges()}return!0}return!1}function $t(){return Mg(Et(),$m())}function Pd(n,e,t,i,r){JM(e,$M(n,t,i,r))}function Ig(n,e,t,i){JM(n,WM(e,t,i))}function Pg(n=1){a2($m()+n)}function dt(n){let e=Rk();return xk(e,Wi+n)}function rt(n,e=""){let t=Et(),i=ei(),r=n+Wi,o=i.firstCreatePass?zd(i,r,1,e,null):i.data[r],s=eV(i,t,o,e,n);t[r]=s,l2()&&y2(i,t,s,o),Ac(o,!1)}var eV=(n,e,t,i,r)=>(u2(!0),hO(e[qn],i));function Pn(n){return Mo("",n,""),Pn}function Mo(n,e,t){let i=Et(),r=cS(i,n,e,t);return r!==io&&tV(i,wa(),r),Mo}function tV(n,e,t){let i=ix(e,n);fO(n[qn],i,t)}function Nc(n,e,t){Ox(e)&&(e=e());let i=Et(),r=Ic();if(to(i,r,e)){let o=ei(),s=c2();hg(o,s,i,n,e,i[qn],t,!1)}return Nc}function Iu(n,e){let t=Ox(n);return t&&n.set(e),t}function Oc(n,e){let t=Et(),i=ei(),r=$i();return bS(i,t,t[qn],r,n,e),Oc}function nV(n,e,t){let i=ei();if(i.firstCreatePass){let r=yo(n);zm(t,i.data,i.blueprint,r,!0),zm(e,i.data,i.blueprint,r,!1)}}function zm(n,e,t,i,r){if(n=Ni(n),Array.isArray(n))for(let o=0;o<n.length;o++)zm(n[o],e,t,i,r);else{let o=ei(),s=Et(),a=$i(),c=du(n)?n:Ni(n.provide),l=qb(n),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(du(n)||!n.multi){let f=new Ec(l,r,Y),p=T6(c,e,r?u:u+h,d);p===-1?(F6(V4(a,s),o,c),C6(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(f),s.push(f)):(t[p]=f,s[p]=f)}else{let f=T6(c,e,u+h,d),p=T6(c,e,u,u+h),v=f>=0&&t[f],g=p>=0&&t[p];if(r&&!g||!r&&!v){F6(V4(a,s),o,c);let m=oV(r?rV:iV,t.length,r,i,l);!r&&g&&(t[p].providerFactory=m),C6(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(m),s.push(m)}else{let m=xS(t[r?p:f],l,!r&&i);C6(o,n,f>-1?f:p,m)}!r&&i&&g&&t[p].componentProviders++}}}function C6(n,e,t,i){let r=du(e),o=lk(e);if(r||o){let c=(o?Ni(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[i,c]):l[u+1].push(i,c)}else l.push(t,c)}}}function xS(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function T6(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function iV(n,e,t,i,r){return Am(this.multi,[])}function rV(n,e,t,i,r){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=yd(i,i[Pt],this.providerFactory.index,r);s=c.slice(0,a),Am(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],Am(o,s);return s}function Am(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function oV(n,e,t,i,r){let o=new Ec(n,t,Y);return o.multi=[],o.index=e,o.componentProviders=0,xS(o,r,i&&!t),o}function Rn(n,e=[]){return t=>{t.providersResolver=(i,r)=>nV(i,r?r(n):n,e)}}function Rd(n,e,t){let i=Gm()+n,r=Et();return r[i]===io?Tg(r,i,t?e.call(t):e()):dF(r,i)}function Fr(n,e,t,i){return sV(Et(),Gm(),n,e,t,i)}function MS(n,e,t,i,r){return aV(Et(),Gm(),n,e,t,i,r)}function SS(n,e){let t=n[e];return t===io?void 0:t}function sV(n,e,t,i,r,o){let s=e+t;return to(n,s,r)?Tg(n,s+1,o?i.call(o,r):i(r)):SS(n,s+1)}function aV(n,e,t,i,r,o,s){let a=e+t;return iS(n,a,r,o)?Tg(n,a+2,s?i.call(s,r,o):i(r,o)):SS(n,a+2)}function Jt(n,e){return b2(n,e)}var xu=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Rg=new xu("19.2.14"),Im=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},wS=(()=>{class n{compileModuleSync(t){return new vm(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=Yb(t),o=uM(r.declarations).reduce((s,a)=>{let c=xa(a);return c&&s.push(new Dc(c)),s},[]);return new Im(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var cV=(()=>{class n{zone=T(_t);changeDetectionScheduler=T(gu);applicationRef=T(no);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lV=new de("",{factory:()=>!1});function CS({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new _t(lt(Z({},ES()),{scheduleInRootZone:t})),[{provide:_t,useFactory:n},{provide:uu,multi:!0,useFactory:()=>{let i=T(cV,{optional:!0});return()=>i.initialize()}},{provide:uu,multi:!0,useFactory:()=>{let i=T(uV);return()=>{i.initialize()}}},e===!0?{provide:Ax,useValue:!0}:[],{provide:Ix,useValue:t??zx}]}function TS(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,i=CS({ngZoneFactory:()=>{let r=ES(n);return r.scheduleInRootZone=t,r.shouldCoalesceEventChangeDetection&&bo("NgZone_CoalesceEvent"),new _t(r)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return hr([{provide:lV,useValue:!0},{provide:d2,useValue:!1},i])}function ES(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var uV=(()=>{class n{subscription=new Kt;initialized=!1;zone=T(_t);pendingTasks=T(Ca);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_t.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_t.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var dV=(()=>{class n{appRef=T(no);taskService=T(Ca);ngZone=T(_t);zonelessEnabled=T(d2);tracing=T(zu,{optional:!0});disableScheduling=T(Ax,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Kt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(B4):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(T(Ix,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Y6||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let i=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?q_:Px;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(B4+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(t),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,q_(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hV(){return typeof $localize<"u"&&$localize.locale||Z4}var kg=new de("",{providedIn:"root",factory:()=>T(kg,Lt.Optional|Lt.SkipSelf)||hV()});var Pm=new de(""),fV=new de("");function hd(n){return!n.moduleRef}function pV(n){let e=hd(n)?n.r3Injector:n.moduleRef.injector,t=e.get(_t);return t.run(()=>{hd(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(_o,null),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:o=>{i.handleError(o)}})}),hd(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Pm);s.add(o),e.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Pm);s.add(o),n.moduleRef.onDestroy(()=>{T4(n.allPlatformModules,n.moduleRef),r.unsubscribe(),s.delete(o)})}return gV(i,t,()=>{let o=e.get(aS);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(kg,Z4);if(XF(s||Z4),!e.get(fV,!0))return hd(n)?e.get(no):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(hd(n)){let c=e.get(no);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return mV(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function mV(n,e){let t=n.injector.get(no);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>t.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new se(-403,!1);e.push(n)}function gV(n,e,t){try{let i=t();return Rc(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}var E4=null;function vV(n=[],e){return Ln.create({name:e,providers:[{provide:n2,useValue:"platform"},{provide:Pm,useValue:new Set([()=>E4=null])},...n]})}function yV(n=[]){if(E4)return E4;let e=vV(n);return E4=e,gF(),_V(e),e}function _V(n){let e=n.get(tg,null);fr(n,()=>{e?.forEach(t=>t())})}function kd(){return!1}var Mt=(()=>{class n{static __NG_ELEMENT_ID__=bV}return n})();function bV(n){return xV($i(),Et(),(n&16)===16)}function xV(n,e,t){if(wu(n)&&!t){let i=Xo(n.index,e);return new bd(i,i)}else if(n.type&175){let i=e[Rr];return new bd(i,e)}return null}function DS(n){xn(8);try{let{rootComponent:e,appProviders:t,platformProviders:i}=n,r=yV(i),o=[CS({}),{provide:gu,useExisting:dV},...t||[]],s=new W4({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1});return pV({r3Injector:s.injector,platformInjector:r,rootComponent:e})}catch(e){return Promise.reject(e)}finally{xn(9)}}function fe(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function yi(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function gr(n){return Y8(n)}function ti(n,e){return B0(n,e?.equal)}var Eb=class{[Yi];constructor(e){this[Yi]=e}destroy(){this[Yi].destroy()}};var MV=n=>n;function Ng(n,e){if(typeof n=="function"){let t=j0(n,MV,e?.equal);return Db(t)}else{let t=j0(n.source,n.computation,n.equal);return Db(t)}}function Db(n){let e=n[Yi],t=n;return t.set=i=>B8(e,i),t.update=i=>U8(e,i),t.asReadonly=Nx.bind(n),t}function C2(n,e){let t=xa(n),i=e.elementInjector||i2();return new Dc(t).create(i,e.projectableNodes,e.hostElement,e.environmentInjector)}function zS(n){let e=xa(n);if(!e)return null;let t=new Dc(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var At=new de("");var PS=null;function ro(){return PS}function Og(n){PS??=n}var Nd=class{},Od=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:()=>T(RS),providedIn:"platform"})}return n})(),Lg=new de(""),RS=(()=>{class n extends Od{_location;_history;_doc=T(At);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ro().getBaseHref(this._doc)}onPopState(t){let i=ro().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=ro().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function T2(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function AS(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function So(n){return n&&n[0]!=="?"?`?${n}`:n}var wo=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:()=>T(D2),providedIn:"root"})}return n})(),E2=new de(""),D2=(()=>{class n extends wo{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??T(At).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return T2(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+So(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+So(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+So(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(Me(Od),Me(E2,8))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ts=(()=>{class n{_subject=new ce;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=CV(AS(IS(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+So(i))}normalize(t){return n.stripTrailingSlash(wV(this._basePath,IS(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+So(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+So(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=So;static joinWithSlash=T2;static stripTrailingSlash=AS;static \u0275fac=function(i){return new(i||n)(Me(wo))};static \u0275prov=re({token:n,factory:()=>SV(),providedIn:"root"})}return n})();function SV(){return new ts(Me(wo))}function wV(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function IS(n){return n.replace(/\/index.html$/,"")}function CV(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Fg=(()=>{class n extends wo{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(t){let i=T2(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+So(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+So(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(Me(Od),Me(E2,8))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();var Ld=(()=>{class n{_viewContainer;_context=new z2;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,i){this._viewContainer=t,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){kS(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){kS(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(Y(zi),Y(ui))};static \u0275dir=Oe({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),z2=class{$implicit=null;ngIf=null};function kS(n,e){if(n&&!n.createEmbeddedView)throw new se(2020,!1)}var ni=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(t){this._viewContainerRef=t}ngOnChanges(t){if(this._shouldRecreateView(t)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(t,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static \u0275fac=function(i){return new(i||n)(Y(zi))};static \u0275dir=Oe({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[$e]})}return n})();var Da=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({})}return n})();function Fd(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var A2="browser",NS="server";function Vd(n){return n===A2}function I2(n){return n===NS}var Lc=class{};var OS=(()=>{class n{static \u0275prov=re({token:n,providedIn:"root",factory:()=>new Vg(T(At),window)})}return n})(),Vg=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=zV(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}};function zV(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}r=i.nextNode()}}return null}var k2=new de(""),jg=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r,o){return this._findPluginFor(i).addEventListener(t,i,r,o)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new se(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(Me(k2),Me(_t))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),Hd=class{_doc;constructor(e){this._doc=e}manager},P2="ng-app-id";function LS(n){for(let e of n)e.remove()}function FS(n,e){let t=e.createElement("style");return t.textContent=n,t}function AV(n,e,t,i){let r=n.head?.querySelectorAll(`style[${P2}="${e}"],link[${P2}="${e}"]`);if(r)for(let o of r)o.removeAttribute(P2),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Ug(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Gg=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.isServer=I2(o),AV(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let r of t)this.addUsage(r,this.inline,FS);i?.forEach(r=>this.addUsage(r,this.external,Ug))}removeStyles(t,i){for(let r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){let o=i.get(t);o?o.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(t,this.doc)))})}removeUsage(t,i){let r=i.get(t);r&&(r.usage--,r.usage<=0&&(LS(r.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])LS(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(t,FS(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(t,Ug(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(P2,this.appId),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(Me(At),Me(Cd),Me(Rs,8),Me(Jo))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),Bg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Wg=/%COMP%/g;var HS="%COMP%",IV=`_nghost-${HS}`,PV=`_ngcontent-${HS}`,RV=!0,kV=new de("",{providedIn:"root",factory:()=>RV});function NV(n){return PV.replace(Wg,n)}function OV(n){return IV.replace(Wg,n)}function BS(n,e){return e.map(t=>t.replace(Wg,n))}var Yd=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,r,o,s,a,c,l=null,u=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=u,this.platformIsServer=I2(a),this.defaultRenderer=new Bd(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ko.ShadowDom&&(i=lt(Z({},i),{encapsulation:Ko.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof R2?r.applyToHost(t):r instanceof Ud&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,h=this.tracingService;switch(i.encapsulation){case Ko.Emulated:o=new R2(c,l,i,this.appId,u,s,a,d,h);break;case Ko.ShadowDom:return new Yg(c,l,t,i,s,a,this.nonce,d,h);default:o=new Ud(c,l,i,u,s,a,d,h);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(Me(jg),Me(Gg),Me(Cd),Me(kV),Me(At),Me(Jo),Me(_t),Me(Rs),Me(zu,8))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),Bd=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r,o){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Bg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(VS(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(VS(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new se(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=Bg[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=Bg[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Is.DashCase|Is.Important)?e.style.setProperty(t,i,r&Is.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Is.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if(typeof e=="string"&&(e=ro().getGlobalEventTarget(this.doc,e),!e))throw new se(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,r)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function VS(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Yg=class extends Bd{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,r,o,s,a,c,l){super(e,o,s,c,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=BS(r.id,u);for(let h of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}let d=r.getExternalStyles?.();if(d)for(let h of d){let f=Ug(h,o);a&&f.setAttribute("nonce",a),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ud=class extends Bd{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,r,o,s,a,c,l){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r;let u=i.styles;this.styles=l?BS(l,u):u,this.styleUrls=i.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},R2=class extends Ud{contentAttr;hostAttr;constructor(e,t,i,r,o,s,a,c,l){let u=r+"-"+i.id;super(e,t,i,o,s,a,c,l,u),this.contentAttr=NV(u),this.hostAttr=OV(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};var N2=class n extends Nd{supportsDOMEvents=!0;static makeCurrent(){Og(new n)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=LV();return t==null?null:FV(t)}resetBaseElement(){jd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Fd(document.cookie,e)}},jd=null;function LV(){return jd=jd||document.head.querySelector("base"),jd?jd.getAttribute("href"):null}function FV(n){return new URL(n,document.baseURI).pathname}var VV=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),YS=(()=>{class n extends Hd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,o){return t.addEventListener(i,r,o),()=>this.removeEventListener(t,i,r,o)}removeEventListener(t,i,r,o){return t.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||n)(Me(At))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),US=["alt","control","meta","shift"],HV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},BV={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},jS=(()=>{class n extends Hd{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r,o){let s=n.parseEventName(i),a=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ro().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),US.forEach(l=>{let u=i.indexOf(l);u>-1&&(i.splice(u,1),s+=l+".")}),s+=o,i.length!=0||o.length===0)return null;let c={};return c.domEventName=r,c.fullKey=s,c}static matchEventFullKeyCode(t,i){let r=HV[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),US.forEach(s=>{if(s!==r){let a=BV[s];a(t)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(Me(At))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();function $g(n,e){return DS(Z({rootComponent:n},UV(e)))}function UV(n){return{appProviders:[...$V,...n?.providers??[]],platformProviders:WV}}function YV(){N2.makeCurrent()}function jV(){return new _o}function GV(){return Yx(document),document}var WV=[{provide:Jo,useValue:A2},{provide:tg,useValue:YV,multi:!0},{provide:At,useFactory:GV}];var $V=[{provide:n2,useValue:"root"},{provide:_o,useFactory:jV},{provide:k2,useClass:YS,multi:!0,deps:[At]},{provide:k2,useClass:jS,multi:!0,deps:[At]},Yd,Gg,jg,{provide:Xn,useExisting:Yd},{provide:Lc,useClass:VV},[]];var Pu=class{},Fs=class{},ns=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),o=t.slice(i+1).trim();this.addHeaderEntry(r,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.addHeaderEntry(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let i=e.toLowerCase();this.maybeSetNormalizedName(e,i),this.headers.has(i)?this.headers.get(i).push(t):this.headers.set(i,[t])}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var L2=class{encodeKey(e){return GS(e)}encodeValue(e){return GS(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function qV(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var XV=/%(\d[a-f0-9])/gi,KV={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function GS(n){return encodeURIComponent(n).replace(XV,(e,t)=>KV[t]??e)}function O2(n){return`${n}`}var Os=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new L2,e.fromString){if(e.fromObject)throw new se(2805,!1);this.map=qV(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(O2):[O2(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(O2(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(O2(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var F2=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function ZV(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function WS(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function $S(n){return typeof Blob<"u"&&n instanceof Blob}function qS(n){return typeof FormData<"u"&&n instanceof FormData}function QV(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var XS="Content-Type",KS="Accept",ZS="X-Request-URL",QS="text/plain",JS="application/json",JV=`${JS}, ${QS}, */*`,za=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,i,r){this.url=t,this.method=e.toUpperCase();let o;if(ZV(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new ns,this.context??=new F2,!this.params)this.params=new Os,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||WS(this.body)||$S(this.body)||qS(this.body)||QV(this.body)?this.body:this.body instanceof Os?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||qS(this.body)?null:$S(this.body)?this.body.type||null:WS(this.body)?null:typeof this.body=="string"?QS:this.body instanceof Os?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?JS:null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,u=e.params||this.params,d=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),u)),new n(t,i,s,{params:u,headers:l,context:d,reportProgress:c,responseType:r,withCredentials:a,transferCache:o})}},Ls=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Ls||{}),Ru=class{headers;status;statusText;url;ok;type;constructor(e,t=200,i="OK"){this.headers=e.headers||new ns,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},V2=class n extends Ru{constructor(e={}){super(e)}type=Ls.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Fc=class n extends Ru{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Ls.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Gd=class extends Ru{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},eH=200,tH=204;function qg(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var ku=(()=>{class n{handler;constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof za)o=t;else{let c;r.headers instanceof ns?c=r.headers:c=new ns(r.headers);let l;r.params&&(r.params instanceof Os?l=r.params:l=new Os({fromObject:r.params})),o=new za(t,i,r.body!==void 0?r.body:null,{headers:c,context:r.context,params:l,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let s=Ae(o).pipe(Go(c=>this.handler.handle(c)));if(t instanceof za||r.observe==="events")return s;let a=s.pipe(xt(c=>c instanceof Fc));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Pe(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new se(2806,!1);return c.body}));case"blob":return a.pipe(Pe(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new se(2807,!1);return c.body}));case"text":return a.pipe(Pe(c=>{if(c.body!==null&&typeof c.body!="string")throw new se(2808,!1);return c.body}));case"json":default:return a.pipe(Pe(c=>c.body))}case"response":return a;default:throw new se(2809,!1)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new Os().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,qg(r,i))}post(t,i,r={}){return this.request("POST",t,qg(r,i))}put(t,i,r={}){return this.request("PUT",t,qg(r,i))}static \u0275fac=function(i){return new(i||n)(Me(Pu))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();var nH=new de("");function iH(n,e){return e(n)}function rH(n,e,t){return(i,r)=>fr(t,()=>e(i,o=>n(o,r)))}var ew=new de(""),tw=new de(""),nw=new de("",{providedIn:"root",factory:()=>!0});var H2=(()=>{class n extends Pu{backend;injector;chain=null;pendingTasks=T(Ca);contributeToStability=T(nw);constructor(t,i){super(),this.backend=t,this.injector=i}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(ew),...this.injector.get(tw,[])]));this.chain=i.reduceRight((r,o)=>rH(r,o,this.injector),iH)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(mo(()=>this.pendingTasks.remove(i)))}else return this.chain(t,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(Me(Fs),Me(Jn))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();var oH=/^\)\]\}',?\n/,sH=RegExp(`^${ZS}:`,"m");function aH(n){return"responseURL"in n&&n.responseURL?n.responseURL:sH.test(n.getAllResponseHeaders())?n.getResponseHeader(ZS):null}var Xg=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new se(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?ln(i.\u0275loadImpl()):Ae(null)).pipe(Dn(()=>new it(o=>{let s=i.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((v,g)=>s.setRequestHeader(v,g.join(","))),t.headers.has(KS)||s.setRequestHeader(KS,JV),!t.headers.has(XS)){let v=t.detectContentTypeHeader();v!==null&&s.setRequestHeader(XS,v)}if(t.responseType){let v=t.responseType.toLowerCase();s.responseType=v!=="json"?v:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let v=s.statusText||"OK",g=new ns(s.getAllResponseHeaders()),m=aH(s)||t.url;return c=new V2({headers:g,status:s.status,statusText:v,url:m}),c},u=()=>{let{headers:v,status:g,statusText:m,url:C}=l(),w=null;g!==tH&&(w=typeof s.response>"u"?s.responseText:s.response),g===0&&(g=w?eH:0);let y=g>=200&&g<300;if(t.responseType==="json"&&typeof w=="string"){let z=w;w=w.replace(oH,"");try{w=w!==""?JSON.parse(w):null}catch(D){w=z,y&&(y=!1,w={error:D,text:w})}}y?(o.next(new Fc({body:w,headers:v,status:g,statusText:m,url:C||void 0})),o.complete()):o.error(new Gd({error:w,headers:v,status:g,statusText:m,url:C||void 0}))},d=v=>{let{url:g}=l(),m=new Gd({error:v,status:s.status||0,statusText:s.statusText||"Unknown Error",url:g||void 0});o.error(m)},h=!1,f=v=>{h||(o.next(l()),h=!0);let g={type:Ls.DownloadProgress,loaded:v.loaded};v.lengthComputable&&(g.total=v.total),t.responseType==="text"&&s.responseText&&(g.partialText=s.responseText),o.next(g)},p=v=>{let g={type:Ls.UploadProgress,loaded:v.loaded};v.lengthComputable&&(g.total=v.total),o.next(g)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),t.reportProgress&&(s.addEventListener("progress",f),a!==null&&s.upload&&s.upload.addEventListener("progress",p)),s.send(a),o.next({type:Ls.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",d),t.reportProgress&&(s.removeEventListener("progress",f),a!==null&&s.upload&&s.upload.removeEventListener("progress",p)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(i){return new(i||n)(Me(Lc))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),iw=new de(""),cH="XSRF-TOKEN",lH=new de("",{providedIn:"root",factory:()=>cH}),uH="X-XSRF-TOKEN",dH=new de("",{providedIn:"root",factory:()=>uH}),Wd=class{},hH=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,i){this.doc=t,this.cookieName=i}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Fd(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(i){return new(i||n)(Me(At),Me(lH))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();function fH(n,e){let t=n.url.toLowerCase();if(!T(iw)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=T(Wd).getToken(),r=T(dH);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}function Kg(...n){let e=[ku,Xg,H2,{provide:Pu,useExisting:H2},{provide:Fs,useFactory:()=>T(nH,{optional:!0})??T(Xg)},{provide:ew,useValue:fH,multi:!0},{provide:iw,useValue:!0},{provide:Wd,useClass:hH}];for(let t of n)e.push(...t.\u0275providers);return hr(e)}var rw=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(i){return new(i||n)(Me(At))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var $d=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=Me(gH),r},providedIn:"root"})}return n})(),gH=(()=>{class n extends $d{_doc;constructor(t){super(),this._doc=t}sanitize(t,i){if(i==null)return null;switch(t){case Lr.NONE:return i;case Lr.HTML:return ks(i,"HTML")?Or(i):og(this._doc,String(i)).toString();case Lr.STYLE:return ks(i,"Style")?Or(i):i;case Lr.SCRIPT:if(ks(i,"Script"))return Or(i);throw new se(5200,!1);case Lr.URL:return ks(i,"URL")?Or(i):p2(String(i));case Lr.RESOURCE_URL:if(ks(i,"ResourceURL"))return Or(i);throw new se(5201,!1);default:throw new se(5202,!1)}}bypassSecurityTrustHtml(t){return Qx(t)}bypassSecurityTrustStyle(t){return Jx(t)}bypassSecurityTrustScript(t){return eM(t)}bypassSecurityTrustUrl(t){return tM(t)}bypassSecurityTrustResourceUrl(t){return nM(t)}static \u0275fac=function(i){return new(i||n)(Me(At))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var kt="primary",sh=Symbol("RouteTitle"),n5=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Bc(n){return new n5(n)}function hw(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=n[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function vH(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!is(n[t],e[t]))return!1;return!0}function is(n,e){let t=n?i5(n):void 0,i=e?i5(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!fw(n[r],e[r]))return!1;return!0}function i5(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function fw(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}else return n===e}function pw(n){return n.length>0?n[n.length-1]:null}function ka(n){return dd(n)?n:Rc(n)?ln(Promise.resolve(n)):Ae(n)}var yH={exact:gw,subset:vw},mw={exact:_H,subset:bH,ignored:()=>!0};function ow(n,e,t){return yH[t.paths](n.root,e.root,t.matrixParams)&&mw[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function _H(n,e){return is(n,e)}function gw(n,e,t){if(!Vc(n.segments,e.segments)||!Y2(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!gw(n.children[i],e.children[i],t))return!1;return!0}function bH(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>fw(n[t],e[t]))}function vw(n,e,t){return yw(n,e,e.segments,t)}function yw(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!Vc(r,t)||e.hasChildren()||!Y2(r,t,i))}else if(n.segments.length===t.length){if(!Vc(n.segments,t)||!Y2(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!vw(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Vc(n.segments,r)||!Y2(n.segments,r,i)||!n.children[kt]?!1:yw(n.children[kt],e,o,i)}}function Y2(n,e,t){return e.every((i,r)=>mw[t](n[r].parameters,i.parameters))}var os=class{root;queryParams;fragment;_queryParamMap;constructor(e=new dn([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Bc(this.queryParams),this._queryParamMap}toString(){return SH.serialize(this)}},dn=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return j2(this)}},Aa=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Bc(this.parameters),this._parameterMap}toString(){return bw(this)}};function xH(n,e){return Vc(n,e)&&n.every((t,i)=>is(t.parameters,e[i].parameters))}function Vc(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function MH(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===kt&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==kt&&(t=t.concat(e(r,i)))}),t}var Uc=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:()=>new Ia,providedIn:"root"})}return n})(),Ia=class{parse(e){let t=new o5(e);return new os(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${qd(e.root,!0)}`,i=TH(e.queryParams),r=typeof e.fragment=="string"?`#${wH(e.fragment)}`:"";return`${t}${i}${r}`}},SH=new Ia;function j2(n){return n.segments.map(e=>bw(e)).join("/")}function qd(n,e){if(!n.hasChildren())return j2(n);if(e){let t=n.children[kt]?qd(n.children[kt],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==kt&&i.push(`${r}:${qd(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=MH(n,(i,r)=>r===kt?[qd(n.children[kt],!1)]:[`${r}:${qd(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[kt]!=null?`${j2(n)}/${t[0]}`:`${j2(n)}/(${t.join("//")})`}}function _w(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function B2(n){return _w(n).replace(/%3B/gi,";")}function wH(n){return encodeURI(n)}function r5(n){return _w(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function G2(n){return decodeURIComponent(n)}function sw(n){return G2(n.replace(/\+/g,"%20"))}function bw(n){return`${r5(n.path)}${CH(n.parameters)}`}function CH(n){return Object.entries(n).map(([e,t])=>`;${r5(e)}=${r5(t)}`).join("")}function TH(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${B2(t)}=${B2(r)}`).join("&"):`${B2(t)}=${B2(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var EH=/^[^\/()?;#]+/;function Qg(n){let e=n.match(EH);return e?e[0]:""}var DH=/^[^\/()?;=#]+/;function zH(n){let e=n.match(DH);return e?e[0]:""}var AH=/^[^=?&#]+/;function IH(n){let e=n.match(AH);return e?e[0]:""}var PH=/^[^&#]+/;function RH(n){let e=n.match(PH);return e?e[0]:""}var o5=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new dn([],{}):new dn([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[kt]=new dn(e,t)),i}parseSegment(){let e=Qg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new se(4009,!1);return this.capture(e),new Aa(G2(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=zH(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=Qg(this.remaining);r&&(i=r,this.capture(i))}e[G2(t)]=G2(i)}parseQueryParam(e){let t=IH(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let s=RH(this.remaining);s&&(i=s,this.capture(i))}let r=sw(t),o=sw(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Qg(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new se(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=kt);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[kt]:new dn([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new se(4011,!1)}};function xw(n){return n.segments.length>0?new dn([],{[kt]:n}):n}function Mw(n){let e={};for(let[i,r]of Object.entries(n.children)){let o=Mw(r);if(i===kt&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new dn(n.segments,e);return kH(t)}function kH(n){if(n.numberOfChildren===1&&n.children[kt]){let e=n.children[kt];return new dn(n.segments.concat(e.segments),e.children)}return n}function Pa(n){return n instanceof os}function Sw(n,e,t=null,i=null){let r=ww(n);return Cw(r,e,t,i)}function ww(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new dn(o.url,s);return o===n&&(e=a),a}let i=t(n.root),r=xw(i);return e??r}function Cw(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return Jg(r,r,r,t,i);let o=NH(e);if(o.toRoot())return Jg(r,r,new dn([],{}),t,i);let s=OH(o,r,n),a=s.processChildren?Kd(s.segmentGroup,s.index,o.commands):Ew(s.segmentGroup,s.index,o.commands);return Jg(r,s.segmentGroup,a,t,i)}function $2(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Qd(n){return typeof n=="object"&&n!=null&&n.outlets}function Jg(n,e,t,i,r){let o={};i&&Object.entries(i).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;n===e?s=t:s=Tw(n,e,t);let a=xw(Mw(s));return new os(a,o,r)}function Tw(n,e,t){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===e?i[r]=t:i[r]=Tw(o,e,t)}),new dn(n.segments,i)}var q2=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&$2(i[0]))throw new se(4003,!1);let r=i.find(Qd);if(r&&r!==pw(i))throw new se(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function NH(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new q2(!0,0,n);let e=0,t=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new q2(t,e,i)}var Lu=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function OH(n,e,t){if(n.isAbsolute)return new Lu(e,!0,0);if(!t)return new Lu(e,!1,NaN);if(t.parent===null)return new Lu(t,!0,0);let i=$2(n.commands[0])?0:1,r=t.segments.length-1+i;return LH(t,r,n.numberOfDoubleDots)}function LH(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new se(4005,!1);r=i.segments.length}return new Lu(i,!1,r-o)}function FH(n){return Qd(n[0])?n[0].outlets:{[kt]:n}}function Ew(n,e,t){if(n??=new dn([],{}),n.segments.length===0&&n.hasChildren())return Kd(n,e,t);let i=VH(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new dn(n.segments.slice(0,i.pathIndex),{});return o.children[kt]=new dn(n.segments.slice(i.pathIndex),n.children),Kd(o,0,r)}else return i.match&&r.length===0?new dn(n.segments,{}):i.match&&!n.hasChildren()?s5(n,e,t):i.match?Kd(n,0,r):s5(n,e,t)}function Kd(n,e,t){if(t.length===0)return new dn(n.segments,{});{let i=FH(t),r={};if(Object.keys(i).some(o=>o!==kt)&&n.children[kt]&&n.numberOfChildren===1&&n.children[kt].segments.length===0){let o=Kd(n.children[kt],e,t);return new dn(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=Ew(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new dn(n.segments,r)}}function VH(n,e,t){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;let s=n.segments[r],a=t[i];if(Qd(a))break;let c=`${a}`,l=i<t.length-1?t[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!cw(c,l,s))return o;i+=2}else{if(!cw(c,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function s5(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(Qd(o)){let c=HH(o.outlets);return new dn(i,c)}if(r===0&&$2(t[0])){let c=n.segments[e];i.push(new Aa(c.path,aw(t[0]))),r++;continue}let s=Qd(o)?o.outlets[kt]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&$2(a)?(i.push(new Aa(s,aw(a))),r+=2):(i.push(new Aa(s,{})),r++)}return new dn(i,{})}function HH(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=s5(new dn([],{}),0,i))}),e}function aw(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function cw(n,e,t){return n==t.path&&is(e,t.parameters)}var W2="imperative",_i=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(_i||{}),Hr=class{id;url;constructor(e,t){this.id=e,this.url=t}},Ra=class extends Hr{type=_i.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},yr=class extends Hr{urlAfterRedirects;type=_i.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},vr=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(vr||{}),Vu=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Vu||{}),rs=class extends Hr{reason;code;type=_i.NavigationCancel;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ss=class extends Hr{reason;code;type=_i.NavigationSkipped;constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r}},Hu=class extends Hr{error;target;type=_i.NavigationError;constructor(e,t,i,r){super(e,t),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Jd=class extends Hr{urlAfterRedirects;state;type=_i.RoutesRecognized;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},X2=class extends Hr{urlAfterRedirects;state;type=_i.GuardsCheckStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},K2=class extends Hr{urlAfterRedirects;state;shouldActivate;type=_i.GuardsCheckEnd;constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Z2=class extends Hr{urlAfterRedirects;state;type=_i.ResolveStart;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Q2=class extends Hr{urlAfterRedirects;state;type=_i.ResolveEnd;constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},J2=class{route;type=_i.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ef=class{route;type=_i.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},tf=class{snapshot;type=_i.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nf=class{snapshot;type=_i.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rf=class{snapshot;type=_i.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},of=class{snapshot;type=_i.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bu=class{routerEvent;position;anchor;type=_i.Scroll;constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},eh=class{},Uu=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function BH(n,e){return n.providers&&!n._injector&&(n._injector=Id(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Co(n){return n.outlet||kt}function UH(n,e){let t=n.filter(i=>Co(i)===e);return t.push(...n.filter(i=>Co(i)!==e)),t}function ah(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var sf=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ah(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Yc(this.rootInjector)}},Yc=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new sf(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||n)(Me(Jn))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),af=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=a5(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=a5(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=c5(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return c5(e,this._root).map(t=>t.value)}};function a5(n,e){if(n===e.value)return e;for(let t of e.children){let i=a5(n,t);if(i)return i}return null}function c5(n,e){if(n===e.value)return[e];for(let t of e.children){let i=c5(n,t);if(i.length)return i.unshift(e),i}return[]}var Vr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ou(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var th=class extends af{snapshot;constructor(e,t){super(e),this.snapshot=t,g5(this,e)}toString(){return this.snapshot.toString()}};function Dw(n){let e=YH(n),t=new Qt([new Aa("",{})]),i=new Qt({}),r=new Qt({}),o=new Qt({}),s=new Qt(""),a=new as(t,i,o,s,r,kt,n,e.root);return a.snapshot=e.root,new th(new Vr(a,[]),e)}function YH(n){let e={},t={},i={},r="",o=new Hc([],e,i,r,t,kt,n,null,{});return new nh("",new Vr(o,[]))}var as=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,r,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Pe(l=>l[sh]))??Ae(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Pe(e=>Bc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Pe(e=>Bc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function cf(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:Z(Z({},e.params),n.params),data:Z(Z({},e.data),n.data),resolve:Z(Z(Z(Z({},n.data),e.data),r?.data),n._resolvedData)}:i={params:Z({},n.params),data:Z({},n.data),resolve:Z(Z({},n.data),n._resolvedData??{})},r&&Aw(r)&&(i.resolve[sh]=r.title),i}var Hc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[sh]}constructor(e,t,i,r,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Bc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Bc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},nh=class extends af{url;constructor(e,t){super(t),this.url=e,g5(this,t)}toString(){return zw(this._root)}};function g5(n,e){e.value._routerState=n,e.children.forEach(t=>g5(n,t))}function zw(n){let e=n.children.length>0?` { ${n.children.map(zw).join(", ")} } `:"";return`${n.value}${e}`}function e5(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,is(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),is(e.params,t.params)||n.paramsSubject.next(t.params),vH(e.url,t.url)||n.urlSubject.next(t.url),is(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function l5(n,e){let t=is(n.params,e.params)&&xH(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||l5(n.parent,e.parent))}function Aw(n){return typeof n.title=="string"||n.title===null}var Iw=new de(""),ch=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=kt;activateEvents=new pt;deactivateEvents=new pt;attachEvents=new pt;detachEvents=new pt;routerOutletData=Kn(void 0);parentContexts=T(Yc);location=T(zi);changeDetector=T(Mt);inputBinder=T(lh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new se(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new se(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new se(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new se(4013,!1);this._activatedRoute=t;let r=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new u5(t,a,r.injector,this.routerOutletData);this.activated=r.createComponent(s,{index:r.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Oe({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[$e]})}return n})(),u5=class{route;childContexts;parent;outletData;constructor(e,t,i,r){this.route=e,this.childContexts=t,this.parent=i,this.outletData=r}get(e,t){return e===as?this.route:e===Yc?this.childContexts:e===Iw?this.outletData:this.parent.get(e,t)}},lh=new de(""),v5=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:i}=t,r=jo([i.queryParams,i.params,i.data]).pipe(Dn(([o,s,a],c)=>(a=Z(Z(Z({},o),s),a),c===0?Ae(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(t);return}let s=zS(i.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,r)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),y5=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&me(0,"router-outlet")},dependencies:[ch],encapsulation:2})}return n})();function _5(n){let e=n.children&&n.children.map(_5),t=e?lt(Z({},n),{children:e}):Z({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==kt&&(t.component=y5),t}function jH(n,e,t){let i=ih(n,e._root,t?t._root:void 0);return new th(i,e)}function ih(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=GH(n,e,t);return new Vr(i,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ih(n,a)),s}}let i=WH(e.value),r=e.children.map(o=>ih(n,o));return new Vr(i,r)}}function GH(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return ih(n,i,r);return ih(n,i)})}function WH(n){return new as(new Qt(n.url),new Qt(n.params),new Qt(n.queryParams),new Qt(n.fragment),new Qt(n.data),n.outlet,n.component,n)}var Yu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Pw="ngNavigationCancelingError";function lf(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Pa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Rw(!1,vr.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function Rw(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Pw]=!0,t.cancellationCode=e,t}function $H(n){return kw(n)&&Pa(n.url)}function kw(n){return!!n&&n[Pw]}var qH=(n,e,t,i)=>Pe(r=>(new d5(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),d5=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),e5(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=Ou(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Ou(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Ou(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=Ou(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new of(o.value.snapshot))}),e.children.length&&this.forwardEvent(new nf(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(e5(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),e5(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,i)}},uf=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Fu=class{component;route;constructor(e,t){this.component=e,this.route=t}};function XH(n,e,t){let i=n._root,r=e?e._root:null;return Xd(i,r,t,[i.value])}function KH(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Gu(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!Rb(n)?n:e.get(n):i}function Xd(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ou(e);return n.children.forEach(s=>{ZH(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Zd(a,t.getContext(s),r)),r}function ZH(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=QH(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new uf(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Xd(n,e,a?a.children:null,i,r):Xd(n,e,t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Fu(a.outlet.component,s))}else s&&Zd(e,a,r),r.canActivateChecks.push(new uf(i)),o.component?Xd(n,null,a?a.children:null,i,r):Xd(n,null,t,i,r);return r}function QH(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Vc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Vc(n.url,e.url)||!is(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!l5(n,e)||!is(n.queryParams,e.queryParams);case"paramsChange":default:return!l5(n,e)}}function Zd(n,e,t){let i=Ou(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?e?Zd(s,e.children.getContext(o),t):Zd(s,null,t):Zd(s,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Fu(e.outlet.component,r)):t.canDeactivateChecks.push(new Fu(null,r)):t.canDeactivateChecks.push(new Fu(null,r))}function uh(n){return typeof n=="function"}function JH(n){return typeof n=="boolean"}function eB(n){return n&&uh(n.canLoad)}function tB(n){return n&&uh(n.canActivate)}function nB(n){return n&&uh(n.canActivateChild)}function iB(n){return n&&uh(n.canDeactivate)}function rB(n){return n&&uh(n.canMatch)}function Nw(n){return n instanceof Ts||n?.name==="EmptyError"}var U2=Symbol("INITIAL_VALUE");function ju(){return Dn(n=>jo(n.map(e=>e.pipe(Ei(1),Di(U2)))).pipe(Pe(e=>{for(let t of e)if(t!==!0){if(t===U2)return U2;if(t===!1||oB(t))return t}return!0}),xt(e=>e!==U2),Ei(1)))}function oB(n){return Pa(n)||n instanceof Yu}function sB(n,e){return mn(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Ae(lt(Z({},t),{guardsResult:!0})):aB(s,i,r,n).pipe(mn(a=>a&&JH(a)?cB(i,o,n,e):Ae(a)),Pe(a=>lt(Z({},t),{guardsResult:a})))})}function aB(n,e,t,i){return ln(n).pipe(mn(r=>fB(r.component,r.route,t,e,i)),Es(r=>r!==!0,!0))}function cB(n,e,t,i){return ln(e).pipe(Go(r=>ma(uB(r.route.parent,i),lB(r.route,i),hB(n,r.path,t),dB(n,r.route,t))),Es(r=>r!==!0,!0))}function lB(n,e){return n!==null&&e&&e(new rf(n)),Ae(!0)}function uB(n,e){return n!==null&&e&&e(new tf(n)),Ae(!0)}function dB(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return Ae(!0);let r=i.map(o=>g4(()=>{let s=ah(e)??t,a=Gu(o,s),c=tB(a)?a.canActivate(e,n):fr(s,()=>a(e,n));return ka(c).pipe(Es())}));return Ae(r).pipe(ju())}function hB(n,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>KH(s)).filter(s=>s!==null).map(s=>g4(()=>{let a=s.guards.map(c=>{let l=ah(s.node)??t,u=Gu(c,l),d=nB(u)?u.canActivateChild(i,n):fr(l,()=>u(i,n));return ka(d).pipe(Es())});return Ae(a).pipe(ju())}));return Ae(o).pipe(ju())}function fB(n,e,t,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Ae(!0);let s=o.map(a=>{let c=ah(e)??r,l=Gu(a,c),u=iB(l)?l.canDeactivate(n,e,t,i):fr(c,()=>l(n,e,t,i));return ka(u).pipe(Es())});return Ae(s).pipe(ju())}function pB(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return Ae(!0);let o=r.map(s=>{let a=Gu(s,n),c=eB(a)?a.canLoad(e,t):fr(n,()=>a(e,t));return ka(c)});return Ae(o).pipe(ju(),Ow(i))}function Ow(n){return K8(Bn(e=>{if(typeof e!="boolean")throw lf(n,e)}),Pe(e=>e===!0))}function mB(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return Ae(!0);let o=r.map(s=>{let a=Gu(s,n),c=rB(a)?a.canMatch(e,t):fr(n,()=>a(e,t));return ka(c)});return Ae(o).pipe(ju(),Ow(i))}var rh=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},oh=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Nu(n){return Jl(new rh(n))}function gB(n){return Jl(new se(4e3,!1))}function vB(n){return Jl(Rw(!1,vr.GuardRejected))}var h5=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Ae(i);if(r.numberOfChildren>1||!r.children[kt])return gB(`${e.redirectTo}`);r=r.children[kt]}}applyRedirectCommands(e,t,i,r,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:h,params:f,data:p,title:v}=r,g=fr(o,()=>a({params:f,data:p,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:h,title:v}));if(g instanceof os)throw new oh(g);t=g}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new oh(s);return s}applyRedirectCreateUrlTree(e,t,i,r){let o=this.createSegmentGroup(e,t.root,i,r);return new os(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=t[a]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){let o=this.createSegments(e,t.segments,i,r),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,i,r)}),new dn(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new se(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},f5={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function yB(n,e,t,i,r){let o=Lw(n,e,t);return o.matched?(i=BH(e,i),mB(i,e,t,r).pipe(Pe(s=>s===!0?o:Z({},f5)))):Ae(o)}function Lw(n,e,t){if(e.path==="**")return _B(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Z({},f5):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||hw)(t,n,e);if(!r)return Z({},f5);let o={};Object.entries(r.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=r.consumed.length>0?Z(Z({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function _B(n){return{matched:!0,parameters:n.length>0?pw(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function lw(n,e,t,i){return t.length>0&&MB(n,t,i)?{segmentGroup:new dn(e,xB(i,new dn(t,n.children))),slicedSegments:[]}:t.length===0&&SB(n,t,i)?{segmentGroup:new dn(n.segments,bB(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new dn(n.segments,n.children),slicedSegments:t}}function bB(n,e,t,i){let r={};for(let o of t)if(hf(n,e,o)&&!i[Co(o)]){let s=new dn([],{});r[Co(o)]=s}return Z(Z({},i),r)}function xB(n,e){let t={};t[kt]=e;for(let i of n)if(i.path===""&&Co(i)!==kt){let r=new dn([],{});t[Co(i)]=r}return t}function MB(n,e,t){return t.some(i=>hf(n,e,i)&&Co(i)!==kt)}function SB(n,e,t){return t.some(i=>hf(n,e,i))}function hf(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function wB(n,e,t){return e.length===0&&!n.children[t]}var p5=class{};function CB(n,e,t,i,r,o,s="emptyOnly"){return new m5(n,e,t,i,r,s,o).recognize()}var TB=31,m5=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,r,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new h5(this.urlSerializer,this.urlTree)}noMatchError(e){return new se(4002,`'${e.segmentGroup}'`)}recognize(){let e=lw(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Pe(({children:t,rootSnapshot:i})=>{let r=new Vr(i,t),o=new nh("",r),s=Sw(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Hc([],Object.freeze({}),Object.freeze(Z({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),kt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,kt,t).pipe(Pe(i=>({children:i,rootSnapshot:t})),po(i=>{if(i instanceof oh)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof rh?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,r,!0,o).pipe(Pe(s=>s instanceof Vr?[s]:[]))}processChildren(e,t,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return ln(o).pipe(Go(s=>{let a=i.children[s],c=UH(t,s);return this.processSegmentGroup(e,c,a,s,r)}),c6((s,a)=>(s.push(...a),s)),ya(null),a6(),mn(s=>{if(s===null)return Nu(i);let a=Fw(s);return EB(a),Ae(a)}))}processSegment(e,t,i,r,o,s,a){return ln(t).pipe(Go(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,i,r,o,s,a).pipe(po(l=>{if(l instanceof rh)return Ae(null);throw l}))),Es(c=>!!c),po(c=>{if(Nw(c))return wB(i,r,o)?Ae(new p5):Nu(i);throw c}))}processSegmentAgainstRoute(e,t,i,r,o,s,a,c){return Co(i)!==s&&(s===kt||!hf(r,o,i))?Nu(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,s,c):Nu(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=Lw(t,r,o);if(!c)return Nu(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>TB&&(this.allowRedirects=!1));let f=new Hc(o,l,Object.freeze(Z({},this.urlTree.queryParams)),this.urlTree.fragment,uw(r),Co(r),r.component??r._loadedComponent??null,r,dw(r)),p=cf(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let v=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,d,f,e);return this.applyRedirects.lineralizeSegments(r,v).pipe(mn(g=>this.processSegment(e,i,t,g.concat(h),s,!1,a)))}matchSegmentAgainstRoute(e,t,i,r,o,s){let a=yB(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),a.pipe(Dn(c=>c.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Dn(({routes:l})=>{let u=i._loadedInjector??e,{parameters:d,consumedSegments:h,remainingSegments:f}=c,p=new Hc(h,d,Object.freeze(Z({},this.urlTree.queryParams)),this.urlTree.fragment,uw(i),Co(i),i.component??i._loadedComponent??null,i,dw(i)),v=cf(p,s,this.paramsInheritanceStrategy);p.params=Object.freeze(v.params),p.data=Object.freeze(v.data);let{segmentGroup:g,slicedSegments:m}=lw(t,h,f,l);if(m.length===0&&g.hasChildren())return this.processChildren(u,l,g,p).pipe(Pe(w=>new Vr(p,w)));if(l.length===0&&m.length===0)return Ae(new Vr(p,[]));let C=Co(i)===o;return this.processSegment(u,l,g,m,C?kt:o,!0,p).pipe(Pe(w=>new Vr(p,w instanceof Vr?[w]:[])))}))):Nu(t)))}getChildConfig(e,t,i){return t.children?Ae({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Ae({routes:t._loadedRoutes,injector:t._loadedInjector}):pB(e,t,i,this.urlSerializer).pipe(mn(r=>r?this.configLoader.loadChildren(e,t).pipe(Bn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):vB(t))):Ae({routes:[],injector:e})}};function EB(n){n.sort((e,t)=>e.value.outlet===kt?-1:t.value.outlet===kt?1:e.value.outlet.localeCompare(t.value.outlet))}function DB(n){let e=n.value.routeConfig;return e&&e.path===""}function Fw(n){let e=[],t=new Set;for(let i of n){if(!DB(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=Fw(i.children);e.push(new Vr(i.value,r))}return e.filter(i=>!t.has(i))}function uw(n){return n.data||{}}function dw(n){return n.resolve||{}}function zB(n,e,t,i,r,o){return mn(s=>CB(n,e,t,i,s.extractedUrl,r,o).pipe(Pe(({state:a,tree:c})=>lt(Z({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function AB(n,e){return mn(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Ae(t);let o=new Set(r.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of Vw(c))s.add(l);let a=0;return ln(s).pipe(Go(c=>o.has(c)?IB(c,i,n,e):(c.data=cf(c,c.parent,n).resolve,Ae(void 0))),Bn(()=>a++),tu(1),mn(c=>a===s.size?Ae(t):fi))})}function Vw(n){let e=n.children.map(t=>Vw(t)).flat();return[n,...e]}function IB(n,e,t,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!Aw(r)&&(o[sh]=r.title),PB(o,n,e,i).pipe(Pe(s=>(n._resolvedData=s,n.data=cf(n,n.parent,t).resolve,null)))}function PB(n,e,t,i){let r=i5(n);if(r.length===0)return Ae({});let o={};return ln(r).pipe(mn(s=>RB(n[s],e,t,i).pipe(Es(),Bn(a=>{if(a instanceof Yu)throw lf(new Ia,a);o[s]=a}))),tu(1),Pe(()=>o),po(s=>Nw(s)?fi:Jl(s)))}function RB(n,e,t,i){let r=ah(e)??i,o=Gu(n,r),s=o.resolve?o.resolve(e,t):fr(r,()=>o(e,t));return ka(s)}function t5(n){return Dn(e=>{let t=n(e);return t?ln(t).pipe(Pe(()=>e)):Ae(e)})}var b5=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===kt);return i}getResolvedTitleForRoute(t){return t.data[sh]}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:()=>T(Hw),providedIn:"root"})}return n})(),Hw=(()=>{class n extends b5{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||n)(Me(rw))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jc=new de("",{providedIn:"root",factory:()=>({})}),Gc=new de(""),ff=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=T(wS);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ae(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=ka(t.loadComponent()).pipe(Pe(Uw),Bn(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),mo(()=>{this.componentLoaders.delete(t)})),r=new ql(i,()=>new ce).pipe($l());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Ae({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=Bw(i,this.compiler,t,this.onLoadEndListener).pipe(mo(()=>{this.childrenLoaders.delete(i)})),s=new ql(o,()=>new ce).pipe($l());return this.childrenLoaders.set(i,s),s}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Bw(n,e,t,i){return ka(n.loadChildren()).pipe(Pe(Uw),mn(r=>r instanceof Cg||Array.isArray(r)?Ae(r):ln(e.compileModuleAsync(r))),Pe(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(t).injector,s=o.get(Gc,[],{optional:!0,self:!0}).flat()),{routes:s.map(_5),injector:o}}))}function kB(n){return n&&typeof n=="object"&&"default"in n}function Uw(n){return kB(n)?n.default:n}var pf=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:()=>T(NB),providedIn:"root"})}return n})(),NB=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),x5=new de(""),M5=new de("");function Yw(n,e,t){let i=n.get(M5),r=n.get(At);return n.get(_t).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=r.startViewTransition(()=>(o(),OB(n))),{onViewTransitionCreated:c}=i;return c&&fr(n,()=>c({transition:a,from:e,to:t})),s})}function OB(n){return new Promise(e=>{xo({read:()=>setTimeout(e)},{injector:n})})}var S5=new de(""),mf=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ce;transitionAbortSubject=new ce;configLoader=T(ff);environmentInjector=T(Jn);destroyRef=T(Nr);urlSerializer=T(Uc);rootContexts=T(Yc);location=T(ts);inputBindingEnabled=T(lh,{optional:!0})!==null;titleStrategy=T(b5);options=T(jc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=T(pf);createViewTransition=T(x5,{optional:!0});navigationErrorHandler=T(S5,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Ae(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=r=>this.events.next(new J2(r)),i=r=>this.events.next(new ef(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(lt(Z({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))}setupNavigations(t){return this.transitions=new Qt(null),this.transitions.pipe(xt(i=>i!==null),Dn(i=>{let r=!1,o=!1;return Ae(i).pipe(Dn(s=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",vr.SupersededByNewNavigation),fi;this.currentTransition=i,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?lt(Z({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&c!=="reload"){let l="";return this.events.next(new ss(s.id,this.urlSerializer.serialize(s.rawUrl),l,Vu.IgnoredSameUrlNavigation)),s.resolve(!1),fi}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Ae(s).pipe(Dn(l=>(this.events.next(new Ra(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?fi:Promise.resolve(l))),zB(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Bn(l=>{i.targetSnapshot=l.targetSnapshot,i.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=lt(Z({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let u=new Jd(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:u,source:d,restoredState:h,extras:f}=s,p=new Ra(l,this.urlSerializer.serialize(u),d,h);this.events.next(p);let v=Dw(this.rootComponentType).snapshot;return this.currentTransition=i=lt(Z({},s),{targetSnapshot:v,urlAfterRedirects:u,extras:lt(Z({},f),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=u,Ae(i)}else{let l="";return this.events.next(new ss(s.id,this.urlSerializer.serialize(s.extractedUrl),l,Vu.IgnoredByUrlHandlingStrategy)),s.resolve(!1),fi}}),Bn(s=>{let a=new X2(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Pe(s=>(this.currentTransition=i=lt(Z({},s),{guards:XH(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),i)),sB(this.environmentInjector,s=>this.events.next(s)),Bn(s=>{if(i.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw lf(this.urlSerializer,s.guardsResult);let a=new K2(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),xt(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",vr.GuardRejected),!1)),t5(s=>{if(s.guards.canActivateChecks.length!==0)return Ae(s).pipe(Bn(a=>{let c=new Z2(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Dn(a=>{let c=!1;return Ae(a).pipe(AB(this.paramsInheritanceStrategy,this.environmentInjector),Bn({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",vr.NoDataFromResolver)}}))}),Bn(a=>{let c=new Q2(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),t5(s=>{let a=c=>{let l=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(c.routeConfig).pipe(Bn(u=>{c.component=u}),Pe(()=>{})));for(let u of c.children)l.push(...a(u));return l};return jo(a(s.targetSnapshot.root)).pipe(ya(null),Ei(1))}),t5(()=>this.afterPreactivation()),Dn(()=>{let{currentSnapshot:s,targetSnapshot:a}=i,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?ln(c).pipe(Pe(()=>i)):Ae(i)}),Pe(s=>{let a=jH(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=i=lt(Z({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,i}),Bn(()=>{this.events.next(new eh)}),qH(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Ei(1),Bn({next:s=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new yr(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{r=!0}}),_e(this.transitionAbortSubject.pipe(Bn(s=>{throw s}))),mo(()=>{!r&&!o&&this.cancelNavigationTransition(i,"",vr.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),po(s=>{if(this.destroyed)return i.resolve(!1),fi;if(o=!0,kw(s))this.events.next(new rs(i.id,this.urlSerializer.serialize(i.extractedUrl),s.message,s.cancellationCode)),$H(s)?this.events.next(new Uu(s.url,s.navigationBehaviorOptions)):i.resolve(!1);else{let a=new Hu(i.id,this.urlSerializer.serialize(i.extractedUrl),s,i.targetSnapshot??void 0);try{let c=fr(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Yu){let{message:l,cancellationCode:u}=lf(this.urlSerializer,c);this.events.next(new rs(i.id,this.urlSerializer.serialize(i.extractedUrl),l,u)),this.events.next(new Uu(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(c)}}return fi}))}))}cancelNavigationTransition(t,i,r){let o=new rs(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function LB(n){return n!==W2}var jw=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:()=>T(FB),providedIn:"root"})}return n})(),df=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},FB=(()=>{class n extends df{static \u0275fac=(()=>{let t;return function(r){return(t||(t=qi(n)))(r||n)}})();static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Gw=(()=>{class n{urlSerializer=T(Uc);options=T(jc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=T(ts);urlHandlingStrategy=T(pf);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new os;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:i,targetBrowserUrl:r}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,i):i,s=r??o;return s instanceof os?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:i,initialUrl:r}){i&&t?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=t):this.rawUrlTree=r}routerState=Dw(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:()=>T(VB),providedIn:"root"})}return n})(),VB=(()=>{class n extends Gw{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{t(i.url,i.state,"popstate")})})}handleRouterEvent(t,i){t instanceof Ra?this.updateStateMemento():t instanceof ss?this.commitTransition(i):t instanceof Jd?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof eh?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof rs&&(t.code===vr.GuardRejected||t.code===vr.NoDataFromResolver)?this.restoreHistory(i):t instanceof Hu?this.restoreHistory(i,!0):t instanceof yr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:i,id:r}){let{replaceUrl:o,state:s}=i;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=Z(Z({},s),this.generateNgRouterState(r,a));this.location.replaceState(t,"",c)}else{let a=Z(Z({},s),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=qi(n)))(r||n)}})();static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gf(n,e){n.events.pipe(xt(t=>t instanceof yr||t instanceof rs||t instanceof Hu||t instanceof ss),Pe(t=>t instanceof yr||t instanceof ss?0:(t instanceof rs?t.code===vr.Redirect||t.code===vr.SupersededByNewNavigation:!1)?2:1),xt(t=>t!==2),Ei(1)).subscribe(()=>{e()})}var HB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},BB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},_r=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=T(Eg);stateManager=T(Gw);options=T(jc,{optional:!0})||{};pendingTasks=T(Ca);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=T(mf);urlSerializer=T(Uc);location=T(ts);urlHandlingStrategy=T(pf);_events=new ce;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=T(jw);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=T(Gc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!T(lh,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Kt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof rs&&i.code!==vr.Redirect&&i.code!==vr.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof yr)this.navigated=!0;else if(i instanceof Uu){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),c=Z({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||LB(r.source)},s);this.scheduleNavigation(a,W2,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}YB(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),W2,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i,r)=>{this.navigateToSyncWithBrowser(t,r,i)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let c=Z({},r);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(_5),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=Z(Z({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=r?r.snapshot:this.routerState.snapshot.root;d=ww(h)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),d=this.currentUrlTree.root}return Cw(d,t,u,l??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=Pa(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,W2,null,i)}navigate(t,i={skipLocationChange:!1}){return UB(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=Z({},HB):i===!1?r=Z({},BB):r=i,Pa(t))return ow(this.currentUrlTree,t,r);let o=this.parseUrl(t);return ow(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,h)=>{a=d,c=h});let u=this.pendingTasks.add();return gf(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function UB(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new se(4008,!1)}function YB(n){return!(n instanceof eh)&&!(n instanceof Uu)}var hh=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ce;constructor(t,i,r,o,s,a){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof yr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Pa(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,i,r,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||i||r||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let i=this.href===null?null:lM(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(t,i){let r=this.renderer,o=this.el.nativeElement;i!==null?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Pa(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(i){return new(i||n)(Y(_r),Y(as),Qm("tabindex"),Y(Mn),Y(Je),Y(wo))};static \u0275dir=Oe({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,r){i&1&&We("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),i&2&&fn("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",fe],skipLocationChange:[2,"skipLocationChange","skipLocationChange",fe],replaceUrl:[2,"replaceUrl","replaceUrl",fe],routerLink:"routerLink"},features:[$e]})}return n})();var dh=class{};var Ww=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,i,r,o){this.router=t,this.injector=i,this.preloadingStrategy=r,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(xt(t=>t instanceof yr),Go(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){let r=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Id(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ln(r).pipe(pa())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;i.loadChildren&&i.canLoad===void 0?r=this.loader.loadChildren(t,i):r=Ae(null);let o=r.pipe(mn(s=>s===null?Ae(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(i.loadComponent&&!i._loadedComponent){let s=this.loader.loadComponent(i);return ln([o,s]).pipe(pa())}else return o})}static \u0275fac=function(i){return new(i||n)(Me(_r),Me(Jn),Me(dh),Me(ff))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$w=new de(""),jB=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,i,r,o,s={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ra?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof yr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ss&&t.code===Vu.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Bu&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Bu(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(i){FM()};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();function C5(n,...e){return hr([{provide:Gc,multi:!0,useValue:n},[],{provide:as,useFactory:qw,deps:[_r]},{provide:M2,multi:!0,useFactory:Xw},e.map(t=>t.\u0275providers)])}function qw(n){return n.routerState.root}function fh(n,e){return{\u0275kind:n,\u0275providers:e}}function Xw(){let n=T(Ln);return e=>{let t=n.get(no);if(e!==t.components[0])return;let i=n.get(_r),r=n.get(Kw);n.get(T5)===1&&i.initialNavigation(),n.get(Jw,null,Lt.Optional)?.setUpPreloading(),n.get($w,null,Lt.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var Kw=new de("",{factory:()=>new ce}),T5=new de("",{providedIn:"root",factory:()=>1});function Zw(){let n=[{provide:T5,useValue:0},Dg(()=>{let e=T(Ln);return e.get(Lg,Promise.resolve()).then(()=>new Promise(i=>{let r=e.get(_r),o=e.get(Kw);gf(r,()=>{i(!0)}),e.get(mf).afterPreactivation=()=>(i(!0),o.closed?Ae(void 0):o),r.initialNavigation()}))})];return fh(2,n)}function Qw(){let n=[Dg(()=>{T(_r).setUpLocationChangeListener()}),{provide:T5,useValue:2}];return fh(3,n)}var Jw=new de("");function eC(n){return fh(0,[{provide:Jw,useExisting:Ww},{provide:dh,useExisting:n}])}function tC(){return fh(8,[v5,{provide:lh,useExisting:v5}])}function nC(n){bo("NgRouterViewTransitions");let e=[{provide:x5,useValue:Yw},{provide:M5,useValue:Z({skipNextTransition:!!n?.skipInitialTransition},n)}];return fh(9,e)}var iC=[ts,{provide:Uc,useClass:Ia},_r,Yc,{provide:as,useFactory:qw,deps:[_r]},ff,[]],E5=(()=>{class n{constructor(){}static forRoot(t,i){return{ngModule:n,providers:[iC,[],{provide:Gc,multi:!0,useValue:t},[],i?.errorHandler?{provide:S5,useValue:i.errorHandler}:[],{provide:jc,useValue:i||{}},i?.useHash?WB():$B(),GB(),i?.preloadingStrategy?eC(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?qB(i):[],i?.bindToComponentInputs?tC().\u0275providers:[],i?.enableViewTransitions?nC().\u0275providers:[],XB()]}}static forChild(t){return{ngModule:n,providers:[{provide:Gc,multi:!0,useValue:t}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({})}return n})();function GB(){return{provide:$w,useFactory:()=>{let n=T(OS),e=T(_t),t=T(jc),i=T(mf),r=T(Uc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new jB(r,i,n,e,t)}}}function WB(){return{provide:wo,useClass:Fg}}function $B(){return{provide:wo,useClass:D2}}function qB(n){return[n.initialNavigation==="disabled"?Qw().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Zw().\u0275providers:[]]}var w5=new de("");function XB(){return[{provide:w5,useFactory:Xw},{provide:M2,multi:!0,useExisting:w5}]}var wt=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(wt||{}),oo="*";function Oi(n,e){return{type:wt.Trigger,name:n,definitions:e,options:{}}}function en(n,e=null){return{type:wt.Animate,styles:e,timings:n}}function rC(n,e=null){return{type:wt.Sequence,steps:n,options:e}}function Ue(n){return{type:wt.Style,styles:n,offset:null}}function rr(n,e,t){return{type:wt.State,name:n,styles:e,options:t}}function on(n,e,t=null){return{type:wt.Transition,expr:n,animation:e,options:t}}function vf(n,e,t=null){return{type:wt.Query,selector:n,animation:e,options:t}}function yf(n,e){return{type:wt.Stagger,timings:n,animation:e}}var cs=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Wc=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,i=0,r=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){let e=this.players.reduce((t,i)=>t===null||i.totalTime>t.totalTime?i:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Wu="!";function oC(n){return new se(3e3,!1)}function ZB(){return new se(3100,!1)}function QB(){return new se(3101,!1)}function JB(n){return new se(3001,!1)}function eU(n){return new se(3003,!1)}function tU(n){return new se(3004,!1)}function aC(n,e){return new se(3005,!1)}function cC(){return new se(3006,!1)}function lC(){return new se(3007,!1)}function uC(n,e){return new se(3008,!1)}function dC(n){return new se(3002,!1)}function hC(n,e,t,i,r){return new se(3010,!1)}function fC(){return new se(3011,!1)}function pC(){return new se(3012,!1)}function mC(){return new se(3200,!1)}function gC(){return new se(3202,!1)}function vC(){return new se(3013,!1)}function yC(n){return new se(3014,!1)}function _C(n){return new se(3015,!1)}function bC(n){return new se(3016,!1)}function xC(n,e){return new se(3404,!1)}function nU(n){return new se(3502,!1)}function MC(n){return new se(3503,!1)}function SC(){return new se(3300,!1)}function wC(n){return new se(3504,!1)}function CC(n){return new se(3301,!1)}function TC(n,e){return new se(3302,!1)}function EC(n){return new se(3303,!1)}function DC(n,e){return new se(3400,!1)}function zC(n){return new se(3401,!1)}function AC(n){return new se(3402,!1)}function IC(n,e){return new se(3505,!1)}function Vs(n){switch(n.length){case 0:return new cs;case 1:return n[0];default:return new Wc(n)}}function I5(n,e,t=new Map,i=new Map){let r=[],o=[],s=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),u=l==s,d=u&&a||new Map;c.forEach((h,f)=>{let p=f,v=h;if(f!=="offset")switch(p=n.normalizePropertyName(p,r),v){case Wu:v=t.get(f);break;case oo:v=i.get(f);break;default:v=n.normalizeStyleValue(f,p,v,r);break}d.set(p,v)}),u||o.push(d),a=d,s=l}),r.length)throw nU(r);return o}function _f(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&D5(t,"start",n)));break;case"done":n.onDone(()=>i(t&&D5(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&D5(t,"destroy",n)));break}}function D5(n,e,t){let i=t.totalTime,r=!!t.disabled,o=bf(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,i??n.totalTime,r),s=n._data;return s!=null&&(o._data=s),o}function bf(n,e,t,i,r="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function br(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function P5(n){let e=n.indexOf(":"),t=n.substring(1,e),i=n.slice(e+1);return[t,i]}var iU=typeof document>"u"?null:document.documentElement;function xf(n){let e=n.parentNode||n.host||null;return e===iU?null:e}function rU(n){return n.substring(1,6)=="ebkit"}var $c=null,sC=!1;function PC(n){$c||($c=oU()||{},sC=$c.style?"WebkitAppearance"in $c.style:!1);let e=!0;return $c.style&&!rU(n)&&(e=n in $c.style,!e&&sC&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in $c.style)),e}function oU(){return typeof document<"u"?document.body:null}function R5(n,e){for(;e;){if(e===n)return!0;e=xf(e)}return!1}function k5(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let i=n.querySelector(e);return i?[i]:[]}var sU=1e3,N5="{{",aU="}}",O5="ng-enter",Mf="ng-leave",ph="ng-trigger",mh=".ng-trigger",L5="ng-animating",Sf=".ng-animating";function ls(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:z5(parseFloat(e[1]),e[2])}function z5(n,e){switch(e){case"s":return n*sU;default:return n}}function gh(n,e,t){return n.hasOwnProperty("duration")?n:cU(n,e,t)}function cU(n,e,t){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,s="";if(typeof n=="string"){let a=n.match(i);if(a===null)return e.push(oC(n)),{duration:0,delay:0,easing:""};r=z5(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(o=z5(parseFloat(c),a[4]));let l=a[5];l&&(s=l)}else r=n;if(!t){let a=!1,c=e.length;r<0&&(e.push(ZB()),a=!0),o<0&&(e.push(QB()),a=!0),a&&e.splice(c,0,oC(n))}return{duration:r,delay:o,easing:s}}function RC(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function To(n,e,t){e.forEach((i,r)=>{let o=wf(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i})}function Na(n,e){e.forEach((t,i)=>{let r=wf(i);n.style[r]=""})}function $u(n){return Array.isArray(n)?n.length==1?n[0]:rC(n):n}function kC(n,e,t){let i=e.params||{},r=F5(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(JB(o))})}var A5=new RegExp(`${N5}\\s*(.+?)\\s*${aU}`,"g");function F5(n){let e=[];if(typeof n=="string"){let t;for(;t=A5.exec(n);)e.push(t[1]);A5.lastIndex=0}return e}function qu(n,e,t){let i=`${n}`,r=i.replace(A5,(o,s)=>{let a=e[s];return a==null&&(t.push(eU(s)),a=""),a.toString()});return r==i?n:r}var lU=/-+([a-z0-9])/g;function wf(n){return n.replace(lU,(...e)=>e[1].toUpperCase())}function NC(n,e){return n===0||e===0}function OC(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,Cf(n,a)))}}return e}function xr(n,e,t){switch(e.type){case wt.Trigger:return n.visitTrigger(e,t);case wt.State:return n.visitState(e,t);case wt.Transition:return n.visitTransition(e,t);case wt.Sequence:return n.visitSequence(e,t);case wt.Group:return n.visitGroup(e,t);case wt.Animate:return n.visitAnimate(e,t);case wt.Keyframes:return n.visitKeyframes(e,t);case wt.Style:return n.visitStyle(e,t);case wt.Reference:return n.visitReference(e,t);case wt.AnimateChild:return n.visitAnimateChild(e,t);case wt.AnimateRef:return n.visitAnimateRef(e,t);case wt.Query:return n.visitQuery(e,t);case wt.Stagger:return n.visitStagger(e,t);default:throw tU(e.type)}}function Cf(n,e){return window.getComputedStyle(n)[e]}var t7=(()=>{class n{validateStyleProperty(t){return PC(t)}containsElement(t,i){return R5(t,i)}getParentElement(t){return xf(t)}query(t,i,r){return k5(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,o,s,a=[],c){return new cs(r,o)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),Xc=class{static NOOP=new t7},Kc=class{};var uU=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Af=class extends Kc{normalizePropertyName(e,t){return wf(e)}normalizeStyleValue(e,t,i,r){let o="",s=i.toString().trim();if(uU.has(t)&&i!==0&&i!=="0")if(typeof i=="number")o="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(aC(e,i))}return s+o}};var If="*";function dU(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>hU(i,t,e)):t.push(n),t}function hU(n,e,t){if(n[0]==":"){let c=fU(n,t);if(typeof c=="function"){e.push(c);return}n=c}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return t.push(_C(n)),e;let r=i[1],o=i[2],s=i[3];e.push(LC(r,s));let a=r==If&&s==If;o[0]=="<"&&!a&&e.push(LC(s,r))}function fU(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(bC(n)),"* => *"}}var Tf=new Set(["true","1"]),Ef=new Set(["false","0"]);function LC(n,e){let t=Tf.has(n)||Ef.has(n),i=Tf.has(e)||Ef.has(e);return(r,o)=>{let s=n==If||n==r,a=e==If||e==o;return!s&&t&&typeof r=="boolean"&&(s=r?Tf.has(n):Ef.has(n)),!a&&i&&typeof o=="boolean"&&(a=o?Tf.has(e):Ef.has(e)),s&&a}}var $C=":self",pU=new RegExp(`s*${$C}s*,?`,"g");function qC(n,e,t,i){return new j5(n).build(e,t,i)}var FC="",j5=class{_driver;constructor(e){this._driver=e}build(e,t,i){let r=new G5(t);return this._resetContextStyleTimingState(r),xr(this,$u(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=FC,e.collectedStyles=new Map,e.collectedStyles.set(FC,new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(cC()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==wt.State){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,o.push(this.visitState(c,t))}),c.name=l}else if(a.type==wt.Transition){let c=this.visitTransition(a,t);i+=c.queryCount,r+=c.depCount,s.push(c)}else t.errors.push(lC())}),{type:wt.Trigger,name:e.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(e,t){let i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{F5(c).forEach(l=>{s.hasOwnProperty(l)||o.add(l)})})}),o.size&&t.errors.push(uC(e.name,[...o.values()]))}return{type:wt.State,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let i=xr(this,$u(e.animation),t),r=dU(e.expr,t.errors);return{type:wt.Transition,matchers:r,animation:i,queryCount:t.queryCount,depCount:t.depCount,options:qc(e.options)}}visitSequence(e,t){return{type:wt.Sequence,steps:e.steps.map(i=>xr(this,i,t)),options:qc(e.options)}}visitGroup(e,t){let i=t.currentTime,r=0,o=e.steps.map(s=>{t.currentTime=i;let a=xr(this,s,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:wt.Group,steps:o,options:qc(e.options)}}visitAnimate(e,t){let i=yU(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:Ue({});if(o.type==wt.Keyframes)r=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;let l={};i.easing&&(l.easing=i.easing),s=Ue(l)}t.currentTime+=i.duration+i.delay;let c=this.visitStyle(s,t);c.isEmptyStep=a,r=c}return t.currentAnimateTimings=null,{type:wt.Animate,timings:i,style:r,options:null}}visitStyle(e,t){let i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===oo?i.push(a):t.errors.push(dC(a)):i.push(new Map(Object.entries(a)));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let c of a.values())if(c.toString().indexOf(N5)>=0){o=!0;break}}}),{type:wt.Style,styles:i,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let i=t.currentAnimateTimings,r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,c)=>{let l=t.collectedStyles.get(t.currentQuerySelector),u=l.get(c),d=!0;u&&(o!=r&&o>=u.startTime&&r<=u.endTime&&(t.errors.push(hC(c,u.startTime,u.endTime,o,r)),d=!1),o=u.startTime),d&&l.set(c,{startTime:o,endTime:r}),t.options&&kC(a,t.options,t.errors)})})}visitKeyframes(e,t){let i={type:wt.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(fC()),i;let r=1,o=0,s=[],a=!1,c=!1,l=0,u=e.steps.map(m=>{let C=this._makeStyleAst(m,t),w=C.offset!=null?C.offset:vU(C.styles),y=0;return w!=null&&(o++,y=C.offset=w),c=c||y<0||y>1,a=a||y<l,l=y,s.push(y),C});c&&t.errors.push(pC()),a&&t.errors.push(mC());let d=e.steps.length,h=0;o>0&&o<d?t.errors.push(gC()):o==0&&(h=r/(d-1));let f=d-1,p=t.currentTime,v=t.currentAnimateTimings,g=v.duration;return u.forEach((m,C)=>{let w=h>0?C==f?1:h*C:s[C],y=w*g;t.currentTime=p+v.delay+y,v.duration=y,this._validateStyleAst(m,t),m.offset=w,i.styles.push(m)}),i}visitReference(e,t){return{type:wt.Reference,animation:xr(this,$u(e.animation),t),options:qc(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:wt.AnimateChild,options:qc(e.options)}}visitAnimateRef(e,t){return{type:wt.AnimateRef,animation:this.visitReference(e.animation,t),options:qc(e.options)}}visitQuery(e,t){let i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[o,s]=mU(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,br(t.collectedStyles,t.currentQuerySelector,new Map);let a=xr(this,$u(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:wt.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:qc(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(vC());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:gh(e.timings,t.errors,!0);return{type:wt.Stagger,animation:xr(this,$u(e.animation),t),timings:i,options:null}}};function mU(n){let e=!!n.split(/\s*,\s*/).find(t=>t==$C);return e&&(n=n.replace(pU,"")),n=n.replace(/@\*/g,mh).replace(/@\w+/g,t=>mh+"-"+t.slice(1)).replace(/:animating/g,Sf),[n,e]}function gU(n){return n?Z({},n):null}var G5=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function vU(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function yU(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=gh(n,e).duration;return V5(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=V5(0,0,"");return o.dynamic=!0,o.strValue=t,o}let r=gh(t,e);return V5(r.duration,r.delay,r.easing)}function qc(n){return n?(n=Z({},n),n.params&&(n.params=gU(n.params))):n={},n}function V5(n,e,t){return{duration:n,delay:e,easing:t}}function n7(n,e,t,i,r,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}var yh=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},_U=1,bU=":enter",xU=new RegExp(bU,"g"),MU=":leave",SU=new RegExp(MU,"g");function XC(n,e,t,i,r,o=new Map,s=new Map,a,c,l=[]){return new W5().buildKeyframes(n,e,t,i,r,o,s,a,c,l)}var W5=class{buildKeyframes(e,t,i,r,o,s,a,c,l,u=[]){l=l||new yh;let d=new $5(e,t,l,r,o,u,[]);d.options=c;let h=c.delay?ls(c.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([s],null,d.errors,c),xr(this,i,d);let f=d.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let v=f.length-1;v>=0;v--){let g=f[v];if(g.element===t){p=g;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,c)}return f.length?f.map(p=>p.buildKeyframes()):[n7(t,[],[],[],0,h,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let i=t.subInstructions.get(t.element);if(i){let r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(let r of e){let o=r?.delay;if(o){let s=typeof o=="number"?o:ls(qu(o,r?.params??{},t.errors));i.delayNextStep(s)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime,s=i.duration!=null?ls(i.duration):null,a=i.delay!=null?ls(i.delay):null;return s!==0&&e.forEach(c=>{let l=t.appendInstructionToTimeline(c,s,a);o=Math.max(o,l.duration+l.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),xr(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let i=t.subContextCount,r=t,o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==wt.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Pf);let s=ls(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>xr(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let i=[],r=t.currentTimeline.currentTime,o=e.options&&e.options.delay?ls(e.options.delay):0;e.steps.forEach(s=>{let a=t.createSubContext(e.options);o&&a.delayNextStep(o),xr(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let i=e.strValue,r=t.params?qu(i,t.params,t.errors):i;return gh(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());let o=e.style;o.type==wt.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*o),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){let i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?ls(r.delay):0;o&&(t.previousNode.type===wt.Style||i==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Pf);let s=i,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{t.currentQueryIndex=u;let d=t.createSubContext(e.options,l);o&&d.delayNextStep(o),l===t.element&&(c=d.currentTimeline),xr(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let h=d.currentTimeline.currentTime;s=Math.max(s,h)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let i=t.parentContext,r=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1),c=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=a-c;break;case"full":c=i.currentStaggerTime;break}let u=t.currentTimeline;c&&u.delayNextStep(c);let d=u.currentTime;xr(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}},Pf={},$5=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Pf;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,i,r,o,s,a,c){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=c||new Rf(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=ls(i.duration)),i.delay!=null&&(r.delay=ls(i.delay));let o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=qu(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){let r=t||this.element,o=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=Pf,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new q5(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(xU,"."+this._enterClassName),e=e.replace(SU,"."+this._leaveClassName);let c=i!=1,l=this._driver.query(this.element,e,c);i!==0&&(l=i<0?l.slice(l.length+i,l.length):l.slice(0,i)),a.push(...l)}return!o&&a.length==0&&s.push(yC(t)),a}},Rf=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=_U,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||oo),this._currentKeyframe.set(t,oo);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);let o=r&&r.params||{},s=wU(e,this._globalTimelineStyles);for(let[a,c]of s){let l=qu(c,o,i);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??oo),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{let r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,c)=>{let l=new Map([...this._backFill,...a]);l.forEach((u,d)=>{u===Wu?e.add(d):u===oo&&t.add(d)}),i||l.set("offset",c/this.duration),r.push(l)});let o=[...e.values()],s=[...t.values()];if(i){let a=r[0],c=new Map(a);a.set("offset",0),c.set("offset",1),r=[a,c]}return n7(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}},q5=class extends Rf{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,i,r,o,s,a=!1){super(e,t,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],s=i+t,a=t/s,c=new Map(e[0]);c.set("offset",0),o.push(c);let l=new Map(e[0]);l.set("offset",VC(a)),o.push(l);let u=e.length-1;for(let d=1;d<=u;d++){let h=new Map(e[d]),f=h.get("offset"),p=t+f*i;h.set("offset",VC(p/s)),o.push(h)}i=s,t=0,r="",e=o}return n7(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}};function VC(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function wU(n,e){let t=new Map,i;return n.forEach(r=>{if(r==="*"){i??=e.keys();for(let o of i)t.set(o,oo)}else for(let[o,s]of r)t.set(o,s)}),t}function HC(n,e,t,i,r,o,s,a,c,l,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:d,errors:h}}var H5={},kf=class{_triggerName;ast;_stateStyles;constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return CU(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,s,a,c,l,u){let d=[],h=this.ast.options&&this.ast.options.params||H5,f=a&&a.params||H5,p=this.buildStyles(i,f,d),v=c&&c.params||H5,g=this.buildStyles(r,v,d),m=new Set,C=new Map,w=new Map,y=r==="void",z={params:KC(v,h),delay:this.ast.options?.delay},D=u?[]:XC(e,t,this.ast.animation,o,s,p,g,z,l,d),x=0;return D.forEach(I=>{x=Math.max(I.duration+I.delay,x)}),d.length?HC(t,this._triggerName,i,r,y,p,g,[],[],C,w,x,d):(D.forEach(I=>{let S=I.element,M=br(C,S,new Set);I.preStyleProps.forEach(J=>M.add(J));let A=br(w,S,new Set);I.postStyleProps.forEach(J=>A.add(J)),S!==t&&m.add(S)}),HC(t,this._triggerName,i,r,y,p,g,D,[...m.values()],C,w,x))}};function CU(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}function KC(n,e){let t=Z({},e);return Object.entries(n).forEach(([i,r])=>{r!=null&&(t[i]=r)}),t}var X5=class{styles;defaultParams;normalizer;constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){let i=new Map,r=KC(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=qu(s,r,t));let c=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,c,s,t),i.set(a,s)})}),i}};function TU(n,e,t){return new K5(n,e,t)}var K5=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,t.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new X5(r.style,o,i))}),BC(this.states,"true","1"),BC(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new kf(e,r,this.states))}),this.fallbackTransition=EU(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(s=>s.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}};function EU(n,e,t){let i=[(s,a)=>!0],r={type:wt.Sequence,steps:[],options:null},o={type:wt.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new kf(n,o,e)}function BC(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var DU=new yh,Z5=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i}register(e,t){let i=[],r=[],o=qC(this._driver,t,i,r);if(i.length)throw MC(i);this._animations.set(e,o)}_buildPlayer(e,t,i){let r=e.element,o=I5(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){let r=[],o=this._animations.get(e),s,a=new Map;if(o?(s=XC(this._driver,t,o,O5,Mf,new Map,new Map,i,DU,r),s.forEach(u=>{let d=br(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(r.push(SC()),s=[]),r.length)throw wC(r);a.forEach((u,d)=>{u.forEach((h,f)=>{u.set(f,this._driver.computeStyle(d,f,oo))})});let c=s.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),l=Vs(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw CC(e);return t}listen(e,t,i,r){let o=bf(t,"","","");return _f(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let s=r[0]||{};this.create(e,t,s);return}let o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},UC="ng-animate-queued",zU=".ng-animate-queued",B5="ng-animate-disabled",AU=".ng-animate-disabled",IU="ng-star-inserted",PU=".ng-star-inserted",RU=[],ZC={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},kU={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Eo="__ng_removed",_h=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=OU(r),i){let o=e,{value:s}=o,a=nd(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let i=this.options.params;Object.keys(t).forEach(r=>{i[r]==null&&(i[r]=t[r])})}}},vh="void",U5=new _h(vh),Q5=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this._hostClassName="ng-tns-"+e,so(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw TC(i,t);if(i==null||i.length==0)throw EC(t);if(!LU(i))throw DC(i,t);let o=br(this._elementListeners,e,[]),s={name:t,phase:i,callback:r};o.push(s);let a=br(this._engine.statesByElement,e,new Map);return a.has(t)||(so(e,ph),so(e,ph+"-"+t),a.set(t,U5)),()=>{this._engine.afterFlush(()=>{let c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw zC(e);return t}trigger(e,t,i,r=!0){let o=this._getTrigger(t),s=new bh(this.id,t,e),a=this._engine.statesByElement.get(e);a||(so(e,ph),so(e,ph+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),l=new _h(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=U5),!(l.value===vh)&&c.value===l.value){if(!HU(c.params,l.params)){let v=[],g=o.matchStyles(c.value,c.params,v),m=o.matchStyles(l.value,l.params,v);v.length?this._engine.reportError(v):this._engine.afterFlush(()=>{Na(e,g),To(e,m)})}return}let h=br(this._engine.playersByElement,e,[]);h.forEach(v=>{v.namespaceId==this.id&&v.triggerName==t&&v.queued&&v.destroy()});let f=o.matchTransition(c.value,l.value,e,l.params),p=!1;if(!f){if(!r)return;f=o.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:c,toState:l,player:s,isFallbackTransition:p}),p||(so(e,UC),s.onStart(()=>{Xu(e,UC)})),s.onDone(()=>{let v=this.players.indexOf(s);v>=0&&this.players.splice(v,1);let g=this._engine.playersByElement.get(e);if(g){let m=g.indexOf(s);m>=0&&g.splice(m,1)}}),this.players.push(s),h.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let i=this._engine.driver.query(e,mh,!0);i.forEach(r=>{if(r[Eo])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((c,l)=>{if(s.set(l,c.value),this._triggers.has(l)){let u=this.trigger(e,l,vh,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),i&&Vs(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){let r=new Set;t.forEach(o=>{let s=o.name;if(r.has(s))return;r.add(s);let c=this._triggers.get(s).fallbackTransition,l=i.get(s)||U5,u=new _h(vh),d=new bh(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:c,fromState:l,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){let o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{let o=e[Eo];(!o||o===ZC)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){so(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){let c=bf(o,i.triggerName,i.fromState.value,i.toState.value);c._data=e,_f(i.player,a.phase,c,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{let o=i.transition.ast.depCount,s=r.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},J5=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){let i=new Q5(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){let c=r.get(a);if(c){let l=i.indexOf(c);i.splice(l+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}}return t}trigger(e,t,i,r){if(Df(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!Df(t))return;let o=t[Eo];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),so(e,B5)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Xu(e,B5))}removeNode(e,t,i){if(Df(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[Eo]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return Df(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,mh,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,Sf,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Vs(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[Eo];if(t&&t.setForRemoval){if(e[Eo]=ZC,t.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(B5)&&this.markElementAsDisabled(e,!1),this.driver.query(e,AU,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];so(r,IU)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],t.length?Vs(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw AC(e)}_flushAnimations(e,t){let i=new yh,r=[],o=new Map,s=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(L=>{u.add(L);let B=this.driver.query(L,zU,!0);for(let F=0;F<B.length;F++)u.add(B[F])});let d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=GC(h,this.collectedEnterElements),p=new Map,v=0;f.forEach((L,B)=>{let F=O5+v++;p.set(B,F),L.forEach(ae=>so(ae,F))});let g=[],m=new Set,C=new Set;for(let L=0;L<this.collectedLeaveElements.length;L++){let B=this.collectedLeaveElements[L],F=B[Eo];F&&F.setForRemoval&&(g.push(B),m.add(B),F.hasAnimation?this.driver.query(B,PU,!0).forEach(ae=>m.add(ae)):C.add(B))}let w=new Map,y=GC(h,Array.from(m));y.forEach((L,B)=>{let F=Mf+v++;w.set(B,F),L.forEach(ae=>so(ae,F))}),e.push(()=>{f.forEach((L,B)=>{let F=p.get(B);L.forEach(ae=>Xu(ae,F))}),y.forEach((L,B)=>{let F=w.get(B);L.forEach(ae=>Xu(ae,F))}),g.forEach(L=>{this.processLeaveNode(L)})});let z=[],D=[];for(let L=this._namespaceList.length-1;L>=0;L--)this._namespaceList[L].drainQueuedTransitions(t).forEach(F=>{let ae=F.player,be=F.element;if(z.push(ae),this.collectedEnterElements.length){let ue=be[Eo];if(ue&&ue.setForMove){if(ue.previousTriggersValues&&ue.previousTriggersValues.has(F.triggerName)){let Xe=ue.previousTriggersValues.get(F.triggerName),Ve=this.statesByElement.get(F.element);if(Ve&&Ve.has(F.triggerName)){let gt=Ve.get(F.triggerName);gt.value=Xe,Ve.set(F.triggerName,gt)}}ae.destroy();return}}let Ne=!d||!this.driver.containsElement(d,be),tt=w.get(be),tn=p.get(be),st=this._buildInstruction(F,i,tn,tt,Ne);if(st.errors&&st.errors.length){D.push(st);return}if(Ne){ae.onStart(()=>Na(be,st.fromStyles)),ae.onDestroy(()=>To(be,st.toStyles)),r.push(ae);return}if(F.isFallbackTransition){ae.onStart(()=>Na(be,st.fromStyles)),ae.onDestroy(()=>To(be,st.toStyles)),r.push(ae);return}let ne=[];st.timelines.forEach(ue=>{ue.stretchStartingKeyframe=!0,this.disabledNodes.has(ue.element)||ne.push(ue)}),st.timelines=ne,i.append(be,st.timelines);let we={instruction:st,player:ae,element:be};s.push(we),st.queriedElements.forEach(ue=>br(a,ue,[]).push(ae)),st.preStyleProps.forEach((ue,Xe)=>{if(ue.size){let Ve=c.get(Xe);Ve||c.set(Xe,Ve=new Set),ue.forEach((gt,Vn)=>Ve.add(Vn))}}),st.postStyleProps.forEach((ue,Xe)=>{let Ve=l.get(Xe);Ve||l.set(Xe,Ve=new Set),ue.forEach((gt,Vn)=>Ve.add(Vn))})});if(D.length){let L=[];D.forEach(B=>{L.push(IC(B.triggerName,B.errors))}),z.forEach(B=>B.destroy()),this.reportError(L)}let x=new Map,I=new Map;s.forEach(L=>{let B=L.element;i.has(B)&&(I.set(B,B),this._beforeAnimationBuild(L.player.namespaceId,L.instruction,x))}),r.forEach(L=>{let B=L.element;this._getPreviousPlayers(B,!1,L.namespaceId,L.triggerName,null).forEach(ae=>{br(x,B,[]).push(ae),ae.destroy()})});let S=g.filter(L=>WC(L,c,l)),M=new Map;jC(M,this.driver,C,l,oo).forEach(L=>{WC(L,c,l)&&S.push(L)});let J=new Map;f.forEach((L,B)=>{jC(J,this.driver,new Set(L),c,Wu)}),S.forEach(L=>{let B=M.get(L),F=J.get(L);M.set(L,new Map([...B?.entries()??[],...F?.entries()??[]]))});let K=[],Q=[],ee={};s.forEach(L=>{let{element:B,player:F,instruction:ae}=L;if(i.has(B)){if(u.has(B)){F.onDestroy(()=>To(B,ae.toStyles)),F.disabled=!0,F.overrideTotalTime(ae.totalTime),r.push(F);return}let be=ee;if(I.size>1){let tt=B,tn=[];for(;tt=tt.parentNode;){let st=I.get(tt);if(st){be=st;break}tn.push(tt)}tn.forEach(st=>I.set(st,be))}let Ne=this._buildAnimation(F.namespaceId,ae,x,o,J,M);if(F.setRealPlayer(Ne),be===ee)K.push(F);else{let tt=this.playersByElement.get(be);tt&&tt.length&&(F.parentPlayer=Vs(tt)),r.push(F)}}else Na(B,ae.fromStyles),F.onDestroy(()=>To(B,ae.toStyles)),Q.push(F),u.has(B)&&r.push(F)}),Q.forEach(L=>{let B=o.get(L.element);if(B&&B.length){let F=Vs(B);L.setRealPlayer(F)}}),r.forEach(L=>{L.parentPlayer?L.syncPlayerEvents(L.parentPlayer):L.destroy()});for(let L=0;L<g.length;L++){let B=g[L],F=B[Eo];if(Xu(B,Mf),F&&F.hasAnimation)continue;let ae=[];if(a.size){let Ne=a.get(B);Ne&&Ne.length&&ae.push(...Ne);let tt=this.driver.query(B,Sf,!0);for(let tn=0;tn<tt.length;tn++){let st=a.get(tt[tn]);st&&st.length&&ae.push(...st)}}let be=ae.filter(Ne=>!Ne.destroyed);be.length?FU(this,B,be):this.processLeaveNode(B)}return g.length=0,K.forEach(L=>{this.players.push(L),L.onDone(()=>{L.destroy();let B=this.players.indexOf(L);this.players.splice(B,1)}),L.play()}),K}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let s=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let c=!o||o==vh;a.forEach(l=>{l.queued||!c&&l.triggerName!=r||s.push(l)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,t,i){let r=t.triggerName,o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:r;for(let c of t.timelines){let l=c.element,u=l!==o,d=br(i,l,[]);this._getPreviousPlayers(l,u,s,a,t.toState).forEach(f=>{let p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}Na(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,s){let a=t.triggerName,c=t.element,l=[],u=new Set,d=new Set,h=t.timelines.map(p=>{let v=p.element;u.add(v);let g=v[Eo];if(g&&g.removedBeforeQueried)return new cs(p.duration,p.delay);let m=v!==c,C=VU((i.get(v)||RU).map(x=>x.getRealPlayer())).filter(x=>{let I=x;return I.element?I.element===v:!1}),w=o.get(v),y=s.get(v),z=I5(this._normalizer,p.keyframes,w,y),D=this._buildPlayer(p,z,C);if(p.subTimeline&&r&&d.add(v),m){let x=new bh(e,a,v);x.setRealPlayer(D),l.push(x)}return D});l.forEach(p=>{br(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>NU(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>so(p,L5));let f=Vs(h);return f.onDestroy(()=>{u.forEach(p=>Xu(p,L5)),To(c,t.toStyles)}),d.forEach(p=>{br(r,p,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new cs(e.duration,e.delay)}},bh=class{namespaceId;triggerName;element;_player=new cs;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>_f(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){br(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function NU(n,e,t){let i=n.get(e);if(i){if(i.length){let r=i.indexOf(t);i.splice(r,1)}i.length==0&&n.delete(e)}return i}function OU(n){return n??null}function Df(n){return n&&n.nodeType===1}function LU(n){return n=="start"||n=="done"}function YC(n,e){let t=n.style.display;return n.style.display=e??"none",t}function jC(n,e,t,i,r){let o=[];t.forEach(c=>o.push(YC(c)));let s=[];i.forEach((c,l)=>{let u=new Map;c.forEach(d=>{let h=e.computeStyle(l,d,r);u.set(d,h),(!h||h.length==0)&&(l[Eo]=kU,s.push(l))}),n.set(l,u)});let a=0;return t.forEach(c=>YC(c,o[a++])),s}function GC(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let i=1,r=new Set(e),o=new Map;function s(a){if(!a)return i;let c=o.get(a);if(c)return c;let l=a.parentNode;return t.has(l)?c=l:r.has(l)?c=i:c=s(l),o.set(a,c),c}return e.forEach(a=>{let c=s(a);c!==i&&t.get(c).push(a)}),t}function so(n,e){n.classList?.add(e)}function Xu(n,e){n.classList?.remove(e)}function FU(n,e,t){Vs(t).onDone(()=>n.processLeaveNode(e))}function VU(n){let e=[];return QC(n,e),e}function QC(n,e){for(let t=0;t<n.length;t++){let i=n[t];i instanceof Wc?QC(i.players,e):e.push(i)}}function HU(n,e){let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){let o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function WC(n,e,t){let i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}var Ku=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,i){this._driver=t,this._normalizer=i,this._transitionEngine=new J5(e.body,t,i),this._timelineEngine=new Z5(e.body,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,r,o){let s=e+"-"+r,a=this._triggerCache[s];if(!a){let c=[],l=[],u=qC(this._driver,o,c,l);if(c.length)throw xC(r,c);a=TU(r,u,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if(i.charAt(0)=="@"){let[o,s]=P5(i),a=r;this._timelineEngine.command(o,t,s,a)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if(i.charAt(0)=="@"){let[s,a]=P5(i);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function BU(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=Y5(e[0]),e.length>1&&(i=Y5(e[e.length-1]))):e instanceof Map&&(t=Y5(e)),t||i?new UU(n,t,i):null}var UU=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&To(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(To(this._element,this._initialStyles),this._endStyles&&(To(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Na(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Na(this._element,this._endStyles),this._endStyles=null),To(this._element,this._initialStyles),this._state=3)}}return n})();function Y5(n){let e=null;return n.forEach((t,i)=>{YU(i)&&(e=e||new Map,e.set(i,t))}),e}function YU(n){return n==="display"||n==="position"}var Nf=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:Cf(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Of=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return R5(e,t)}getParentElement(e){return xf(e)}query(e,t,i){return k5(e,t,i)}computeStyle(e,t,i){return Cf(e,t)}animate(e,t,i,r,o,s=[]){let a=r==0?"both":"forwards",c={duration:i,delay:r,fill:a};o&&(c.easing=o);let l=new Map,u=s.filter(f=>f instanceof Nf);NC(i,r)&&u.forEach(f=>{f.currentSnapshot.forEach((p,v)=>l.set(v,p))});let d=RC(t).map(f=>new Map(f));d=OC(e,d,l);let h=BU(e,d);return new Nf(e,d,c,h)}};var zf="@",JC="@.disabled",Lf=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){t.charAt(0)==zf&&t==JC?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i,r){return this.delegate.listen(e,t,i,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},e7=class extends Lf{factory;constructor(e,t,i,r,o){super(t,i,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){t.charAt(0)==zf?t.charAt(1)=="."&&t==JC?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i,r){if(t.charAt(0)==zf){let o=jU(e),s=t.slice(1),a="";return s.charAt(0)!=zf&&([s,a]=GU(s)),this.engine.listen(this.namespaceId,o,s,a,c=>{let l=c._data||-1;this.factory.scheduleListenerCallback(l,i,c)})}return this.delegate.listen(e,t,i,r)}};function jU(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function GU(n){let e=n.indexOf("."),t=n.substring(0,e),i=n.slice(e+1);return[t,i]}var Ff=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,t.onRemovalComplete=(r,o)=>{o?.removeChild(null,r)}}createRenderer(e,t){let i="",r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let l=this._rendererCache,u=l.get(r);if(!u){let d=()=>l.delete(r);u=new Lf(i,r,this.engine,d),l.set(r,u)}return u}let o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(o,s,e,l.name,l)};return t.data.animation.forEach(a),new e7(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),r.push([t,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var $U=(()=>{class n extends Ku{constructor(t,i,r){super(t,i,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(i){return new(i||n)(Me(At),Me(Xc),Me(Kc))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();function qU(){return new Af}function XU(n,e,t){return new Ff(n,e,t)}var eT=[{provide:Kc,useFactory:qU},{provide:Ku,useClass:$U},{provide:Xn,useFactory:XU,deps:[Yd,Ku,_t]}],m4e=[{provide:Xc,useClass:t7},{provide:es,useValue:"NoopAnimations"},...eT],KU=[{provide:Xc,useFactory:()=>new Of},{provide:es,useFactory:()=>"BrowserAnimations"},...eT];function tT(){return bo("NgEagerAnimations"),[...KU]}function Zc(n){"@babel/helpers - typeof";return Zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zc(n)}function nT(n,e){if(Zc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(Zc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function iT(n){var e=nT(n,"string");return Zc(e)=="symbol"?e:e+""}function Br(n,e,t){return(e=iT(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var Ii=Math.round;function i7(n,e){let t=n.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],i=t.map(r=>parseFloat(r));for(let r=0;r<3;r+=1)i[r]=e(i[r]||0,t[r]||"",r);return t[3]?i[3]=t[3].includes("%")?i[3]/100:i[3]:i[3]=1,i}var rT=(n,e,t)=>t===0?n:n/100;function xh(n,e){let t=e||255;return n>t?t:n<0?0:n}var Qc=class n{constructor(e){Br(this,"isValid",!0),Br(this,"r",0),Br(this,"g",0),Br(this,"b",0),Br(this,"a",1),Br(this,"_h",void 0),Br(this,"_s",void 0),Br(this,"_l",void 0),Br(this,"_v",void 0),Br(this,"_max",void 0),Br(this,"_min",void 0),Br(this,"_brightness",void 0);function t(r){return r[0]in e&&r[1]in e&&r[2]in e}if(e)if(typeof e=="string"){let o=function(s){return r.startsWith(s)};var i=o;let r=e.trim();/^#?[A-F\d]{3,8}$/i.test(r)?this.fromHexString(r):o("rgb")?this.fromRgbString(r):o("hsl")?this.fromHslString(r):(o("hsv")||o("hsb"))&&this.fromHsvString(r)}else if(e instanceof n)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this._h=e._h,this._s=e._s,this._l=e._l,this._v=e._v;else if(t("rgb"))this.r=xh(e.r),this.g=xh(e.g),this.b=xh(e.b),this.a=typeof e.a=="number"?xh(e.a,1):1;else if(t("hsl"))this.fromHsl(e);else if(t("hsv"))this.fromHsv(e);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(e))}setR(e){return this._sc("r",e)}setG(e){return this._sc("g",e)}setB(e){return this._sc("b",e)}setA(e){return this._sc("a",e,1)}setHue(e){let t=this.toHsv();return t.h=e,this._c(t)}getLuminance(){function e(o){let s=o/255;return s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4)}let t=e(this.r),i=e(this.g),r=e(this.b);return .2126*t+.7152*i+.0722*r}getHue(){if(typeof this._h>"u"){let e=this.getMax()-this.getMin();e===0?this._h=0:this._h=Ii(60*(this.r===this.getMax()?(this.g-this.b)/e+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/e+2:(this.r-this.g)/e+4))}return this._h}getSaturation(){if(typeof this._s>"u"){let e=this.getMax()-this.getMin();e===0?this._s=0:this._s=e/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(e=10){let t=this.getHue(),i=this.getSaturation(),r=this.getLightness()-e/100;return r<0&&(r=0),this._c({h:t,s:i,l:r,a:this.a})}lighten(e=10){let t=this.getHue(),i=this.getSaturation(),r=this.getLightness()+e/100;return r>1&&(r=1),this._c({h:t,s:i,l:r,a:this.a})}mix(e,t=50){let i=this._c(e),r=t/100,o=a=>(i[a]-this[a])*r+this[a],s={r:Ii(o("r")),g:Ii(o("g")),b:Ii(o("b")),a:Ii(o("a")*100)/100};return this._c(s)}tint(e=10){return this.mix({r:255,g:255,b:255,a:1},e)}shade(e=10){return this.mix({r:0,g:0,b:0,a:1},e)}onBackground(e){let t=this._c(e),i=this.a+t.a*(1-this.a),r=o=>Ii((this[o]*this.a+t[o]*t.a*(1-this.a))/i);return this._c({r:r("r"),g:r("g"),b:r("b"),a:i})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}clone(){return this._c(this)}toHexString(){let e="#",t=(this.r||0).toString(16);e+=t.length===2?t:"0"+t;let i=(this.g||0).toString(16);e+=i.length===2?i:"0"+i;let r=(this.b||0).toString(16);if(e+=r.length===2?r:"0"+r,typeof this.a=="number"&&this.a>=0&&this.a<1){let o=Ii(this.a*255).toString(16);e+=o.length===2?o:"0"+o}return e}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){let e=this.getHue(),t=Ii(this.getSaturation()*100),i=Ii(this.getLightness()*100);return this.a!==1?`hsla(${e},${t}%,${i}%,${this.a})`:`hsl(${e},${t}%,${i}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(e,t,i){let r=this.clone();return r[e]=xh(t,i),r}_c(e){return new this.constructor(e)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(e){let t=e.replace("#","");function i(r,o){return parseInt(t[r]+t[o||r],16)}t.length<6?(this.r=i(0),this.g=i(1),this.b=i(2),this.a=t[3]?i(3)/255:1):(this.r=i(0,1),this.g=i(2,3),this.b=i(4,5),this.a=t[6]?i(6,7)/255:1)}fromHsl({h:e,s:t,l:i,a:r}){if(this._h=e%360,this._s=t,this._l=i,this.a=typeof r=="number"?r:1,t<=0){let h=Ii(i*255);this.r=h,this.g=h,this.b=h}let o=0,s=0,a=0,c=e/60,l=(1-Math.abs(2*i-1))*t,u=l*(1-Math.abs(c%2-1));c>=0&&c<1?(o=l,s=u):c>=1&&c<2?(o=u,s=l):c>=2&&c<3?(s=l,a=u):c>=3&&c<4?(s=u,a=l):c>=4&&c<5?(o=u,a=l):c>=5&&c<6&&(o=l,a=u);let d=i-l/2;this.r=Ii((o+d)*255),this.g=Ii((s+d)*255),this.b=Ii((a+d)*255)}fromHsv({h:e,s:t,v:i,a:r}){this._h=e%360,this._s=t,this._v=i,this.a=typeof r=="number"?r:1;let o=Ii(i*255);if(this.r=o,this.g=o,this.b=o,t<=0)return;let s=e/60,a=Math.floor(s),c=s-a,l=Ii(i*(1-t)*255),u=Ii(i*(1-t*c)*255),d=Ii(i*(1-t*(1-c))*255);switch(a){case 0:this.g=d,this.b=l;break;case 1:this.r=u,this.b=l;break;case 2:this.r=l,this.b=d;break;case 3:this.r=l,this.g=u;break;case 4:this.r=d,this.g=l;break;case 5:default:this.g=l,this.b=u;break}}fromHsvString(e){let t=i7(e,rT);this.fromHsv({h:t[0],s:t[1],v:t[2],a:t[3]})}fromHslString(e){let t=i7(e,rT);this.fromHsl({h:t[0],s:t[1],l:t[2],a:t[3]})}fromRgbString(e){let t=i7(e,(i,r)=>r.includes("%")?Ii(i/100*255):i);this.r=t[0],this.g=t[1],this.b=t[2],this.a=t[3]}};var Vf=2,oT=.16,ZU=.05,QU=.05,JU=.15,lT=5,uT=4,eY=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function sT(n,e,t){var i;return Math.round(n.h)>=60&&Math.round(n.h)<=240?i=t?Math.round(n.h)-Vf*e:Math.round(n.h)+Vf*e:i=t?Math.round(n.h)+Vf*e:Math.round(n.h)-Vf*e,i<0?i+=360:i>=360&&(i-=360),i}function aT(n,e,t){if(n.h===0&&n.s===0)return n.s;var i;return t?i=n.s-oT*e:e===uT?i=n.s+oT:i=n.s+ZU*e,i>1&&(i=1),t&&e===lT&&i>.1&&(i=.1),i<.06&&(i=.06),Math.round(i*100)/100}function cT(n,e,t){var i;return t?i=n.v+QU*e:i=n.v-JU*e,i=Math.max(0,Math.min(1,i)),Math.round(i*100)/100}function Hf(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],i=new Qc(n),r=i.toHsv(),o=lT;o>0;o-=1){var s=new Qc({h:sT(r,o,!0),s:aT(r,o,!0),v:cT(r,o,!0)});t.push(s)}t.push(i);for(var a=1;a<=uT;a+=1){var c=new Qc({h:sT(r,a),s:aT(r,a),v:cT(r,a)});t.push(c)}return e.theme==="dark"?eY.map(function(l){var u=l.index,d=l.amount;return new Qc(e.backgroundColor||"#141414").mix(t[u],d).toHexString()}):t.map(function(l){return l.toHexString()})}var dT=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];dT.primary=dT[5];var hT=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];hT.primary=hT[5];var fT=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];fT.primary=fT[5];var pT=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];pT.primary=pT[5];var mT=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];mT.primary=mT[5];var gT=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];gT.primary=gT[5];var vT=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];vT.primary=vT[5];var yT=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];yT.primary=yT[5];var _T=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];_T.primary=_T[5];var bT=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];bT.primary=bT[5];var xT=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];xT.primary=xT[5];var MT=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];MT.primary=MT[5];var ST=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];ST.primary=ST[5];var wT=["#2a1215","#431418","#58181c","#791a1f","#a61d24","#d32029","#e84749","#f37370","#f89f9a","#fac8c3"];wT.primary=wT[5];var CT=["#2b1611","#441d12","#592716","#7c3118","#aa3e19","#d84a1b","#e87040","#f3956a","#f8b692","#fad4bc"];CT.primary=CT[5];var TT=["#2b1d11","#442a11","#593815","#7c4a15","#aa6215","#d87a16","#e89a3c","#f3b765","#f8cf8d","#fae3b7"];TT.primary=TT[5];var ET=["#2b2111","#443111","#594214","#7c5914","#aa7714","#d89614","#e8b339","#f3cc62","#f8df8b","#faedb5"];ET.primary=ET[5];var DT=["#2b2611","#443b11","#595014","#7c6e14","#aa9514","#d8bd14","#e8d639","#f3ea62","#f8f48b","#fafab5"];DT.primary=DT[5];var zT=["#1f2611","#2e3c10","#3e4f13","#536d13","#6f9412","#8bbb11","#a9d134","#c9e75d","#e4f88b","#f0fab5"];zT.primary=zT[5];var AT=["#162312","#1d3712","#274916","#306317","#3c8618","#49aa19","#6abe39","#8fd460","#b2e58b","#d5f2bb"];AT.primary=AT[5];var IT=["#112123","#113536","#144848","#146262","#138585","#13a8a8","#33bcb7","#58d1c9","#84e2d8","#b2f1e8"];IT.primary=IT[5];var PT=["#111a2c","#112545","#15325b","#15417e","#1554ad","#1668dc","#3c89e8","#65a9f3","#8dc5f8","#b7dcfa"];PT.primary=PT[5];var RT=["#131629","#161d40","#1c2755","#203175","#263ea0","#2b4acb","#5273e0","#7f9ef3","#a8c1f8","#d2e0fa"];RT.primary=RT[5];var kT=["#1a1325","#24163a","#301c4d","#3e2069","#51258f","#642ab5","#854eca","#ab7ae0","#cda8f0","#ebd7fa"];kT.primary=kT[5];var NT=["#291321","#40162f","#551c3b","#75204f","#a02669","#cb2b83","#e0529c","#f37fb7","#f8a8cc","#fad2e3"];NT.primary=NT[5];var OT=["#151515","#1f1f1f","#2d2d2d","#393939","#494949","#5a5a5a","#6a6a6a","#7b7b7b","#888888","#969696"];OT.primary=OT[5];var Hs="[@ant-design/icons-angular]:";function tY(n){console.error(`${Hs} ${n}.`)}function VT(n){kd()&&console.warn(`${Hs} ${n}.`)}function LT(n){return Hf(n)[0]}function Bf(n,e){switch(e){case"fill":return`${n}-fill`;case"outline":return`${n}-o`;case"twotone":return`${n}-twotone`;case void 0:return n;default:throw new Error(`${Hs}Theme "${e}" is not a recognized theme!`)}}function nY(n,e,t,i){return`${Bf(n,e)}-${t}-${i}`}function iY(n){return n==="o"?"outline":n}function rY(n){return n.endsWith("-fill")||n.endsWith("-o")||n.endsWith("-twotone")}function HT(n){return typeof n=="object"&&typeof n.name=="string"&&(typeof n.theme=="string"||n.theme===void 0)&&typeof n.icon=="string"}function oY(n){let e=n.split("-"),t=iY(e.splice(e.length-1,1)[0]);return{name:e.join("-"),theme:t,icon:""}}function sY(n){return n.cloneNode(!0)}function aY(n){return n.replace(/['"]#333['"]/g,'"primaryColor"').replace(/['"]#E6E6E6['"]/g,'"secondaryColor"').replace(/['"]#D9D9D9['"]/g,'"secondaryColor"').replace(/['"]#D8D8D8['"]/g,'"secondaryColor"')}function Uf(n){let e=n.split(":");switch(e.length){case 1:return[n,""];case 2:return[e[1],e[0]];default:throw new Error(`${Hs}The icon type ${n} is not valid!`)}}function cY(n){return Uf(n)[1]!==""}function lY(){return new Error(`${Hs}Type should have a namespace. Try "namespace:${name}".`)}function FT(n){return new Error(`${Hs}the icon ${n} does not exist or is not registered.`)}function uY(){return tY('you need to import "HttpClientModule" to use dynamic importing.'),null}function dY(n){return new Error(`${Hs}The url "${n}" is unsafe.`)}function hY(){return new Error(`${Hs}<svg> tag not found.`)}function fY(){return new Error(`${Hs}Importing timeout error.`)}var pY="__ant_icon_load",mY=new de("ant_icons"),r7=(()=>{class n{set twoToneColor({primaryColor:t,secondaryColor:i}){this._twoToneColorPalette.primaryColor=t,this._twoToneColorPalette.secondaryColor=i||LT(t)}get twoToneColor(){return Z({},this._twoToneColorPalette)}get _disableDynamicLoading(){return!1}constructor(t,i,r,o,s){this._rendererFactory=t,this._handler=i,this._document=r,this.sanitizer=o,this._antIcons=s,this.defaultTheme="outline",this._svgDefinitions=new Map,this._svgRenderedDefinitions=new Map,this._inProgressFetches=new Map,this._assetsUrlRoot="",this._twoToneColorPalette={primaryColor:"#333333",secondaryColor:"#E6E6E6"},this._enableJsonpLoading=!1,this._jsonpIconLoad$=new ce,this._renderer=this._rendererFactory.createRenderer(null,null),this._handler&&(this._http=new ku(this._handler)),this._antIcons&&this.addIcon(...this._antIcons)}useJsonpLoading(){this._enableJsonpLoading?VT("You are already using jsonp loading."):(this._enableJsonpLoading=!0,window[pY]=t=>{this._jsonpIconLoad$.next(t)})}changeAssetsSource(t){this._assetsUrlRoot=t.endsWith("/")?t:t+"/"}addIcon(...t){t.forEach(i=>{this._svgDefinitions.set(Bf(i.name,i.theme),i)})}addIconLiteral(t,i){let[r,o]=Uf(t);if(!o)throw lY();this.addIcon({name:t,icon:i})}clear(){this._svgDefinitions.clear(),this._svgRenderedDefinitions.clear()}getRenderedContent(t,i){let r=HT(t)?t:this._svgDefinitions.get(t)||null;if(!r&&this._disableDynamicLoading)throw FT(t);return(r?Ae(r):this._loadIconDynamically(t)).pipe(Pe(s=>{if(!s)throw FT(t);return this._loadSVGFromCacheOrCreateNew(s,i)}))}getCachedIcons(){return this._svgDefinitions}_loadIconDynamically(t){if(!this._http&&!this._enableJsonpLoading)return Ae(uY());let i=this._inProgressFetches.get(t);if(!i){let[r,o]=Uf(t),s=o?{name:t,icon:""}:oY(r),a=this._enableJsonpLoading?".js":".svg",c=(o?`${this._assetsUrlRoot}assets/${o}/${r}`:`${this._assetsUrlRoot}assets/${s.theme}/${s.name}`)+a,l=this.sanitizer.sanitize(Lr.URL,c);if(!l)throw dY(c);i=(this._enableJsonpLoading?this._loadIconDynamicallyWithJsonp(s,l):this._http.get(l,{responseType:"text"}).pipe(Pe(d=>lt(Z({},s),{icon:d})))).pipe(Bn(d=>this.addIcon(d)),mo(()=>this._inProgressFetches.delete(t)),po(()=>Ae(null)),u6()),this._inProgressFetches.set(t,i)}return i}_loadIconDynamicallyWithJsonp(t,i){return new it(r=>{let o=this._document.createElement("script"),s=setTimeout(()=>{a(),r.error(fY())},6e3);o.src=i;function a(){o.parentNode.removeChild(o),clearTimeout(s)}this._document.body.appendChild(o),this._jsonpIconLoad$.pipe(xt(c=>c.name===t.name&&c.theme===t.theme),Ei(1)).subscribe(c=>{r.next(c),a()})})}_loadSVGFromCacheOrCreateNew(t,i){let r,o=i||this._twoToneColorPalette.primaryColor,s=LT(o)||this._twoToneColorPalette.secondaryColor,a=t.theme==="twotone"?nY(t.name,t.theme,o,s):t.theme===void 0?t.name:Bf(t.name,t.theme),c=this._svgRenderedDefinitions.get(a);return c?r=c.icon:(r=this._setSVGAttribute(this._colorizeSVGIcon(this._createSVGElementFromString(cY(t.name)?t.icon:aY(t.icon)),t.theme==="twotone",o,s)),this._svgRenderedDefinitions.set(a,lt(Z({},t),{icon:r}))),sY(r)}_createSVGElementFromString(t){let i=this._document.createElement("div");i.innerHTML=t;let r=i.querySelector("svg");if(!r)throw hY;return r}_setSVGAttribute(t){return this._renderer.setAttribute(t,"width","1em"),this._renderer.setAttribute(t,"height","1em"),t}_colorizeSVGIcon(t,i,r,o){if(i){let s=t.childNodes,a=s.length;for(let c=0;c<a;c++){let l=s[c];l.getAttribute("fill")==="secondaryColor"?this._renderer.setAttribute(l,"fill",o):this._renderer.setAttribute(l,"fill",r)}}return this._renderer.setAttribute(t,"fill","currentColor"),t}static{this.\u0275fac=function(i){return new(i||n)(Me(Xn),Me(Fs,8),Me(At,8),Me($d),Me(mY,8))}}static{this.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function gY(n,e){return n.type===e.type&&n.theme===e.theme&&n.twoToneColor===e.twoToneColor}var BT=(()=>{class n{constructor(t){this._iconService=t,this._elementRef=T(Je),this._renderer=T(Mn)}ngOnChanges(t){(t.type||t.theme||t.twoToneColor)&&this._changeIcon()}_changeIcon(){return new Promise(t=>{if(!this.type){this._clearSVGElement(),t(null);return}let i=this._getSelfRenderMeta();this._iconService.getRenderedContent(this._parseIconType(this.type,this.theme),this.twoToneColor).subscribe(r=>{let o=this._getSelfRenderMeta();gY(i,o)?(this._setSVGElement(r),t(r)):t(null)})})}_getSelfRenderMeta(){return{type:this.type,theme:this.theme,twoToneColor:this.twoToneColor}}_parseIconType(t,i){if(HT(t))return t;{let[r,o]=Uf(t);return o?t:rY(r)?(i&&VT(`'type' ${r} already gets a theme inside so 'theme' ${i} would be ignored`),r):Bf(r,i||this._iconService.defaultTheme)}}_setSVGElement(t){this._clearSVGElement(),this._renderer.appendChild(this._elementRef.nativeElement,t)}_clearSVGElement(){let t=this._elementRef.nativeElement,i=t.childNodes,r=i.length;for(let o=r-1;o>=0;o--){let s=i[o];s.tagName?.toLowerCase()==="svg"&&this._renderer.removeChild(t,s)}}static{this.\u0275fac=function(i){return new(i||n)(Y(r7))}}static{this.\u0275dir=Oe({type:n,selectors:[["","antIcon",""]],inputs:{type:"type",theme:"theme",twoToneColor:"twoToneColor"},features:[$e]})}}return n})();var Yf={isTestMode:!1};var UT={},vY="[NG-ZORRO]:";function yY(...n){let e=n.reduce((t,i)=>t+i.toString(),"");return UT[e]?!1:(UT[e]=!0,!0)}function _Y(n,...e){(Yf.isTestMode||kd()&&yY(...e))&&n(...e)}var Do=(...n)=>_Y((...e)=>console.warn(vY,...e),...n);var YT={name:"bars",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z" /></svg>'};var jT={name:"border",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z" /></svg>'};var GT={name:"calendar",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z" /></svg>'};var WT={name:"caret-down",theme:"fill",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z" /></svg>'};var $T={name:"caret-up",theme:"fill",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z" /></svg>'};var qT={name:"caret-down",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z" /></svg>'};var XT={name:"check",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z" /></svg>'};var KT={name:"caret-up",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M858.9 689L530.5 308.2c-9.4-10.9-27.5-10.9-37 0L165.1 689c-12.2 14.2-1.2 35 18.5 35h656.8c19.7 0 30.7-20.8 18.5-35z" /></svg>'},ZT={name:"clock-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /><path d="M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z" /></svg>'};var QT={name:"close-circle",theme:"fill",icon:'<svg fill-rule="evenodd" viewBox="64 64 896 896" focusable="false"><path d="M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z" /></svg>'};var JT={name:"close",theme:"outline",icon:'<svg fill-rule="evenodd" viewBox="64 64 896 896" focusable="false"><path d="M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z" /></svg>'},eE={name:"close-circle",theme:"outline",icon:'<svg fill-rule="evenodd" viewBox="64 64 896 896" focusable="false"><path d="M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z" /></svg>'};var tE={name:"check-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z" /><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /></svg>'};var nE={name:"check-circle",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z" /></svg>'};var iE={name:"copy",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z" /></svg>'};var rE={name:"delete",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z" /></svg>'};var oE={name:"double-left",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z" /></svg>'};var sE={name:"double-right",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z" /></svg>'};var aE={name:"down",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z" /></svg>'};var cE={name:"ellipsis",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z" /></svg>'};var lE={name:"exclamation-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /><path d="M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z" /></svg>'};var uE={name:"eye-invisible",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z" /><path d="M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z" /></svg>'};var dE={name:"exclamation-circle",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z" /></svg>'},Oa={name:"eye",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z" /></svg>'};var jf={name:"download",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z" /></svg>'};var hE={name:"credit-card",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-792 72h752v120H136V232zm752 560H136V440h752v352zm-237-64h165c4.4 0 8-3.6 8-8v-72c0-4.4-3.6-8-8-8H651c-4.4 0-8 3.6-8 8v72c0 4.4 3.6 8 8 8z" /></svg>'};var fE={name:"file",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M854.6 288.7c6 6 9.4 14.1 9.4 22.6V928c0 17.7-14.3 32-32 32H192c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32h424.7c8.5 0 16.7 3.4 22.7 9.4l215.2 215.3zM790.2 326L602 137.8V326h188.2z" /></svg>'};var pE={name:"file",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z" /></svg>'};var mE={name:"filter",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M349 838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V642H349v196zm531.1-684H143.9c-24.5 0-39.8 26.7-27.5 48l221.3 376h348.8l221.3-376c12.1-21.3-3.2-48-27.7-48z" /></svg>'};var gE={name:"edit",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z" /></svg>'};var vE={name:"home",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z" /></svg>'};var Gf={name:"fullscreen",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M290 236.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0013.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 000 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 00-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z" /></svg>'},yE={name:"info-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /><path d="M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z" /></svg>'};var _E={name:"loading",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z" /></svg>'};var bE={name:"left",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z" /></svg>'};var xE={name:"link",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z" /></svg>'};var ME={name:"paper-clip",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z" /></svg>'};var SE={name:"question-circle",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z" /><path d="M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z" /></svg>'};var Zu={name:"reload",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z" /></svg>'};var wE={name:"right",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z" /></svg>'};var CE={name:"rotate-right",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><defs><style /></defs><path d="M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z" /><path d="M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z" /></svg>'};var TE={name:"rotate-left",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><defs><style /></defs><path d="M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z" /><path d="M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z" /></svg>'};var EE={name:"setting",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z" /></svg>'};var DE={name:"search",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z" /></svg>'};var o7={name:"star",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z" /></svg>'};var zE={name:"swap",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z" /></svg>'};var AE={name:"info-circle",theme:"fill",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z" /></svg>'};var IE={name:"swap-right",theme:"outline",icon:'<svg viewBox="0 0 1024 1024" focusable="false"><path d="M873.1 596.2l-164-208A32 32 0 00684 376h-64.8c-6.7 0-10.4 7.7-6.3 13l144.3 183H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h695.9c26.8 0 41.7-30.8 25.2-51.8z" /></svg>'};var PE={name:"up",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z" /></svg>'};var Qu={name:"upload",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z" /></svg>'};var RE={name:"user",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z" /></svg>'};var kE={name:"vertical-align-top",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z" /></svg>'};var Wf={name:"zoom-out",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z" /></svg>'},$f={name:"zoom-in",theme:"outline",icon:'<svg viewBox="64 64 896 896" focusable="false"><path d="M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z" /></svg>'};function bi(n,e){bY(n)&&(n="100%");var t=xY(n);return n=e===360?n:Math.min(e,Math.max(0,parseFloat(n))),t&&(n=parseInt(String(n*e),10)/100),Math.abs(n-e)<1e-6?1:(e===360?n=(n<0?n%e+e:n%e)/parseFloat(String(e)):n=n%e/parseFloat(String(e)),n)}function Mh(n){return Math.min(1,Math.max(0,n))}function bY(n){return typeof n=="string"&&n.indexOf(".")!==-1&&parseFloat(n)===1}function xY(n){return typeof n=="string"&&n.indexOf("%")!==-1}function qf(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function Sh(n){return n<=1?"".concat(Number(n)*100,"%"):n}function La(n){return n.length===1?"0"+n:String(n)}function NE(n,e,t){return{r:bi(n,255)*255,g:bi(e,255)*255,b:bi(t,255)*255}}function a7(n,e,t){n=bi(n,255),e=bi(e,255),t=bi(t,255);var i=Math.max(n,e,t),r=Math.min(n,e,t),o=0,s=0,a=(i+r)/2;if(i===r)s=0,o=0;else{var c=i-r;switch(s=a>.5?c/(2-i-r):c/(i+r),i){case n:o=(e-t)/c+(e<t?6:0);break;case e:o=(t-n)/c+2;break;case t:o=(n-e)/c+4;break;default:break}o/=6}return{h:o,s,l:a}}function s7(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*(6*t):t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function OE(n,e,t){var i,r,o;if(n=bi(n,360),e=bi(e,100),t=bi(t,100),e===0)r=t,o=t,i=t;else{var s=t<.5?t*(1+e):t+e-t*e,a=2*t-s;i=s7(a,s,n+1/3),r=s7(a,s,n),o=s7(a,s,n-1/3)}return{r:i*255,g:r*255,b:o*255}}function wh(n,e,t){n=bi(n,255),e=bi(e,255),t=bi(t,255);var i=Math.max(n,e,t),r=Math.min(n,e,t),o=0,s=i,a=i-r,c=i===0?0:a/i;if(i===r)o=0;else{switch(i){case n:o=(e-t)/a+(e<t?6:0);break;case e:o=(t-n)/a+2;break;case t:o=(n-e)/a+4;break;default:break}o/=6}return{h:o,s:c,v:s}}function LE(n,e,t){n=bi(n,360)*6,e=bi(e,100),t=bi(t,100);var i=Math.floor(n),r=n-i,o=t*(1-e),s=t*(1-r*e),a=t*(1-(1-r)*e),c=i%6,l=[t,s,o,o,a,t][c],u=[a,t,t,s,o,o][c],d=[o,o,a,t,t,s][c];return{r:l*255,g:u*255,b:d*255}}function Ch(n,e,t,i){var r=[La(Math.round(n).toString(16)),La(Math.round(e).toString(16)),La(Math.round(t).toString(16))];return i&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function FE(n,e,t,i,r){var o=[La(Math.round(n).toString(16)),La(Math.round(e).toString(16)),La(Math.round(t).toString(16)),La(MY(i))];return r&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))&&o[3].startsWith(o[3].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function MY(n){return Math.round(parseFloat(n)*255).toString(16)}function c7(n){return Mr(n)/255}function Mr(n){return parseInt(n,16)}function VE(n){return{r:n>>16,g:(n&65280)>>8,b:n&255}}var Th={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Va(n){var e={r:0,g:0,b:0},t=1,i=null,r=null,o=null,s=!1,a=!1;return typeof n=="string"&&(n=CY(n)),typeof n=="object"&&(Bs(n.r)&&Bs(n.g)&&Bs(n.b)?(e=NE(n.r,n.g,n.b),s=!0,a=String(n.r).substr(-1)==="%"?"prgb":"rgb"):Bs(n.h)&&Bs(n.s)&&Bs(n.v)?(i=Sh(n.s),r=Sh(n.v),e=LE(n.h,i,r),s=!0,a="hsv"):Bs(n.h)&&Bs(n.s)&&Bs(n.l)&&(i=Sh(n.s),o=Sh(n.l),e=OE(n.h,i,o),s=!0,a="hsl"),Object.prototype.hasOwnProperty.call(n,"a")&&(t=n.a)),t=qf(t),{ok:s,format:n.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}var SY="[-\\+]?\\d+%?",wY="[-\\+]?\\d*\\.\\d+%?",Fa="(?:".concat(wY,")|(?:").concat(SY,")"),l7="[\\s|\\(]+(".concat(Fa,")[,|\\s]+(").concat(Fa,")[,|\\s]+(").concat(Fa,")\\s*\\)?"),u7="[\\s|\\(]+(".concat(Fa,")[,|\\s]+(").concat(Fa,")[,|\\s]+(").concat(Fa,")[,|\\s]+(").concat(Fa,")\\s*\\)?"),zo={CSS_UNIT:new RegExp(Fa),rgb:new RegExp("rgb"+l7),rgba:new RegExp("rgba"+u7),hsl:new RegExp("hsl"+l7),hsla:new RegExp("hsla"+u7),hsv:new RegExp("hsv"+l7),hsva:new RegExp("hsva"+u7),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function CY(n){if(n=n.trim().toLowerCase(),n.length===0)return!1;var e=!1;if(Th[n])n=Th[n],e=!0;else if(n==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t=zo.rgb.exec(n);return t?{r:t[1],g:t[2],b:t[3]}:(t=zo.rgba.exec(n),t?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=zo.hsl.exec(n),t?{h:t[1],s:t[2],l:t[3]}:(t=zo.hsla.exec(n),t?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=zo.hsv.exec(n),t?{h:t[1],s:t[2],v:t[3]}:(t=zo.hsva.exec(n),t?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=zo.hex8.exec(n),t?{r:Mr(t[1]),g:Mr(t[2]),b:Mr(t[3]),a:c7(t[4]),format:e?"name":"hex8"}:(t=zo.hex6.exec(n),t?{r:Mr(t[1]),g:Mr(t[2]),b:Mr(t[3]),format:e?"name":"hex"}:(t=zo.hex4.exec(n),t?{r:Mr(t[1]+t[1]),g:Mr(t[2]+t[2]),b:Mr(t[3]+t[3]),a:c7(t[4]+t[4]),format:e?"name":"hex8"}:(t=zo.hex3.exec(n),t?{r:Mr(t[1]+t[1]),g:Mr(t[2]+t[2]),b:Mr(t[3]+t[3]),format:e?"name":"hex"}:!1)))))))))}function Bs(n){return!!zo.CSS_UNIT.exec(String(n))}var Xf=function(){function n(e,t){e===void 0&&(e=""),t===void 0&&(t={});var i;if(e instanceof n)return e;typeof e=="number"&&(e=VE(e)),this.originalInput=e;var r=Va(e);this.originalInput=e,this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this.roundA=Math.round(100*this.a)/100,this.format=(i=t.format)!==null&&i!==void 0?i:r.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=r.ok}return n.prototype.isDark=function(){return this.getBrightness()<128},n.prototype.isLight=function(){return!this.isDark()},n.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},n.prototype.getLuminance=function(){var e=this.toRgb(),t,i,r,o=e.r/255,s=e.g/255,a=e.b/255;return o<=.03928?t=o/12.92:t=Math.pow((o+.055)/1.055,2.4),s<=.03928?i=s/12.92:i=Math.pow((s+.055)/1.055,2.4),a<=.03928?r=a/12.92:r=Math.pow((a+.055)/1.055,2.4),.2126*t+.7152*i+.0722*r},n.prototype.getAlpha=function(){return this.a},n.prototype.setAlpha=function(e){return this.a=qf(e),this.roundA=Math.round(100*this.a)/100,this},n.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},n.prototype.toHsv=function(){var e=wh(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},n.prototype.toHsvString=function(){var e=wh(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),r=Math.round(e.v*100);return this.a===1?"hsv(".concat(t,", ").concat(i,"%, ").concat(r,"%)"):"hsva(".concat(t,", ").concat(i,"%, ").concat(r,"%, ").concat(this.roundA,")")},n.prototype.toHsl=function(){var e=a7(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},n.prototype.toHslString=function(){var e=a7(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),r=Math.round(e.l*100);return this.a===1?"hsl(".concat(t,", ").concat(i,"%, ").concat(r,"%)"):"hsla(".concat(t,", ").concat(i,"%, ").concat(r,"%, ").concat(this.roundA,")")},n.prototype.toHex=function(e){return e===void 0&&(e=!1),Ch(this.r,this.g,this.b,e)},n.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},n.prototype.toHex8=function(e){return e===void 0&&(e=!1),FE(this.r,this.g,this.b,this.a,e)},n.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},n.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},n.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},n.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),i=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(t,", ").concat(i,")"):"rgba(".concat(e,", ").concat(t,", ").concat(i,", ").concat(this.roundA,")")},n.prototype.toPercentageRgb=function(){var e=function(t){return"".concat(Math.round(bi(t,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},n.prototype.toPercentageRgbString=function(){var e=function(t){return Math.round(bi(t,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},n.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+Ch(this.r,this.g,this.b,!1),t=0,i=Object.entries(Th);t<i.length;t++){var r=i[t],o=r[0],s=r[1];if(e===s)return o}return!1},n.prototype.toString=function(e){var t=!!e;e=e??this.format;var i=!1,r=this.a<1&&this.a>=0,o=!t&&r&&(e.startsWith("hex")||e==="name");return o?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},n.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},n.prototype.clone=function(){return new n(this.toString())},n.prototype.lighten=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l+=e/100,t.l=Mh(t.l),new n(t)},n.prototype.brighten=function(e){e===void 0&&(e=10);var t=this.toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),new n(t)},n.prototype.darken=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l-=e/100,t.l=Mh(t.l),new n(t)},n.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},n.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},n.prototype.desaturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s-=e/100,t.s=Mh(t.s),new n(t)},n.prototype.saturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s+=e/100,t.s=Mh(t.s),new n(t)},n.prototype.greyscale=function(){return this.desaturate(100)},n.prototype.spin=function(e){var t=this.toHsl(),i=(t.h+e)%360;return t.h=i<0?360+i:i,new n(t)},n.prototype.mix=function(e,t){t===void 0&&(t=50);var i=this.toRgb(),r=new n(e).toRgb(),o=t/100,s={r:(r.r-i.r)*o+i.r,g:(r.g-i.g)*o+i.g,b:(r.b-i.b)*o+i.b,a:(r.a-i.a)*o+i.a};return new n(s)},n.prototype.analogous=function(e,t){e===void 0&&(e=6),t===void 0&&(t=30);var i=this.toHsl(),r=360/t,o=[this];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,o.push(new n(i));return o},n.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new n(e)},n.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var t=this.toHsv(),i=t.h,r=t.s,o=t.v,s=[],a=1/e;e--;)s.push(new n({h:i,s:r,v:o})),o=(o+a)%1;return s},n.prototype.splitcomplement=function(){var e=this.toHsl(),t=e.h;return[this,new n({h:(t+72)%360,s:e.s,l:e.l}),new n({h:(t+216)%360,s:e.s,l:e.l})]},n.prototype.onBackground=function(e){var t=this.toRgb(),i=new n(e).toRgb(),r=t.a+i.a*(1-t.a);return new n({r:(t.r*t.a+i.r*i.a*(1-t.a))/r,g:(t.g*t.a+i.g*i.a*(1-t.a))/r,b:(t.b*t.a+i.b*i.a*(1-t.a))/r,a:r})},n.prototype.triad=function(){return this.polyad(3)},n.prototype.tetrad=function(){return this.polyad(4)},n.prototype.polyad=function(e){for(var t=this.toHsl(),i=t.h,r=[this],o=360/e,s=1;s<e;s++)r.push(new n({h:(i+s*o)%360,s:t.s,l:t.l}));return r},n.prototype.equals=function(e){return this.toRgbString()===new n(e).toRgbString()},n}();var TY=["pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime"];function GE(n){return TY.indexOf(n)!==-1}var Kf=2,HE=.16,EY=.05,DY=.05,zY=.15,WE=5,$E=4,AY=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function BE({r:n,g:e,b:t}){let i=wh(n,e,t);return{h:i.h*360,s:i.s,v:i.v}}function Zf({r:n,g:e,b:t}){return`#${Ch(n,e,t,!1)}`}function IY(n,e,t){let i=t/100;return{r:(e.r-n.r)*i+n.r,g:(e.g-n.g)*i+n.g,b:(e.b-n.b)*i+n.b}}function UE(n,e,t){let i;return Math.round(n.h)>=60&&Math.round(n.h)<=240?i=t?Math.round(n.h)-Kf*e:Math.round(n.h)+Kf*e:i=t?Math.round(n.h)+Kf*e:Math.round(n.h)-Kf*e,i<0?i+=360:i>=360&&(i-=360),i}function YE(n,e,t){if(n.h===0&&n.s===0)return n.s;let i;return t?i=n.s-HE*e:e===$E?i=n.s+HE:i=n.s+EY*e,i>1&&(i=1),t&&e===WE&&i>.1&&(i=.1),i<.06&&(i=.06),Number(i.toFixed(2))}function jE(n,e,t){let i;return t?i=n.v+DY*e:i=n.v-zY*e,i>1&&(i=1),Number(i.toFixed(2))}function d7(n,e={}){let t=[],i=Va(n);for(let r=WE;r>0;r-=1){let o=BE(i),s=Zf(Va({h:UE(o,r,!0),s:YE(o,r,!0),v:jE(o,r,!0)}));t.push(s)}t.push(Zf(i));for(let r=1;r<=$E;r+=1){let o=BE(i),s=Zf(Va({h:UE(o,r),s:YE(o,r),v:jE(o,r)}));t.push(s)}return e.theme==="dark"?AY.map(({index:r,opacity:o})=>Zf(IY(Va(e.backgroundColor||"#141414"),Va(t[r]),o*100))):t}function h7(n){return n!=null&&`${n}`!="false"}function Ju(n){return n instanceof Je?n.nativeElement:n}function f7(n){return Array.isArray(n)?n:[n]}function Gn(n){return n==null?"":typeof n=="string"?n:`${n}px`}function us(n){return typeof n<"u"&&n!==null}function m7(n){return typeof n>"u"||n===null}function Eh(n){return n instanceof ui}function e1(n){return h7(n)}function t1(n){return yi(n,0)}function n1(n){return Gn(n)}var RY=typeof window<"u",z2e=RY&&window.mozInnerScreenX!=null;function XE(){let n=new ce;return Promise.resolve().then(()=>n.next()),n.pipe(Ei(1))}function g7(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var kY="rc-util-key";function KE({mark:n}={}){return n?n.startsWith("data-")?n:`data-${n}`:kY}function v7(n){return n.attachTo?n.attachTo:document.querySelector("head")||document.body}function qE(n,e={}){if(!g7())return null;let t=document.createElement("style");e.cspNonce&&(t.nonce=e.cspNonce),t.innerHTML=n;let i=v7(e),{firstChild:r}=i;return e.prepend&&i.prepend?i.prepend(t):e.prepend&&r?i.insertBefore(t,r):i.appendChild(t),t}var p7=new Map;function NY(n,e={}){let t=v7(e);return Array.from(p7.get(t)?.children||[]).find(i=>i.tagName==="STYLE"&&i.getAttribute(KE(e))===n)}function ZE(n,e,t={}){let i=v7(t);if(!p7.has(i)){let s=qE("",t),{parentNode:a}=s;p7.set(i,a),a.removeChild(s)}let r=NY(e,t);if(r)return t.cspNonce&&r.nonce!==t.cspNonce&&(r.nonce=t.cspNonce),r.innerHTML!==n&&(r.innerHTML=n),r;let o=qE(n,t);return o?.setAttribute(KE(t),e),o}function Us(n,e,t){return{[`${n}-status-success`]:e==="success",[`${n}-status-warning`]:e==="warning",[`${n}-status-error`]:e==="error",[`${n}-status-validating`]:e==="validating",[`${n}-has-feedback`]:t}}function OY(n){return typeof Zone<"u"?Zone.root.run(n):n()}function i1(n,e,t){return n?new it(i=>OY(()=>yc(n,e,t).subscribe(i))):fi}var LY=new de("nz-config");var FY=`-ant-${Date.now()}-${Math.random()}`;function VY(n,e){let t={},i=(s,a)=>{let c=s.clone();return c=a?.(c)||c,c.toRgbString()},r=(s,a)=>{let c=new Xf(s),l=d7(c.toRgbString());t[`${a}-color`]=i(c),t[`${a}-color-disabled`]=l[1],t[`${a}-color-hover`]=l[4],t[`${a}-color-active`]=l[7],t[`${a}-color-outline`]=c.clone().setAlpha(.2).toRgbString(),t[`${a}-color-deprecated-bg`]=l[1],t[`${a}-color-deprecated-border`]=l[3]};if(e.primaryColor){r(e.primaryColor,"primary");let s=new Xf(e.primaryColor),a=d7(s.toRgbString());a.forEach((l,u)=>{t[`primary-${u+1}`]=l}),t["primary-color-deprecated-l-35"]=i(s,l=>l.lighten(35)),t["primary-color-deprecated-l-20"]=i(s,l=>l.lighten(20)),t["primary-color-deprecated-t-20"]=i(s,l=>l.tint(20)),t["primary-color-deprecated-t-50"]=i(s,l=>l.tint(50)),t["primary-color-deprecated-f-12"]=i(s,l=>l.setAlpha(l.getAlpha()*.12));let c=new Xf(a[0]);t["primary-color-active-deprecated-f-30"]=i(c,l=>l.setAlpha(l.getAlpha()*.3)),t["primary-color-active-deprecated-d-02"]=i(c,l=>l.darken(2))}return e.successColor&&r(e.successColor,"success"),e.warningColor&&r(e.warningColor,"warning"),e.errorColor&&r(e.errorColor,"error"),e.infoColor&&r(e.infoColor,"info"),`
  :root {
    ${Object.keys(t).map(s=>`--${n}-${s}: ${t[s]};`).join(`
`)}
  }
  `.trim()}function QE(n,e,t){let i=VY(n,e);g7()?ZE(i,`${FY}-dynamic-theme`,{cspNonce:t}):Do("NzConfigService: SSR do not support dynamic theme with css variables.")}var JE=function(n){return n!==void 0},eD="ant",ci=(()=>{class n{configUpdated$=new ce;config=T(LY,{optional:!0})||{};cspNonce=T(Rs,{optional:!0});constructor(){this.config.theme&&QE(this.getConfig().prefixCls?.prefixCls||eD,this.config.theme,this.cspNonce)}getConfig(){return this.config}getConfigForComponent(t){return this.config[t]}getConfigChangeEventForComponent(t){return this.configUpdated$.pipe(xt(i=>i===t),Pe(()=>{}))}set(t,i){this.config[t]=Z(Z({},this.config[t]),i),t==="theme"&&this.config.theme&&QE(this.getConfig().prefixCls?.prefixCls||eD,this.config.theme,this.cspNonce),this.configUpdated$.next(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Fn(){return function(n,e){e.addInitializer(function(){let t=T(ci),i=this[e.name],r,o=!1;Object.defineProperty(this,e.name,{get:()=>{let s=t.getConfigForComponent(this._nzModuleName)?.[e.name];return o?r:JE(s)?s:i},set:s=>{o=JE(s),r=s},enumerable:!0,configurable:!0})})}}var y7;try{y7=typeof Intl<"u"&&Intl.v8BreakIterator}catch{y7=!1}var Un=(()=>{class n{_platformId=T(Jo);isBrowser=this._platformId?Vd(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||y7)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Dh;function HY(){if(Dh==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Dh=!0}))}finally{Dh=Dh||!1}return Dh}function tD(n){return HY()?n:!!n.capture}var Jc;function nD(){if(Jc==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Jc=!1,Jc;if("scrollBehavior"in document.documentElement.style)Jc=!0;else{let n=Element.prototype.scrollTo;n?Jc=!/\{\s*\[native code\]\s*\}/.test(n.toString()):Jc=!1}}return Jc}var _7;function iD(){if(_7==null){let n=typeof document<"u"?document.head:null;_7=!!(n&&(n.createShadowRoot||n.attachShadow))}return _7}function b7(n){if(iD()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Ur(n){return n.composedPath?n.composedPath()[0]:n.target}function x7(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Ys(n,e,t,i,r){let o=parseInt(Rg.major),s=parseInt(Rg.minor);return o>19||o===19&&s>0||o===0&&s===0?n.listen(e,t,i,r):(e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)})}var BY=[YT,GT,$T,KT,WT,qT,nE,tE,XT,ZT,eE,QT,JT,iE,rE,oE,sE,aE,gE,cE,dE,lE,Oa,fE,pE,mE,AE,yE,bE,_E,ME,SE,wE,CE,TE,o7,DE,o7,Qu,kE,PE,zE,IE,$f,Wf],oD=new de("nz_icons"),dfe=new de("nz_icon_default_twotone_color"),rD="#1890ff",Ba=(()=>{class n extends r7{nzConfigService;platform;configUpdated$=new ce;get _disableDynamicLoading(){return!this.platform.isBrowser}iconfontCache=new Set;subscription=null;ngOnDestroy(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}normalizeSvgElement(t){t.getAttribute("viewBox")||this._renderer.setAttribute(t,"viewBox","0 0 1024 1024"),(!t.getAttribute("width")||!t.getAttribute("height"))&&(this._renderer.setAttribute(t,"width","1em"),this._renderer.setAttribute(t,"height","1em")),t.getAttribute("fill")||this._renderer.setAttribute(t,"fill","currentColor")}fetchFromIconfont(t){let{scriptUrl:i}=t;if(this._document&&!this.iconfontCache.has(i)){let r=this._renderer.createElement("script");this._renderer.setAttribute(r,"src",i),this._renderer.setAttribute(r,"data-namespace",i.replace(/^(https?|http):/g,"")),this._renderer.appendChild(this._document.body,r),this.iconfontCache.add(i)}}createIconfontIcon(t){return this._createSVGElementFromString(`<svg><use xlink:href="${t}"></svg>`)}constructor(t,i,r,o){super(t,T(Fs,{optional:!0}),T(At),i,[...BY,...T(oD,{optional:!0})||[]]),this.nzConfigService=r,this.platform=o,this.onConfigChange(),this.configDefaultTwotoneColor(),this.configDefaultTheme()}onConfigChange(){this.subscription=this.nzConfigService.getConfigChangeEventForComponent("icon").subscribe(()=>{this.configDefaultTwotoneColor(),this.configDefaultTheme(),this.configUpdated$.next()})}configDefaultTheme(){let t=this.getConfig();this.defaultTheme=t.nzTheme||"outline"}configDefaultTwotoneColor(){let i=this.getConfig().nzTwotoneColor||rD,r=rD;i&&(i.startsWith("#")?r=i:Do("Twotone color must be a hex color!")),this.twoToneColor={primaryColor:r}}getConfig(){return this.nzConfigService.getConfigForComponent("icon")||{}}static \u0275fac=function(i){return new(i||n)(Me(Xn),Me($d),Me(ci),Me(Un))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sD=new de("nz_icons_patch"),aD=(()=>{class n{rootIconService;patched=!1;extraIcons=T(sD,{self:!0});constructor(t){this.rootIconService=t}doPatch(){this.patched||(this.extraIcons.forEach(t=>this.rootIconService.addIcon(t)),this.patched=!0)}static \u0275fac=function(i){return new(i||n)(Me(Ba))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),pn=(()=>{class n extends BT{ngZone;changeDetectorRef;iconService;renderer;cacheClassName=null;set nzSpin(t){this.spin=t}nzRotate=0;set nzType(t){this.type=t}set nzTheme(t){this.theme=t}set nzTwotoneColor(t){this.twoToneColor=t}set nzIconfont(t){this.iconfont=t}hostClass;el;iconfont;spin=!1;destroy$=new ce;constructor(t,i,r,o){super(r),this.ngZone=t,this.changeDetectorRef=i,this.iconService=r,this.renderer=o;let s=T(aD,{optional:!0});s&&s.doPatch(),this.el=this._elementRef.nativeElement}ngOnChanges(t){let{nzType:i,nzTwotoneColor:r,nzSpin:o,nzTheme:s,nzRotate:a}=t;i||r||o||s?this.changeIcon2():a?this.handleRotate(this.el.firstChild):this._setSVGElement(this.iconService.createIconfontIcon(`#${this.iconfont}`))}ngAfterContentChecked(){if(!this.type){let t=this.el.children,i=t.length;if(!this.type&&t.length)for(;i--;){let r=t[i];r.tagName.toLowerCase()==="svg"&&this.iconService.normalizeSvgElement(r)}}}ngOnDestroy(){this.destroy$.next()}changeIcon2(){this.setClassName(),this.ngZone.runOutsideAngular(()=>{ln(this._changeIcon()).pipe(_e(this.destroy$)).subscribe({next:t=>{this.ngZone.run(()=>{this.changeDetectorRef.detectChanges(),t&&(this.setSVGData(t),this.handleSpin(t),this.handleRotate(t))})},error:Do})})}handleSpin(t){this.spin||this.type==="loading"?this.renderer.addClass(t,"anticon-spin"):this.renderer.removeClass(t,"anticon-spin")}handleRotate(t){this.nzRotate?this.renderer.setAttribute(t,"style",`transform: rotate(${this.nzRotate}deg)`):this.renderer.removeAttribute(t,"style")}setClassName(){this.cacheClassName&&this.renderer.removeClass(this.el,this.cacheClassName),this.cacheClassName=`anticon-${this.type}`,this.renderer.addClass(this.el,this.cacheClassName)}setSVGData(t){this.renderer.setAttribute(t,"data-icon",this.type),this.renderer.setAttribute(t,"aria-hidden","true")}static \u0275fac=function(i){return new(i||n)(Y(_t),Y(Mt),Y(Ba),Y(Mn))};static \u0275dir=Oe({type:n,selectors:[["nz-icon"],["","nz-icon",""]],hostAttrs:[1,"anticon"],inputs:{nzSpin:[2,"nzSpin","nzSpin",fe],nzRotate:[2,"nzRotate","nzRotate",yi],nzType:"nzType",nzTheme:"nzTheme",nzTwotoneColor:"nzTwotoneColor",nzIconfont:"nzIconfont"},exportAs:["nzIcon"],features:[vi,$e]})}return n})(),M7=n=>hr([{provide:oD,useValue:n}]),UY=n=>[aD,{provide:sD,useValue:n}],wn=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[M7(t)]}}static forChild(t){return{ngModule:n,providers:[UY(t)]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({})}return n})();var gD=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,i){this._renderer=t,this._elementRef=i}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(i){return new(i||n)(Y(Mn),Y(Je))};static \u0275dir=Oe({type:n})}return n})(),YY=(()=>{class n extends gD{static \u0275fac=(()=>{let t;return function(r){return(t||(t=qi(n)))(r||n)}})();static \u0275dir=Oe({type:n,features:[vi]})}return n})(),Ya=new de("");var jY={provide:Ya,useExisting:kr(()=>a1),multi:!0};function GY(){let n=ro()?ro().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var WY=new de(""),a1=(()=>{class n extends gD{_compositionMode;_composing=!1;constructor(t,i,r){super(t,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!GY())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(i){return new(i||n)(Y(Mn),Y(Je),Y(WY,8))};static \u0275dir=Oe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&We("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[Rn([jY]),vi]})}return n})();function E7(n){return n==null||D7(n)===0}function D7(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var l3=new de(""),z7=new de(""),$Y=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,t3=class{static min(e){return qY(e)}static max(e){return XY(e)}static required(e){return KY(e)}static requiredTrue(e){return ZY(e)}static email(e){return QY(e)}static minLength(e){return JY(e)}static maxLength(e){return vD(e)}static pattern(e){return ej(e)}static nullValidator(e){return n3()}static compose(e){return SD(e)}static composeAsync(e){return CD(e)}};function qY(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function XY(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function KY(n){return E7(n.value)?{required:!0}:null}function ZY(n){return n.value===!0?null:{required:!0}}function QY(n){return E7(n.value)||$Y.test(n.value)?null:{email:!0}}function JY(n){return e=>{let t=e.value?.length??D7(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function vD(n){return e=>{let t=e.value?.length??D7(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function ej(n){if(!n)return n3;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(E7(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}function n3(n){return null}function yD(n){return n!=null}function _D(n){return Rc(n)?ln(n):n}function bD(n){let e={};return n.forEach(t=>{e=t!=null?Z(Z({},e),t):e}),Object.keys(e).length===0?null:e}function xD(n,e){return e.map(t=>t(n))}function tj(n){return!n.validate}function MD(n){return n.map(e=>tj(e)?e:t=>e.validate(t))}function SD(n){if(!n)return null;let e=n.filter(yD);return e.length==0?null:function(t){return bD(xD(t,e))}}function wD(n){return n!=null?SD(MD(n)):null}function CD(n){if(!n)return null;let e=n.filter(yD);return e.length==0?null:function(t){let i=xD(t,e).map(_D);return i6(i).pipe(Pe(bD))}}function TD(n){return n!=null?CD(MD(n)):null}function cD(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function ED(n){return n._rawValidators}function DD(n){return n._rawAsyncValidators}function S7(n){return n?Array.isArray(n)?n:[n]:[]}function i3(n,e){return Array.isArray(n)?n.includes(e):n===e}function lD(n,e){let t=S7(e);return S7(n).forEach(r=>{i3(t,r)||t.push(r)}),t}function uD(n,e){return S7(e).filter(t=>!i3(n,t))}var r3=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=wD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=TD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},o3=class extends r3{name;get formDirective(){return null}get path(){return null}},Yr=class extends r3{_parent=null;name=null;valueAccessor=null},w7=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},nj={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Efe=lt(Z({},nj),{"[class.ng-submitted]":"isSubmitted"}),c1=(()=>{class n extends w7{constructor(t){super(t)}static \u0275fac=function(i){return new(i||n)(Y(Yr,2))};static \u0275dir=Oe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&ze("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[vi]})}return n})();var zh="VALID",Jf="INVALID",r1="PENDING",Ah="DISABLED",s1=class{},s3=class extends s1{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Ih=class extends s1{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Ph=class extends s1{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},o1=class extends s1{status;source;constructor(e,t){super(),this.status=e,this.source=t}};function A7(n){return(u3(n)?n.validators:n)||null}function ij(n){return Array.isArray(n)?wD(n):n||null}function I7(n,e){return(u3(e)?e.asyncValidators:n)||null}function rj(n){return Array.isArray(n)?TD(n):n||null}function u3(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function zD(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new se(1e3,"");if(!i[t])throw new se(1001,"")}function AD(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new se(1002,"")})}var Ua=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return gr(this.statusReactive)}set status(e){gr(()=>this.statusReactive.set(e))}_status=ti(()=>this.statusReactive());statusReactive=gi(void 0);get valid(){return this.status===zh}get invalid(){return this.status===Jf}get pending(){return this.status==r1}get disabled(){return this.status===Ah}get enabled(){return this.status!==Ah}errors;get pristine(){return gr(this.pristineReactive)}set pristine(e){gr(()=>this.pristineReactive.set(e))}_pristine=ti(()=>this.pristineReactive());pristineReactive=gi(!0);get dirty(){return!this.pristine}get touched(){return gr(this.touchedReactive)}set touched(e){gr(()=>this.touchedReactive.set(e))}_touched=ti(()=>this.touchedReactive());touchedReactive=gi(!1);get untouched(){return!this.touched}_events=new ce;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(lD(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(lD(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(uD(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(uD(e,this._rawAsyncValidators))}hasValidator(e){return i3(this._rawValidators,e)}hasAsyncValidator(e){return i3(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(lt(Z({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Ph(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Ph(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(lt(Z({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Ih(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Ih(!0,i))}markAsPending(e={}){this.status=r1;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new o1(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(lt(Z({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ah,this.errors=null,this._forEachChild(r=>{r.disable(lt(Z({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new s3(this.value,i)),this._events.next(new o1(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(lt(Z({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=zh,this._forEachChild(i=>{i.enable(lt(Z({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(lt(Z({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===zh||this.status===r1)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new s3(this.value,t)),this._events.next(new o1(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(lt(Z({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ah:zh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=r1,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=_D(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new o1(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new pt,this.statusChanges=new pt}_calculateStatus(){return this._allControlsDisabled()?Ah:this.errors?Jf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(r1)?r1:this._anyControlsHaveStatus(Jf)?Jf:zh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new Ih(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ph(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){u3(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=ij(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=rj(this._rawAsyncValidators)}},a3=class extends Ua{constructor(e,t,i){super(A7(t),I7(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){AD(this,!0,e),Object.keys(e).forEach(i=>{zD(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var C7=class extends a3{};var d3=new de("",{providedIn:"root",factory:()=>h3}),h3="always";function ID(n,e){return[...e.path,n]}function PD(n,e,t=h3){sj(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),cj(n,e),uj(n,e),lj(n,e),oj(n,e)}function dD(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),aj(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function c3(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function oj(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function sj(n,e){let t=ED(n);e.validator!==null?n.setValidators(cD(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=DD(n);e.asyncValidator!==null?n.setAsyncValidators(cD(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();c3(e._rawValidators,r),c3(e._rawAsyncValidators,r)}function aj(n,e){let t=!1;if(n!==null){if(e.validator!==null){let r=ED(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let r=DD(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(t=!0,n.setAsyncValidators(o))}}}let i=()=>{};return c3(e._rawValidators,i),c3(e._rawAsyncValidators,i),t}function cj(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&RD(n,e)})}function lj(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&RD(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function RD(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function uj(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function P7(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function dj(n){return Object.getPrototypeOf(n.constructor)===YY}function R7(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===a1?t=o:dj(o)?i=o:r=o}),r||i||t||null}function hD(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function fD(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var e3=class extends Ua{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(A7(t),I7(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),u3(t)&&(t.nonNullable||t.initialValueIsDefault)&&(fD(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){hD(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){hD(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){fD(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var hj={provide:Yr,useExisting:kr(()=>el)},pD=Promise.resolve(),el=(()=>{class n extends Yr{_changeDetectorRef;callSetDisabledState;control=new e3;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new pt;constructor(t,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=R7(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),P7(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){PD(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){pD.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&fe(i);pD.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?ID(t,this._parent):[t]}static \u0275fac=function(i){return new(i||n)(Y(o3,9),Y(l3,10),Y(z7,10),Y(Ya,10),Y(Mt,8),Y(d3,8))};static \u0275dir=Oe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Rn([hj]),vi,$e]})}return n})();var k7=new de(""),fj={provide:Yr,useExisting:kr(()=>Rh)},Rh=(()=>{class n extends Yr{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(t){}model;update=new pt;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,i,r,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this._setValidators(t),this._setAsyncValidators(i),this.valueAccessor=R7(this,r)}ngOnChanges(t){if(this._isControlChanged(t)){let i=t.form.previousValue;i&&dD(i,this,!1),PD(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}P7(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&dD(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}static \u0275fac=function(i){return new(i||n)(Y(l3,10),Y(z7,10),Y(Ya,10),Y(k7,8),Y(d3,8))};static \u0275dir=Oe({type:n,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[Rn([fj]),vi,$e]})}return n})();var pj={provide:Yr,useExisting:kr(()=>N7)},N7=(()=>{class n extends Yr{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new pt;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,i,r,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=R7(this,o)}ngOnChanges(t){this._added||this._setUpControl(),P7(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return ID(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(i){return new(i||n)(Y(o3,13),Y(l3,10),Y(z7,10),Y(Ya,10),Y(k7,8))};static \u0275dir=Oe({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Rn([pj]),vi,$e]})}return n})();function mj(n){return typeof n=="number"?n:parseInt(n,10)}var gj=(()=>{class n{_validator=n3;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):n3,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Oe({type:n,features:[$e]})}return n})();var vj={provide:l3,useExisting:kr(()=>O7),multi:!0},O7=(()=>{class n extends gj{maxlength;inputName="maxlength";normalizeInput=t=>mj(t);createValidator=t=>vD(t);static \u0275fac=(()=>{let t;return function(r){return(t||(t=qi(n)))(r||n)}})();static \u0275dir=Oe({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(i,r){i&2&&fn("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[Rn([vj]),vi]})}return n})();var kD=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({})}return n})(),T7=class extends Ua{constructor(e,t,i){super(A7(t),I7(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){AD(this,!1,e),e.forEach((i,r)=>{zD(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>i._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function mD(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var ND=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,i=null){let r=this._reduceControls(t),o={};return mD(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new a3(r,o)}record(t,i=null){let r=this._reduceControls(t);return new C7(r,i)}control(t,i,r){let o={};return this.useNonNullable?(mD(i)?o=i:(o.validators=i,o.asyncValidators=r),new e3(t,lt(Z({},o),{nonNullable:!0}))):new e3(t,i,r)}array(t,i,r){let o=t.map(s=>this._createControl(s));return new T7(o,i,r)}_reduceControls(t){let i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){if(t instanceof e3)return t;if(t instanceof Ua)return t;if(Array.isArray(t)){let i=t[0],r=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(i,r,o)}else return this.control(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var f3=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:d3,useValue:t.callSetDisabledState??h3}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({imports:[kD]})}return n})(),OD=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:k7,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:d3,useValue:t.callSetDisabledState??h3}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({imports:[kD]})}return n})();var LD=new Set,tl,F7=(()=>{class n{_platform=T(Un);_nonce=T(Rs,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):_j}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&yj(t,this._nonce),this._matchMedia(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yj(n,e){if(!LD.has(n))try{tl||(tl=document.createElement("style"),e&&tl.setAttribute("nonce",e),tl.setAttribute("type","text/css"),document.head.appendChild(tl)),tl.sheet&&(tl.sheet.insertRule(`@media ${n} {body{ }}`,0),LD.add(n))}catch(t){console.error(t)}}function _j(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var V7=()=>{},FD=(()=>{class n{ngZone;rendererFactory2;resizeSource$=new ce;listeners=0;renderer;disposeHandle=V7;handler=()=>{this.ngZone.run(()=>{this.resizeSource$.next()})};constructor(t,i){this.ngZone=t,this.rendererFactory2=i,this.renderer=this.rendererFactory2.createRenderer(null,null)}ngOnDestroy(){this.handler=V7}subscribe(){return this.registerListener(),this.resizeSource$.pipe(va(16),mo(()=>this.unregisterListener()))}unsubscribe(){this.unregisterListener()}registerListener(){this.listeners===0&&this.ngZone.runOutsideAngular(()=>{this.disposeHandle=this.renderer.listen("window","resize",this.handler)}),this.listeners+=1}unregisterListener(){this.listeners-=1,this.listeners===0&&(this.disposeHandle(),this.disposeHandle=V7)}static \u0275fac=function(i){return new(i||n)(Me(_t),Me(Xn))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xj=new Map,VD=(()=>{class n{get singletonRegistry(){return Yf.isTestMode?xj:this._singletonRegistry}_singletonRegistry=new Map;registerSingletonWithKey(t,i){let r=this.singletonRegistry.has(t),o=r?this.singletonRegistry.get(t):this.withNewTarget(i);r||this.singletonRegistry.set(t,o)}unregisterSingletonWithKey(t){this.singletonRegistry.has(t)&&this.singletonRegistry.delete(t)}getSingletonWithKey(t){return this.singletonRegistry.has(t)?this.singletonRegistry.get(t).target:null}withNewTarget(t){return{target:t}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var HD=function(n){return n.xxl="xxl",n.xl="xl",n.lg="lg",n.md="md",n.sm="sm",n.xs="xs",n}(HD||{}),Mj={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"},BD={xs:"(max-width: 479.98px)",sm:"(max-width: 575.98px)",md:"(max-width: 767.98px)",lg:"(max-width: 991.98px)",xl:"(max-width: 1199.98px)",xxl:"(max-width: 1599.98px)"},UD=(()=>{class n{resizeService;mediaMatcher;destroy$=new ce;constructor(t,i){this.resizeService=t,this.mediaMatcher=i,this.resizeService.subscribe().pipe(_e(this.destroy$)).subscribe(()=>{})}ngOnDestroy(){this.destroy$.next()}subscribe(t,i){if(i){let r=()=>this.matchMedia(t,!0);return this.resizeService.subscribe().pipe(Pe(r),Di(r()),ki((o,s)=>o[0]===s[0]),Pe(o=>o[1]))}else{let r=()=>this.matchMedia(t);return this.resizeService.subscribe().pipe(Pe(r),Di(r()),ki())}}matchMedia(t,i){let r=HD.md,o={};return Object.keys(t).map(s=>{let a=s,c=this.mediaMatcher.matchMedia(Mj[a]).matches;o[s]=c,c&&(r=a)}),i?[r,o]:r}static \u0275fac=function(i){return new(i||n)(Me(FD),Me(F7))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jr=(()=>{class n extends ce{ngOnDestroy(){this.next(),this.complete()}static \u0275fac=(()=>{let t;return function(r){return(t||(t=qi(n)))(r||n)}})();static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();var li=(()=>{class n{viewContainer;templateRef;embeddedViewRef=null;context=new B7;nzStringTemplateOutletContext=null;nzStringTemplateOutlet=null;static ngTemplateContextGuard(t,i){return!0}recreateView(){this.viewContainer.clear(),Eh(this.nzStringTemplateOutlet)?this.embeddedViewRef=this.viewContainer.createEmbeddedView(this.nzStringTemplateOutlet,this.nzStringTemplateOutletContext):this.embeddedViewRef=this.viewContainer.createEmbeddedView(this.templateRef,this.context)}updateContext(){let t=Eh(this.nzStringTemplateOutlet)?this.nzStringTemplateOutletContext:this.context,i=this.embeddedViewRef.context;if(t)for(let r of Object.keys(t))i[r]=t[r]}constructor(t,i){this.viewContainer=t,this.templateRef=i}ngOnChanges(t){let{nzStringTemplateOutletContext:i,nzStringTemplateOutlet:r}=t,o=()=>{let a=!1;return r&&(a=r.firstChange||Eh(r.previousValue)||Eh(r.currentValue)),i&&(u=>{let d=Object.keys(u.previousValue||{}),h=Object.keys(u.currentValue||{});if(d.length===h.length){for(let f of h)if(d.indexOf(f)===-1)return!0;return!1}else return!0})(i)||a};r&&(this.context.$implicit=r.currentValue),o()?this.recreateView():this.updateContext()}static \u0275fac=function(i){return new(i||n)(Y(zi),Y(ui))};static \u0275dir=Oe({type:n,selectors:[["","nzStringTemplateOutlet",""]],inputs:{nzStringTemplateOutletContext:"nzStringTemplateOutletContext",nzStringTemplateOutlet:"nzStringTemplateOutlet"},exportAs:["nzStringTemplateOutlet"],features:[$e]})}return n})(),B7=class{$implicit},xi=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({})}return n})();function Sj(n,e){if(n&1&&me(0,"nz-icon",0),n&2){let t=R();$("nzType",t.iconType)}}var js=(()=>{class n{formStatusChanges=new fa(1);static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),p3=(()=>{class n{noFormStatus=new Qt(!1);static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),wj={error:"close-circle-fill",validating:"loading",success:"check-circle-fill",warning:"exclamation-circle-fill"},kh=(()=>{class n{cdr;status="";constructor(t){this.cdr=t}iconType=null;ngOnChanges(t){this.updateIcon()}updateIcon(){this.iconType=this.status?wj[this.status]:null,this.cdr.markForCheck()}static \u0275fac=function(i){return new(i||n)(Y(Mt))};static \u0275cmp=Fe({type:n,selectors:[["nz-form-item-feedback-icon"]],hostAttrs:[1,"ant-form-item-feedback-icon"],hostVars:8,hostBindings:function(i,r){i&2&&ze("ant-form-item-feedback-icon-error",r.status==="error")("ant-form-item-feedback-icon-warning",r.status==="warning")("ant-form-item-feedback-icon-success",r.status==="success")("ant-form-item-feedback-icon-validating",r.status==="validating")},inputs:{status:"status"},exportAs:["nzFormFeedbackIcon"],features:[$e],decls:1,vars:1,consts:[[3,"nzType"]],template:function(i,r){i&1&&G(0,Sj,1,1,"nz-icon",0),i&2&&le(r.iconType?0:-1)},dependencies:[wn,pn],encapsulation:2,changeDetection:0})}return n})();var Tj=new de("cdk-dir-doc",{providedIn:"root",factory:Ej});function Ej(){return T(At)}var Dj=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function YD(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?Dj.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var Ut=(()=>{class n{value="ltr";change=new pt;constructor(){let t=T(Tj,{optional:!0});if(t){let i=t.body?t.body.dir:null,r=t.documentElement?t.documentElement.dir:null;this.value=YD(i||r||"ltr")}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var nl=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({})}return n})();function m3(n){n||(Sd(m3),n=T(Nr));let e=new it(t=>n.onDestroy(t.next.bind(t)));return t=>t.pipe(_e(e))}function Nh(n,e){let t=!e?.manualCleanup;t&&!e?.injector&&Sd(Nh);let i=t?e?.injector?.get(Nr)??T(Nr):null,r=zj(e?.equal),o;e?.requireSync?o=gi({kind:0},{equal:r}):o=gi({kind:1,value:e?.initialValue},{equal:r});let s,a=n.subscribe({next:c=>o.set({kind:1,value:c}),error:c=>{if(e?.rejectErrors)throw c;o.set({kind:2,error:c})},complete:()=>{s?.()}});if(e?.requireSync&&o().kind===0)throw new se(601,!1);return s=i?.onDestroy(a.unsubscribe.bind(a)),ti(()=>{let c=o();switch(c.kind){case 1:return c.value;case 2:throw c.error;case 0:throw new se(601,!1)}},{equal:e?.equal})}function zj(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}var GD=["*"],Aj=n=>({$implicit:n});function Ij(n,e){if(n&1&&rt(0),n&2){let t=R(3);Pn(t.nzSplit)}}function Pj(n,e){if(n&1&&(j(0,"span",3),G(1,Ij,1,1,"ng-template",4),q()),n&2){let t=R(),i=t.$index,r=t.$count,o=R();Sn("margin-block-end",o.nzDirection==="vertical"?i===r-1?null:o.spaceSize:null,"px")("margin-inline-end",o.nzDirection==="horizontal"?i===r-1?null:o.spaceSize:null,"px"),O(),$("nzStringTemplateOutlet",o.nzSplit)("nzStringTemplateOutletContext",Fr(6,Aj,i))}}function Rj(n,e){if(n&1&&(j(0,"div",0),kc(1,1),q(),G(2,Pj,2,8,"span",2)),n&2){let t=e.$implicit,i=e.$index,r=e.$count,o=R();Sn("margin-block-end",o.nzDirection==="vertical"?i===r-1?null:o.spaceSize:null,"px")("margin-inline-end",o.nzDirection==="horizontal"?i===r-1?null:o.spaceSize:null,"px"),O(),$("ngTemplateOutlet",t),O(),le(o.nzSplit&&i!==r-1?2:-1)}}var il=new de("NZ_SPACE_COMPACT_SIZE"),WD=new de("NZ_SPACE_COMPACT_ITEMS"),Ga=new de("NZ_SPACE_COMPACT_ITEM_TYPE"),kj=(()=>{class n{nzBlock=Kn(!1,{transform:fe});nzDirection=Kn("horizontal");nzSize=Kn("default");elementRef=T(Je);static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["nz-space-compact"]],hostAttrs:[1,"ant-space-compact"],hostVars:4,hostBindings:function(i,r){i&2&&ze("ant-space-compact-block",r.nzBlock())("ant-space-compact-vertical",r.nzDirection()==="vertical")},inputs:{nzBlock:[1,"nzBlock"],nzDirection:[1,"nzDirection"],nzSize:[1,"nzSize"]},exportAs:["nzSpaceCompact"],features:[Rn([{provide:il,useFactory:()=>T(n).nzSize},{provide:WD,useFactory:()=>gi([])}])],ngContentSelectors:GD,decls:1,vars:0,template:function(i,r){i&1&&(Zt(),Rt(0))},encapsulation:2,changeDetection:0})}return n})(),rl=(()=>{class n{spaceCompactCmp=T(kj,{host:!0,optional:!0});items=T(WD,{host:!0,optional:!0});type=T(Ga);elementRef=T(Je);directionality=T(Ut);dir=Nh(this.directionality.change,{initialValue:this.directionality.value});get parentElement(){return this.elementRef.nativeElement?.parentElement}class=ti(()=>{if(!this.spaceCompactCmp||!this.items||this.parentElement!==this.spaceCompactCmp.elementRef.nativeElement)return null;let t=this.items(),i=this.spaceCompactCmp.nzDirection(),r=[Nj(this.type,i,this.dir()==="rtl")],o=t.indexOf(this),s=t.findIndex(a=>a);return o===s?r.push(Oj(this.type,i)):o===t.length-1&&r.push(Lj(this.type,i)),r});constructor(){!this.spaceCompactCmp||!this.items||xo(()=>{if(this.parentElement===this.spaceCompactCmp.elementRef.nativeElement){let t=Array.from(this.parentElement.children).indexOf(this.elementRef.nativeElement);this.items.update(i=>{let r=i.slice();return r.splice(t,0,this),r})}})}ngOnDestroy(){this.items?.update(t=>t.filter(i=>i!==this))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Oe({type:n,hostVars:2,hostBindings:function(i,r){i&2&&si(r.class())},exportAs:["nzSpaceCompactItem"]})}return n})();function Y7(n,e,t){return`ant-${n}-compact-${e==="vertical"?"vertical-":""}${t}`}function Nj(n,e,t){let i=t?"-rtl":"";return`${Y7(n,e,"item")}${i}`}function Oj(n,e){return Y7(n,e,"first-item")}function Lj(n,e){return Y7(n,e,"last-item")}var Fj=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Oe({type:n,selectors:[["","nzSpaceItem",""]]})}return n})(),Vj="space",jD={small:8,middle:16,large:24},_3e=(()=>{let n,e=[],t=[];return class U7{static{let r=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;n=[Fn()],On(null,null,n,{kind:"field",name:"nzSize",static:!1,private:!1,access:{has:o=>"nzSize"in o,get:o=>o.nzSize,set:(o,s)=>{o.nzSize=s}},metadata:r},e,t),r&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})}nzConfigService;cdr;_nzModuleName=Vj;nzDirection="horizontal";nzAlign;nzSplit=null;nzWrap=!1;nzSize=Ct(this,e,"small");items=Ct(this,t);mergedAlign;spaceSize=jD.small;destroy$=new ce;constructor(r,o){this.nzConfigService=r,this.cdr=o}updateSpaceItems(){let r=typeof this.nzSize=="string"?jD[this.nzSize]:this.nzSize;this.spaceSize=r/(this.nzSplit?2:1),this.cdr.markForCheck()}ngOnChanges(){this.updateSpaceItems(),this.mergedAlign=this.nzAlign===void 0&&this.nzDirection==="horizontal"?"center":this.nzAlign}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}ngAfterContentInit(){this.updateSpaceItems(),this.items.changes.pipe(_e(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}static \u0275fac=function(o){return new(o||U7)(Y(ci),Y(Mt))};static \u0275cmp=Fe({type:U7,selectors:[["nz-space"],["","nz-space",""]],contentQueries:function(o,s,a){if(o&1&&ai(a,Fj,4,ui),o&2){let c;Wt(c=$t())&&(s.items=c)}},hostAttrs:[1,"ant-space"],hostVars:14,hostBindings:function(o,s){o&2&&(Sn("flex-wrap",s.nzWrap?"wrap":null),ze("ant-space-horizontal",s.nzDirection==="horizontal")("ant-space-vertical",s.nzDirection==="vertical")("ant-space-align-start",s.mergedAlign==="start")("ant-space-align-end",s.mergedAlign==="end")("ant-space-align-center",s.mergedAlign==="center")("ant-space-align-baseline",s.mergedAlign==="baseline"))},inputs:{nzDirection:"nzDirection",nzAlign:"nzAlign",nzSplit:"nzSplit",nzWrap:[2,"nzWrap","nzWrap",fe],nzSize:"nzSize"},exportAs:["nzSpace"],features:[$e],ngContentSelectors:GD,decls:3,vars:0,consts:[[1,"ant-space-item"],[3,"ngTemplateOutlet"],[1,"ant-space-split",3,"margin-block-end","margin-inline-end"],[1,"ant-space-split"],[3,"nzStringTemplateOutlet","nzStringTemplateOutletContext"]],template:function(o,s){o&1&&(Zt(),Rt(0),Xi(1,Rj,3,6,null,null,Ea)),o&2&&(O(),Ki(s.items))},dependencies:[ni,li],encapsulation:2,changeDetection:0})}})();function $D(n){return n.buttons===0||n.detail===0}function qD(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var XD=new de("cdk-input-modality-detector-options"),KD={ignoreKeys:[18,17,224,91,16]},ZD=650,G7={passive:!0,capture:!0},QD=(()=>{class n{_platform=T(Un);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new Qt(null);_options;_lastTouchMs=0;_onKeydown=t=>{this._options?.ignoreKeys?.some(i=>i===t.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Ur(t))};_onMousedown=t=>{Date.now()-this._lastTouchMs<ZD||(this._modality.next($D(t)?"keyboard":"mouse"),this._mostRecentTarget=Ur(t))};_onTouchstart=t=>{if(qD(t)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ur(t)};constructor(){let t=T(_t),i=T(At),r=T(XD,{optional:!0});if(this._options=Z(Z({},KD),r),this.modalityDetected=this._modality.pipe(d6(1)),this.modalityChanged=this.modalityDetected.pipe(ki()),this._platform.isBrowser){let o=T(Xn).createRenderer(null,null);this._listenerCleanups=t.runOutsideAngular(()=>[Ys(o,i,"keydown",this._onKeydown,G7),Ys(o,i,"mousedown",this._onMousedown,G7),Ys(o,i,"touchstart",this._onTouchstart,G7)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(t=>t())}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Oh=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(Oh||{}),JD=new de("cdk-focus-monitor-default-options"),g3=tD({passive:!0,capture:!0}),Lh=(()=>{class n{_ngZone=T(_t);_platform=T(Un);_inputModalityDetector=T(QD);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=T(At,{optional:!0});_stopInputModalityDetector=new ce;constructor(){let t=T(JD,{optional:!0});this._detectionMode=t?.detectionMode||Oh.IMMEDIATE}_rootNodeFocusAndBlurListener=t=>{let i=Ur(t);for(let r=i;r;r=r.parentElement)t.type==="focus"?this._onFocus(t,r):this._onBlur(t,r)};monitor(t,i=!1){let r=Ju(t);if(!this._platform.isBrowser||r.nodeType!==1)return Ae();let o=b7(r)||this._getDocument(),s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;let a={checkChildren:i,subject:new ce,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){let i=Ju(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){let o=Ju(t),s=this._getDocument().activeElement;o===s?this._getClosestElementsInfo(o).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),typeof o.focus=="function"&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===Oh.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused",i==="touch"),t.classList.toggle("cdk-keyboard-focused",i==="keyboard"),t.classList.toggle("cdk-mouse-focused",i==="mouse"),t.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&i,this._detectionMode===Oh.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?ZD:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(t,i){let r=this._elementInfo.get(i),o=Ur(t);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(t,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,g3),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,g3)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(_e(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){let i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,g3),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,g3),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){let i=[];return this._elementInfo.forEach((r,o)=>{(o===t||r.checkChildren&&o.contains(t))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let o=t.labels;if(o){for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0}return!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var v3=new WeakMap,W7=(()=>{class n{_appRef;_injector=T(Ln);_environmentInjector=T(Jn);load(t){let i=this._appRef=this._appRef||this._injector.get(no),r=v3.get(i);r||(r={loaders:new Set,refs:[]},v3.set(i,r),i.onDestroy(()=>{v3.get(i)?.refs.forEach(o=>o.destroy()),v3.delete(i)})),r.loaders.has(t)||(r.loaders.add(t),r.refs.push(C2(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var $7={},ez=(()=>{class n{_appId=T(Cd);getId(t){return this._appId!=="ng"&&(t+=this._appId),$7.hasOwnProperty(t)||($7[t]=0),`${t}${$7[t]++}`}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tz(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var Bj=["nz-input-group-slot",""],nz=["*"];function Uj(n,e){if(n&1&&me(0,"nz-icon",0),n&2){let t=R();$("nzType",t.icon)}}function Yj(n,e){if(n&1&&(An(0),rt(1),In()),n&2){let t=R();O(),Pn(t.template)}}function jj(n,e){if(n&1&&me(0,"span",3),n&2){let t=R(2);$("icon",t.nzAddOnBeforeIcon)("template",t.nzAddOnBefore)}}function Gj(n,e){}function Wj(n,e){if(n&1&&(j(0,"span",6),G(1,Gj,0,0,"ng-template",5),q()),n&2){let t=R(2),i=dt(3);si(t.affixInGroupStatusCls),ze("ant-input-affix-wrapper-disabled",t.disabled)("ant-input-affix-wrapper-sm",t.isSmall)("ant-input-affix-wrapper-lg",t.isLarge)("ant-input-affix-wrapper-focused",t.focused),O(),$("ngTemplateOutlet",i)}}function $j(n,e){}function qj(n,e){if(n&1&&G(0,$j,0,0,"ng-template",5),n&2){R(2);let t=dt(5);$("ngTemplateOutlet",t)}}function Xj(n,e){if(n&1&&me(0,"span",3),n&2){let t=R(2);$("icon",t.nzAddOnAfterIcon)("template",t.nzAddOnAfter)}}function Kj(n,e){if(n&1&&(j(0,"span",2),G(1,jj,1,2,"span",3)(2,Wj,2,11,"span",4)(3,qj,1,1,null,5)(4,Xj,1,2,"span",3),q()),n&2){let t=R();O(),le(t.nzAddOnBefore||t.nzAddOnBeforeIcon?1:-1),O(),le(t.isAffix||t.hasFeedback?2:3),O(2),le(t.nzAddOnAfter||t.nzAddOnAfterIcon?4:-1)}}function Zj(n,e){}function Qj(n,e){if(n&1&&G(0,Zj,0,0,"ng-template",5),n&2){R(2);let t=dt(3);$("ngTemplateOutlet",t)}}function Jj(n,e){}function eG(n,e){if(n&1&&G(0,Jj,0,0,"ng-template",5),n&2){R(2);let t=dt(5);$("ngTemplateOutlet",t)}}function tG(n,e){if(n&1&&G(0,Qj,1,1,null,5)(1,eG,1,1,null,5),n&2){let t=R();le(t.isAffix?0:1)}}function nG(n,e){if(n&1&&me(0,"span",7),n&2){let t=R(2);$("icon",t.nzPrefixIcon)("template",t.nzPrefix)}}function iG(n,e){}function rG(n,e){if(n&1&&me(0,"nz-form-item-feedback-icon",9),n&2){let t=R(3);$("status",t.status)}}function oG(n,e){if(n&1&&(j(0,"span",8),G(1,rG,1,1,"nz-form-item-feedback-icon",9),q()),n&2){let t=R(2);$("icon",t.nzSuffixIcon)("template",t.nzSuffix),O(),le(t.isFeedback?1:-1)}}function sG(n,e){if(n&1&&G(0,nG,1,2,"span",7)(1,iG,0,0,"ng-template",5)(2,oG,2,3,"span",8),n&2){let t=R(),i=dt(5);le(t.nzPrefix||t.nzPrefixIcon?0:-1),O(),$("ngTemplateOutlet",i),O(),le(t.nzSuffix||t.nzSuffixIcon||t.isFeedback?2:-1)}}function aG(n,e){if(n&1&&(j(0,"span",10),me(1,"nz-form-item-feedback-icon",9),q()),n&2){let t=R(2);O(),$("status",t.status)}}function cG(n,e){if(n&1&&(Rt(0),G(1,aG,2,1,"span",10)),n&2){let t=R();O(),le(!t.isAddOn&&!t.isAffix&&t.isFeedback?1:-1)}}var lG=["otpInput"];function uG(n,e){if(n&1){let t=un();j(0,"input",2,0),We("input",function(r){let o=je(t).$index,s=R();return Ge(s.onInput(o,r))})("focus",function(r){je(t);let o=R();return Ge(o.onFocus(r))})("keydown",function(r){let o=je(t).$index,s=R();return Ge(s.onKeyDown(o,r))})("paste",function(r){let o=je(t).$index,s=R();return Ge(s.onPaste(o,r))}),q()}if(n&2){let t=e.$implicit,i=R();$("nzSize",i.nzSize)("formControl",t)("nzStatus",i.nzStatus)}}var q7=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Oe({type:n,selectors:[["","nzInputAddonBefore",""]]})}return n})(),X7=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Oe({type:n,selectors:[["","nzInputAddonAfter",""]]})}return n})(),K7=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Oe({type:n,selectors:[["","nzInputPrefix",""]]})}return n})(),Z7=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Oe({type:n,selectors:[["","nzInputSuffix",""]]})}return n})(),iz=(()=>{class n{icon=null;type=null;template=null;static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["","nz-input-group-slot",""]],hostVars:6,hostBindings:function(i,r){i&2&&ze("ant-input-group-addon",r.type==="addon")("ant-input-prefix",r.type==="prefix")("ant-input-suffix",r.type==="suffix")},inputs:{icon:"icon",type:"type",template:"template"},attrs:Bj,ngContentSelectors:nz,decls:3,vars:2,consts:[[3,"nzType"],[4,"nzStringTemplateOutlet"]],template:function(i,r){i&1&&(Zt(),G(0,Uj,1,1,"nz-icon",0)(1,Yj,2,1,"ng-container",1),Rt(2)),i&2&&(le(r.icon?0:-1),O(),$("nzStringTemplateOutlet",r.template))},dependencies:[wn,pn,xi,li],encapsulation:2,changeDetection:0})}return n})(),y3=(()=>{class n{renderer;elementRef;hostView;directionality;nzBorderless=!1;nzSize="default";nzStepperless=!0;nzStatus="";get disabled(){return this.ngControl&&this.ngControl.disabled!==null?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=t}_disabled=!1;disabled$=new ce;dir="ltr";prefixCls="ant-input";status="";statusCls={};hasFeedback=!1;feedbackRef=null;components=[];ngControl=T(Yr,{self:!0,optional:!0});finalSize=ti(()=>this.compactSize?this.compactSize():this.size());size=gi(this.nzSize);compactSize=T(il,{optional:!0});destroy$=T(jr);nzFormStatusService=T(js,{optional:!0});nzFormNoStatusService=T(p3,{optional:!0});constructor(t,i,r,o){this.renderer=t,this.elementRef=i,this.hostView=r,this.directionality=o}ngOnInit(){this.nzFormStatusService?.formStatusChanges.pipe(ki((t,i)=>t.status===i.status&&t.hasFeedback===i.hasFeedback),_e(this.destroy$)).subscribe(({status:t,hasFeedback:i})=>{this.setStatusStyles(t,i)}),this.ngControl&&this.ngControl.statusChanges?.pipe(xt(()=>this.ngControl.disabled!==null),_e(this.destroy$)).subscribe(()=>{this.disabled$.next(this.ngControl.disabled)}),this.dir=this.directionality.value,this.directionality.change?.pipe(_e(this.destroy$)).subscribe(t=>{this.dir=t})}ngOnChanges({disabled:t,nzStatus:i,nzSize:r}){t&&this.disabled$.next(this.disabled),i&&this.setStatusStyles(this.nzStatus,this.hasFeedback),r&&this.size.set(r.currentValue)}setStatusStyles(t,i){this.status=t,this.hasFeedback=i,this.renderFeedbackIcon(),this.statusCls=Us(this.prefixCls,t,i),Object.keys(this.statusCls).forEach(r=>{this.statusCls[r]?this.renderer.addClass(this.elementRef.nativeElement,r):this.renderer.removeClass(this.elementRef.nativeElement,r)})}renderFeedbackIcon(){if(!this.status||!this.hasFeedback||this.nzFormNoStatusService){this.hostView.clear(),this.feedbackRef=null;return}this.feedbackRef=this.feedbackRef||this.hostView.createComponent(kh),this.feedbackRef.location.nativeElement.classList.add("ant-input-suffix"),this.feedbackRef.instance.status=this.status,this.feedbackRef.instance.updateIcon()}static \u0275fac=function(i){return new(i||n)(Y(Mn),Y(Je),Y(zi),Y(Ut))};static \u0275dir=Oe({type:n,selectors:[["input","nz-input",""],["textarea","nz-input",""]],hostAttrs:[1,"ant-input"],hostVars:13,hostBindings:function(i,r){i&2&&(fn("disabled",r.disabled||null),ze("ant-input-disabled",r.disabled)("ant-input-borderless",r.nzBorderless)("ant-input-lg",r.finalSize()==="large")("ant-input-sm",r.finalSize()==="small")("ant-input-rtl",r.dir==="rtl")("ant-input-stepperless",r.nzStepperless))},inputs:{nzBorderless:[2,"nzBorderless","nzBorderless",fe],nzSize:"nzSize",nzStepperless:[2,"nzStepperless","nzStepperless",fe],nzStatus:"nzStatus",disabled:[2,"disabled","disabled",fe]},exportAs:["nzInput"],features:[Rn([jr,{provide:Ga,useValue:"input"}]),Pc([rl]),$e]})}return n})(),rz=(()=>{class n{elementRef;constructor(t){this.elementRef=t}static \u0275fac=function(i){return new(i||n)(Y(Je))};static \u0275dir=Oe({type:n,selectors:[["nz-input-group","nzSuffix",""],["nz-input-group","nzPrefix",""]]})}return n})(),Q7=(()=>{class n{focusMonitor;elementRef;renderer;cdr;directionality;listOfNzInputDirective;nzAddOnBeforeIcon=null;nzAddOnAfterIcon=null;nzPrefixIcon=null;nzSuffixIcon=null;nzAddOnBefore;nzAddOnAfter;nzPrefix;nzStatus="";nzSuffix;nzSize="default";nzSearch=!1;nzCompact=!1;isLarge=!1;isSmall=!1;isAffix=!1;isAddOn=!1;isFeedback=!1;focused=!1;disabled=!1;dir="ltr";prefixCls="ant-input";affixStatusCls={};groupStatusCls={};affixInGroupStatusCls={};status="";hasFeedback=!1;destroy$=new ce;nzFormStatusService=T(js,{optional:!0});nzFormNoStatusService=T(p3,{optional:!0});constructor(t,i,r,o,s){this.focusMonitor=t,this.elementRef=i,this.renderer=r,this.cdr=o,this.directionality=s}updateChildrenInputSize(){this.listOfNzInputDirective&&this.listOfNzInputDirective.forEach(t=>t.size.set(this.nzSize))}ngOnInit(){this.nzFormStatusService?.formStatusChanges.pipe(ki((t,i)=>t.status===i.status&&t.hasFeedback===i.hasFeedback),_e(this.destroy$)).subscribe(({status:t,hasFeedback:i})=>{this.setStatusStyles(t,i)}),this.focusMonitor.monitor(this.elementRef,!0).pipe(_e(this.destroy$)).subscribe(t=>{this.focused=!!t,this.cdr.markForCheck()}),this.dir=this.directionality.value,this.directionality.change?.pipe(_e(this.destroy$)).subscribe(t=>{this.dir=t})}ngAfterContentInit(){this.updateChildrenInputSize();let t=this.listOfNzInputDirective.changes.pipe(Di(this.listOfNzInputDirective));t.pipe(Dn(i=>ga(t,...i.map(r=>r.disabled$))),mn(()=>t),Pe(i=>i.some(r=>r.disabled)),_e(this.destroy$)).subscribe(i=>{this.disabled=i,this.cdr.markForCheck()})}ngOnChanges(t){let{nzSize:i,nzSuffix:r,nzPrefix:o,nzPrefixIcon:s,nzSuffixIcon:a,nzAddOnAfter:c,nzAddOnBefore:l,nzAddOnAfterIcon:u,nzAddOnBeforeIcon:d,nzStatus:h}=t;i&&(this.updateChildrenInputSize(),this.isLarge=this.nzSize==="large",this.isSmall=this.nzSize==="small"),(r||o||s||a)&&(this.isAffix=!!(this.nzSuffix||this.nzPrefix||this.nzPrefixIcon||this.nzSuffixIcon)),(c||l||u||d)&&(this.isAddOn=!!(this.nzAddOnAfter||this.nzAddOnBefore||this.nzAddOnAfterIcon||this.nzAddOnBeforeIcon),this.nzFormNoStatusService?.noFormStatus?.next(this.isAddOn)),h&&this.setStatusStyles(this.nzStatus,this.hasFeedback)}ngOnDestroy(){this.focusMonitor.stopMonitoring(this.elementRef),this.destroy$.next(),this.destroy$.complete()}setStatusStyles(t,i){this.status=t,this.hasFeedback=i,this.isFeedback=!!t&&i;let r=!!(this.nzSuffix||this.nzPrefix||this.nzPrefixIcon||this.nzSuffixIcon);this.isAffix=r||!this.isAddOn&&i,this.affixInGroupStatusCls=this.isAffix||this.isFeedback?this.affixStatusCls=Us(`${this.prefixCls}-affix-wrapper`,t,i):{},this.cdr.markForCheck(),this.affixStatusCls=Us(`${this.prefixCls}-affix-wrapper`,this.isAddOn?"":t,this.isAddOn?!1:i),this.groupStatusCls=Us(`${this.prefixCls}-group-wrapper`,this.isAddOn?t:"",this.isAddOn?i:!1);let o=Z(Z({},this.affixStatusCls),this.groupStatusCls);Object.keys(o).forEach(s=>{o[s]?this.renderer.addClass(this.elementRef.nativeElement,s):this.renderer.removeClass(this.elementRef.nativeElement,s)})}static \u0275fac=function(i){return new(i||n)(Y(Lh),Y(Je),Y(Mn),Y(Mt),Y(Ut))};static \u0275cmp=Fe({type:n,selectors:[["nz-input-group"]],contentQueries:function(i,r,o){if(i&1&&ai(o,y3,4),i&2){let s;Wt(s=$t())&&(r.listOfNzInputDirective=s)}},hostVars:40,hostBindings:function(i,r){i&2&&ze("ant-input-group-compact",r.nzCompact)("ant-input-search-enter-button",r.nzSearch)("ant-input-search",r.nzSearch)("ant-input-search-rtl",r.dir==="rtl")("ant-input-search-sm",r.nzSearch&&r.isSmall)("ant-input-search-large",r.nzSearch&&r.isLarge)("ant-input-group-wrapper",r.isAddOn)("ant-input-group-wrapper-rtl",r.dir==="rtl")("ant-input-group-wrapper-lg",r.isAddOn&&r.isLarge)("ant-input-group-wrapper-sm",r.isAddOn&&r.isSmall)("ant-input-affix-wrapper",r.isAffix&&!r.isAddOn)("ant-input-affix-wrapper-rtl",r.dir==="rtl")("ant-input-affix-wrapper-focused",r.isAffix&&r.focused)("ant-input-affix-wrapper-disabled",r.isAffix&&r.disabled)("ant-input-affix-wrapper-lg",r.isAffix&&!r.isAddOn&&r.isLarge)("ant-input-affix-wrapper-sm",r.isAffix&&!r.isAddOn&&r.isSmall)("ant-input-group",!r.isAffix&&!r.isAddOn)("ant-input-group-rtl",r.dir==="rtl")("ant-input-group-lg",!r.isAffix&&!r.isAddOn&&r.isLarge)("ant-input-group-sm",!r.isAffix&&!r.isAddOn&&r.isSmall)},inputs:{nzAddOnBeforeIcon:"nzAddOnBeforeIcon",nzAddOnAfterIcon:"nzAddOnAfterIcon",nzPrefixIcon:"nzPrefixIcon",nzSuffixIcon:"nzSuffixIcon",nzAddOnBefore:"nzAddOnBefore",nzAddOnAfter:"nzAddOnAfter",nzPrefix:"nzPrefix",nzStatus:"nzStatus",nzSuffix:"nzSuffix",nzSize:"nzSize",nzSearch:[2,"nzSearch","nzSearch",fe],nzCompact:[2,"nzCompact","nzCompact",fe]},exportAs:["nzInputGroup"],features:[Rn([p3,{provide:Ga,useValue:"input"}]),Pc([rl]),$e],ngContentSelectors:nz,decls:6,vars:1,consts:[["affixTemplate",""],["contentTemplate",""],[1,"ant-input-wrapper","ant-input-group"],["nz-input-group-slot","","type","addon",3,"icon","template"],[1,"ant-input-affix-wrapper",3,"ant-input-affix-wrapper-disabled","ant-input-affix-wrapper-sm","ant-input-affix-wrapper-lg","ant-input-affix-wrapper-focused","class"],[3,"ngTemplateOutlet"],[1,"ant-input-affix-wrapper"],["nz-input-group-slot","","type","prefix",3,"icon","template"],["nz-input-group-slot","","type","suffix",3,"icon","template"],[3,"status"],["nz-input-group-slot","","type","suffix"]],template:function(i,r){i&1&&(Zt(),G(0,Kj,5,3,"span",2)(1,tG,2,1)(2,sG,3,3,"ng-template",null,0,Jt)(4,cG,2,1,"ng-template",null,1,Jt)),i&2&&le(r.isAddOn?0:1)},dependencies:[iz,ni,kh],encapsulation:2,changeDetection:0})}return n})(),dG=(()=>{class n{formBuilder;nzDestroyService;otpInputs;nzLength=6;nzSize="default";disabled=!1;nzStatus="";nzFormatter=t=>t;nzMask=null;otpArray;internalValue=[];onChangeCallback;onTouched=()=>{};constructor(t,i){this.formBuilder=t,this.nzDestroyService=i,this.createFormArray()}ngOnChanges(t){t.nzLength?.currentValue&&this.createFormArray(),t.disabled&&this.setDisabledState(this.disabled)}onInput(t,i){let r=i.target,o=this.otpInputs.toArray()[t+1];r.value&&o?o.nativeElement.focus():o||this.selectInputBox(t)}onFocus(t){t.target.select()}onKeyDown(t,i){let r=this.otpInputs.toArray()[t-1];i.keyCode===8&&(i.preventDefault(),this.internalValue[t]="",this.otpArray.at(t).setValue("",{emitEvent:!1}),r&&this.selectInputBox(t-1),this.emitValue())}writeValue(t){if(!t){this.otpArray.reset();return}let i=t.split("");this.internalValue=i,i.forEach((r,o)=>{let s=this.nzFormatter(r),a=this.nzMask?this.nzMask:s;this.otpArray.at(o).setValue(a,{emitEvent:!1})})}registerOnChange(t){this.onChangeCallback=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.otpArray.disable():this.otpArray.enable()}onPaste(t,i){let r=i.clipboardData?.getData("text")||"";if(!r)return;let o=t;for(let s of r.split(""))if(o<this.nzLength){let a=this.nzFormatter(s);this.internalValue[o]=s;let c=this.nzMask?this.nzMask:a;this.otpArray.at(o).setValue(c,{emitEvent:!1}),o++}else break;i.preventDefault(),this.selectInputBox(o),this.emitValue()}createFormArray(){this.otpArray=this.formBuilder.array([]),this.internalValue=new Array(this.nzLength).fill("");for(let t=0;t<this.nzLength;t++){let i=this.formBuilder.nonNullable.control("",[t3.required]);i.valueChanges.pipe(Bn(r=>{let o=this.nzFormatter(r);this.internalValue[t]=o,i.setValue(this.nzMask??o,{emitEvent:!1}),this.emitValue()}),_e(this.nzDestroyService)).subscribe(),this.otpArray.push(i)}}emitValue(){let t=this.internalValue.join("");this.onChangeCallback&&this.onChangeCallback(t)}selectInputBox(t){let i=this.otpInputs.toArray();t>=i.length&&(t=i.length-1),i[t].nativeElement.select()}static \u0275fac=function(i){return new(i||n)(Y(ND),Y(jr))};static \u0275cmp=Fe({type:n,selectors:[["nz-input-otp"]],viewQuery:function(i,r){if(i&1&&Ai(lG,5),i&2){let o;Wt(o=$t())&&(r.otpInputs=o)}},hostAttrs:[1,"ant-otp"],inputs:{nzLength:[2,"nzLength","nzLength",yi],nzSize:"nzSize",disabled:[2,"disabled","disabled",fe],nzStatus:"nzStatus",nzFormatter:"nzFormatter",nzMask:"nzMask"},exportAs:["nzInputOtp"],features:[Rn([{provide:Ya,useExisting:kr(()=>n),multi:!0},jr]),$e],decls:2,vars:0,consts:[["otpInput",""],["nz-input","","type","text","maxlength","1","size","1",1,"ant-otp-input",3,"nzSize","formControl","nzStatus"],["nz-input","","type","text","maxlength","1","size","1",1,"ant-otp-input",3,"input","focus","keydown","paste","nzSize","formControl","nzStatus"]],template:function(i,r){i&1&&Xi(0,uG,2,3,"input",1,Ta),i&2&&Ki(r.otpArray.controls)},dependencies:[y3,OD,a1,c1,O7,Rh],encapsulation:2,changeDetection:0})}return n})();var _3=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({imports:[Q7,iz,dG]})}return n})();var l1=(()=>{class n{elementRef;renderer;hidden=null;setHiddenAttribute(){this.hidden?typeof this.hidden=="string"?this.renderer.setAttribute(this.elementRef.nativeElement,"hidden",this.hidden):this.renderer.setAttribute(this.elementRef.nativeElement,"hidden",""):this.renderer.removeAttribute(this.elementRef.nativeElement,"hidden")}constructor(t,i){this.elementRef=t,this.renderer=i,this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","")}ngOnChanges(){this.setHiddenAttribute()}ngAfterViewInit(){this.setHiddenAttribute()}static \u0275fac=function(i){return new(i||n)(Y(Je),Y(Mn))};static \u0275dir=Oe({type:n,selectors:[["","nz-button",""],["nz-button-group"],["","nz-icon",""],["nz-icon"],["","nz-menu-item",""],["","nz-submenu",""],["nz-select-top-control"],["nz-select-placeholder"],["nz-input-group"]],inputs:{hidden:"hidden"},features:[$e]})}return n})(),oz=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({})}return n})();var ev=class{triggerElement;ngZone;insertExtraNode;platform;cspNonce;waveTransitionDuration=400;styleForPseudo=null;extraNode=null;lastTime=0;clickHandler;get waveAttributeName(){return this.insertExtraNode?"ant-click-animating":"ant-click-animating-without-extra-node"}constructor(e,t,i,r,o){this.triggerElement=e,this.ngZone=t,this.insertExtraNode=i,this.platform=r,this.cspNonce=o,this.clickHandler=this.onClick.bind(this),this.bindTriggerEvent()}onClick=e=>{!this.triggerElement||!this.triggerElement.getAttribute||this.triggerElement.getAttribute("disabled")||e.target.tagName==="INPUT"||this.triggerElement.className.indexOf("disabled")>=0||this.fadeOutWave()};bindTriggerEvent(){this.platform.isBrowser&&this.ngZone.runOutsideAngular(()=>{this.removeTriggerEvent(),this.triggerElement&&this.triggerElement.addEventListener("click",this.clickHandler,!0)})}removeTriggerEvent(){this.triggerElement&&this.triggerElement.removeEventListener("click",this.clickHandler,!0)}removeStyleAndExtraNode(){this.styleForPseudo&&document.body.contains(this.styleForPseudo)&&(document.body.removeChild(this.styleForPseudo),this.styleForPseudo=null),this.insertExtraNode&&this.triggerElement.contains(this.extraNode)&&this.triggerElement.removeChild(this.extraNode)}destroy(){this.removeTriggerEvent(),this.removeStyleAndExtraNode()}fadeOutWave(){let e=this.triggerElement,t=this.getWaveColor(e);e.setAttribute(this.waveAttributeName,"true"),!(Date.now()<this.lastTime+this.waveTransitionDuration)&&(this.isValidColor(t)&&(this.styleForPseudo||(this.styleForPseudo=document.createElement("style"),this.cspNonce&&(this.styleForPseudo.nonce=this.cspNonce)),this.styleForPseudo.innerHTML=`
      [ant-click-animating-without-extra-node='true']::after, .ant-click-animating-node {
        --antd-wave-shadow-color: ${t};
      }`,document.body.appendChild(this.styleForPseudo)),this.insertExtraNode&&(this.extraNode||(this.extraNode=document.createElement("div")),this.extraNode.className="ant-click-animating-node",e.appendChild(this.extraNode)),this.lastTime=Date.now(),this.runTimeoutOutsideZone(()=>{e.removeAttribute(this.waveAttributeName),this.removeStyleAndExtraNode()},this.waveTransitionDuration))}isValidColor(e){return!!e&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&this.isNotGrey(e)&&!/rgba\(\d*, \d*, \d*, 0\)/.test(e)&&e!=="transparent"}isNotGrey(e){let t=e.match(/rgba?\((\d*), (\d*), (\d*)(, [.\d]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}getWaveColor(e){let t=getComputedStyle(e);return t.getPropertyValue("border-top-color")||t.getPropertyValue("border-color")||t.getPropertyValue("background-color")}runTimeoutOutsideZone(e,t){this.ngZone.runOutsideAngular(()=>setTimeout(e,t))}},fG={disabled:!1},sz=new de("nz-wave-global-options");function pG(n){return hr([{provide:sz,useValue:n}])}var b3=(()=>{class n{ngZone;elementRef;nzWaveExtraNode=!1;waveRenderer;waveDisabled=!1;get disabled(){return this.waveDisabled}get rendererRef(){return this.waveRenderer}cspNonce=T(Rs,{optional:!0});platform=T(Un);config=T(sz,{optional:!0});animationType=T(es,{optional:!0});constructor(t,i){this.ngZone=t,this.elementRef=i,this.waveDisabled=this.isConfigDisabled()}isConfigDisabled(){let t=!1;return this.config&&typeof this.config.disabled=="boolean"&&(t=this.config.disabled),this.animationType==="NoopAnimations"&&(t=!0),t}ngOnDestroy(){this.waveRenderer&&this.waveRenderer.destroy()}ngOnInit(){this.renderWaveIfEnabled()}renderWaveIfEnabled(){!this.waveDisabled&&this.elementRef.nativeElement&&(this.waveRenderer=new ev(this.elementRef.nativeElement,this.ngZone,this.nzWaveExtraNode,this.platform,this.cspNonce))}disable(){this.waveDisabled=!0,this.waveRenderer&&(this.waveRenderer.removeTriggerEvent(),this.waveRenderer.removeStyleAndExtraNode())}enable(){this.waveDisabled=this.isConfigDisabled()||!1,this.waveRenderer&&this.waveRenderer.bindTriggerEvent()}static \u0275fac=function(i){return new(i||n)(Y(_t),Y(Je))};static \u0275dir=Oe({type:n,selectors:[["","nz-wave",""],["button","nz-button","",3,"nzType","link",3,"nzType","text"]],inputs:{nzWaveExtraNode:"nzWaveExtraNode"},exportAs:["nzWave"]})}return n})(),az=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({providers:[pG(fG)]})}return n})();var mG=["nz-button",""],gG=["*"];function vG(n,e){n&1&&me(0,"nz-icon",0)}var lz="button",ol=(()=>{let n,e=[],t=[];return class tv{static{let r=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;n=[Fn()],On(null,null,n,{kind:"field",name:"nzSize",static:!1,private:!1,access:{has:o=>"nzSize"in o,get:o=>o.nzSize,set:(o,s)=>{o.nzSize=s}},metadata:r},e,t),r&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})}elementRef;cdr;renderer;nzConfigService;directionality;_nzModuleName=lz;nzIconDirectiveElement;nzBlock=!1;nzGhost=!1;nzSearch=!1;nzLoading=!1;nzDanger=!1;disabled=!1;tabIndex=null;nzType=null;nzShape=null;nzSize=Ct(this,e,"default");dir=(Ct(this,t),"ltr");finalSize=ti(()=>this.compactSize?this.compactSize():this.size());size=gi(this.nzSize);compactSize=T(il,{optional:!0});destroy$=T(jr);loading$=new ce;insertSpan(r,o){r.forEach(s=>{if(s.nodeName==="#text"){let a=o.createElement("span"),c=o.parentNode(s);o.insertBefore(c,a,s),o.appendChild(a,s)}})}get iconOnly(){let r=Array.from(this.elementRef?.nativeElement?.childNodes||[]),o=r.every(a=>a.nodeName!=="#text"),s=r.filter(a=>!(a.nodeName==="#comment"||a?.classList?.contains("anticon"))).length==0;return!!this.nzIconDirectiveElement&&s&&o}constructor(r,o,s,a,c){this.elementRef=r,this.cdr=o,this.renderer=s,this.nzConfigService=a,this.directionality=c}ngOnInit(){this.size.set(this.nzSize),this.nzConfigService.getConfigChangeEventForComponent(lz).pipe(_e(this.destroy$)).subscribe(()=>{this.size.set(this.nzSize),this.cdr.markForCheck()}),this.directionality.change?.pipe(_e(this.destroy$)).subscribe(r=>{this.dir=r,this.cdr.detectChanges()}),this.dir=this.directionality.value,i1(this.elementRef.nativeElement,"click",{capture:!0}).pipe(_e(this.destroy$)).subscribe(r=>{(this.disabled&&r.target?.tagName==="A"||this.nzLoading)&&(r.preventDefault(),r.stopImmediatePropagation())})}ngOnChanges({nzLoading:r,nzSize:o}){r&&this.loading$.next(this.nzLoading),o&&this.size.set(o.currentValue)}ngAfterViewInit(){this.insertSpan(this.elementRef.nativeElement.childNodes,this.renderer)}ngAfterContentInit(){this.loading$.pipe(Di(this.nzLoading),xt(()=>!!this.nzIconDirectiveElement),_e(this.destroy$)).subscribe(r=>{let o=this.nzIconDirectiveElement.nativeElement;r?this.renderer.setStyle(o,"display","none"):this.renderer.removeStyle(o,"display")})}static \u0275fac=function(o){return new(o||tv)(Y(Je),Y(Mt),Y(Mn),Y(ci),Y(Ut))};static \u0275cmp=Fe({type:tv,selectors:[["button","nz-button",""],["a","nz-button",""]],contentQueries:function(o,s,a){if(o&1&&ai(a,pn,5,Je),o&2){let c;Wt(c=$t())&&(s.nzIconDirectiveElement=c.first)}},hostAttrs:[1,"ant-btn"],hostVars:34,hostBindings:function(o,s){o&2&&(fn("tabindex",s.disabled?-1:s.tabIndex===null?null:s.tabIndex)("disabled",s.disabled||null),ze("ant-btn-default",s.nzType==="default")("ant-btn-primary",s.nzType==="primary")("ant-btn-dashed",s.nzType==="dashed")("ant-btn-link",s.nzType==="link")("ant-btn-text",s.nzType==="text")("ant-btn-circle",s.nzShape==="circle")("ant-btn-round",s.nzShape==="round")("ant-btn-lg",s.finalSize()==="large")("ant-btn-sm",s.finalSize()==="small")("ant-btn-dangerous",s.nzDanger)("ant-btn-loading",s.nzLoading)("ant-btn-background-ghost",s.nzGhost)("ant-btn-block",s.nzBlock)("ant-input-search-button",s.nzSearch)("ant-btn-rtl",s.dir==="rtl")("ant-btn-icon-only",s.iconOnly))},inputs:{nzBlock:[2,"nzBlock","nzBlock",fe],nzGhost:[2,"nzGhost","nzGhost",fe],nzSearch:[2,"nzSearch","nzSearch",fe],nzLoading:[2,"nzLoading","nzLoading",fe],nzDanger:[2,"nzDanger","nzDanger",fe],disabled:[2,"disabled","disabled",fe],tabIndex:"tabIndex",nzType:"nzType",nzShape:"nzShape",nzSize:"nzSize"},exportAs:["nzButton"],features:[Rn([jr,{provide:Ga,useValue:"btn"}]),Pc([rl]),$e],attrs:mG,ngContentSelectors:gG,decls:2,vars:1,consts:[["nzType","loading"]],template:function(o,s){o&1&&(Zt(),G(0,vG,1,0,"nz-icon",0),Rt(1)),o&2&&le(s.nzLoading?0:-1)},dependencies:[wn,pn],encapsulation:2,changeDetection:0})}})();var u1=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({imports:[ol,oz,az]})}return n})();var yG=["nzType","avatar"];var _G=["*"];function bG(n,e){if(n&1&&(j(0,"div",0),me(1,"nz-skeleton-element",4),q()),n&2){let t=R(2);O(),$("nzSize",t.avatar.size||"default")("nzShape",t.avatar.shape||"circle")}}function xG(n,e){if(n&1&&me(0,"h3",5),n&2){let t=R(2);Sn("width",t.toCSSUnit(t.title.width))}}function MG(n,e){if(n&1&&me(0,"li"),n&2){let t=e.$index,i=R(3);Sn("width",i.toCSSUnit(i.widthList[t]))}}function SG(n,e){if(n&1&&(j(0,"ul",3),Xi(1,MG,1,2,"li",6,Ea),q()),n&2){let t=R(2);O(),Ki(t.rowsList)}}function wG(n,e){if(n&1&&(G(0,bG,2,2,"div",0),j(1,"div",1),G(2,xG,1,2,"h3",2)(3,SG,3,0,"ul",3),q()),n&2){let t=R();le(t.nzAvatar?0:-1),O(2),le(t.nzTitle?2:-1),O(),le(t.nzParagraph?3:-1)}}function CG(n,e){n&1&&Rt(0)}var TG=(()=>{class n{nzActive=!1;nzType;nzBlock=!1;static \u0275fac=function(i){return new(i||n)};static \u0275dir=Oe({type:n,selectors:[["nz-skeleton-element"]],hostAttrs:[1,"ant-skeleton","ant-skeleton-element"],hostVars:4,hostBindings:function(i,r){i&2&&ze("ant-skeleton-active",r.nzActive)("ant-skeleton-block",r.nzBlock)},inputs:{nzActive:[2,"nzActive","nzActive",fe],nzType:"nzType",nzBlock:[2,"nzBlock","nzBlock",fe]}})}return n})();var EG=(()=>{class n{nzShape="circle";nzSize="default";styleMap={};ngOnChanges(t){if(t.nzSize&&typeof this.nzSize=="number"){let i=`${this.nzSize}px`;this.styleMap={width:i,height:i,"line-height":i}}else this.styleMap={}}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["nz-skeleton-element","nzType","avatar"]],inputs:{nzShape:"nzShape",nzSize:"nzSize"},features:[$e],attrs:yG,decls:1,vars:10,consts:[[1,"ant-skeleton-avatar"]],template:function(i,r){i&1&&me(0,"span",0),i&2&&(mr(r.styleMap),ze("ant-skeleton-avatar-square",r.nzShape==="square")("ant-skeleton-avatar-circle",r.nzShape==="circle")("ant-skeleton-avatar-lg",r.nzSize==="large")("ant-skeleton-avatar-sm",r.nzSize==="small"))},encapsulation:2,changeDetection:0})}return n})();var uz=(()=>{class n{cdr;nzActive=!1;nzLoading=!0;nzRound=!1;nzTitle=!0;nzAvatar=!1;nzParagraph=!0;title;avatar;paragraph;rowsList=[];widthList=[];constructor(t){this.cdr=t}toCSSUnit(t=""){return n1(t)}getTitleProps(){let t=!!this.nzAvatar,i=!!this.nzParagraph,r="";return!t&&i?r="38%":t&&i&&(r="50%"),Z({width:r},this.getProps(this.nzTitle))}getAvatarProps(){let t=this.nzTitle&&!this.nzParagraph?"square":"circle";return Z({shape:t,size:"large"},this.getProps(this.nzAvatar))}getParagraphProps(){let t=!!this.nzAvatar,i=!!this.nzTitle,r={};return(!t||!i)&&(r.width="61%"),!t&&i?r.rows=3:r.rows=2,Z(Z({},r),this.getProps(this.nzParagraph))}getProps(t){return t&&typeof t=="object"?t:{}}getWidthList(){let{width:t,rows:i}=this.paragraph,r=[];return t&&Array.isArray(t)?r=t:t&&!Array.isArray(t)&&(r=[],r[i-1]=t),r}updateProps(){this.title=this.getTitleProps(),this.avatar=this.getAvatarProps(),this.paragraph=this.getParagraphProps(),this.rowsList=[...Array(this.paragraph.rows)],this.widthList=this.getWidthList(),this.cdr.markForCheck()}ngOnInit(){this.updateProps()}ngOnChanges(t){(t.nzTitle||t.nzAvatar||t.nzParagraph)&&this.updateProps()}static \u0275fac=function(i){return new(i||n)(Y(Mt))};static \u0275cmp=Fe({type:n,selectors:[["nz-skeleton"]],hostAttrs:[1,"ant-skeleton"],hostVars:6,hostBindings:function(i,r){i&2&&ze("ant-skeleton-with-avatar",!!r.nzAvatar)("ant-skeleton-active",r.nzActive)("ant-skeleton-round",!!r.nzRound)},inputs:{nzActive:"nzActive",nzLoading:"nzLoading",nzRound:"nzRound",nzTitle:"nzTitle",nzAvatar:"nzAvatar",nzParagraph:"nzParagraph"},exportAs:["nzSkeleton"],features:[$e],ngContentSelectors:_G,decls:2,vars:1,consts:[[1,"ant-skeleton-header"],[1,"ant-skeleton-content"],[1,"ant-skeleton-title",3,"width"],[1,"ant-skeleton-paragraph"],["nzType","avatar",3,"nzSize","nzShape"],[1,"ant-skeleton-title"],[3,"width"]],template:function(i,r){i&1&&(Zt(),G(0,wG,4,3)(1,CG,1,0)),i&2&&le(r.nzLoading?0:1)},dependencies:[TG,EG],encapsulation:2,changeDetection:0})}return n})(),dz=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({})}return n})();function zG(n,e){}function AG(n,e){if(n&1&&(j(0,"div",0),G(1,zG,0,0,"ng-template",2),q()),n&2){let t=R();O(),$("ngTemplateOutlet",t.nzAvatar)}}function IG(n,e){if(n&1&&(An(0),rt(1),In()),n&2){let t=R(3);O(),Pn(t.nzTitle)}}function PG(n,e){if(n&1&&(j(0,"div",3),G(1,IG,2,1,"ng-container",5),q()),n&2){let t=R(2);O(),$("nzStringTemplateOutlet",t.nzTitle)}}function RG(n,e){if(n&1&&(An(0),rt(1),In()),n&2){let t=R(3);O(),Pn(t.nzDescription)}}function kG(n,e){if(n&1&&(j(0,"div",4),G(1,RG,2,1,"ng-container",5),q()),n&2){let t=R(2);O(),$("nzStringTemplateOutlet",t.nzDescription)}}function NG(n,e){if(n&1&&(j(0,"div",1),G(1,PG,2,1,"div",3)(2,kG,2,1,"div",4),q()),n&2){let t=R();O(),le(t.nzTitle?1:-1),O(),le(t.nzDescription?2:-1)}}var fz=["*"];function OG(n,e){n&1&&Rt(0)}var LG=()=>({rows:4});function FG(n,e){if(n&1&&(An(0),rt(1),In()),n&2){let t=R(3);O(),Pn(t.nzTitle)}}function VG(n,e){if(n&1&&(j(0,"div",6),G(1,FG,2,1,"ng-container",9),q()),n&2){let t=R(2);O(),$("nzStringTemplateOutlet",t.nzTitle)}}function HG(n,e){if(n&1&&(An(0),rt(1),In()),n&2){let t=R(3);O(),Pn(t.nzExtra)}}function BG(n,e){if(n&1&&(j(0,"div",7),G(1,HG,2,1,"ng-container",9),q()),n&2){let t=R(2);O(),$("nzStringTemplateOutlet",t.nzExtra)}}function UG(n,e){}function YG(n,e){if(n&1&&G(0,UG,0,0,"ng-template",8),n&2){let t=R(2);$("ngTemplateOutlet",t.listOfNzCardTabComponent.template)}}function jG(n,e){if(n&1&&(j(0,"div",0)(1,"div",5),G(2,VG,2,1,"div",6)(3,BG,2,1,"div",7),q(),G(4,YG,1,1,null,8),q()),n&2){let t=R();O(2),le(t.nzTitle?2:-1),O(),le(t.nzExtra?3:-1),O(),le(t.listOfNzCardTabComponent?4:-1)}}function GG(n,e){}function WG(n,e){if(n&1&&(j(0,"div",1),G(1,GG,0,0,"ng-template",8),q()),n&2){let t=R();O(),$("ngTemplateOutlet",t.nzCover)}}function $G(n,e){n&1&&me(0,"nz-skeleton",3),n&2&&$("nzActive",!0)("nzTitle",!1)("nzParagraph",Rd(3,LG))}function qG(n,e){n&1&&Rt(0)}function XG(n,e){}function KG(n,e){if(n&1&&(j(0,"li")(1,"span"),G(2,XG,0,0,"ng-template",8),q()()),n&2){let t=e.$implicit,i=R(2);Sn("width",100/i.nzActions.length,"%"),O(2),$("ngTemplateOutlet",t)}}function ZG(n,e){if(n&1&&(j(0,"ul",4),Xi(1,KG,3,3,"li",10,Ta),q()),n&2){let t=R();O(),Ki(t.nzActions)}}var QG=(()=>{class n{nzHoverable=!0;static \u0275fac=function(i){return new(i||n)};static \u0275dir=Oe({type:n,selectors:[["","nz-card-grid",""]],hostAttrs:[1,"ant-card-grid"],hostVars:2,hostBindings:function(i,r){i&2&&ze("ant-card-hoverable",r.nzHoverable)},inputs:{nzHoverable:[2,"nzHoverable","nzHoverable",fe]},exportAs:["nzCardGrid"]})}return n})(),JG=(()=>{class n{nzTitle=null;nzDescription=null;nzAvatar=null;static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["nz-card-meta"]],hostAttrs:[1,"ant-card-meta"],inputs:{nzTitle:"nzTitle",nzDescription:"nzDescription",nzAvatar:"nzAvatar"},exportAs:["nzCardMeta"],decls:2,vars:2,consts:[[1,"ant-card-meta-avatar"],[1,"ant-card-meta-detail"],[3,"ngTemplateOutlet"],[1,"ant-card-meta-title"],[1,"ant-card-meta-description"],[4,"nzStringTemplateOutlet"]],template:function(i,r){i&1&&G(0,AG,2,1,"div",0)(1,NG,3,2,"div",1),i&2&&(le(r.nzAvatar?0:-1),O(),le(r.nzTitle||r.nzDescription?1:-1))},dependencies:[ni,xi,li],encapsulation:2,changeDetection:0})}return n})(),eW=(()=>{class n{template;static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["nz-card-tab"]],viewQuery:function(i,r){if(i&1&&Ai(ui,7),i&2){let o;Wt(o=$t())&&(r.template=o.first)}},exportAs:["nzCardTab"],ngContentSelectors:fz,decls:1,vars:0,template:function(i,r){i&1&&(Zt(),G(0,OG,1,0,"ng-template"))},encapsulation:2,changeDetection:0})}return n})(),hz="card",rv=(()=>{let n,e=[],t=[],i,r=[],o=[],s,a=[],c=[];return class iv{static{let u=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;n=[Fn()],i=[Fn()],s=[Fn()],On(null,null,n,{kind:"field",name:"nzBordered",static:!1,private:!1,access:{has:d=>"nzBordered"in d,get:d=>d.nzBordered,set:(d,h)=>{d.nzBordered=h}},metadata:u},e,t),On(null,null,i,{kind:"field",name:"nzHoverable",static:!1,private:!1,access:{has:d=>"nzHoverable"in d,get:d=>d.nzHoverable,set:(d,h)=>{d.nzHoverable=h}},metadata:u},r,o),On(null,null,s,{kind:"field",name:"nzSize",static:!1,private:!1,access:{has:d=>"nzSize"in d,get:d=>d.nzSize,set:(d,h)=>{d.nzSize=h}},metadata:u},a,c),u&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u})}nzConfigService;cdr;directionality;_nzModuleName=hz;nzBordered=Ct(this,e,!0);nzLoading=(Ct(this,t),!1);nzHoverable=Ct(this,r,!1);nzBodyStyle=(Ct(this,o),null);nzCover;nzActions=[];nzType=null;nzSize=Ct(this,a,"default");nzTitle=Ct(this,c);nzExtra;listOfNzCardTabComponent;listOfNzCardGridDirective;dir="ltr";destroy$=new ce;constructor(u,d,h){this.nzConfigService=u,this.cdr=d,this.directionality=h,this.nzConfigService.getConfigChangeEventForComponent(hz).pipe(_e(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe(_e(this.destroy$)).subscribe(u=>{this.dir=u,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}static \u0275fac=function(d){return new(d||iv)(Y(ci),Y(Mt),Y(Ut))};static \u0275cmp=Fe({type:iv,selectors:[["nz-card"]],contentQueries:function(d,h,f){if(d&1&&(ai(f,eW,5),ai(f,QG,4)),d&2){let p;Wt(p=$t())&&(h.listOfNzCardTabComponent=p.first),Wt(p=$t())&&(h.listOfNzCardGridDirective=p)}},hostAttrs:[1,"ant-card"],hostVars:16,hostBindings:function(d,h){d&2&&ze("ant-card-loading",h.nzLoading)("ant-card-bordered",h.nzBordered)("ant-card-hoverable",h.nzHoverable)("ant-card-small",h.nzSize==="small")("ant-card-contain-grid",h.listOfNzCardGridDirective&&h.listOfNzCardGridDirective.length)("ant-card-type-inner",h.nzType==="inner")("ant-card-contain-tabs",!!h.listOfNzCardTabComponent)("ant-card-rtl",h.dir==="rtl")},inputs:{nzBordered:[2,"nzBordered","nzBordered",fe],nzLoading:[2,"nzLoading","nzLoading",fe],nzHoverable:[2,"nzHoverable","nzHoverable",fe],nzBodyStyle:"nzBodyStyle",nzCover:"nzCover",nzActions:"nzActions",nzType:"nzType",nzSize:"nzSize",nzTitle:"nzTitle",nzExtra:"nzExtra"},exportAs:["nzCard"],ngContentSelectors:fz,decls:6,vars:6,consts:[[1,"ant-card-head"],[1,"ant-card-cover"],[1,"ant-card-body"],[3,"nzActive","nzTitle","nzParagraph"],[1,"ant-card-actions"],[1,"ant-card-head-wrapper"],[1,"ant-card-head-title"],[1,"ant-card-extra"],[3,"ngTemplateOutlet"],[4,"nzStringTemplateOutlet"],[3,"width"]],template:function(d,h){d&1&&(Zt(),G(0,jG,5,3,"div",0)(1,WG,2,1,"div",1),j(2,"div",2),G(3,$G,1,4,"nz-skeleton",3)(4,qG,1,0),q(),G(5,ZG,3,0,"ul",4)),d&2&&(le(h.nzTitle||h.nzExtra||h.listOfNzCardTabComponent?0:-1),O(),le(h.nzCover?1:-1),O(),mr(h.nzBodyStyle),O(),le(h.nzLoading?3:4),O(2),le(h.nzActions.length?5:-1))},dependencies:[xi,li,ni,dz,uz],encapsulation:2,changeDetection:0})}})(),x3=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({imports:[rv,JG,nl]})}return n})();var nW=["*"];function iW(n,e){n&1&&(j(0,"span",2),me(1,"i",3)(2,"i",3)(3,"i",3)(4,"i",3),q())}function rW(n,e){}function oW(n,e){if(n&1&&(j(0,"div",6),rt(1),q()),n&2){let t=R(2);O(),Pn(t.nzTip)}}function sW(n,e){if(n&1&&(j(0,"div")(1,"div",4),G(2,rW,0,0,"ng-template",5)(3,oW,2,1,"div",6),q()()),n&2){let t=R(),i=dt(1);O(),ze("ant-spin-rtl",t.dir==="rtl")("ant-spin-spinning",t.isLoading)("ant-spin-lg",t.nzSize==="large")("ant-spin-sm",t.nzSize==="small")("ant-spin-show-text",t.nzTip),O(),$("ngTemplateOutlet",t.nzIndicator||i),O(),le(t.nzTip?3:-1)}}function aW(n,e){if(n&1&&(j(0,"div",7),Rt(1),q()),n&2){let t=R();ze("ant-spin-blur",t.isLoading)}}var pz="spin",M3=(()=>{let n,e=[],t=[];return class ov{static{let r=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;n=[Fn()],On(null,null,n,{kind:"field",name:"nzIndicator",static:!1,private:!1,access:{has:o=>"nzIndicator"in o,get:o=>o.nzIndicator,set:(o,s)=>{o.nzIndicator=s}},metadata:r},e,t),r&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})}nzConfigService;cdr;directionality;_nzModuleName=pz;nzIndicator=Ct(this,e,null);nzSize=(Ct(this,t),"default");nzTip=null;nzDelay=0;nzSimple=!1;nzSpinning=!0;destroy$=new ce;spinning$=new Qt(this.nzSpinning);delay$=new fa(1);isLoading=!1;dir="ltr";constructor(r,o,s){this.nzConfigService=r,this.cdr=o,this.directionality=s}ngOnInit(){this.delay$.pipe(Di(this.nzDelay),ki(),Dn(o=>o===0?this.spinning$:this.spinning$.pipe(r6(s=>_c(s?o:0)))),_e(this.destroy$)).subscribe(o=>{this.isLoading=o,this.cdr.markForCheck()}),this.nzConfigService.getConfigChangeEventForComponent(pz).pipe(_e(this.destroy$)).subscribe(()=>this.cdr.markForCheck()),this.directionality.change?.pipe(_e(this.destroy$)).subscribe(o=>{this.dir=o,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnChanges(r){let{nzSpinning:o,nzDelay:s}=r;o&&this.spinning$.next(this.nzSpinning),s&&this.delay$.next(this.nzDelay)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(o){return new(o||ov)(Y(ci),Y(Mt),Y(Ut))};static \u0275cmp=Fe({type:ov,selectors:[["nz-spin"]],hostVars:2,hostBindings:function(o,s){o&2&&ze("ant-spin-nested-loading",!s.nzSimple)},inputs:{nzIndicator:"nzIndicator",nzSize:"nzSize",nzTip:"nzTip",nzDelay:[2,"nzDelay","nzDelay",yi],nzSimple:[2,"nzSimple","nzSimple",fe],nzSpinning:[2,"nzSpinning","nzSpinning",fe]},exportAs:["nzSpin"],features:[$e],ngContentSelectors:nW,decls:4,vars:2,consts:[["defaultTemplate",""],[1,"ant-spin-container",3,"ant-spin-blur"],[1,"ant-spin-dot","ant-spin-dot-spin"],[1,"ant-spin-dot-item"],[1,"ant-spin"],[3,"ngTemplateOutlet"],[1,"ant-spin-text"],[1,"ant-spin-container"]],template:function(o,s){o&1&&(Zt(),G(0,iW,5,0,"ng-template",null,0,Jt)(2,sW,4,12,"div")(3,aW,2,2,"div",1)),o&2&&(O(2),le(s.isLoading?2:-1),O(),le(s.nzSimple?-1:3))},dependencies:[ni],encapsulation:2})}})(),S3=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({})}return n})();var Li=(()=>{class n{static SLOW="0.3s";static BASE="0.2s";static FAST="0.1s"}return n})(),Zi=(()=>{class n{static EASE_BASE_OUT="cubic-bezier(0.7, 0.3, 0.1, 1)";static EASE_BASE_IN="cubic-bezier(0.9, 0, 0.3, 0.7)";static EASE_OUT="cubic-bezier(0.215, 0.61, 0.355, 1)";static EASE_IN="cubic-bezier(0.55, 0.055, 0.675, 0.19)";static EASE_IN_OUT="cubic-bezier(0.645, 0.045, 0.355, 1)";static EASE_OUT_BACK="cubic-bezier(0.12, 0.4, 0.29, 1.46)";static EASE_IN_BACK="cubic-bezier(0.71, -0.46, 0.88, 0.6)";static EASE_IN_OUT_BACK="cubic-bezier(0.71, -0.46, 0.29, 1.46)";static EASE_OUT_CIRC="cubic-bezier(0.08, 0.82, 0.17, 1)";static EASE_IN_CIRC="cubic-bezier(0.6, 0.04, 0.98, 0.34)";static EASE_IN_OUT_CIRC="cubic-bezier(0.78, 0.14, 0.15, 0.86)";static EASE_OUT_QUINT="cubic-bezier(0.23, 1, 0.32, 1)";static EASE_IN_QUINT="cubic-bezier(0.755, 0.05, 0.855, 0.06)";static EASE_IN_OUT_QUINT="cubic-bezier(0.86, 0, 0.07, 1)"}return n})(),gz=Oi("collapseMotion",[rr("expanded",Ue({height:"*"})),rr("collapsed",Ue({height:0,overflow:"hidden"})),rr("hidden",Ue({height:0,overflow:"hidden",borderTopWidth:"0"})),on("expanded => collapsed",en(`150ms ${Zi.EASE_IN_OUT}`)),on("expanded => hidden",en(`150ms ${Zi.EASE_IN_OUT}`)),on("collapsed => expanded",en(`150ms ${Zi.EASE_IN_OUT}`)),on("hidden => expanded",en(`150ms ${Zi.EASE_IN_OUT}`))]),k8e=Oi("treeCollapseMotion",[on("* => *",[vf("nz-tree-node:leave,nz-tree-builtin-node:leave",[Ue({overflow:"hidden"}),yf(0,[en(`150ms ${Zi.EASE_IN_OUT}`,Ue({height:0,opacity:0,"padding-bottom":0}))])],{optional:!0}),vf("nz-tree-node:enter,nz-tree-builtin-node:enter",[Ue({overflow:"hidden",height:0,opacity:0,"padding-bottom":0}),yf(0,[en(`150ms ${Zi.EASE_IN_OUT}`,Ue({overflow:"hidden",height:"*",opacity:"*","padding-bottom":"*"}))])],{optional:!0})])]),N8e=Oi("drawerMaskMotion",[on(":enter",[Ue({opacity:0}),en(`${Li.SLOW}`,Ue({opacity:1}))]),on(":leave",[Ue({opacity:1}),en(`${Li.SLOW}`,Ue({opacity:0}))])]),O8e=Oi("fadeMotion",[on("* => enter",[Ue({opacity:0}),en(`${Li.BASE}`,Ue({opacity:1}))]),on("* => leave, :leave",[Ue({opacity:1}),en(`${Li.BASE}`,Ue({opacity:0}))])]),vz=Oi("helpMotion",[on(":enter",[Ue({opacity:0,transform:"translateY(-5px)"}),en(`${Li.SLOW} ${Zi.EASE_IN_OUT}`,Ue({opacity:1,transform:"translateY(0)"}))]),on(":leave",[Ue({opacity:1,transform:"translateY(0)"}),en(`${Li.SLOW} ${Zi.EASE_IN_OUT}`,Ue({opacity:0,transform:"translateY(-5px)"}))])]),yz=Oi("moveUpMotion",[on("* => enter",[Ue({transformOrigin:"0 0",transform:"translateY(-100%)",opacity:0}),en(`${Li.BASE}`,Ue({transformOrigin:"0 0",transform:"translateY(0%)",opacity:1}))]),on("* => leave",[Ue({transformOrigin:"0 0",transform:"translateY(0%)",opacity:1}),en(`${Li.BASE}`,Ue({transformOrigin:"0 0",transform:"translateY(-100%)",opacity:0}))])]),L8e=Oi("notificationMotion",[rr("enterRight",Ue({opacity:1,transform:"translateX(0)"})),on("* => enterRight",[Ue({opacity:0,transform:"translateX(5%)"}),en("100ms linear")]),rr("enterLeft",Ue({opacity:1,transform:"translateX(0)"})),on("* => enterLeft",[Ue({opacity:0,transform:"translateX(-5%)"}),en("100ms linear")]),rr("enterTop",Ue({opacity:1,transform:"translateY(0)"})),on("* => enterTop",[Ue({opacity:0,transform:"translateY(-5%)"}),en("100ms linear")]),rr("enterBottom",Ue({opacity:1,transform:"translateY(0)"})),on("* => enterBottom",[Ue({opacity:0,transform:"translateY(5%)"}),en("100ms linear")]),rr("leave",Ue({opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 0%"})),on("* => leave",[Ue({opacity:1,transform:"scaleY(1)",transformOrigin:"0% 0%"}),en("100ms linear")])]),cW=`${Li.BASE} ${Zi.EASE_OUT_QUINT}`,lW=`${Li.BASE} ${Zi.EASE_IN_QUINT}`,_z=Oi("slideMotion",[rr("void",Ue({opacity:0,transform:"scaleY(0.8)"})),rr("enter",Ue({opacity:1,transform:"scaleY(1)"})),on("void => *",[en(cW)]),on("* => void",[en(lW)])]),bz=Oi("slideAlertMotion",[on(":leave",[Ue({opacity:1,transform:"scaleY(1)",transformOrigin:"0% 0%"}),en(`${Li.SLOW} ${Zi.EASE_IN_OUT_CIRC}`,Ue({opacity:0,transform:"scaleY(0)",transformOrigin:"0% 0%"}))])]),F8e=Oi("tabSwitchMotion",[rr("leave",Ue({display:"none"})),on("* => enter",[Ue({display:"block",opacity:0}),en(Li.SLOW)]),on("* => leave, :leave",[Ue({position:"absolute",top:0,left:0,width:"100%"}),en(Li.SLOW,Ue({opacity:0})),Ue({display:"none"})])]),V8e=Oi("thumbMotion",[rr("from",Ue({transform:"translateX({{ transform }}px)",width:"{{ width }}px"}),{params:{transform:0,width:0}}),rr("to",Ue({transform:"translateX({{ transform }}px)",width:"{{ width }}px"}),{params:{transform:100,width:0}}),on("from => to",en(`300ms ${Zi.EASE_IN_OUT}`))]),w3=Oi("zoomBigMotion",[on("void => active",[Ue({opacity:0,transform:"scale(0.8)"}),en(`${Li.BASE} ${Zi.EASE_OUT_CIRC}`,Ue({opacity:1,transform:"scale(1)"}))]),on("active => void",[Ue({opacity:1,transform:"scale(1)"}),en(`${Li.BASE} ${Zi.EASE_IN_OUT_CIRC}`,Ue({opacity:0,transform:"scale(0.8)"}))])]),H8e=Oi("zoomBadgeMotion",[on(":enter",[Ue({opacity:0,transform:"scale(0) translate(50%, -50%)"}),en(`${Li.SLOW} ${Zi.EASE_OUT_BACK}`,Ue({opacity:1,transform:"scale(1) translate(50%, -50%)"}))]),on(":leave",[Ue({opacity:1,transform:"scale(1) translate(50%, -50%)"}),en(`${Li.SLOW} ${Zi.EASE_IN_BACK}`,Ue({opacity:0,transform:"scale(0) translate(50%, -50%)"}))])]);function uW(n,e){n&1&&kc(0)}function dW(n,e){if(n&1&&G(0,uW,1,0,"ng-container",7),n&2){let t=R(3);$("nzStringTemplateOutlet",t.nzIcon)}}function hW(n,e){if(n&1&&me(0,"nz-icon",6),n&2){let t=R(3);$("nzType",t.nzIconType||t.inferredIconType)("nzTheme",t.iconTheme)}}function fW(n,e){if(n&1&&(j(0,"div",2),G(1,dW,1,1,"ng-container")(2,hW,1,2,"nz-icon",6),q()),n&2){let t=R(2);O(),le(t.nzIcon?1:2)}}function pW(n,e){if(n&1&&(An(0),rt(1),In()),n&2){let t=R(4);O(),Pn(t.nzMessage)}}function mW(n,e){if(n&1&&(j(0,"span",8),G(1,pW,2,1,"ng-container",7),q()),n&2){let t=R(3);O(),$("nzStringTemplateOutlet",t.nzMessage)}}function gW(n,e){if(n&1&&(An(0),rt(1),In()),n&2){let t=R(4);O(),Pn(t.nzDescription)}}function vW(n,e){if(n&1&&(j(0,"span",9),G(1,gW,2,1,"ng-container",7),q()),n&2){let t=R(3);O(),$("nzStringTemplateOutlet",t.nzDescription)}}function yW(n,e){if(n&1&&(j(0,"div",3),G(1,mW,2,1,"span",8)(2,vW,2,1,"span",9),q()),n&2){let t=R(2);O(),le(t.nzMessage?1:-1),O(),le(t.nzDescription?2:-1)}}function _W(n,e){if(n&1&&(An(0),rt(1),In()),n&2){let t=R(3);O(),Pn(t.nzAction)}}function bW(n,e){if(n&1&&(j(0,"div",4),G(1,_W,2,1,"ng-container",7),q()),n&2){let t=R(2);O(),$("nzStringTemplateOutlet",t.nzAction)}}function xW(n,e){if(n&1&&(An(0),j(1,"span",12),rt(2),q(),In()),n&2){let t=R(4);O(2),Pn(t.nzCloseText)}}function MW(n,e){if(n&1&&G(0,xW,3,1,"ng-container",7),n&2){let t=R(3);$("nzStringTemplateOutlet",t.nzCloseText)}}function SW(n,e){n&1&&me(0,"nz-icon",11)}function wW(n,e){if(n&1){let t=un();j(0,"button",10),We("click",function(){je(t);let r=R(2);return Ge(r.closeAlert())}),G(1,MW,1,1,"ng-container")(2,SW,1,0,"nz-icon",11),q()}if(n&2){let t=R(2);O(),le(t.nzCloseText?1:2)}}function CW(n,e){if(n&1){let t=un();j(0,"div",1),We("@slideAlertMotion.done",function(){je(t);let r=R();return Ge(r.onFadeAnimationDone())}),G(1,fW,3,1,"div",2)(2,yW,3,2,"div",3)(3,bW,2,1,"div",4)(4,wW,3,1,"button",5),q()}if(n&2){let t=R();ze("ant-alert-rtl",t.dir==="rtl")("ant-alert-success",t.nzType==="success")("ant-alert-info",t.nzType==="info")("ant-alert-warning",t.nzType==="warning")("ant-alert-error",t.nzType==="error")("ant-alert-no-icon",!t.nzShowIcon)("ant-alert-banner",t.nzBanner)("ant-alert-closable",t.nzCloseable)("ant-alert-with-description",!!t.nzDescription),$("@.disabled",t.nzNoAnimation)("@slideAlertMotion",void 0),O(),le(t.nzShowIcon?1:-1),O(),le(t.nzMessage||t.nzDescription?2:-1),O(),le(t.nzAction?3:-1),O(),le(t.nzCloseable||t.nzCloseText?4:-1)}}var xz="alert",av=(()=>{let n,e=[],t=[],i,r=[],o=[];return class sv{static{let a=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;n=[Fn()],i=[Fn()],On(null,null,n,{kind:"field",name:"nzCloseable",static:!1,private:!1,access:{has:c=>"nzCloseable"in c,get:c=>c.nzCloseable,set:(c,l)=>{c.nzCloseable=l}},metadata:a},e,t),On(null,null,i,{kind:"field",name:"nzShowIcon",static:!1,private:!1,access:{has:c=>"nzShowIcon"in c,get:c=>c.nzShowIcon,set:(c,l)=>{c.nzShowIcon=l}},metadata:a},r,o),a&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:a})}nzConfigService;cdr;directionality;_nzModuleName=xz;nzAction=null;nzCloseText=null;nzIconType=null;nzMessage=null;nzDescription=null;nzType="info";nzCloseable=Ct(this,e,!1);nzShowIcon=(Ct(this,t),Ct(this,r,!1));nzBanner=(Ct(this,o),!1);nzNoAnimation=!1;nzIcon=null;nzOnClose=new pt;closed=!1;iconTheme="fill";inferredIconType="info-circle";dir="ltr";isTypeSet=!1;isShowIconSet=!1;destroy$=new ce;constructor(a,c,l){this.nzConfigService=a,this.cdr=c,this.directionality=l,this.nzConfigService.getConfigChangeEventForComponent(xz).pipe(_e(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe(_e(this.destroy$)).subscribe(a=>{this.dir=a,this.cdr.detectChanges()}),this.dir=this.directionality.value}closeAlert(){this.closed=!0}onFadeAnimationDone(){this.closed&&this.nzOnClose.emit(!0)}ngOnChanges(a){let{nzShowIcon:c,nzDescription:l,nzType:u,nzBanner:d}=a;if(c&&(this.isShowIconSet=!0),u)switch(this.isTypeSet=!0,this.nzType){case"error":this.inferredIconType="close-circle";break;case"success":this.inferredIconType="check-circle";break;case"info":this.inferredIconType="info-circle";break;case"warning":this.inferredIconType="exclamation-circle";break}l&&(this.iconTheme=this.nzDescription?"outline":"fill"),d&&(this.isTypeSet||(this.nzType="warning"),this.isShowIconSet||(this.nzShowIcon=!0))}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}static \u0275fac=function(c){return new(c||sv)(Y(ci),Y(Mt),Y(Ut))};static \u0275cmp=Fe({type:sv,selectors:[["nz-alert"]],inputs:{nzAction:"nzAction",nzCloseText:"nzCloseText",nzIconType:"nzIconType",nzMessage:"nzMessage",nzDescription:"nzDescription",nzType:"nzType",nzCloseable:[2,"nzCloseable","nzCloseable",fe],nzShowIcon:[2,"nzShowIcon","nzShowIcon",fe],nzBanner:[2,"nzBanner","nzBanner",fe],nzNoAnimation:[2,"nzNoAnimation","nzNoAnimation",fe],nzIcon:"nzIcon"},outputs:{nzOnClose:"nzOnClose"},exportAs:["nzAlert"],features:[$e],decls:1,vars:1,consts:[[1,"ant-alert",3,"ant-alert-rtl","ant-alert-success","ant-alert-info","ant-alert-warning","ant-alert-error","ant-alert-no-icon","ant-alert-banner","ant-alert-closable","ant-alert-with-description"],[1,"ant-alert"],[1,"ant-alert-icon"],[1,"ant-alert-content"],[1,"ant-alert-action"],["type","button","tabindex","0",1,"ant-alert-close-icon"],[3,"nzType","nzTheme"],[4,"nzStringTemplateOutlet"],[1,"ant-alert-message"],[1,"ant-alert-description"],["type","button","tabindex","0",1,"ant-alert-close-icon",3,"click"],["nzType","close"],[1,"ant-alert-close-text"]],template:function(c,l){c&1&&G(0,CW,5,24,"div",0),c&2&&le(l.closed?-1:0)},dependencies:[wn,pn,xi,li],encapsulation:2,data:{animation:[bz]},changeDetection:0})}})(),Mz=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({imports:[av]})}return n})();var F1="179",oc={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},sc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},oA=0,$v=1,sA=2;var qv=1,V1=2,bs=3,Lo=0,ar=1,Dr=2,oa=0,dl=1,Xv=2,Kv=3,Zv=4,aA=5,Ja=100,cA=101,lA=102,uA=103,dA=104,hA=200,fA=201,pA=202,mA=203,K3=204,Z3=205,gA=206,vA=207,yA=208,_A=209,bA=210,xA=211,MA=212,SA=213,wA=214,pp=0,mp=1,gp=2,hl=3,vp=4,yp=5,_p=6,bp=7,Qv=0,CA=1,TA=2,sa=0,EA=1,DA=2,zA=3,xp=4,AA=5,IA=6,PA=7,Nv="attached",RA="detached",Ov=300,Ml=301,Sl=302,Mp=303,Sp=304,v0=306,fs=1e3,lo=1001,ec=1002,Mi=1003,H1=1004;var aa=1005;var Fi=1006,ac=1007;var Xr=1008;var Ho=1009,Jv=1010,e9=1011,B1=1012,wp=1013,cc=1014,uo=1015,U1=1016,Cp=1017,Tp=1018,Y1=1020,t9=35902,n9=1021,i9=1022,cr=1023,T1=1026,j1=1027,Ep=1028,Dp=1029,r9=1030,zp=1031;var Ap=1033,y0=33776,_0=33777,b0=33778,x0=33779,Ip=35840,Pp=35841,Rp=35842,kp=35843,Np=36196,Op=37492,Lp=37496,Fp=37808,Vp=37809,Hp=37810,Bp=37811,Up=37812,Yp=37813,jp=37814,Gp=37815,Wp=37816,$p=37817,qp=37818,Xp=37819,Kp=37820,Zp=37821,M0=36492,Qp=36494,Jp=36495,o9=36283,e8=36284,t8=36285,n8=36286;var Qs=2300,Js=2301,X3=2302,Lv=2400,Fv=2401,Vv=2402,kA=2500;var s9=0,S0=1,G1=2,NA=3200,OA=3201;var a9=0,LA=1,Bo="",Zn="srgb",Vi="srgb-linear",qh="linear",yn="srgb";var ul=7680;var Hv=519,FA=512,VA=513,HA=514,c9=515,BA=516,UA=517,YA=518,jA=519,Q3=35044;var l9="300 es",ko=2e3,Xh=2001;var ps=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){let i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){let i=this._listeners;if(i===void 0)return;let r=i[e];if(r!==void 0){let o=r.indexOf(t);o!==-1&&r.splice(o,1)}}dispatchEvent(e){let t=this._listeners;if(t===void 0)return;let i=t[e.type];if(i!==void 0){e.target=this;let r=i.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,e);e.target=null}}},Qi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Sz=1234567,Wh=Math.PI/180,fl=180/Math.PI;function Oo(){let n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Qi[n&255]+Qi[n>>8&255]+Qi[n>>16&255]+Qi[n>>24&255]+"-"+Qi[e&255]+Qi[e>>8&255]+"-"+Qi[e>>16&15|64]+Qi[e>>24&255]+"-"+Qi[t&63|128]+Qi[t>>8&255]+"-"+Qi[t>>16&255]+Qi[t>>24&255]+Qi[i&255]+Qi[i>>8&255]+Qi[i>>16&255]+Qi[i>>24&255]).toLowerCase()}function Bt(n,e,t){return Math.max(e,Math.min(t,n))}function u9(n,e){return(n%e+e)%e}function EW(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function DW(n,e,t){return n!==e?(t-n)/(e-n):0}function $h(n,e,t){return(1-t)*n+t*e}function zW(n,e,t,i){return $h(n,e,1-Math.exp(-t*i))}function AW(n,e=1){return e-Math.abs(u9(n,e*2)-e)}function IW(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function PW(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function RW(n,e){return n+Math.floor(Math.random()*(e-n+1))}function kW(n,e){return n+Math.random()*(e-n)}function NW(n){return n*(.5-Math.random())}function OW(n){n!==void 0&&(Sz=n);let e=Sz+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function LW(n){return n*Wh}function FW(n){return n*fl}function VW(n){return(n&n-1)===0&&n!==0}function HW(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function BW(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function UW(n,e,t,i,r){let o=Math.cos,s=Math.sin,a=o(t/2),c=s(t/2),l=o((e+i)/2),u=s((e+i)/2),d=o((e-i)/2),h=s((e-i)/2),f=o((i-e)/2),p=s((i-e)/2);switch(r){case"XYX":n.set(a*u,c*d,c*h,a*l);break;case"YZY":n.set(c*h,a*u,c*d,a*l);break;case"ZXZ":n.set(c*d,c*h,a*u,a*l);break;case"XZX":n.set(a*u,c*p,c*f,a*l);break;case"YXY":n.set(c*f,a*u,c*p,a*l);break;case"ZYZ":n.set(c*p,c*f,a*u,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Ro(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function gn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var ca={DEG2RAD:Wh,RAD2DEG:fl,generateUUID:Oo,clamp:Bt,euclideanModulo:u9,mapLinear:EW,inverseLerp:DW,lerp:$h,damp:zW,pingpong:AW,smoothstep:IW,smootherstep:PW,randInt:RW,randFloat:kW,randFloatSpread:NW,seededRandom:OW,degToRad:LW,radToDeg:FW,isPowerOfTwo:VW,ceilPowerOfTwo:HW,floorPowerOfTwo:BW,setQuaternionFromProperEuler:UW,normalize:gn,denormalize:Ro},mt=class n{constructor(e=0,t=0){n.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Bt(this.x,e.x,t.x),this.y=Bt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Bt(this.x,e,t),this.y=Bt(this.y,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Bt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(Bt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let i=Math.cos(t),r=Math.sin(t),o=this.x-e.x,s=this.y-e.y;return this.x=o*i-s*r+e.x,this.y=o*r+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Hi=class{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,o,s,a){let c=i[r+0],l=i[r+1],u=i[r+2],d=i[r+3],h=o[s+0],f=o[s+1],p=o[s+2],v=o[s+3];if(a===0){e[t+0]=c,e[t+1]=l,e[t+2]=u,e[t+3]=d;return}if(a===1){e[t+0]=h,e[t+1]=f,e[t+2]=p,e[t+3]=v;return}if(d!==v||c!==h||l!==f||u!==p){let g=1-a,m=c*h+l*f+u*p+d*v,C=m>=0?1:-1,w=1-m*m;if(w>Number.EPSILON){let z=Math.sqrt(w),D=Math.atan2(z,m*C);g=Math.sin(g*D)/z,a=Math.sin(a*D)/z}let y=a*C;if(c=c*g+h*y,l=l*g+f*y,u=u*g+p*y,d=d*g+v*y,g===1-a){let z=1/Math.sqrt(c*c+l*l+u*u+d*d);c*=z,l*=z,u*=z,d*=z}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,o,s){let a=i[r],c=i[r+1],l=i[r+2],u=i[r+3],d=o[s],h=o[s+1],f=o[s+2],p=o[s+3];return e[t]=a*p+u*d+c*f-l*h,e[t+1]=c*p+u*h+l*d-a*f,e[t+2]=l*p+u*f+a*h-c*d,e[t+3]=u*p-a*d-c*h-l*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let i=e._x,r=e._y,o=e._z,s=e._order,a=Math.cos,c=Math.sin,l=a(i/2),u=a(r/2),d=a(o/2),h=c(i/2),f=c(r/2),p=c(o/2);switch(s){case"XYZ":this._x=h*u*d+l*f*p,this._y=l*f*d-h*u*p,this._z=l*u*p+h*f*d,this._w=l*u*d-h*f*p;break;case"YXZ":this._x=h*u*d+l*f*p,this._y=l*f*d-h*u*p,this._z=l*u*p-h*f*d,this._w=l*u*d+h*f*p;break;case"ZXY":this._x=h*u*d-l*f*p,this._y=l*f*d+h*u*p,this._z=l*u*p+h*f*d,this._w=l*u*d-h*f*p;break;case"ZYX":this._x=h*u*d-l*f*p,this._y=l*f*d+h*u*p,this._z=l*u*p-h*f*d,this._w=l*u*d+h*f*p;break;case"YZX":this._x=h*u*d+l*f*p,this._y=l*f*d+h*u*p,this._z=l*u*p-h*f*d,this._w=l*u*d-h*f*p;break;case"XZY":this._x=h*u*d-l*f*p,this._y=l*f*d-h*u*p,this._z=l*u*p+h*f*d,this._w=l*u*d+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,i=t[0],r=t[4],o=t[8],s=t[1],a=t[5],c=t[9],l=t[2],u=t[6],d=t[10],h=i+a+d;if(h>0){let f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-c)*f,this._y=(o-l)*f,this._z=(s-r)*f}else if(i>a&&i>d){let f=2*Math.sqrt(1+i-a-d);this._w=(u-c)/f,this._x=.25*f,this._y=(r+s)/f,this._z=(o+l)/f}else if(a>d){let f=2*Math.sqrt(1+a-i-d);this._w=(o-l)/f,this._x=(r+s)/f,this._y=.25*f,this._z=(c+u)/f}else{let f=2*Math.sqrt(1+d-i-a);this._w=(s-r)/f,this._x=(o+l)/f,this._y=(c+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Bt(this.dot(e),-1,1)))}rotateTowards(e,t){let i=this.angleTo(e);if(i===0)return this;let r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let i=e._x,r=e._y,o=e._z,s=e._w,a=t._x,c=t._y,l=t._z,u=t._w;return this._x=i*u+s*a+r*l-o*c,this._y=r*u+s*c+o*a-i*l,this._z=o*u+s*l+i*c-r*a,this._w=s*u-i*a-r*c-o*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let i=this._x,r=this._y,o=this._z,s=this._w,a=s*e._w+i*e._x+r*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=i,this._y=r,this._z=o,this;let c=1-a*a;if(c<=Number.EPSILON){let f=1-t;return this._w=f*s+t*this._w,this._x=f*i+t*this._x,this._y=f*r+t*this._y,this._z=f*o+t*this._z,this.normalize(),this}let l=Math.sqrt(c),u=Math.atan2(l,a),d=Math.sin((1-t)*u)/l,h=Math.sin(t*u)/l;return this._w=s*d+this._w*h,this._x=i*d+this._x*h,this._y=r*d+this._y*h,this._z=o*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){let e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),o*Math.sin(t),o*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},k=class n{constructor(e=0,t=0,i=0){n.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(wz.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(wz.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*r,this.y=o[1]*t+o[4]*i+o[7]*r,this.z=o[2]*t+o[5]*i+o[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,o=e.elements,s=1/(o[3]*t+o[7]*i+o[11]*r+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*r+o[12])*s,this.y=(o[1]*t+o[5]*i+o[9]*r+o[13])*s,this.z=(o[2]*t+o[6]*i+o[10]*r+o[14])*s,this}applyQuaternion(e){let t=this.x,i=this.y,r=this.z,o=e.x,s=e.y,a=e.z,c=e.w,l=2*(s*r-a*i),u=2*(a*t-o*r),d=2*(o*i-s*t);return this.x=t+c*l+s*d-a*u,this.y=i+c*u+a*l-o*d,this.z=r+c*d+o*u-s*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,i=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r,this.y=o[1]*t+o[5]*i+o[9]*r,this.z=o[2]*t+o[6]*i+o[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Bt(this.x,e.x,t.x),this.y=Bt(this.y,e.y,t.y),this.z=Bt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Bt(this.x,e,t),this.y=Bt(this.y,e,t),this.z=Bt(this.z,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Bt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let i=e.x,r=e.y,o=e.z,s=t.x,a=t.y,c=t.z;return this.x=r*c-o*a,this.y=o*s-i*c,this.z=i*a-r*s,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return cv.copy(this).projectOnVector(e),this.sub(cv)}reflect(e){return this.sub(cv.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(Bt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){let r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},cv=new k,wz=new Hi,Nt=class n{constructor(e,t,i,r,o,s,a,c,l){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,o,s,a,c,l)}set(e,t,i,r,o,s,a,c,l){let u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=o,u[5]=c,u[6]=i,u[7]=s,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[3],c=i[6],l=i[1],u=i[4],d=i[7],h=i[2],f=i[5],p=i[8],v=r[0],g=r[3],m=r[6],C=r[1],w=r[4],y=r[7],z=r[2],D=r[5],x=r[8];return o[0]=s*v+a*C+c*z,o[3]=s*g+a*w+c*D,o[6]=s*m+a*y+c*x,o[1]=l*v+u*C+d*z,o[4]=l*g+u*w+d*D,o[7]=l*m+u*y+d*x,o[2]=h*v+f*C+p*z,o[5]=h*g+f*w+p*D,o[8]=h*m+f*y+p*x,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],u=e[8];return t*s*u-t*a*l-i*o*u+i*a*c+r*o*l-r*s*c}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=u*s-a*l,h=a*c-u*o,f=l*o-s*c,p=t*d+i*h+r*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);let v=1/p;return e[0]=d*v,e[1]=(r*l-u*i)*v,e[2]=(a*i-r*s)*v,e[3]=h*v,e[4]=(u*t-r*c)*v,e[5]=(r*o-a*t)*v,e[6]=f*v,e[7]=(i*c-l*t)*v,e[8]=(s*t-i*o)*v,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,o,s,a){let c=Math.cos(o),l=Math.sin(o);return this.set(i*c,i*l,-i*(c*s+l*a)+s+e,-r*l,r*c,-r*(-l*s+c*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(lv.makeScale(e,t)),this}rotate(e){return this.premultiply(lv.makeRotation(-e)),this}translate(e,t){return this.premultiply(lv.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}},lv=new Nt;function d9(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function E1(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function GA(){let n=E1("canvas");return n.style.display="block",n}var Cz={};function pl(n){n in Cz||(Cz[n]=!0,console.warn(n))}function WA(n,e,t){return new Promise(function(i,r){function o(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(o,t);break;default:i()}}setTimeout(o,t)})}var Tz=new Nt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Ez=new Nt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function YW(){let n={enabled:!0,workingColorSpace:Vi,spaces:{},convert:function(r,o,s){return this.enabled===!1||o===s||!o||!s||(this.spaces[o].transfer===yn&&(r.r=Zs(r.r),r.g=Zs(r.g),r.b=Zs(r.b)),this.spaces[o].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[o].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===yn&&(r.r=C1(r.r),r.g=C1(r.g),r.b=C1(r.b))),r},workingToColorSpace:function(r,o){return this.convert(r,this.workingColorSpace,o)},colorSpaceToWorking:function(r,o){return this.convert(r,o,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Bo?qh:this.spaces[r].transfer},getLuminanceCoefficients:function(r,o=this.workingColorSpace){return r.fromArray(this.spaces[o].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,o,s){return r.copy(this.spaces[o].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,o){return pl("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(r,o)},toWorkingColorSpace:function(r,o){return pl("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(r,o)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Vi]:{primaries:e,whitePoint:i,transfer:qh,toXYZ:Tz,fromXYZ:Ez,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Zn},outputColorSpaceConfig:{drawingBufferColorSpace:Zn}},[Zn]:{primaries:e,whitePoint:i,transfer:yn,toXYZ:Tz,fromXYZ:Ez,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Zn}}}),n}var qt=YW();function Zs(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function C1(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var d1,D1=class{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{d1===void 0&&(d1=E1("canvas")),d1.width=e.width,d1.height=e.height;let r=d1.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=d1}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=E1("canvas");t.width=e.width,t.height=e.height;let i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let r=i.getImageData(0,0,e.width,e.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=Zs(o[s]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Zs(t[i]/255)*255):t[i]=Zs(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},jW=0,tc=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:jW++}),this.uuid=Oo(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){let t=this.data;return t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?o.push(uv(r[s].image)):o.push(uv(r[s]))}else o=uv(r);i.url=o}return t||(e.images[this.uuid]=i),i}};function uv(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?D1.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var GW=0,dv=new k,zr=(()=>{class n extends ps{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=lo,o=lo,s=Fi,a=Xr,c=cr,l=Ho,u=n.DEFAULT_ANISOTROPY,d=Bo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:GW++}),this.uuid=Oo(),this.name="",this.source=new tc(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=u,this.format=c,this.internalFormat=null,this.type=l,this.offset=new mt(0,0),this.repeat=new mt(1,1),this.center=new mt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Nt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(dv).x}get height(){return this.source.getSize(dv).y}get depth(){return this.source.getSize(dv).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,i){this.updateRanges.push({start:t,count:i})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(let i in t){let r=t[i];if(r===void 0){console.warn(`THREE.Texture.setValues(): parameter '${i}' has value of undefined.`);continue}let o=this[i];if(o===void 0){console.warn(`THREE.Texture.setValues(): property '${i}' does not exist.`);continue}o&&r&&o.isVector2&&r.isVector2||o&&r&&o.isVector3&&r.isVector3||o&&r&&o.isMatrix3&&r.isMatrix3?o.copy(r):this[i]=r}}toJSON(t){let i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==Ov)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case fs:t.x=t.x-Math.floor(t.x);break;case lo:t.x=t.x<0?0:1;break;case ec:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case fs:t.y=t.y-Math.floor(t.y);break;case lo:t.y=t.y<0?0:1;break;case ec:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=Ov,n.DEFAULT_ANISOTROPY=1,n})(),an=class n{constructor(e=0,t=0,i=0,r=1){n.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,o=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r+s[12]*o,this.y=s[1]*t+s[5]*i+s[9]*r+s[13]*o,this.z=s[2]*t+s[6]*i+s[10]*r+s[14]*o,this.w=s[3]*t+s[7]*i+s[11]*r+s[15]*o,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,o,c=e.elements,l=c[0],u=c[4],d=c[8],h=c[1],f=c[5],p=c[9],v=c[2],g=c[6],m=c[10];if(Math.abs(u-h)<.01&&Math.abs(d-v)<.01&&Math.abs(p-g)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+v)<.1&&Math.abs(p+g)<.1&&Math.abs(l+f+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let w=(l+1)/2,y=(f+1)/2,z=(m+1)/2,D=(u+h)/4,x=(d+v)/4,I=(p+g)/4;return w>y&&w>z?w<.01?(i=0,r=.707106781,o=.707106781):(i=Math.sqrt(w),r=D/i,o=x/i):y>z?y<.01?(i=.707106781,r=0,o=.707106781):(r=Math.sqrt(y),i=D/r,o=I/r):z<.01?(i=.707106781,r=.707106781,o=0):(o=Math.sqrt(z),i=x/o,r=I/o),this.set(i,r,o,t),this}let C=Math.sqrt((g-p)*(g-p)+(d-v)*(d-v)+(h-u)*(h-u));return Math.abs(C)<.001&&(C=1),this.x=(g-p)/C,this.y=(d-v)/C,this.z=(h-u)/C,this.w=Math.acos((l+f+m-1)/2),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Bt(this.x,e.x,t.x),this.y=Bt(this.y,e.y,t.y),this.z=Bt(this.z,e.z,t.z),this.w=Bt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Bt(this.x,e,t),this.y=Bt(this.y,e,t),this.z=Bt(this.z,e,t),this.w=Bt(this.w,e,t),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Bt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},J3=class extends ps{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Fi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new an(0,0,e,t),this.scissorTest=!1,this.viewport=new an(0,0,e,t);let r={width:e,height:t,depth:i.depth},o=new zr(r);this.textures=[];let s=i.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){let t={minFilter:Fi,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,o=this.textures.length;r<o;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;let r=Object.assign({},e.textures[t].image);this.textures[t].source=new tc(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},ms=class extends J3{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}},Kh=class extends zr{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Mi,this.minFilter=Mi,this.wrapR=lo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}};var ep=class extends zr{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Mi,this.minFilter=Mi,this.wrapR=lo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var Bi=class{constructor(e=new k(1/0,1/0,1/0),t=new k(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Ao.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Ao.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=Ao.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let i=e.geometry;if(i!==void 0){let o=i.getAttribute("position");if(t===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)e.isMesh===!0?e.getVertexPosition(s,Ao):Ao.fromBufferAttribute(o,s),Ao.applyMatrix4(e.matrixWorld),this.expandByPoint(Ao);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),C3.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),C3.copy(i.boundingBox)),C3.applyMatrix4(e.matrixWorld),this.union(C3)}let r=e.children;for(let o=0,s=r.length;o<s;o++)this.expandByObject(r[o],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Ao),Ao.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Fh),T3.subVectors(this.max,Fh),h1.subVectors(e.a,Fh),f1.subVectors(e.b,Fh),p1.subVectors(e.c,Fh),Wa.subVectors(f1,h1),$a.subVectors(p1,f1),sl.subVectors(h1,p1);let t=[0,-Wa.z,Wa.y,0,-$a.z,$a.y,0,-sl.z,sl.y,Wa.z,0,-Wa.x,$a.z,0,-$a.x,sl.z,0,-sl.x,-Wa.y,Wa.x,0,-$a.y,$a.x,0,-sl.y,sl.x,0];return!hv(t,h1,f1,p1,T3)||(t=[1,0,0,0,1,0,0,0,1],!hv(t,h1,f1,p1,T3))?!1:(E3.crossVectors(Wa,$a),t=[E3.x,E3.y,E3.z],hv(t,h1,f1,p1,T3))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ao).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ao).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Gs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Gs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Gs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Gs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Gs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Gs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Gs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Gs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Gs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}},Gs=[new k,new k,new k,new k,new k,new k,new k,new k],Ao=new k,C3=new Bi,h1=new k,f1=new k,p1=new k,Wa=new k,$a=new k,sl=new k,Fh=new k,T3=new k,E3=new k,al=new k;function hv(n,e,t,i,r){for(let o=0,s=n.length-3;o<=s;o+=3){al.fromArray(n,o);let a=r.x*Math.abs(al.x)+r.y*Math.abs(al.y)+r.z*Math.abs(al.z),c=e.dot(al),l=t.dot(al),u=i.dot(al);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>a)return!1}return!0}var WW=new Bi,Vh=new k,fv=new k,wr=class{constructor(e=new k,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let i=this.center;t!==void 0?i.copy(t):WW.setFromPoints(e).getCenter(i);let r=0;for(let o=0,s=e.length;o<s;o++)r=Math.max(r,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Vh.subVectors(e,this.center);let t=Vh.lengthSq();if(t>this.radius*this.radius){let i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Vh,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(fv.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Vh.copy(e.center).add(fv)),this.expandByPoint(Vh.copy(e.center).sub(fv))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}},Ws=new k,pv=new k,D3=new k,qa=new k,mv=new k,z3=new k,gv=new k,ea=class{constructor(e=new k,t=new k(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ws)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=Ws.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ws.copy(this.origin).addScaledVector(this.direction,t),Ws.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){pv.copy(e).add(t).multiplyScalar(.5),D3.copy(t).sub(e).normalize(),qa.copy(this.origin).sub(pv);let o=e.distanceTo(t)*.5,s=-this.direction.dot(D3),a=qa.dot(this.direction),c=-qa.dot(D3),l=qa.lengthSq(),u=Math.abs(1-s*s),d,h,f,p;if(u>0)if(d=s*c-a,h=s*a-c,p=o*u,d>=0)if(h>=-p)if(h<=p){let v=1/u;d*=v,h*=v,f=d*(d+s*h+2*a)+h*(s*d+h+2*c)+l}else h=o,d=Math.max(0,-(s*h+a)),f=-d*d+h*(h+2*c)+l;else h=-o,d=Math.max(0,-(s*h+a)),f=-d*d+h*(h+2*c)+l;else h<=-p?(d=Math.max(0,-(-s*o+a)),h=d>0?-o:Math.min(Math.max(-o,-c),o),f=-d*d+h*(h+2*c)+l):h<=p?(d=0,h=Math.min(Math.max(-o,-c),o),f=h*(h+2*c)+l):(d=Math.max(0,-(s*o+a)),h=d>0?o:Math.min(Math.max(-o,-c),o),f=-d*d+h*(h+2*c)+l);else h=s>0?-o:o,d=Math.max(0,-(s*h+a)),f=-d*d+h*(h+2*c)+l;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(pv).addScaledVector(D3,h),f}intersectSphere(e,t){Ws.subVectors(e.center,this.origin);let i=Ws.dot(this.direction),r=Ws.dot(Ws)-i*i,o=e.radius*e.radius;if(r>o)return null;let s=Math.sqrt(o-r),a=i-s,c=i+s;return c<0?null:a<0?this.at(c,t):this.at(a,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){let i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,o,s,a,c,l=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return l>=0?(i=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(i=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),u>=0?(o=(e.min.y-h.y)*u,s=(e.max.y-h.y)*u):(o=(e.max.y-h.y)*u,s=(e.min.y-h.y)*u),i>s||o>r||((o>i||isNaN(i))&&(i=o),(s<r||isNaN(r))&&(r=s),d>=0?(a=(e.min.z-h.z)*d,c=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,c=(e.min.z-h.z)*d),i>c||a>r)||((a>i||i!==i)&&(i=a),(c<r||r!==r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Ws)!==null}intersectTriangle(e,t,i,r,o){mv.subVectors(t,e),z3.subVectors(i,e),gv.crossVectors(mv,z3);let s=this.direction.dot(gv),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;qa.subVectors(this.origin,e);let c=a*this.direction.dot(z3.crossVectors(qa,z3));if(c<0)return null;let l=a*this.direction.dot(mv.cross(qa));if(l<0||c+l>s)return null;let u=-a*qa.dot(gv);return u<0?null:this.at(u/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Dt=class n{constructor(e,t,i,r,o,s,a,c,l,u,d,h,f,p,v,g){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,o,s,a,c,l,u,d,h,f,p,v,g)}set(e,t,i,r,o,s,a,c,l,u,d,h,f,p,v,g){let m=this.elements;return m[0]=e,m[4]=t,m[8]=i,m[12]=r,m[1]=o,m[5]=s,m[9]=a,m[13]=c,m[2]=l,m[6]=u,m[10]=d,m[14]=h,m[3]=f,m[7]=p,m[11]=v,m[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){let t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,i=e.elements,r=1/m1.setFromMatrixColumn(e,0).length(),o=1/m1.setFromMatrixColumn(e,1).length(),s=1/m1.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,i=e.x,r=e.y,o=e.z,s=Math.cos(i),a=Math.sin(i),c=Math.cos(r),l=Math.sin(r),u=Math.cos(o),d=Math.sin(o);if(e.order==="XYZ"){let h=s*u,f=s*d,p=a*u,v=a*d;t[0]=c*u,t[4]=-c*d,t[8]=l,t[1]=f+p*l,t[5]=h-v*l,t[9]=-a*c,t[2]=v-h*l,t[6]=p+f*l,t[10]=s*c}else if(e.order==="YXZ"){let h=c*u,f=c*d,p=l*u,v=l*d;t[0]=h+v*a,t[4]=p*a-f,t[8]=s*l,t[1]=s*d,t[5]=s*u,t[9]=-a,t[2]=f*a-p,t[6]=v+h*a,t[10]=s*c}else if(e.order==="ZXY"){let h=c*u,f=c*d,p=l*u,v=l*d;t[0]=h-v*a,t[4]=-s*d,t[8]=p+f*a,t[1]=f+p*a,t[5]=s*u,t[9]=v-h*a,t[2]=-s*l,t[6]=a,t[10]=s*c}else if(e.order==="ZYX"){let h=s*u,f=s*d,p=a*u,v=a*d;t[0]=c*u,t[4]=p*l-f,t[8]=h*l+v,t[1]=c*d,t[5]=v*l+h,t[9]=f*l-p,t[2]=-l,t[6]=a*c,t[10]=s*c}else if(e.order==="YZX"){let h=s*c,f=s*l,p=a*c,v=a*l;t[0]=c*u,t[4]=v-h*d,t[8]=p*d+f,t[1]=d,t[5]=s*u,t[9]=-a*u,t[2]=-l*u,t[6]=f*d+p,t[10]=h-v*d}else if(e.order==="XZY"){let h=s*c,f=s*l,p=a*c,v=a*l;t[0]=c*u,t[4]=-d,t[8]=l*u,t[1]=h*d+v,t[5]=s*u,t[9]=f*d-p,t[2]=p*d-f,t[6]=a*u,t[10]=v*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose($W,e,qW)}lookAt(e,t,i){let r=this.elements;return Gr.subVectors(e,t),Gr.lengthSq()===0&&(Gr.z=1),Gr.normalize(),Xa.crossVectors(i,Gr),Xa.lengthSq()===0&&(Math.abs(i.z)===1?Gr.x+=1e-4:Gr.z+=1e-4,Gr.normalize(),Xa.crossVectors(i,Gr)),Xa.normalize(),A3.crossVectors(Gr,Xa),r[0]=Xa.x,r[4]=A3.x,r[8]=Gr.x,r[1]=Xa.y,r[5]=A3.y,r[9]=Gr.y,r[2]=Xa.z,r[6]=A3.z,r[10]=Gr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,o=this.elements,s=i[0],a=i[4],c=i[8],l=i[12],u=i[1],d=i[5],h=i[9],f=i[13],p=i[2],v=i[6],g=i[10],m=i[14],C=i[3],w=i[7],y=i[11],z=i[15],D=r[0],x=r[4],I=r[8],S=r[12],M=r[1],A=r[5],J=r[9],K=r[13],Q=r[2],ee=r[6],L=r[10],B=r[14],F=r[3],ae=r[7],be=r[11],Ne=r[15];return o[0]=s*D+a*M+c*Q+l*F,o[4]=s*x+a*A+c*ee+l*ae,o[8]=s*I+a*J+c*L+l*be,o[12]=s*S+a*K+c*B+l*Ne,o[1]=u*D+d*M+h*Q+f*F,o[5]=u*x+d*A+h*ee+f*ae,o[9]=u*I+d*J+h*L+f*be,o[13]=u*S+d*K+h*B+f*Ne,o[2]=p*D+v*M+g*Q+m*F,o[6]=p*x+v*A+g*ee+m*ae,o[10]=p*I+v*J+g*L+m*be,o[14]=p*S+v*K+g*B+m*Ne,o[3]=C*D+w*M+y*Q+z*F,o[7]=C*x+w*A+y*ee+z*ae,o[11]=C*I+w*J+y*L+z*be,o[15]=C*S+w*K+y*B+z*Ne,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[4],r=e[8],o=e[12],s=e[1],a=e[5],c=e[9],l=e[13],u=e[2],d=e[6],h=e[10],f=e[14],p=e[3],v=e[7],g=e[11],m=e[15];return p*(+o*c*d-r*l*d-o*a*h+i*l*h+r*a*f-i*c*f)+v*(+t*c*f-t*l*h+o*s*h-r*s*f+r*l*u-o*c*u)+g*(+t*l*d-t*a*f-o*s*d+i*s*f+o*a*u-i*l*u)+m*(-r*a*u-t*c*d+t*a*h+r*s*d-i*s*h+i*c*u)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],v=e[13],g=e[14],m=e[15],C=d*g*l-v*h*l+v*c*f-a*g*f-d*c*m+a*h*m,w=p*h*l-u*g*l-p*c*f+s*g*f+u*c*m-s*h*m,y=u*v*l-p*d*l+p*a*f-s*v*f-u*a*m+s*d*m,z=p*d*c-u*v*c-p*a*h+s*v*h+u*a*g-s*d*g,D=t*C+i*w+r*y+o*z;if(D===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let x=1/D;return e[0]=C*x,e[1]=(v*h*o-d*g*o-v*r*f+i*g*f+d*r*m-i*h*m)*x,e[2]=(a*g*o-v*c*o+v*r*l-i*g*l-a*r*m+i*c*m)*x,e[3]=(d*c*o-a*h*o-d*r*l+i*h*l+a*r*f-i*c*f)*x,e[4]=w*x,e[5]=(u*g*o-p*h*o+p*r*f-t*g*f-u*r*m+t*h*m)*x,e[6]=(p*c*o-s*g*o-p*r*l+t*g*l+s*r*m-t*c*m)*x,e[7]=(s*h*o-u*c*o+u*r*l-t*h*l-s*r*f+t*c*f)*x,e[8]=y*x,e[9]=(p*d*o-u*v*o-p*i*f+t*v*f+u*i*m-t*d*m)*x,e[10]=(s*v*o-p*a*o+p*i*l-t*v*l-s*i*m+t*a*m)*x,e[11]=(u*a*o-s*d*o-u*i*l+t*d*l+s*i*f-t*a*f)*x,e[12]=z*x,e[13]=(u*v*r-p*d*r+p*i*h-t*v*h-u*i*g+t*d*g)*x,e[14]=(p*a*r-s*v*r-p*i*c+t*v*c+s*i*g-t*a*g)*x,e[15]=(s*d*r-u*a*r+u*i*c-t*d*c-s*i*h+t*a*h)*x,this}scale(e){let t=this.elements,i=e.x,r=e.y,o=e.z;return t[0]*=i,t[4]*=r,t[8]*=o,t[1]*=i,t[5]*=r,t[9]*=o,t[2]*=i,t[6]*=r,t[10]*=o,t[3]*=i,t[7]*=r,t[11]*=o,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let i=Math.cos(t),r=Math.sin(t),o=1-i,s=e.x,a=e.y,c=e.z,l=o*s,u=o*a;return this.set(l*s+i,l*a-r*c,l*c+r*a,0,l*a+r*c,u*a+i,u*c-r*s,0,l*c-r*a,u*c+r*s,o*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,o,s){return this.set(1,i,o,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){let r=this.elements,o=t._x,s=t._y,a=t._z,c=t._w,l=o+o,u=s+s,d=a+a,h=o*l,f=o*u,p=o*d,v=s*u,g=s*d,m=a*d,C=c*l,w=c*u,y=c*d,z=i.x,D=i.y,x=i.z;return r[0]=(1-(v+m))*z,r[1]=(f+y)*z,r[2]=(p-w)*z,r[3]=0,r[4]=(f-y)*D,r[5]=(1-(h+m))*D,r[6]=(g+C)*D,r[7]=0,r[8]=(p+w)*x,r[9]=(g-C)*x,r[10]=(1-(h+v))*x,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){let r=this.elements,o=m1.set(r[0],r[1],r[2]).length(),s=m1.set(r[4],r[5],r[6]).length(),a=m1.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),e.x=r[12],e.y=r[13],e.z=r[14],Io.copy(this);let l=1/o,u=1/s,d=1/a;return Io.elements[0]*=l,Io.elements[1]*=l,Io.elements[2]*=l,Io.elements[4]*=u,Io.elements[5]*=u,Io.elements[6]*=u,Io.elements[8]*=d,Io.elements[9]*=d,Io.elements[10]*=d,t.setFromRotationMatrix(Io),i.x=o,i.y=s,i.z=a,this}makePerspective(e,t,i,r,o,s,a=ko,c=!1){let l=this.elements,u=2*o/(t-e),d=2*o/(i-r),h=(t+e)/(t-e),f=(i+r)/(i-r),p,v;if(c)p=o/(s-o),v=s*o/(s-o);else if(a===ko)p=-(s+o)/(s-o),v=-2*s*o/(s-o);else if(a===Xh)p=-s/(s-o),v=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=d,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,o,s,a=ko,c=!1){let l=this.elements,u=2/(t-e),d=2/(i-r),h=-(t+e)/(t-e),f=-(i+r)/(i-r),p,v;if(c)p=1/(s-o),v=s/(s-o);else if(a===ko)p=-2/(s-o),v=-(s+o)/(s-o);else if(a===Xh)p=-1/(s-o),v=-o/(s-o);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=0,l[12]=h,l[1]=0,l[5]=d,l[9]=0,l[13]=f,l[2]=0,l[6]=0,l[10]=p,l[14]=v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}},m1=new k,Io=new Dt,$W=new k(0,0,0),qW=new k(1,1,1),Xa=new k,A3=new k,Gr=new k,Dz=new Dt,zz=new Hi,nc=(()=>{class n{constructor(t=0,i=0,r=0,o=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=o}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,o=this._order){return this._x=t,this._y=i,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){let o=t.elements,s=o[0],a=o[4],c=o[8],l=o[1],u=o[5],d=o[9],h=o[2],f=o[6],p=o[10];switch(i){case"XYZ":this._y=Math.asin(Bt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,p),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Bt(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(c,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Bt(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Bt(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Bt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(c,p));break;case"XZY":this._z=Math.asin(-Bt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(c,s)):(this._x=Math.atan2(-d,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return Dz.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Dz,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return zz.setFromEuler(this),this.setFromQuaternion(zz,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})(),Zh=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},XW=0,Az=new k,g1=new Hi,$s=new Dt,I3=new k,Hh=new k,KW=new k,ZW=new Hi,Iz=new k(1,0,0),Pz=new k(0,1,0),Rz=new k(0,0,1),kz={type:"added"},QW={type:"removed"},v1={type:"childadded",child:null},vv={type:"childremoved",child:null},Ri=(()=>{class n extends ps{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:XW++}),this.uuid=Oo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let t=new k,i=new nc,r=new Hi,o=new k(1,1,1);function s(){r.setFromEuler(i,!1)}function a(){i.setFromQuaternion(r,void 0,!1)}i._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new Dt},normalMatrix:{value:new Nt}}),this.matrix=new Dt,this.matrixWorld=new Dt,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Zh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return g1.setFromAxisAngle(t,i),this.quaternion.multiply(g1),this}rotateOnWorldAxis(t,i){return g1.setFromAxisAngle(t,i),this.quaternion.premultiply(g1),this}rotateX(t){return this.rotateOnAxis(Iz,t)}rotateY(t){return this.rotateOnAxis(Pz,t)}rotateZ(t){return this.rotateOnAxis(Rz,t)}translateOnAxis(t,i){return Az.copy(t).applyQuaternion(this.quaternion),this.position.add(Az.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(Iz,t)}translateY(t){return this.translateOnAxis(Pz,t)}translateZ(t){return this.translateOnAxis(Rz,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4($s.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?I3.copy(t):I3.set(t,i,r);let o=this.parent;this.updateWorldMatrix(!0,!1),Hh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?$s.lookAt(Hh,I3,this.up):$s.lookAt(I3,Hh,this.up),this.quaternion.setFromRotationMatrix($s),o&&($s.extractRotation(o.matrixWorld),g1.setFromRotationMatrix($s),this.quaternion.premultiply(g1.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(kz),v1.child=t,this.dispatchEvent(v1),v1.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(t);return i!==-1&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(QW),vv.child=t,this.dispatchEvent(vv),vv.child=null),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),$s.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),$s.multiply(t.parent.matrixWorld)),t.applyMatrix4($s),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(kz),v1.child=t,this.dispatchEvent(v1),v1.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,o=this.children.length;r<o;r++){let a=this.children[r].getObjectByProperty(t,i);if(a!==void 0)return a}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hh,t,KW),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hh,ZW,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].traverseVisible(t)}traverseAncestors(t){let i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);let i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].updateMatrixWorld(t)}updateWorldMatrix(t,i){let r=this.parent;if(t===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].updateWorldMatrix(!1,!0)}}toJSON(t){let i=t===void 0||typeof t=="string",r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});let o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.geometryInfo=this._geometryInfo.map(c=>lt(Z({},c),{boundingBox:c.boundingBox?c.boundingBox.toJSON():void 0,boundingSphere:c.boundingSphere?c.boundingSphere.toJSON():void 0})),o.instanceInfo=this._instanceInfo.map(c=>Z({},c)),o.availableInstanceIds=this._availableInstanceIds.slice(),o.availableGeometryIds=this._availableGeometryIds.slice(),o.nextIndexStart=this._nextIndexStart,o.nextVertexStart=this._nextVertexStart,o.geometryCount=this._geometryCount,o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.matricesTexture=this._matricesTexture.toJSON(t),o.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(o.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(o.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(o.boundingBox=this.boundingBox.toJSON()));function s(c,l){return c[l.uuid]===void 0&&(c[l.uuid]=l.toJSON(t)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(t.geometries,this.geometry);let c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){let l=c.shapes;if(Array.isArray(l))for(let u=0,d=l.length;u<d;u++){let h=l[u];s(t.shapes,h)}else s(t.shapes,l)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(t.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let c=[];for(let l=0,u=this.material.length;l<u;l++)c.push(s(t.materials,this.material[l]));o.material=c}else o.material=s(t.materials,this.material);if(this.children.length>0){o.children=[];for(let c=0;c<this.children.length;c++)o.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){o.animations=[];for(let c=0;c<this.animations.length;c++){let l=this.animations[c];o.animations.push(s(t.animations,l))}}if(i){let c=a(t.geometries),l=a(t.materials),u=a(t.textures),d=a(t.images),h=a(t.shapes),f=a(t.skeletons),p=a(t.animations),v=a(t.nodes);c.length>0&&(r.geometries=c),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),p.length>0&&(r.animations=p),v.length>0&&(r.nodes=v)}return r.object=o,r;function a(c){let l=[];for(let u in c){let d=c[u];delete d.metadata,l.push(d)}return l}}clone(t){return new this.constructor().copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(let r=0;r<t.children.length;r++){let o=t.children[r];this.add(o.clone())}return this}}return n.DEFAULT_UP=new k(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})(),Po=new k,qs=new k,yv=new k,Xs=new k,y1=new k,_1=new k,Nz=new k,_v=new k,bv=new k,xv=new k,Mv=new an,Sv=new an,wv=new an,Qa=class n{constructor(e=new k,t=new k,i=new k){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Po.subVectors(e,t),r.cross(Po);let o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,t,i,r,o){Po.subVectors(r,t),qs.subVectors(i,t),yv.subVectors(e,t);let s=Po.dot(Po),a=Po.dot(qs),c=Po.dot(yv),l=qs.dot(qs),u=qs.dot(yv),d=s*l-a*a;if(d===0)return o.set(0,0,0),null;let h=1/d,f=(l*c-a*u)*h,p=(s*u-a*c)*h;return o.set(1-f-p,p,f)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Xs)===null?!1:Xs.x>=0&&Xs.y>=0&&Xs.x+Xs.y<=1}static getInterpolation(e,t,i,r,o,s,a,c){return this.getBarycoord(e,t,i,r,Xs)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(o,Xs.x),c.addScaledVector(s,Xs.y),c.addScaledVector(a,Xs.z),c)}static getInterpolatedAttribute(e,t,i,r,o,s){return Mv.setScalar(0),Sv.setScalar(0),wv.setScalar(0),Mv.fromBufferAttribute(e,t),Sv.fromBufferAttribute(e,i),wv.fromBufferAttribute(e,r),s.setScalar(0),s.addScaledVector(Mv,o.x),s.addScaledVector(Sv,o.y),s.addScaledVector(wv,o.z),s}static isFrontFacing(e,t,i,r){return Po.subVectors(i,t),qs.subVectors(e,t),Po.cross(qs).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Po.subVectors(this.c,this.b),qs.subVectors(this.a,this.b),Po.cross(qs).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return n.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return n.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,o){return n.getInterpolation(e,this.a,this.b,this.c,t,i,r,o)}containsPoint(e){return n.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return n.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let i=this.a,r=this.b,o=this.c,s,a;y1.subVectors(r,i),_1.subVectors(o,i),_v.subVectors(e,i);let c=y1.dot(_v),l=_1.dot(_v);if(c<=0&&l<=0)return t.copy(i);bv.subVectors(e,r);let u=y1.dot(bv),d=_1.dot(bv);if(u>=0&&d<=u)return t.copy(r);let h=c*d-u*l;if(h<=0&&c>=0&&u<=0)return s=c/(c-u),t.copy(i).addScaledVector(y1,s);xv.subVectors(e,o);let f=y1.dot(xv),p=_1.dot(xv);if(p>=0&&f<=p)return t.copy(o);let v=f*l-c*p;if(v<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(i).addScaledVector(_1,a);let g=u*p-f*d;if(g<=0&&d-u>=0&&f-p>=0)return Nz.subVectors(o,r),a=(d-u)/(d-u+(f-p)),t.copy(r).addScaledVector(Nz,a);let m=1/(g+v+h);return s=v*m,a=h*m,t.copy(i).addScaledVector(y1,s).addScaledVector(_1,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},$A={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ka={h:0,s:0,l:0},P3={h:0,s:0,l:0};function Cv(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}var ot=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){let r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Zn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,qt.colorSpaceToWorking(this,t),this}setRGB(e,t,i,r=qt.workingColorSpace){return this.r=e,this.g=t,this.b=i,qt.colorSpaceToWorking(this,r),this}setHSL(e,t,i,r=qt.workingColorSpace){if(e=u9(e,1),t=Bt(t,0,1),i=Bt(i,0,1),t===0)this.r=this.g=this.b=i;else{let o=i<=.5?i*(1+t):i+t-i*t,s=2*i-o;this.r=Cv(s,o,e+1/3),this.g=Cv(s,o,e),this.b=Cv(s,o,e-1/3)}return qt.colorSpaceToWorking(this,r),this}setStyle(e,t=Zn){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let o,s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let o=r[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Zn){let i=$A[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Zs(e.r),this.g=Zs(e.g),this.b=Zs(e.b),this}copyLinearToSRGB(e){return this.r=C1(e.r),this.g=C1(e.g),this.b=C1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Zn){return qt.workingToColorSpace(Ji.copy(this),e),Math.round(Bt(Ji.r*255,0,255))*65536+Math.round(Bt(Ji.g*255,0,255))*256+Math.round(Bt(Ji.b*255,0,255))}getHexString(e=Zn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=qt.workingColorSpace){qt.workingToColorSpace(Ji.copy(this),t);let i=Ji.r,r=Ji.g,o=Ji.b,s=Math.max(i,r,o),a=Math.min(i,r,o),c,l,u=(a+s)/2;if(a===s)c=0,l=0;else{let d=s-a;switch(l=u<=.5?d/(s+a):d/(2-s-a),s){case i:c=(r-o)/d+(r<o?6:0);break;case r:c=(o-i)/d+2;break;case o:c=(i-r)/d+4;break}c/=6}return e.h=c,e.s=l,e.l=u,e}getRGB(e,t=qt.workingColorSpace){return qt.workingToColorSpace(Ji.copy(this),t),e.r=Ji.r,e.g=Ji.g,e.b=Ji.b,e}getStyle(e=Zn){qt.workingToColorSpace(Ji.copy(this),e);let t=Ji.r,i=Ji.g,r=Ji.b;return e!==Zn?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Ka),this.setHSL(Ka.h+e,Ka.s+t,Ka.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ka),e.getHSL(P3);let i=$h(Ka.h,P3.h,t),r=$h(Ka.s,P3.s,t),o=$h(Ka.l,P3.l,t);return this.setHSL(i,r,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,i=this.g,r=this.b,o=e.elements;return this.r=o[0]*t+o[3]*i+o[6]*r,this.g=o[1]*t+o[4]*i+o[7]*r,this.b=o[2]*t+o[5]*i+o[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},Ji=new ot;ot.NAMES=$A;var JW=0,Cr=class extends ps{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:JW++}),this.uuid=Oo(),this.name="",this.type="Material",this.blending=dl,this.side=Lo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=K3,this.blendDst=Z3,this.blendEquation=Ja,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ot(0,0,0),this.blendAlpha=0,this.depthFunc=hl,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Hv,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ul,this.stencilZFail=ul,this.stencilZPass=ul,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==dl&&(i.blending=this.blending),this.side!==Lo&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==K3&&(i.blendSrc=this.blendSrc),this.blendDst!==Z3&&(i.blendDst=this.blendDst),this.blendEquation!==Ja&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==hl&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Hv&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ul&&(i.stencilFail=this.stencilFail),this.stencilZFail!==ul&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==ul&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(o){let s=[];for(let a in o){let c=o[a];delete c.metadata,s.push(c)}return s}if(t){let o=r(e.textures),s=r(e.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,i=null;if(t!==null){let r=t.length;i=new Array(r);for(let o=0;o!==r;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},Fo=class extends Cr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ot(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new nc,this.combine=Qv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};var di=new k,R3=new mt,e$=0,_n=class{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:e$++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Q3,this.updateRanges=[],this.gpuType=uo,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)R3.fromBufferAttribute(this,t),R3.applyMatrix3(e),this.setXY(t,R3.x,R3.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)di.fromBufferAttribute(this,t),di.applyMatrix3(e),this.setXYZ(t,di.x,di.y,di.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)di.fromBufferAttribute(this,t),di.applyMatrix4(e),this.setXYZ(t,di.x,di.y,di.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)di.fromBufferAttribute(this,t),di.applyNormalMatrix(e),this.setXYZ(t,di.x,di.y,di.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)di.fromBufferAttribute(this,t),di.transformDirection(e),this.setXYZ(t,di.x,di.y,di.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Ro(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=gn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ro(t,this.array)),t}setX(e,t){return this.normalized&&(t=gn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ro(t,this.array)),t}setY(e,t){return this.normalized&&(t=gn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ro(t,this.array)),t}setZ(e,t){return this.normalized&&(t=gn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ro(t,this.array)),t}setW(e,t){return this.normalized&&(t=gn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=gn(t,this.array),i=gn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=gn(t,this.array),i=gn(i,this.array),r=gn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,o){return e*=this.itemSize,this.normalized&&(t=gn(t,this.array),i=gn(i,this.array),r=gn(r,this.array),o=gn(o,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Q3&&(e.usage=this.usage),e}};var Qh=class extends _n{constructor(e,t,i){super(new Uint16Array(e),t,i)}};var Jh=class extends _n{constructor(e,t,i){super(new Uint32Array(e),t,i)}};var $r=class extends _n{constructor(e,t,i){super(new Float32Array(e),t,i)}},t$=0,ao=new Dt,Tv=new Ri,b1=new k,Wr=new Bi,Bh=new Bi,Pi=new k,qr=class n extends ps{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:t$++}),this.uuid=Oo(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(d9(e)?Jh:Qh)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let o=new Nt().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ao.makeRotationFromQuaternion(e),this.applyMatrix4(ao),this}rotateX(e){return ao.makeRotationX(e),this.applyMatrix4(ao),this}rotateY(e){return ao.makeRotationY(e),this.applyMatrix4(ao),this}rotateZ(e){return ao.makeRotationZ(e),this.applyMatrix4(ao),this}translate(e,t,i){return ao.makeTranslation(e,t,i),this.applyMatrix4(ao),this}scale(e,t,i){return ao.makeScale(e,t,i),this.applyMatrix4(ao),this}lookAt(e){return Tv.lookAt(e),Tv.updateMatrix(),this.applyMatrix4(Tv.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(b1).negate(),this.translate(b1.x,b1.y,b1.z),this}setFromPoints(e){let t=this.getAttribute("position");if(t===void 0){let i=[];for(let r=0,o=e.length;r<o;r++){let s=e[r];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new $r(i,3))}else{let i=Math.min(e.length,t.count);for(let r=0;r<i;r++){let o=e[r];t.setXYZ(r,o.x,o.y,o.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Bi);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new k(-1/0,-1/0,-1/0),new k(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){let o=t[i];Wr.setFromBufferAttribute(o),this.morphTargetsRelative?(Pi.addVectors(this.boundingBox.min,Wr.min),this.boundingBox.expandByPoint(Pi),Pi.addVectors(this.boundingBox.max,Wr.max),this.boundingBox.expandByPoint(Pi)):(this.boundingBox.expandByPoint(Wr.min),this.boundingBox.expandByPoint(Wr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new wr);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new k,1/0);return}if(e){let i=this.boundingSphere.center;if(Wr.setFromBufferAttribute(e),t)for(let o=0,s=t.length;o<s;o++){let a=t[o];Bh.setFromBufferAttribute(a),this.morphTargetsRelative?(Pi.addVectors(Wr.min,Bh.min),Wr.expandByPoint(Pi),Pi.addVectors(Wr.max,Bh.max),Wr.expandByPoint(Pi)):(Wr.expandByPoint(Bh.min),Wr.expandByPoint(Bh.max))}Wr.getCenter(i);let r=0;for(let o=0,s=e.count;o<s;o++)Pi.fromBufferAttribute(e,o),r=Math.max(r,i.distanceToSquared(Pi));if(t)for(let o=0,s=t.length;o<s;o++){let a=t[o],c=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)Pi.fromBufferAttribute(a,l),c&&(b1.fromBufferAttribute(e,l),Pi.add(b1)),r=Math.max(r,i.distanceToSquared(Pi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=t.position,r=t.normal,o=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new _n(new Float32Array(4*i.count),4));let s=this.getAttribute("tangent"),a=[],c=[];for(let I=0;I<i.count;I++)a[I]=new k,c[I]=new k;let l=new k,u=new k,d=new k,h=new mt,f=new mt,p=new mt,v=new k,g=new k;function m(I,S,M){l.fromBufferAttribute(i,I),u.fromBufferAttribute(i,S),d.fromBufferAttribute(i,M),h.fromBufferAttribute(o,I),f.fromBufferAttribute(o,S),p.fromBufferAttribute(o,M),u.sub(l),d.sub(l),f.sub(h),p.sub(h);let A=1/(f.x*p.y-p.x*f.y);isFinite(A)&&(v.copy(u).multiplyScalar(p.y).addScaledVector(d,-f.y).multiplyScalar(A),g.copy(d).multiplyScalar(f.x).addScaledVector(u,-p.x).multiplyScalar(A),a[I].add(v),a[S].add(v),a[M].add(v),c[I].add(g),c[S].add(g),c[M].add(g))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let I=0,S=C.length;I<S;++I){let M=C[I],A=M.start,J=M.count;for(let K=A,Q=A+J;K<Q;K+=3)m(e.getX(K+0),e.getX(K+1),e.getX(K+2))}let w=new k,y=new k,z=new k,D=new k;function x(I){z.fromBufferAttribute(r,I),D.copy(z);let S=a[I];w.copy(S),w.sub(z.multiplyScalar(z.dot(S))).normalize(),y.crossVectors(D,S);let A=y.dot(c[I])<0?-1:1;s.setXYZW(I,w.x,w.y,w.z,A)}for(let I=0,S=C.length;I<S;++I){let M=C[I],A=M.start,J=M.count;for(let K=A,Q=A+J;K<Q;K+=3)x(e.getX(K+0)),x(e.getX(K+1)),x(e.getX(K+2))}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new _n(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let h=0,f=i.count;h<f;h++)i.setXYZ(h,0,0,0);let r=new k,o=new k,s=new k,a=new k,c=new k,l=new k,u=new k,d=new k;if(e)for(let h=0,f=e.count;h<f;h+=3){let p=e.getX(h+0),v=e.getX(h+1),g=e.getX(h+2);r.fromBufferAttribute(t,p),o.fromBufferAttribute(t,v),s.fromBufferAttribute(t,g),u.subVectors(s,o),d.subVectors(r,o),u.cross(d),a.fromBufferAttribute(i,p),c.fromBufferAttribute(i,v),l.fromBufferAttribute(i,g),a.add(u),c.add(u),l.add(u),i.setXYZ(p,a.x,a.y,a.z),i.setXYZ(v,c.x,c.y,c.z),i.setXYZ(g,l.x,l.y,l.z)}else for(let h=0,f=t.count;h<f;h+=3)r.fromBufferAttribute(t,h+0),o.fromBufferAttribute(t,h+1),s.fromBufferAttribute(t,h+2),u.subVectors(s,o),d.subVectors(r,o),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Pi.fromBufferAttribute(e,t),Pi.normalize(),e.setXYZ(t,Pi.x,Pi.y,Pi.z)}toNonIndexed(){function e(a,c){let l=a.array,u=a.itemSize,d=a.normalized,h=new l.constructor(c.length*u),f=0,p=0;for(let v=0,g=c.length;v<g;v++){a.isInterleavedBufferAttribute?f=c[v]*a.data.stride+a.offset:f=c[v]*u;for(let m=0;m<u;m++)h[p++]=l[f++]}return new _n(h,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new n,i=this.index.array,r=this.attributes;for(let a in r){let c=r[a],l=e(c,i);t.setAttribute(a,l)}let o=this.morphAttributes;for(let a in o){let c=[],l=o[a];for(let u=0,d=l.length;u<d;u++){let h=l[u],f=e(h,i);c.push(f)}t.morphAttributes[a]=c}t.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,c=s.length;a<c;a++){let l=s[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let c=this.parameters;for(let l in c)c[l]!==void 0&&(e[l]=c[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let i=this.attributes;for(let c in i){let l=i[c];e.data.attributes[c]=l.toJSON(e.data)}let r={},o=!1;for(let c in this.morphAttributes){let l=this.morphAttributes[c],u=[];for(let d=0,h=l.length;d<h;d++){let f=l[d];u.push(f.toJSON(e.data))}u.length>0&&(r[c]=u,o=!0)}o&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere=a.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let i=e.index;i!==null&&this.setIndex(i.clone());let r=e.attributes;for(let l in r){let u=r[l];this.setAttribute(l,u.clone(t))}let o=e.morphAttributes;for(let l in o){let u=[],d=o[l];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let l=0,u=s.length;l<u;l++){let d=s[l];this.addGroup(d.start,d.count,d.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},Oz=new Dt,cl=new ea,k3=new wr,Lz=new k,N3=new k,O3=new k,L3=new k,Ev=new k,F3=new k,Fz=new k,V3=new k,ri=class extends Ri{constructor(e=new qr,t=new Fo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,t){let i=this.geometry,r=i.attributes.position,o=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(r,e);let a=this.morphTargetInfluences;if(o&&a){F3.set(0,0,0);for(let c=0,l=o.length;c<l;c++){let u=a[c],d=o[c];u!==0&&(Ev.fromBufferAttribute(d,e),s?F3.addScaledVector(Ev,u):F3.addScaledVector(Ev.sub(t),u))}t.add(F3)}return t}raycast(e,t){let i=this.geometry,r=this.material,o=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),k3.copy(i.boundingSphere),k3.applyMatrix4(o),cl.copy(e.ray).recast(e.near),!(k3.containsPoint(cl.origin)===!1&&(cl.intersectSphere(k3,Lz)===null||cl.origin.distanceToSquared(Lz)>(e.far-e.near)**2))&&(Oz.copy(o).invert(),cl.copy(e.ray).applyMatrix4(Oz),!(i.boundingBox!==null&&cl.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,cl)))}_computeIntersections(e,t,i){let r,o=this.geometry,s=this.material,a=o.index,c=o.attributes.position,l=o.attributes.uv,u=o.attributes.uv1,d=o.attributes.normal,h=o.groups,f=o.drawRange;if(a!==null)if(Array.isArray(s))for(let p=0,v=h.length;p<v;p++){let g=h[p],m=s[g.materialIndex],C=Math.max(g.start,f.start),w=Math.min(a.count,Math.min(g.start+g.count,f.start+f.count));for(let y=C,z=w;y<z;y+=3){let D=a.getX(y),x=a.getX(y+1),I=a.getX(y+2);r=H3(this,m,e,i,l,u,d,D,x,I),r&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=g.materialIndex,t.push(r))}}else{let p=Math.max(0,f.start),v=Math.min(a.count,f.start+f.count);for(let g=p,m=v;g<m;g+=3){let C=a.getX(g),w=a.getX(g+1),y=a.getX(g+2);r=H3(this,s,e,i,l,u,d,C,w,y),r&&(r.faceIndex=Math.floor(g/3),t.push(r))}}else if(c!==void 0)if(Array.isArray(s))for(let p=0,v=h.length;p<v;p++){let g=h[p],m=s[g.materialIndex],C=Math.max(g.start,f.start),w=Math.min(c.count,Math.min(g.start+g.count,f.start+f.count));for(let y=C,z=w;y<z;y+=3){let D=y,x=y+1,I=y+2;r=H3(this,m,e,i,l,u,d,D,x,I),r&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=g.materialIndex,t.push(r))}}else{let p=Math.max(0,f.start),v=Math.min(c.count,f.start+f.count);for(let g=p,m=v;g<m;g+=3){let C=g,w=g+1,y=g+2;r=H3(this,s,e,i,l,u,d,C,w,y),r&&(r.faceIndex=Math.floor(g/3),t.push(r))}}}};function n$(n,e,t,i,r,o,s,a){let c;if(e.side===ar?c=i.intersectTriangle(s,o,r,!0,a):c=i.intersectTriangle(r,o,s,e.side===Lo,a),c===null)return null;V3.copy(a),V3.applyMatrix4(n.matrixWorld);let l=t.ray.origin.distanceTo(V3);return l<t.near||l>t.far?null:{distance:l,point:V3.clone(),object:n}}function H3(n,e,t,i,r,o,s,a,c,l){n.getVertexPosition(a,N3),n.getVertexPosition(c,O3),n.getVertexPosition(l,L3);let u=n$(n,e,t,i,N3,O3,L3,Fz);if(u){let d=new k;Qa.getBarycoord(Fz,N3,O3,L3,d),r&&(u.uv=Qa.getInterpolatedAttribute(r,a,c,l,d,new mt)),o&&(u.uv1=Qa.getInterpolatedAttribute(o,a,c,l,d,new mt)),s&&(u.normal=Qa.getInterpolatedAttribute(s,a,c,l,d,new k),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));let h={a,b:c,c:l,normal:new k,materialIndex:0};Qa.getNormal(N3,O3,L3,h.normal),u.face=h,u.barycoord=d}return u}var ic=class n extends qr{constructor(e=1,t=1,i=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:o,depthSegments:s};let a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);let c=[],l=[],u=[],d=[],h=0,f=0;p("z","y","x",-1,-1,i,t,e,s,o,0),p("z","y","x",1,-1,i,t,-e,s,o,1),p("x","z","y",1,1,e,i,t,r,s,2),p("x","z","y",1,-1,e,i,-t,r,s,3),p("x","y","z",1,-1,e,t,i,r,o,4),p("x","y","z",-1,-1,e,t,-i,r,o,5),this.setIndex(c),this.setAttribute("position",new $r(l,3)),this.setAttribute("normal",new $r(u,3)),this.setAttribute("uv",new $r(d,2));function p(v,g,m,C,w,y,z,D,x,I,S){let M=y/x,A=z/I,J=y/2,K=z/2,Q=D/2,ee=x+1,L=I+1,B=0,F=0,ae=new k;for(let be=0;be<L;be++){let Ne=be*A-K;for(let tt=0;tt<ee;tt++){let tn=tt*M-J;ae[v]=tn*C,ae[g]=Ne*w,ae[m]=Q,l.push(ae.x,ae.y,ae.z),ae[v]=0,ae[g]=0,ae[m]=D>0?1:-1,u.push(ae.x,ae.y,ae.z),d.push(tt/x),d.push(1-be/I),B+=1}}for(let be=0;be<I;be++)for(let Ne=0;Ne<x;Ne++){let tt=h+Ne+ee*be,tn=h+Ne+ee*(be+1),st=h+(Ne+1)+ee*(be+1),ne=h+(Ne+1)+ee*be;c.push(tt,tn,ne),c.push(tn,st,ne),F+=6}a.addGroup(f,F,S),f+=F,h+=B}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function wl(n){let e={};for(let t in n){e[t]={};for(let i in n[t]){let r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function er(n){let e={};for(let t=0;t<n.length;t++){let i=wl(n[t]);for(let r in i)e[r]=i[r]}return e}function i$(n){let e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function h9(n){let e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:qt.workingColorSpace}var qA={clone:wl,merge:er},r$=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,o$=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Vo=class extends Cr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=r$,this.fragmentShader=o$,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=wl(e.uniforms),this.uniformsGroups=i$(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let s=this.uniforms[r].value;s&&s.isTexture?t.uniforms[r]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[r]={type:"m4",value:s.toArray()}:t.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}},e0=class extends Ri{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Dt,this.projectionMatrix=new Dt,this.projectionMatrixInverse=new Dt,this.coordinateSystem=ko,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Za=new k,Vz=new mt,Hz=new mt,ii=class extends e0{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=fl*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(Wh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return fl*2*Math.atan(Math.tan(Wh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Za.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Za.x,Za.y).multiplyScalar(-e/Za.z),Za.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Za.x,Za.y).multiplyScalar(-e/Za.z)}getViewSize(e,t){return this.getViewBounds(e,Vz,Hz),t.subVectors(Hz,Vz)}setViewOffset(e,t,i,r,o,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(Wh*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,o=-.5*r,s=this.view;if(this.view!==null&&this.view.enabled){let c=s.fullWidth,l=s.fullHeight;o+=s.offsetX*r/c,t-=s.offsetY*i/l,r*=s.width/c,i*=s.height/l}let a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,t,t-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},x1=-90,M1=1,tp=class extends Ri{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new ii(x1,M1,e,t);r.layers=this.layers,this.add(r);let o=new ii(x1,M1,e,t);o.layers=this.layers,this.add(o);let s=new ii(x1,M1,e,t);s.layers=this.layers,this.add(s);let a=new ii(x1,M1,e,t);a.layers=this.layers,this.add(a);let c=new ii(x1,M1,e,t);c.layers=this.layers,this.add(c);let l=new ii(x1,M1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[i,r,o,s,a,c]=t;for(let l of t)this.remove(l);if(e===ko)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===Xh)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let l of t)this.add(l),l.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[o,s,a,c,l,u]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;let v=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,o),e.setRenderTarget(i,1,r),e.render(t,s),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,c),e.setRenderTarget(i,4,r),e.render(t,l),i.texture.generateMipmaps=v,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(d,h,f),e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}},t0=class extends zr{constructor(e=[],t=Ml,i,r,o,s,a,c,l,u){super(e,t,i,r,o,s,a,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},np=class extends ms{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new t0(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new ic(5,5,5),o=new Vo({name:"CubemapFromEquirect",uniforms:wl(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ar,blending:oa});o.uniforms.tEquirect.value=t;let s=new ri(r,o),a=t.minFilter;return t.minFilter===Xr&&(t.minFilter=Fi),new tp(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){let o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,r);e.setRenderTarget(o)}},No=class extends Ri{constructor(){super(),this.isGroup=!0,this.type="Group"}},s$={type:"move"},z1=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new No,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new No,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new k,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new k),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new No,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new k,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new k),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,o=null,s=null,a=this._targetRay,c=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){s=!0;for(let v of e.hand.values()){let g=t.getJointPose(v,i),m=this._getHandJoint(l,v);g!==null&&(m.matrix.fromArray(g.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=g.radius),m.visible=g!==null}let u=l.joints["index-finger-tip"],d=l.joints["thumb-tip"],h=u.position.distanceTo(d.position),f=.02,p=.005;l.inputState.pinching&&h>f+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&h<=f-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,i),o!==null&&(c.matrix.fromArray(o.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,o.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(o.linearVelocity)):c.hasLinearVelocity=!1,o.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(o.angularVelocity)):c.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&o!==null&&(r=o),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(s$)))}return a!==null&&(a.visible=r!==null),c!==null&&(c.visible=o!==null),l!==null&&(l.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let i=new No;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}};var gs=class extends Ri{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new nc,this.environmentIntensity=1,this.environmentRotation=new nc,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}},A1=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Q3,this.updateRanges=[],this.version=0,this.uuid=Oo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,o=this.stride;r<o;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Oo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Oo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},or=new k,I1=class n{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)or.fromBufferAttribute(this,t),or.applyMatrix4(e),this.setXYZ(t,or.x,or.y,or.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)or.fromBufferAttribute(this,t),or.applyNormalMatrix(e),this.setXYZ(t,or.x,or.y,or.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)or.fromBufferAttribute(this,t),or.transformDirection(e),this.setXYZ(t,or.x,or.y,or.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Ro(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=gn(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=gn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=gn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=gn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=gn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ro(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ro(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ro(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ro(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=gn(t,this.array),i=gn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=gn(t,this.array),i=gn(i,this.array),r=gn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=gn(t,this.array),i=gn(i,this.array),r=gn(r,this.array),o=gn(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return new _n(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new n(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[r+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}};var Bz=new k,Uz=new an,Yz=new an,a$=new k,jz=new Dt,B3=new k,Dv=new wr,Gz=new Dt,zv=new ea,n0=class extends ri{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Nv,this.bindMatrix=new Dt,this.bindMatrixInverse=new Dt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Bi),this.boundingBox.makeEmpty();let t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,B3),this.boundingBox.expandByPoint(B3)}computeBoundingSphere(){let e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new wr),this.boundingSphere.makeEmpty();let t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,B3),this.boundingSphere.expandByPoint(B3)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){let i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Dv.copy(this.boundingSphere),Dv.applyMatrix4(r),e.ray.intersectsSphere(Dv)!==!1&&(Gz.copy(r).invert(),zv.copy(e.ray).applyMatrix4(Gz),!(this.boundingBox!==null&&zv.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,zv)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new an,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);let o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Nv?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===RA?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){let i=this.skeleton,r=this.geometry;Uz.fromBufferAttribute(r.attributes.skinIndex,e),Yz.fromBufferAttribute(r.attributes.skinWeight,e),Bz.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){let s=Yz.getComponent(o);if(s!==0){let a=Uz.getComponent(o);jz.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(a$.copy(Bz).applyMatrix4(jz),s)}}return t.applyMatrix4(this.bindMatrixInverse)}},P1=class extends Ri{constructor(){super(),this.isBone=!0,this.type="Bone"}},i0=class extends zr{constructor(e=null,t=1,i=1,r,o,s,a,c,l=Mi,u=Mi,d,h){super(null,s,a,c,l,u,r,o,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Wz=new Dt,c$=new Dt,r0=class n{constructor(e=[],t=[]){this.uuid=Oo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Dt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let i=new Dt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){let e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let o=0,s=e.length;o<s;o++){let a=e[o]?e[o].matrixWorld:c$;Wz.multiplyMatrices(a,t[o]),Wz.toArray(i,o*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new n(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let i=new i0(t,e,e,cr,uo);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){let r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){let o=e.bones[i],s=t[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new P1),this.bones.push(s),this.boneInverses.push(new Dt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){let e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,i=this.boneInverses;for(let r=0,o=t.length;r<o;r++){let s=t[r];e.bones.push(s.uuid);let a=i[r];e.boneInverses.push(a.toArray())}return e}},rc=class extends _n{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},S1=new Dt,$z=new Dt,U3=[],qz=new Bi,l$=new Dt,Uh=new ri,Yh=new wr,o0=class extends ri{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new rc(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,l$)}computeBoundingBox(){let e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Bi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,S1),qz.copy(e.boundingBox).applyMatrix4(S1),this.boundingBox.union(qz)}computeBoundingSphere(){let e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new wr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,S1),Yh.copy(e.boundingSphere).applyMatrix4(S1),this.boundingSphere.union(Yh)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){let i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,o=i.length+1,s=e*o+1;for(let a=0;a<i.length;a++)i[a]=r[s+a]}raycast(e,t){let i=this.matrixWorld,r=this.count;if(Uh.geometry=this.geometry,Uh.material=this.material,Uh.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Yh.copy(this.boundingSphere),Yh.applyMatrix4(i),e.ray.intersectsSphere(Yh)!==!1))for(let o=0;o<r;o++){this.getMatrixAt(o,S1),$z.multiplyMatrices(i,S1),Uh.matrixWorld=$z,Uh.raycast(e,U3);for(let s=0,a=U3.length;s<a;s++){let c=U3[s];c.instanceId=o,c.object=this,t.push(c)}U3.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new rc(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){let i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new i0(new Float32Array(r*this.count),r,this.count,Ep,uo));let o=this.morphTexture.source.data.data,s=0;for(let l=0;l<i.length;l++)s+=i[l];let a=this.geometry.morphTargetsRelative?1:1-s,c=r*e;o[c]=a,o.set(i,c+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}},Av=new k,u$=new k,d$=new Nt,co=class{constructor(e=new k(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){let r=Av.subVectors(i,t).cross(u$.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let i=e.delta(Av),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:t.copy(e.start).addScaledVector(i,o)}intersectsLine(e){let t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let i=t||d$.getNormalMatrix(e),r=this.coplanarPoint(Av).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},ll=new wr,h$=new mt(.5,.5),Y3=new k,R1=class{constructor(e=new co,t=new co,i=new co,r=new co,o=new co,s=new co){this.planes=[e,t,i,r,o,s]}set(e,t,i,r,o,s){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(e){let t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=ko,i=!1){let r=this.planes,o=e.elements,s=o[0],a=o[1],c=o[2],l=o[3],u=o[4],d=o[5],h=o[6],f=o[7],p=o[8],v=o[9],g=o[10],m=o[11],C=o[12],w=o[13],y=o[14],z=o[15];if(r[0].setComponents(l-s,f-u,m-p,z-C).normalize(),r[1].setComponents(l+s,f+u,m+p,z+C).normalize(),r[2].setComponents(l+a,f+d,m+v,z+w).normalize(),r[3].setComponents(l-a,f-d,m-v,z-w).normalize(),i)r[4].setComponents(c,h,g,y).normalize(),r[5].setComponents(l-c,f-h,m-g,z-y).normalize();else if(r[4].setComponents(l-c,f-h,m-g,z-y).normalize(),t===ko)r[5].setComponents(l+c,f+h,m+g,z+y).normalize();else if(t===Xh)r[5].setComponents(c,h,g,y).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ll.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),ll.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ll)}intersectsSprite(e){ll.center.set(0,0,0);let t=h$.distanceTo(e.center);return ll.radius=.7071067811865476+t,ll.applyMatrix4(e.matrixWorld),this.intersectsSphere(ll)}intersectsSphere(e){let t=this.planes,i=e.center,r=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let i=0;i<6;i++){let r=t[i];if(Y3.x=r.normal.x>0?e.max.x:e.min.x,Y3.y=r.normal.y>0?e.max.y:e.min.y,Y3.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Y3)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};var k1=class extends Cr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ot(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},ip=new k,rp=new k,Xz=new Dt,jh=new ea,j3=new wr,Iv=new k,Kz=new k,ml=class extends Ri{constructor(e=new qr,t=new k1){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[0];for(let r=1,o=t.count;r<o;r++)ip.fromBufferAttribute(t,r-1),rp.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=ip.distanceTo(rp);e.setAttribute("lineDistance",new $r(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,o=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),j3.copy(i.boundingSphere),j3.applyMatrix4(r),j3.radius+=o,e.ray.intersectsSphere(j3)===!1)return;Xz.copy(r).invert(),jh.copy(e.ray).applyMatrix4(Xz);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=this.isLineSegments?2:1,u=i.index,h=i.attributes.position;if(u!==null){let f=Math.max(0,s.start),p=Math.min(u.count,s.start+s.count);for(let v=f,g=p-1;v<g;v+=l){let m=u.getX(v),C=u.getX(v+1),w=G3(this,e,jh,c,m,C,v);w&&t.push(w)}if(this.isLineLoop){let v=u.getX(p-1),g=u.getX(f),m=G3(this,e,jh,c,v,g,p-1);m&&t.push(m)}}else{let f=Math.max(0,s.start),p=Math.min(h.count,s.start+s.count);for(let v=f,g=p-1;v<g;v+=l){let m=G3(this,e,jh,c,v,v+1,v);m&&t.push(m)}if(this.isLineLoop){let v=G3(this,e,jh,c,p-1,f,p-1);v&&t.push(v)}}}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function G3(n,e,t,i,r,o,s){let a=n.geometry.attributes.position;if(ip.fromBufferAttribute(a,r),rp.fromBufferAttribute(a,o),t.distanceSqToSegment(ip,rp,Iv,Kz)>i)return;Iv.applyMatrix4(n.matrixWorld);let l=e.ray.origin.distanceTo(Iv);if(!(l<e.near||l>e.far))return{distance:l,point:Kz.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:n}}var Zz=new k,Qz=new k,s0=class extends ml{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[];for(let r=0,o=t.count;r<o;r+=2)Zz.fromBufferAttribute(t,r),Qz.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+Zz.distanceTo(Qz);e.setAttribute("lineDistance",new $r(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},a0=class extends ml{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}},N1=class extends Cr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ot(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},Jz=new Dt,Bv=new ea,W3=new wr,$3=new k,c0=class extends Ri{constructor(e=new qr,t=new N1){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,o=e.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),W3.copy(i.boundingSphere),W3.applyMatrix4(r),W3.radius+=o,e.ray.intersectsSphere(W3)===!1)return;Jz.copy(r).invert(),Bv.copy(e.ray).applyMatrix4(Jz);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=i.index,d=i.attributes.position;if(l!==null){let h=Math.max(0,s.start),f=Math.min(l.count,s.start+s.count);for(let p=h,v=f;p<v;p++){let g=l.getX(p);$3.fromBufferAttribute(d,g),eA($3,g,c,r,e,t,this)}}else{let h=Math.max(0,s.start),f=Math.min(d.count,s.start+s.count);for(let p=h,v=f;p<v;p++)$3.fromBufferAttribute(d,p),eA($3,p,c,r,e,t,this)}}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function eA(n,e,t,i,r,o,s){let a=Bv.distanceSqToPoint(n);if(a<t){let c=new k;Bv.closestPointToPoint(n,c),c.applyMatrix4(i);let l=r.ray.origin.distanceTo(c);if(l<r.near||l>r.far)return;o.push({distance:l,distanceToRay:Math.sqrt(a),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:s})}}var gl=class extends zr{constructor(e,t,i,r,o,s,a,c,l,u,d,h){super(null,s,a,c,l,u,r,o,d,h),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}};var l0=class extends zr{constructor(e,t,i=cc,r,o,s,a=Mi,c=Mi,l,u=T1,d=1){if(u!==T1&&u!==j1)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");let h={width:e,height:t,depth:d};super(h,r,o,s,a,c,u,i,l),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new tc(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}};var u0=class n extends qr{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};let o=e/2,s=t/2,a=Math.floor(i),c=Math.floor(r),l=a+1,u=c+1,d=e/a,h=t/c,f=[],p=[],v=[],g=[];for(let m=0;m<u;m++){let C=m*h-s;for(let w=0;w<l;w++){let y=w*d-o;p.push(y,-C,0),v.push(0,0,1),g.push(w/a),g.push(1-m/c)}}for(let m=0;m<c;m++)for(let C=0;C<a;C++){let w=C+l*m,y=C+l*(m+1),z=C+1+l*(m+1),D=C+1+l*m;f.push(w,y,D),f.push(y,z,D)}this.setIndex(f),this.setAttribute("position",new $r(p,3)),this.setAttribute("normal",new $r(v,3)),this.setAttribute("uv",new $r(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}};var Ui=class extends Cr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new ot(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=a9,this.normalScale=new mt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new nc,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}},Tr=class extends Ui{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new mt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Bt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ot(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ot(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ot(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}};var op=class extends Cr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=NA,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},sp=class extends Cr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};function q3(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function f$(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function p$(n){function e(r,o){return n[r]-n[o]}let t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function tA(n,e,t){let i=n.length,r=new n.constructor(i);for(let o=0,s=0;s!==i;++o){let a=t[o]*e;for(let c=0;c!==e;++c)r[s++]=n[a+c]}return r}function XA(n,e,t,i){let r=1,o=n[0];for(;o!==void 0&&o[i]===void 0;)o=n[r++];if(o===void 0)return;let s=o[i];if(s!==void 0)if(Array.isArray(s))do s=o[i],s!==void 0&&(e.push(o.time),t.push(...s)),o=n[r++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[i],s!==void 0&&(e.push(o.time),s.toArray(t,t.length)),o=n[r++];while(o!==void 0);else do s=o[i],s!==void 0&&(e.push(o.time),t.push(s)),o=n[r++];while(o!==void 0)}var ta=class{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,i=this._cachedIndex,r=t[i],o=t[i-1];e:{t:{let s;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<o)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(o=r,r=t[++i],e<r)break t}s=t.length;break n}if(!(e>=o)){let a=t[1];e<a&&(i=2,o=a);for(let c=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=o,o=t[--i-1],e>=o)break t}s=i,i=0;break n}break e}for(;i<s;){let a=i+s>>>1;e<t[a]?s=a:i=a+1}if(r=t[i],o=t[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,r)}return this.interpolate_(i,o,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r;for(let s=0;s!==r;++s)t[s]=i[o+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},ap=class extends ta{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Lv,endingEnd:Lv}}intervalChanged_(e,t,i){let r=this.parameterPositions,o=e-2,s=e+1,a=r[o],c=r[s];if(a===void 0)switch(this.getSettings_().endingStart){case Fv:o=e,a=2*t-i;break;case Vv:o=r.length-2,a=t+r[o]-r[o+1];break;default:o=e,a=i}if(c===void 0)switch(this.getSettings_().endingEnd){case Fv:s=e,c=2*i-t;break;case Vv:s=1,c=i+r[1]-r[0];break;default:s=e-1,c=t}let l=(i-t)*.5,u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(c-i),this._offsetPrev=o*u,this._offsetNext=s*u}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(i-t)/(r-t),v=p*p,g=v*p,m=-h*g+2*h*v-h*p,C=(1+h)*g+(-1.5-2*h)*v+(-.5+h)*p+1,w=(-1-f)*g+(1.5+f)*v+.5*p,y=f*g-f*v;for(let z=0;z!==a;++z)o[z]=m*s[u+z]+C*s[l+z]+w*s[c+z]+y*s[d+z];return o}},cp=class extends ta{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=e*a,l=c-a,u=(i-t)/(r-t),d=1-u;for(let h=0;h!==a;++h)o[h]=s[l+h]*d+s[c+h]*u;return o}},lp=class extends ta{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}},Er=class{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=q3(t,this.TimeBufferType),this.values=q3(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:q3(e.times,Array),values:q3(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new lp(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new cp(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new ap(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Qs:t=this.InterpolantFactoryMethodDiscrete;break;case Js:t=this.InterpolantFactoryMethodLinear;break;case X3:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Qs;case this.InterpolantFactoryMethodLinear:return Js;case this.InterpolantFactoryMethodSmooth:return X3}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){let i=this.times,r=i.length,o=0,s=r-1;for(;o!==r&&i[o]<e;)++o;for(;s!==-1&&i[s]>t;)--s;if(++s,o!==0||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);let a=this.getValueSize();this.times=i.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let i=this.times,r=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){let c=i[a];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,c),e=!1;break}if(s!==null&&s>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,c,s),e=!1;break}s=c}if(r!==void 0&&f$(r))for(let a=0,c=r.length;a!==c;++a){let l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===X3,o=e.length-1,s=1;for(let a=1;a<o;++a){let c=!1,l=e[a],u=e[a+1];if(l!==u&&(a!==1||l!==e[0]))if(r)c=!0;else{let d=a*i,h=d-i,f=d+i;for(let p=0;p!==i;++p){let v=t[d+p];if(v!==t[h+p]||v!==t[f+p]){c=!0;break}}}if(c){if(a!==s){e[s]=e[a];let d=a*i,h=s*i;for(let f=0;f!==i;++f)t[h+f]=t[d+f]}++s}}if(o>0){e[s]=e[o];for(let a=o*i,c=s*i,l=0;l!==i;++l)t[c+l]=t[a+l];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*i)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}};Er.prototype.ValueTypeName="";Er.prototype.TimeBufferType=Float32Array;Er.prototype.ValueBufferType=Float32Array;Er.prototype.DefaultInterpolation=Js;var na=class extends Er{constructor(e,t,i){super(e,t,i)}};na.prototype.ValueTypeName="bool";na.prototype.ValueBufferType=Array;na.prototype.DefaultInterpolation=Qs;na.prototype.InterpolantFactoryMethodLinear=void 0;na.prototype.InterpolantFactoryMethodSmooth=void 0;var d0=class extends Er{constructor(e,t,i,r){super(e,t,i,r)}};d0.prototype.ValueTypeName="color";var vs=class extends Er{constructor(e,t,i,r){super(e,t,i,r)}};vs.prototype.ValueTypeName="number";var up=class extends ta{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=(i-t)/(r-t),l=e*a;for(let u=l+a;l!==u;l+=4)Hi.slerpFlat(o,0,s,l-a,s,l,c);return o}},ys=class extends Er{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new up(this.times,this.values,this.getValueSize(),e)}};ys.prototype.ValueTypeName="quaternion";ys.prototype.InterpolantFactoryMethodSmooth=void 0;var ia=class extends Er{constructor(e,t,i){super(e,t,i)}};ia.prototype.ValueTypeName="string";ia.prototype.ValueBufferType=Array;ia.prototype.DefaultInterpolation=Qs;ia.prototype.InterpolantFactoryMethodLinear=void 0;ia.prototype.InterpolantFactoryMethodSmooth=void 0;var _s=class extends Er{constructor(e,t,i,r){super(e,t,i,r)}};_s.prototype.ValueTypeName="vector";var h0=class{constructor(e="",t=-1,i=[],r=kA){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Oo(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],i=e.tracks,r=1/(e.fps||1);for(let s=0,a=i.length;s!==a;++s)t.push(g$(i[s]).scale(r));let o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){let t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,s=i.length;o!==s;++o)t.push(Er.toJSON(i[o]));return r}static CreateFromMorphTargetSequence(e,t,i,r){let o=t.length,s=[];for(let a=0;a<o;a++){let c=[],l=[];c.push((a+o-1)%o,a,(a+1)%o),l.push(0,1,0);let u=p$(c);c=tA(c,1,u),l=tA(l,1,u),!r&&c[0]===0&&(c.push(o),l.push(l[0])),s.push(new vs(".morphTargetInfluences["+t[a].name+"]",c,l).scale(1/i))}return new this(e,-1,s)}static findByName(e,t){let i=e;if(!Array.isArray(e)){let r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){let r={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,c=e.length;a<c;a++){let l=e[a],u=l.name.match(o);if(u&&u.length>1){let d=u[1],h=r[d];h||(r[d]=h=[]),h.push(l)}}let s=[];for(let a in r)s.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return s}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let i=function(d,h,f,p,v){if(f.length!==0){let g=[],m=[];XA(f,g,m,p),g.length!==0&&v.push(new d(h,g,m))}},r=[],o=e.name||"default",s=e.fps||30,a=e.blendMode,c=e.length||-1,l=e.hierarchy||[];for(let d=0;d<l.length;d++){let h=l[d].keys;if(!(!h||h.length===0))if(h[0].morphTargets){let f={},p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let v=0;v<h[p].morphTargets.length;v++)f[h[p].morphTargets[v]]=-1;for(let v in f){let g=[],m=[];for(let C=0;C!==h[p].morphTargets.length;++C){let w=h[p];g.push(w.time),m.push(w.morphTarget===v?1:0)}r.push(new vs(".morphTargetInfluence["+v+"]",g,m))}c=f.length*s}else{let f=".bones["+t[d].name+"]";i(_s,f+".position",h,"pos",r),i(ys,f+".quaternion",h,"rot",r),i(_s,f+".scale",h,"scl",r)}}return r.length===0?null:new this(o,c,r,a)}resetDuration(){let e=this.tracks,t=0;for(let i=0,r=e.length;i!==r;++i){let o=this.tracks[i];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function m$(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return vs;case"vector":case"vector2":case"vector3":case"vector4":return _s;case"color":return d0;case"quaternion":return ys;case"bool":case"boolean":return na;case"string":return ia}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function g$(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let e=m$(n.type);if(n.times===void 0){let t=[],i=[];XA(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}var hs={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},dp=class{constructor(e,t,i){let r=this,o=!1,s=0,a=0,c,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.abortController=new AbortController,this.itemStart=function(u){a++,o===!1&&r.onStart!==void 0&&r.onStart(u,s,a),o=!0},this.itemEnd=function(u){s++,r.onProgress!==void 0&&r.onProgress(u,s,a),s===a&&(o=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return c?c(u):u},this.setURLModifier=function(u){return c=u,this},this.addHandler=function(u,d){return l.push(u,d),this},this.removeHandler=function(u){let d=l.indexOf(u);return d!==-1&&l.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=l.length;d<h;d+=2){let f=l[d],p=l[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}},KA=new dp,Cl=(()=>{class n{constructor(t){this.manager=t!==void 0?t:KA,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){let r=this;return new Promise(function(o,s){r.load(t,o,i,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}abort(){return this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})(),Ks={},Uv=class extends Error{constructor(e,t){super(e),this.response=t}},O1=class extends Cl{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=hs.get(`file:${e}`);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(Ks[e]!==void 0){Ks[e].push({onLoad:t,onProgress:i,onError:r});return}Ks[e]=[],Ks[e].push({onLoad:t,onProgress:i,onError:r});let s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),a=this.mimeType,c=this.responseType;fetch(s).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let u=Ks[e],d=l.body.getReader(),h=l.headers.get("X-File-Size")||l.headers.get("Content-Length"),f=h?parseInt(h):0,p=f!==0,v=0,g=new ReadableStream({start(m){C();function C(){d.read().then(({done:w,value:y})=>{if(w)m.close();else{v+=y.byteLength;let z=new ProgressEvent("progress",{lengthComputable:p,loaded:v,total:f});for(let D=0,x=u.length;D<x;D++){let I=u[D];I.onProgress&&I.onProgress(z)}m.enqueue(y),C()}},w=>{m.error(w)})}}});return new Response(g)}else throw new Uv(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(c){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return l.json();default:if(a==="")return l.text();{let d=/charset="?([^;"\s]*)"?/i.exec(a),h=d&&d[1]?d[1].toLowerCase():void 0,f=new TextDecoder(h);return l.arrayBuffer().then(p=>f.decode(p))}}}).then(l=>{hs.add(`file:${e}`,l);let u=Ks[e];delete Ks[e];for(let d=0,h=u.length;d<h;d++){let f=u[d];f.onLoad&&f.onLoad(l)}}).catch(l=>{let u=Ks[e];if(u===void 0)throw this.manager.itemError(e),l;delete Ks[e];for(let d=0,h=u.length;d<h;d++){let f=u[d];f.onError&&f.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}};var w1=new WeakMap,hp=class extends Cl{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=this,s=hs.get(`image:${e}`);if(s!==void 0){if(s.complete===!0)o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0);else{let d=w1.get(s);d===void 0&&(d=[],w1.set(s,d)),d.push({onLoad:t,onError:r})}return s}let a=E1("img");function c(){u(),t&&t(this);let d=w1.get(this)||[];for(let h=0;h<d.length;h++){let f=d[h];f.onLoad&&f.onLoad(this)}w1.delete(this),o.manager.itemEnd(e)}function l(d){u(),r&&r(d),hs.remove(`image:${e}`);let h=w1.get(this)||[];for(let f=0;f<h.length;f++){let p=h[f];p.onError&&p.onError(d)}w1.delete(this),o.manager.itemError(e),o.manager.itemEnd(e)}function u(){a.removeEventListener("load",c,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",c,!1),a.addEventListener("error",l,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),hs.add(`image:${e}`,a),o.manager.itemStart(e),a.src=e,a}};var vl=class extends Cl{constructor(e){super(e)}load(e,t,i,r){let o=new zr,s=new hp(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,t!==void 0&&t(o)},i,r),o}},yl=class extends Ri{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ot(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}};var Pv=new Dt,nA=new k,iA=new k,f0=class{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new mt(512,512),this.mapType=Ho,this.map=null,this.mapPass=null,this.matrix=new Dt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new R1,this._frameExtents=new mt(1,1),this._viewportCount=1,this._viewports=[new an(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,i=this.matrix;nA.setFromMatrixPosition(e.matrixWorld),t.position.copy(nA),iA.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(iA),t.updateMatrixWorld(),Pv.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Pv,t.coordinateSystem,t.reversedDepth),t.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Pv)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},Yv=class extends f0{constructor(){super(new ii(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){let t=this.camera,i=fl*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,o=e.distance||t.far;(i!==t.fov||r!==t.aspect||o!==t.far)&&(t.fov=i,t.aspect=r,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},p0=class extends yl{constructor(e,t,i=0,r=Math.PI/3,o=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ri.DEFAULT_UP),this.updateMatrix(),this.target=new Ri,this.distance=i,this.angle=r,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new Yv}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},rA=new Dt,Gh=new k,Rv=new k,jv=class extends f0{constructor(){super(new ii(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new mt(4,2),this._viewportCount=6,this._viewports=[new an(2,1,1,1),new an(0,1,1,1),new an(3,1,1,1),new an(1,1,1,1),new an(3,0,1,1),new an(1,0,1,1)],this._cubeDirections=[new k(1,0,0),new k(-1,0,0),new k(0,0,1),new k(0,0,-1),new k(0,1,0),new k(0,-1,0)],this._cubeUps=[new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,1,0),new k(0,0,1),new k(0,0,-1)]}updateMatrices(e,t=0){let i=this.camera,r=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),Gh.setFromMatrixPosition(e.matrixWorld),i.position.copy(Gh),Rv.copy(i.position),Rv.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Rv),i.updateMatrixWorld(),r.makeTranslation(-Gh.x,-Gh.y,-Gh.z),rA.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(rA,i.coordinateSystem,i.reversedDepth)}},_l=class extends yl{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new jv}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},bl=class extends e0{constructor(e=-1,t=1,i=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,o=i-e,s=i+e,a=r+t,c=r-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=l*this.view.offsetX,s=o+l*this.view.width,a-=u*this.view.offsetY,c=a-u*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,c,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},Gv=class extends f0{constructor(){super(new bl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},sr=class extends yl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ri.DEFAULT_UP),this.updateMatrix(),this.target=new Ri,this.shadow=new Gv}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},xl=class extends yl{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}};var ra=class{static extractUrlBase(e){let t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}};var kv=new WeakMap,m0=class extends Cl{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let o=this,s=hs.get(`image-bitmap:${e}`);if(s!==void 0){if(o.manager.itemStart(e),s.then){s.then(l=>{if(kv.has(s)===!0)r&&r(kv.get(s)),o.manager.itemError(e),o.manager.itemEnd(e);else return t&&t(l),o.manager.itemEnd(e),l});return}return setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s}let a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,a.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;let c=fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(l){return hs.add(`image-bitmap:${e}`,l),t&&t(l),o.manager.itemEnd(e),l}).catch(function(l){r&&r(l),kv.set(c,l),hs.remove(`image-bitmap:${e}`),o.manager.itemError(e),o.manager.itemEnd(e)});hs.add(`image-bitmap:${e}`,c),o.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}};var fp=class extends ii{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}};var f9="\\[\\]\\.:\\/",v$=new RegExp("["+f9+"]","g"),p9="[^"+f9+"]",y$="[^"+f9.replace("\\.","")+"]",_$=/((?:WC+[\/:])*)/.source.replace("WC",p9),b$=/(WCOD+)?/.source.replace("WCOD",y$),x$=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",p9),M$=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",p9),S$=new RegExp("^"+_$+b$+x$+M$+"$"),w$=["material","materials","bones","map"],Wv=class{constructor(e,t,i){let r=i||vn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=i.length;r!==o;++r)i[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},vn=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(v$,"")}static parseTrackName(t){let i=S$.exec(t);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){let s=r.nodeName.substring(o+1);w$.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(i===void 0||i===""||i==="."||i===-1||i===t.name||i===t.uuid)return t;if(t.skeleton){let r=t.skeleton.getBoneByName(i);if(r!==void 0)return r}if(t.children){let r=function(s){for(let a=0;a<s.length;a++){let c=s[a];if(c.name===i||c.uuid===i)return c;let l=r(c.children);if(l)return l}return null},o=r(t.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)t[i++]=r[o]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++]}_setValue_array_setNeedsUpdate(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node,i=this.parsedPath,r=i.objectName,o=i.propertyName,s=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(u!==void 0){if(t[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[u]}}let a=t[o];if(a===void 0){let u=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+o+" but it wasn't found.",t);return}let c=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?c=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(o==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[s]!==void 0&&(s=t.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=Wv,n})();vn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};vn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};vn.prototype.GetterByBindingType=[vn.prototype._getValue_direct,vn.prototype._getValue_array,vn.prototype._getValue_arrayElement,vn.prototype._getValue_toArray];vn.prototype.SetterByBindingTypeAndVersioning=[[vn.prototype._setValue_direct,vn.prototype._setValue_direct_setNeedsUpdate,vn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[vn.prototype._setValue_array,vn.prototype._setValue_array_setNeedsUpdate,vn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[vn.prototype._setValue_arrayElement,vn.prototype._setValue_arrayElement_setNeedsUpdate,vn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[vn.prototype._setValue_fromArray,vn.prototype._setValue_fromArray_setNeedsUpdate,vn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var n6e=new Float32Array(1);var L1=class{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Bt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Bt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};var g0=class extends ps{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}};function m9(n,e,t,i){let r=C$(i);switch(t){case n9:return n*e;case Ep:return n*e/r.components*r.byteLength;case Dp:return n*e/r.components*r.byteLength;case r9:return n*e*2/r.components*r.byteLength;case zp:return n*e*2/r.components*r.byteLength;case i9:return n*e*3/r.components*r.byteLength;case cr:return n*e*4/r.components*r.byteLength;case Ap:return n*e*4/r.components*r.byteLength;case y0:case _0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case b0:case x0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Pp:case kp:return Math.max(n,16)*Math.max(e,8)/4;case Ip:case Rp:return Math.max(n,8)*Math.max(e,8)/2;case Np:case Op:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Lp:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Fp:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Vp:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case Hp:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case Bp:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case Up:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Yp:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case jp:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Gp:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case Wp:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case $p:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case qp:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case Xp:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case Kp:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case Zp:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case M0:case Qp:case Jp:return Math.ceil(n/4)*Math.ceil(e/4)*16;case o9:case e8:return Math.ceil(n/4)*Math.ceil(e/4)*8;case t8:case n8:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function C$(n){switch(n){case Ho:case Jv:return{byteLength:1,components:1};case B1:case e9:case U1:return{byteLength:2,components:1};case Cp:case Tp:return{byteLength:2,components:4};case cc:case wp:case uo:return{byteLength:4,components:1};case t9:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:F1}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=F1);function bI(){let n=null,e=!1,t=null,i=null;function r(o,s){t(o,s),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function T$(n){let e=new WeakMap;function t(a,c){let l=a.array,u=a.usage,d=l.byteLength,h=n.createBuffer();n.bindBuffer(c,h),n.bufferData(c,l,u),a.onUploadCallback();let f;if(l instanceof Float32Array)f=n.FLOAT;else if(typeof Float16Array<"u"&&l instanceof Float16Array)f=n.HALF_FLOAT;else if(l instanceof Uint16Array)a.isFloat16BufferAttribute?f=n.HALF_FLOAT:f=n.UNSIGNED_SHORT;else if(l instanceof Int16Array)f=n.SHORT;else if(l instanceof Uint32Array)f=n.UNSIGNED_INT;else if(l instanceof Int32Array)f=n.INT;else if(l instanceof Int8Array)f=n.BYTE;else if(l instanceof Uint8Array)f=n.UNSIGNED_BYTE;else if(l instanceof Uint8ClampedArray)f=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+l);return{buffer:h,type:f,bytesPerElement:l.BYTES_PER_ELEMENT,version:a.version,size:d}}function i(a,c,l){let u=c.array,d=c.updateRanges;if(n.bindBuffer(l,a),d.length===0)n.bufferSubData(l,0,u);else{d.sort((f,p)=>f.start-p.start);let h=0;for(let f=1;f<d.length;f++){let p=d[h],v=d[f];v.start<=p.start+p.count+1?p.count=Math.max(p.count,v.start+v.count-p.start):(++h,d[h]=v)}d.length=h+1;for(let f=0,p=d.length;f<p;f++){let v=d[f];n.bufferSubData(l,v.start*u.BYTES_PER_ELEMENT,u,v.start,v.count)}c.clearUpdateRanges()}c.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);let c=e.get(a);c&&(n.deleteBuffer(c.buffer),e.delete(a))}function s(a,c){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){let u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}let l=e.get(a);if(l===void 0)e.set(a,t(a,c));else if(l.version<a.version){if(l.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(l.buffer,a,c),l.version=a.version}}return{get:r,remove:o,update:s}}var E$=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,D$=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,z$=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,A$=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,I$=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,P$=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,R$=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,k$=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,N$=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,O$=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,L$=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,F$=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,V$=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,H$=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,B$=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,U$=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Y$=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,j$=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,G$=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,W$=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,$$=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,q$=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,X$=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,K$=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Z$=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Q$=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,J$=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,eq=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,tq=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,nq=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,iq="gl_FragColor = linearToOutputTexel( gl_FragColor );",rq=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,oq=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,sq=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,aq=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,cq=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,lq=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,uq=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,dq=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,hq=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fq=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,pq=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,mq=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,gq=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,vq=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,yq=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,_q=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,bq=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,xq=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Mq=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Sq=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,wq=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Cq=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Tq=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Eq=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Dq=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,zq=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Aq=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Iq=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Pq=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Rq=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,kq=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Nq=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Oq=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Lq=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Fq=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Vq=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Hq=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Bq=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Uq=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Yq=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,jq=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Gq=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Wq=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,$q=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,qq=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Xq=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Kq=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Zq=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Qq=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Jq=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,eX=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,tX=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,nX=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,iX=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,rX=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,oX=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,sX=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,aX=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,cX=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSEDEPTHBUF
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSEDEPTHBUF
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare , distribution.x );
		#endif
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,lX=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,uX=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,dX=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,hX=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,fX=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,pX=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,mX=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,gX=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,vX=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,yX=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,_X=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,bX=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,xX=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,MX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,SX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,wX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,CX=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,TX=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,EX=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,DX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,zX=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,AX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,IX=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,PX=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,RX=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSEDEPTHBUF
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,kX=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,NX=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,OX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,LX=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,FX=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,VX=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,HX=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,BX=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UX=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,YX=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jX=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,GX=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,WX=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,$X=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,qX=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,XX=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KX=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,ZX=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,QX=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,JX=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eK=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,tK=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,nK=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,iK=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,rK=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,oK=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Vt={alphahash_fragment:E$,alphahash_pars_fragment:D$,alphamap_fragment:z$,alphamap_pars_fragment:A$,alphatest_fragment:I$,alphatest_pars_fragment:P$,aomap_fragment:R$,aomap_pars_fragment:k$,batching_pars_vertex:N$,batching_vertex:O$,begin_vertex:L$,beginnormal_vertex:F$,bsdfs:V$,iridescence_fragment:H$,bumpmap_pars_fragment:B$,clipping_planes_fragment:U$,clipping_planes_pars_fragment:Y$,clipping_planes_pars_vertex:j$,clipping_planes_vertex:G$,color_fragment:W$,color_pars_fragment:$$,color_pars_vertex:q$,color_vertex:X$,common:K$,cube_uv_reflection_fragment:Z$,defaultnormal_vertex:Q$,displacementmap_pars_vertex:J$,displacementmap_vertex:eq,emissivemap_fragment:tq,emissivemap_pars_fragment:nq,colorspace_fragment:iq,colorspace_pars_fragment:rq,envmap_fragment:oq,envmap_common_pars_fragment:sq,envmap_pars_fragment:aq,envmap_pars_vertex:cq,envmap_physical_pars_fragment:_q,envmap_vertex:lq,fog_vertex:uq,fog_pars_vertex:dq,fog_fragment:hq,fog_pars_fragment:fq,gradientmap_pars_fragment:pq,lightmap_pars_fragment:mq,lights_lambert_fragment:gq,lights_lambert_pars_fragment:vq,lights_pars_begin:yq,lights_toon_fragment:bq,lights_toon_pars_fragment:xq,lights_phong_fragment:Mq,lights_phong_pars_fragment:Sq,lights_physical_fragment:wq,lights_physical_pars_fragment:Cq,lights_fragment_begin:Tq,lights_fragment_maps:Eq,lights_fragment_end:Dq,logdepthbuf_fragment:zq,logdepthbuf_pars_fragment:Aq,logdepthbuf_pars_vertex:Iq,logdepthbuf_vertex:Pq,map_fragment:Rq,map_pars_fragment:kq,map_particle_fragment:Nq,map_particle_pars_fragment:Oq,metalnessmap_fragment:Lq,metalnessmap_pars_fragment:Fq,morphinstance_vertex:Vq,morphcolor_vertex:Hq,morphnormal_vertex:Bq,morphtarget_pars_vertex:Uq,morphtarget_vertex:Yq,normal_fragment_begin:jq,normal_fragment_maps:Gq,normal_pars_fragment:Wq,normal_pars_vertex:$q,normal_vertex:qq,normalmap_pars_fragment:Xq,clearcoat_normal_fragment_begin:Kq,clearcoat_normal_fragment_maps:Zq,clearcoat_pars_fragment:Qq,iridescence_pars_fragment:Jq,opaque_fragment:eX,packing:tX,premultiplied_alpha_fragment:nX,project_vertex:iX,dithering_fragment:rX,dithering_pars_fragment:oX,roughnessmap_fragment:sX,roughnessmap_pars_fragment:aX,shadowmap_pars_fragment:cX,shadowmap_pars_vertex:lX,shadowmap_vertex:uX,shadowmask_pars_fragment:dX,skinbase_vertex:hX,skinning_pars_vertex:fX,skinning_vertex:pX,skinnormal_vertex:mX,specularmap_fragment:gX,specularmap_pars_fragment:vX,tonemapping_fragment:yX,tonemapping_pars_fragment:_X,transmission_fragment:bX,transmission_pars_fragment:xX,uv_pars_fragment:MX,uv_pars_vertex:SX,uv_vertex:wX,worldpos_vertex:CX,background_vert:TX,background_frag:EX,backgroundCube_vert:DX,backgroundCube_frag:zX,cube_vert:AX,cube_frag:IX,depth_vert:PX,depth_frag:RX,distanceRGBA_vert:kX,distanceRGBA_frag:NX,equirect_vert:OX,equirect_frag:LX,linedashed_vert:FX,linedashed_frag:VX,meshbasic_vert:HX,meshbasic_frag:BX,meshlambert_vert:UX,meshlambert_frag:YX,meshmatcap_vert:jX,meshmatcap_frag:GX,meshnormal_vert:WX,meshnormal_frag:$X,meshphong_vert:qX,meshphong_frag:XX,meshphysical_vert:KX,meshphysical_frag:ZX,meshtoon_vert:QX,meshtoon_frag:JX,points_vert:eK,points_frag:tK,shadow_vert:nK,shadow_frag:iK,sprite_vert:rK,sprite_frag:oK},Ce={common:{diffuse:{value:new ot(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Nt},alphaMap:{value:null},alphaMapTransform:{value:new Nt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Nt}},envmap:{envMap:{value:null},envMapRotation:{value:new Nt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Nt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Nt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Nt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Nt},normalScale:{value:new mt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Nt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Nt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Nt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Nt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ot(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ot(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Nt},alphaTest:{value:0},uvTransform:{value:new Nt}},sprite:{diffuse:{value:new ot(16777215)},opacity:{value:1},center:{value:new mt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Nt},alphaMap:{value:null},alphaMapTransform:{value:new Nt},alphaTest:{value:0}}},xs={basic:{uniforms:er([Ce.common,Ce.specularmap,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.fog]),vertexShader:Vt.meshbasic_vert,fragmentShader:Vt.meshbasic_frag},lambert:{uniforms:er([Ce.common,Ce.specularmap,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.fog,Ce.lights,{emissive:{value:new ot(0)}}]),vertexShader:Vt.meshlambert_vert,fragmentShader:Vt.meshlambert_frag},phong:{uniforms:er([Ce.common,Ce.specularmap,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.fog,Ce.lights,{emissive:{value:new ot(0)},specular:{value:new ot(1118481)},shininess:{value:30}}]),vertexShader:Vt.meshphong_vert,fragmentShader:Vt.meshphong_frag},standard:{uniforms:er([Ce.common,Ce.envmap,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.roughnessmap,Ce.metalnessmap,Ce.fog,Ce.lights,{emissive:{value:new ot(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Vt.meshphysical_vert,fragmentShader:Vt.meshphysical_frag},toon:{uniforms:er([Ce.common,Ce.aomap,Ce.lightmap,Ce.emissivemap,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.gradientmap,Ce.fog,Ce.lights,{emissive:{value:new ot(0)}}]),vertexShader:Vt.meshtoon_vert,fragmentShader:Vt.meshtoon_frag},matcap:{uniforms:er([Ce.common,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,Ce.fog,{matcap:{value:null}}]),vertexShader:Vt.meshmatcap_vert,fragmentShader:Vt.meshmatcap_frag},points:{uniforms:er([Ce.points,Ce.fog]),vertexShader:Vt.points_vert,fragmentShader:Vt.points_frag},dashed:{uniforms:er([Ce.common,Ce.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Vt.linedashed_vert,fragmentShader:Vt.linedashed_frag},depth:{uniforms:er([Ce.common,Ce.displacementmap]),vertexShader:Vt.depth_vert,fragmentShader:Vt.depth_frag},normal:{uniforms:er([Ce.common,Ce.bumpmap,Ce.normalmap,Ce.displacementmap,{opacity:{value:1}}]),vertexShader:Vt.meshnormal_vert,fragmentShader:Vt.meshnormal_frag},sprite:{uniforms:er([Ce.sprite,Ce.fog]),vertexShader:Vt.sprite_vert,fragmentShader:Vt.sprite_frag},background:{uniforms:{uvTransform:{value:new Nt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Vt.background_vert,fragmentShader:Vt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Nt}},vertexShader:Vt.backgroundCube_vert,fragmentShader:Vt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Vt.cube_vert,fragmentShader:Vt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Vt.equirect_vert,fragmentShader:Vt.equirect_frag},distanceRGBA:{uniforms:er([Ce.common,Ce.displacementmap,{referencePosition:{value:new k},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Vt.distanceRGBA_vert,fragmentShader:Vt.distanceRGBA_frag},shadow:{uniforms:er([Ce.lights,Ce.fog,{color:{value:new ot(0)},opacity:{value:1}}]),vertexShader:Vt.shadow_vert,fragmentShader:Vt.shadow_frag}};xs.physical={uniforms:er([xs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Nt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Nt},clearcoatNormalScale:{value:new mt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Nt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Nt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Nt},sheen:{value:0},sheenColor:{value:new ot(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Nt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Nt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Nt},transmissionSamplerSize:{value:new mt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Nt},attenuationDistance:{value:0},attenuationColor:{value:new ot(0)},specularColor:{value:new ot(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Nt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Nt},anisotropyVector:{value:new mt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Nt}}]),vertexShader:Vt.meshphysical_vert,fragmentShader:Vt.meshphysical_frag};var i8={r:0,b:0,g:0},Tl=new nc,sK=new Dt;function aK(n,e,t,i,r,o,s){let a=new ot(0),c=o===!0?0:1,l,u,d=null,h=0,f=null;function p(w){let y=w.isScene===!0?w.background:null;return y&&y.isTexture&&(y=(w.backgroundBlurriness>0?t:e).get(y)),y}function v(w){let y=!1,z=p(w);z===null?m(a,c):z&&z.isColor&&(m(z,1),y=!0);let D=n.xr.getEnvironmentBlendMode();D==="additive"?i.buffers.color.setClear(0,0,0,1,s):D==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||y)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function g(w,y){let z=p(y);z&&(z.isCubeTexture||z.mapping===v0)?(u===void 0&&(u=new ri(new ic(1,1,1),new Vo({name:"BackgroundCubeMaterial",uniforms:wl(xs.backgroundCube.uniforms),vertexShader:xs.backgroundCube.vertexShader,fragmentShader:xs.backgroundCube.fragmentShader,side:ar,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(D,x,I){this.matrixWorld.copyPosition(I.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),Tl.copy(y.backgroundRotation),Tl.x*=-1,Tl.y*=-1,Tl.z*=-1,z.isCubeTexture&&z.isRenderTargetTexture===!1&&(Tl.y*=-1,Tl.z*=-1),u.material.uniforms.envMap.value=z,u.material.uniforms.flipEnvMap.value=z.isCubeTexture&&z.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=y.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(sK.makeRotationFromEuler(Tl)),u.material.toneMapped=qt.getTransfer(z.colorSpace)!==yn,(d!==z||h!==z.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,d=z,h=z.version,f=n.toneMapping),u.layers.enableAll(),w.unshift(u,u.geometry,u.material,0,0,null)):z&&z.isTexture&&(l===void 0&&(l=new ri(new u0(2,2),new Vo({name:"BackgroundMaterial",uniforms:wl(xs.background.uniforms),vertexShader:xs.background.vertexShader,fragmentShader:xs.background.fragmentShader,side:Lo,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=z,l.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,l.material.toneMapped=qt.getTransfer(z.colorSpace)!==yn,z.matrixAutoUpdate===!0&&z.updateMatrix(),l.material.uniforms.uvTransform.value.copy(z.matrix),(d!==z||h!==z.version||f!==n.toneMapping)&&(l.material.needsUpdate=!0,d=z,h=z.version,f=n.toneMapping),l.layers.enableAll(),w.unshift(l,l.geometry,l.material,0,0,null))}function m(w,y){w.getRGB(i8,h9(n)),i.buffers.color.setClear(i8.r,i8.g,i8.b,y,s)}function C(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),l!==void 0&&(l.geometry.dispose(),l.material.dispose(),l=void 0)}return{getClearColor:function(){return a},setClearColor:function(w,y=1){a.set(w),c=y,m(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(w){c=w,m(a,c)},render:v,addToRenderList:g,dispose:C}}function cK(n,e){let t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=h(null),o=r,s=!1;function a(M,A,J,K,Q){let ee=!1,L=d(K,J,A);o!==L&&(o=L,l(o.object)),ee=f(M,K,J,Q),ee&&p(M,K,J,Q),Q!==null&&e.update(Q,n.ELEMENT_ARRAY_BUFFER),(ee||s)&&(s=!1,y(M,A,J,K),Q!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(Q).buffer))}function c(){return n.createVertexArray()}function l(M){return n.bindVertexArray(M)}function u(M){return n.deleteVertexArray(M)}function d(M,A,J){let K=J.wireframe===!0,Q=i[M.id];Q===void 0&&(Q={},i[M.id]=Q);let ee=Q[A.id];ee===void 0&&(ee={},Q[A.id]=ee);let L=ee[K];return L===void 0&&(L=h(c()),ee[K]=L),L}function h(M){let A=[],J=[],K=[];for(let Q=0;Q<t;Q++)A[Q]=0,J[Q]=0,K[Q]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:A,enabledAttributes:J,attributeDivisors:K,object:M,attributes:{},index:null}}function f(M,A,J,K){let Q=o.attributes,ee=A.attributes,L=0,B=J.getAttributes();for(let F in B)if(B[F].location>=0){let be=Q[F],Ne=ee[F];if(Ne===void 0&&(F==="instanceMatrix"&&M.instanceMatrix&&(Ne=M.instanceMatrix),F==="instanceColor"&&M.instanceColor&&(Ne=M.instanceColor)),be===void 0||be.attribute!==Ne||Ne&&be.data!==Ne.data)return!0;L++}return o.attributesNum!==L||o.index!==K}function p(M,A,J,K){let Q={},ee=A.attributes,L=0,B=J.getAttributes();for(let F in B)if(B[F].location>=0){let be=ee[F];be===void 0&&(F==="instanceMatrix"&&M.instanceMatrix&&(be=M.instanceMatrix),F==="instanceColor"&&M.instanceColor&&(be=M.instanceColor));let Ne={};Ne.attribute=be,be&&be.data&&(Ne.data=be.data),Q[F]=Ne,L++}o.attributes=Q,o.attributesNum=L,o.index=K}function v(){let M=o.newAttributes;for(let A=0,J=M.length;A<J;A++)M[A]=0}function g(M){m(M,0)}function m(M,A){let J=o.newAttributes,K=o.enabledAttributes,Q=o.attributeDivisors;J[M]=1,K[M]===0&&(n.enableVertexAttribArray(M),K[M]=1),Q[M]!==A&&(n.vertexAttribDivisor(M,A),Q[M]=A)}function C(){let M=o.newAttributes,A=o.enabledAttributes;for(let J=0,K=A.length;J<K;J++)A[J]!==M[J]&&(n.disableVertexAttribArray(J),A[J]=0)}function w(M,A,J,K,Q,ee,L){L===!0?n.vertexAttribIPointer(M,A,J,Q,ee):n.vertexAttribPointer(M,A,J,K,Q,ee)}function y(M,A,J,K){v();let Q=K.attributes,ee=J.getAttributes(),L=A.defaultAttributeValues;for(let B in ee){let F=ee[B];if(F.location>=0){let ae=Q[B];if(ae===void 0&&(B==="instanceMatrix"&&M.instanceMatrix&&(ae=M.instanceMatrix),B==="instanceColor"&&M.instanceColor&&(ae=M.instanceColor)),ae!==void 0){let be=ae.normalized,Ne=ae.itemSize,tt=e.get(ae);if(tt===void 0)continue;let tn=tt.buffer,st=tt.type,ne=tt.bytesPerElement,we=st===n.INT||st===n.UNSIGNED_INT||ae.gpuType===wp;if(ae.isInterleavedBufferAttribute){let ue=ae.data,Xe=ue.stride,Ve=ae.offset;if(ue.isInstancedInterleavedBuffer){for(let gt=0;gt<F.locationSize;gt++)m(F.location+gt,ue.meshPerAttribute);M.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=ue.meshPerAttribute*ue.count)}else for(let gt=0;gt<F.locationSize;gt++)g(F.location+gt);n.bindBuffer(n.ARRAY_BUFFER,tn);for(let gt=0;gt<F.locationSize;gt++)w(F.location+gt,Ne/F.locationSize,st,be,Xe*ne,(Ve+Ne/F.locationSize*gt)*ne,we)}else{if(ae.isInstancedBufferAttribute){for(let ue=0;ue<F.locationSize;ue++)m(F.location+ue,ae.meshPerAttribute);M.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=ae.meshPerAttribute*ae.count)}else for(let ue=0;ue<F.locationSize;ue++)g(F.location+ue);n.bindBuffer(n.ARRAY_BUFFER,tn);for(let ue=0;ue<F.locationSize;ue++)w(F.location+ue,Ne/F.locationSize,st,be,Ne*ne,Ne/F.locationSize*ue*ne,we)}}else if(L!==void 0){let be=L[B];if(be!==void 0)switch(be.length){case 2:n.vertexAttrib2fv(F.location,be);break;case 3:n.vertexAttrib3fv(F.location,be);break;case 4:n.vertexAttrib4fv(F.location,be);break;default:n.vertexAttrib1fv(F.location,be)}}}}C()}function z(){I();for(let M in i){let A=i[M];for(let J in A){let K=A[J];for(let Q in K)u(K[Q].object),delete K[Q];delete A[J]}delete i[M]}}function D(M){if(i[M.id]===void 0)return;let A=i[M.id];for(let J in A){let K=A[J];for(let Q in K)u(K[Q].object),delete K[Q];delete A[J]}delete i[M.id]}function x(M){for(let A in i){let J=i[A];if(J[M.id]===void 0)continue;let K=J[M.id];for(let Q in K)u(K[Q].object),delete K[Q];delete J[M.id]}}function I(){S(),s=!0,o!==r&&(o=r,l(o.object))}function S(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:I,resetDefaultState:S,dispose:z,releaseStatesOfGeometry:D,releaseStatesOfProgram:x,initAttributes:v,enableAttribute:g,disableUnusedAttributes:C}}function lK(n,e,t){let i;function r(l){i=l}function o(l,u){n.drawArrays(i,l,u),t.update(u,i,1)}function s(l,u,d){d!==0&&(n.drawArraysInstanced(i,l,u,d),t.update(u,i,d))}function a(l,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,l,0,u,0,d);let f=0;for(let p=0;p<d;p++)f+=u[p];t.update(f,i,1)}function c(l,u,d,h){if(d===0)return;let f=e.get("WEBGL_multi_draw");if(f===null)for(let p=0;p<l.length;p++)s(l[p],u[p],h[p]);else{f.multiDrawArraysInstancedWEBGL(i,l,0,u,0,h,0,d);let p=0;for(let v=0;v<d;v++)p+=u[v]*h[v];t.update(p,i,1)}}this.setMode=r,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=c}function uK(n,e,t,i){let r;function o(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){let x=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(x.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(x){return!(x!==cr&&i.convert(x)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(x){let I=x===U1&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(x!==Ho&&i.convert(x)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&x!==uo&&!I)}function c(x){if(x==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";x="mediump"}return x==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let l=t.precision!==void 0?t.precision:"highp",u=c(l);u!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",u,"instead."),l=u);let d=t.logarithmicDepthBuffer===!0,h=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_TEXTURE_SIZE),g=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),m=n.getParameter(n.MAX_VERTEX_ATTRIBS),C=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),w=n.getParameter(n.MAX_VARYING_VECTORS),y=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),z=p>0,D=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:c,textureFormatReadable:s,textureTypeReadable:a,precision:l,logarithmicDepthBuffer:d,reversedDepthBuffer:h,maxTextures:f,maxVertexTextures:p,maxTextureSize:v,maxCubemapSize:g,maxAttributes:m,maxVertexUniforms:C,maxVaryings:w,maxFragmentUniforms:y,vertexTextures:z,maxSamples:D}}function dK(n){let e=this,t=null,i=0,r=!1,o=!1,s=new co,a=new Nt,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){let f=d.length!==0||h||i!==0||r;return r=h,i=d.length,f},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(d,h){t=u(d,h,0)},this.setState=function(d,h,f){let p=d.clippingPlanes,v=d.clipIntersection,g=d.clipShadows,m=n.get(d);if(!r||p===null||p.length===0||o&&!g)o?u(null):l();else{let C=o?0:i,w=C*4,y=m.clippingState||null;c.value=y,y=u(p,h,w,f);for(let z=0;z!==w;++z)y[z]=t[z];m.clippingState=y,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=C}};function l(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,h,f,p){let v=d!==null?d.length:0,g=null;if(v!==0){if(g=c.value,p!==!0||g===null){let m=f+v*4,C=h.matrixWorldInverse;a.getNormalMatrix(C),(g===null||g.length<m)&&(g=new Float32Array(m));for(let w=0,y=f;w!==v;++w,y+=4)s.copy(d[w]).applyMatrix4(C,a),s.normal.toArray(g,y),g[y+3]=s.constant}c.value=g,c.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,g}}function hK(n){let e=new WeakMap;function t(s,a){return a===Mp?s.mapping=Ml:a===Sp&&(s.mapping=Sl),s}function i(s){if(s&&s.isTexture){let a=s.mapping;if(a===Mp||a===Sp)if(e.has(s)){let c=e.get(s).texture;return t(c,s.mapping)}else{let c=s.image;if(c&&c.height>0){let l=new np(c.height);return l.fromEquirectangularTexture(n,s),e.set(s,l),s.addEventListener("dispose",r),t(l.texture,s.mapping)}else return null}}return s}function r(s){let a=s.target;a.removeEventListener("dispose",r);let c=e.get(a);c!==void 0&&(e.delete(a),c.dispose())}function o(){e=new WeakMap}return{get:i,dispose:o}}var $1=4,ZA=[.125,.215,.35,.446,.526,.582],zl=20,g9=new bl,QA=new ot,v9=null,y9=0,_9=0,b9=!1,Dl=(1+Math.sqrt(5))/2,W1=1/Dl,JA=[new k(-Dl,W1,0),new k(Dl,W1,0),new k(-W1,0,Dl),new k(W1,0,Dl),new k(0,Dl,-W1),new k(0,Dl,W1),new k(-1,1,-1),new k(1,1,-1),new k(-1,1,1),new k(1,1,1)],fK=new k,s8=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,o={}){let{size:s=256,position:a=fK}=o;v9=this._renderer.getRenderTarget(),y9=this._renderer.getActiveCubeFace(),_9=this._renderer.getActiveMipmapLevel(),b9=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);let c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,i,r,c,a),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=nI(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=tI(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(v9,y9,_9),this._renderer.xr.enabled=b9,e.scissorTest=!1,r8(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ml||e.mapping===Sl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),v9=this._renderer.getRenderTarget(),y9=this._renderer.getActiveCubeFace(),_9=this._renderer.getActiveMipmapLevel(),b9=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Fi,minFilter:Fi,generateMipmaps:!1,type:U1,format:cr,colorSpace:Vi,depthBuffer:!1},r=eI(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=eI(e,t,i);let{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=pK(o)),this._blurMaterial=mK(o,e,t)}return r}_compileMaterial(e){let t=new ri(this._lodPlanes[0],e);this._renderer.compile(t,g9)}_sceneToCubeUV(e,t,i,r,o){let c=new ii(90,1,t,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,f=d.toneMapping;d.getClearColor(QA),d.toneMapping=sa,d.autoClear=!1,d.state.buffers.depth.getReversed()&&(d.setRenderTarget(r),d.clearDepth(),d.setRenderTarget(null));let v=new Fo({name:"PMREM.Background",side:ar,depthWrite:!1,depthTest:!1}),g=new ri(new ic,v),m=!1,C=e.background;C?C.isColor&&(v.color.copy(C),e.background=null,m=!0):(v.color.copy(QA),m=!0);for(let w=0;w<6;w++){let y=w%3;y===0?(c.up.set(0,l[w],0),c.position.set(o.x,o.y,o.z),c.lookAt(o.x+u[w],o.y,o.z)):y===1?(c.up.set(0,0,l[w]),c.position.set(o.x,o.y,o.z),c.lookAt(o.x,o.y+u[w],o.z)):(c.up.set(0,l[w],0),c.position.set(o.x,o.y,o.z),c.lookAt(o.x,o.y,o.z+u[w]));let z=this._cubeSize;r8(r,y*z,w>2?z:0,z,z),d.setRenderTarget(r),m&&d.render(g,c),d.render(e,c)}g.geometry.dispose(),g.material.dispose(),d.toneMapping=f,d.autoClear=h,e.background=C}_textureToCubeUV(e,t){let i=this._renderer,r=e.mapping===Ml||e.mapping===Sl;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=nI()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=tI());let o=r?this._cubemapMaterial:this._equirectMaterial,s=new ri(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=e;let c=this._cubeSize;r8(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(s,g9)}_applyPMREM(e){let t=this._renderer,i=t.autoClear;t.autoClear=!1;let r=this._lodPlanes.length;for(let o=1;o<r;o++){let s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),a=JA[(r-o-1)%JA.length];this._blur(e,o-1,o,s,a)}t.autoClear=i}_blur(e,t,i,r,o){let s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,r,"latitudinal",o),this._halfBlur(s,e,i,i,r,"longitudinal",o)}_halfBlur(e,t,i,r,o,s,a){let c=this._renderer,l=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let u=3,d=new ri(this._lodPlanes[r],l),h=l.uniforms,f=this._sizeLods[i]-1,p=isFinite(o)?Math.PI/(2*f):2*Math.PI/(2*zl-1),v=o/p,g=isFinite(o)?1+Math.floor(u*v):zl;g>zl&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${zl}`);let m=[],C=0;for(let x=0;x<zl;++x){let I=x/v,S=Math.exp(-I*I/2);m.push(S),x===0?C+=S:x<g&&(C+=2*S)}for(let x=0;x<m.length;x++)m[x]=m[x]/C;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=m,h.latitudinal.value=s==="latitudinal",a&&(h.poleAxis.value=a);let{_lodMax:w}=this;h.dTheta.value=p,h.mipInt.value=w-i;let y=this._sizeLods[r],z=3*y*(r>w-$1?r-w+$1:0),D=4*(this._cubeSize-y);r8(t,z,D,3*y,2*y),c.setRenderTarget(t),c.render(d,g9)}};function pK(n){let e=[],t=[],i=[],r=n,o=n-$1+1+ZA.length;for(let s=0;s<o;s++){let a=Math.pow(2,r);t.push(a);let c=1/a;s>n-$1?c=ZA[s-n+$1-1]:s===0&&(c=0),i.push(c);let l=1/(a-2),u=-l,d=1+l,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,p=6,v=3,g=2,m=1,C=new Float32Array(v*p*f),w=new Float32Array(g*p*f),y=new Float32Array(m*p*f);for(let D=0;D<f;D++){let x=D%3*2/3-1,I=D>2?0:-1,S=[x,I,0,x+2/3,I,0,x+2/3,I+1,0,x,I,0,x+2/3,I+1,0,x,I+1,0];C.set(S,v*p*D),w.set(h,g*p*D);let M=[D,D,D,D,D,D];y.set(M,m*p*D)}let z=new qr;z.setAttribute("position",new _n(C,v)),z.setAttribute("uv",new _n(w,g)),z.setAttribute("faceIndex",new _n(y,m)),e.push(z),r>$1&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function eI(n,e,t){let i=new ms(n,e,t);return i.texture.mapping=v0,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function r8(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function mK(n,e,t){let i=new Float32Array(zl),r=new k(0,1,0);return new Vo({name:"SphericalGaussianBlur",defines:{n:zl,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:A9(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:oa,depthTest:!1,depthWrite:!1})}function tI(){return new Vo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:A9(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:oa,depthTest:!1,depthWrite:!1})}function nI(){return new Vo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:A9(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:oa,depthTest:!1,depthWrite:!1})}function A9(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function gK(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){let c=a.mapping,l=c===Mp||c===Sp,u=c===Ml||c===Sl;if(l||u){let d=e.get(a),h=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return t===null&&(t=new s8(n)),d=l?t.fromEquirectangular(a,d):t.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{let f=a.image;return l&&f&&f.height>0||u&&f&&r(f)?(t===null&&(t=new s8(n)),d=l?t.fromEquirectangular(a):t.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",o),d.texture):null}}}return a}function r(a){let c=0,l=6;for(let u=0;u<l;u++)a[u]!==void 0&&c++;return c===l}function o(a){let c=a.target;c.removeEventListener("dispose",o);let l=e.get(c);l!==void 0&&(e.delete(c),l.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:s}}function vK(n){let e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){let r=t(i);return r===null&&pl("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function yK(n,e,t,i){let r={},o=new WeakMap;function s(d){let h=d.target;h.index!==null&&e.remove(h.index);for(let p in h.attributes)e.remove(h.attributes[p]);h.removeEventListener("dispose",s),delete r[h.id];let f=o.get(h);f&&(e.remove(f),o.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function a(d,h){return r[h.id]===!0||(h.addEventListener("dispose",s),r[h.id]=!0,t.memory.geometries++),h}function c(d){let h=d.attributes;for(let f in h)e.update(h[f],n.ARRAY_BUFFER)}function l(d){let h=[],f=d.index,p=d.attributes.position,v=0;if(f!==null){let C=f.array;v=f.version;for(let w=0,y=C.length;w<y;w+=3){let z=C[w+0],D=C[w+1],x=C[w+2];h.push(z,D,D,x,x,z)}}else if(p!==void 0){let C=p.array;v=p.version;for(let w=0,y=C.length/3-1;w<y;w+=3){let z=w+0,D=w+1,x=w+2;h.push(z,D,D,x,x,z)}}else return;let g=new(d9(h)?Jh:Qh)(h,1);g.version=v;let m=o.get(d);m&&e.remove(m),o.set(d,g)}function u(d){let h=o.get(d);if(h){let f=d.index;f!==null&&h.version<f.version&&l(d)}else l(d);return o.get(d)}return{get:a,update:c,getWireframeAttribute:u}}function _K(n,e,t){let i;function r(h){i=h}let o,s;function a(h){o=h.type,s=h.bytesPerElement}function c(h,f){n.drawElements(i,f,o,h*s),t.update(f,i,1)}function l(h,f,p){p!==0&&(n.drawElementsInstanced(i,f,o,h*s,p),t.update(f,i,p))}function u(h,f,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,f,0,o,h,0,p);let g=0;for(let m=0;m<p;m++)g+=f[m];t.update(g,i,1)}function d(h,f,p,v){if(p===0)return;let g=e.get("WEBGL_multi_draw");if(g===null)for(let m=0;m<h.length;m++)l(h[m]/s,f[m],v[m]);else{g.multiDrawElementsInstancedWEBGL(i,f,0,o,h,0,v,0,p);let m=0;for(let C=0;C<p;C++)m+=f[C]*v[C];t.update(m,i,1)}}this.setMode=r,this.setIndex=a,this.render=c,this.renderInstances=l,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function bK(n){let e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,s,a){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=a*(o/3);break;case n.LINES:t.lines+=a*(o/2);break;case n.LINE_STRIP:t.lines+=a*(o-1);break;case n.LINE_LOOP:t.lines+=a*o;break;case n.POINTS:t.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function xK(n,e,t){let i=new WeakMap,r=new an;function o(s,a,c){let l=s.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=u!==void 0?u.length:0,h=i.get(a);if(h===void 0||h.count!==d){let M=function(){I.dispose(),i.delete(a),a.removeEventListener("dispose",M)};var f=M;h!==void 0&&h.texture.dispose();let p=a.morphAttributes.position!==void 0,v=a.morphAttributes.normal!==void 0,g=a.morphAttributes.color!==void 0,m=a.morphAttributes.position||[],C=a.morphAttributes.normal||[],w=a.morphAttributes.color||[],y=0;p===!0&&(y=1),v===!0&&(y=2),g===!0&&(y=3);let z=a.attributes.position.count*y,D=1;z>e.maxTextureSize&&(D=Math.ceil(z/e.maxTextureSize),z=e.maxTextureSize);let x=new Float32Array(z*D*4*d),I=new Kh(x,z,D,d);I.type=uo,I.needsUpdate=!0;let S=y*4;for(let A=0;A<d;A++){let J=m[A],K=C[A],Q=w[A],ee=z*D*4*A;for(let L=0;L<J.count;L++){let B=L*S;p===!0&&(r.fromBufferAttribute(J,L),x[ee+B+0]=r.x,x[ee+B+1]=r.y,x[ee+B+2]=r.z,x[ee+B+3]=0),v===!0&&(r.fromBufferAttribute(K,L),x[ee+B+4]=r.x,x[ee+B+5]=r.y,x[ee+B+6]=r.z,x[ee+B+7]=0),g===!0&&(r.fromBufferAttribute(Q,L),x[ee+B+8]=r.x,x[ee+B+9]=r.y,x[ee+B+10]=r.z,x[ee+B+11]=Q.itemSize===4?r.w:1)}}h={count:d,texture:I,size:new mt(z,D)},i.set(a,h),a.addEventListener("dispose",M)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",s.morphTexture,t);else{let p=0;for(let g=0;g<l.length;g++)p+=l[g];let v=a.morphTargetsRelative?1:1-p;c.getUniforms().setValue(n,"morphTargetBaseInfluence",v),c.getUniforms().setValue(n,"morphTargetInfluences",l)}c.getUniforms().setValue(n,"morphTargetsTexture",h.texture,t),c.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}return{update:o}}function MK(n,e,t,i){let r=new WeakMap;function o(c){let l=i.render.frame,u=c.geometry,d=e.get(c,u);if(r.get(d)!==l&&(e.update(d),r.set(d,l)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),r.get(c)!==l&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,l))),c.isSkinnedMesh){let h=c.skeleton;r.get(h)!==l&&(h.update(),r.set(h,l))}return d}function s(){r=new WeakMap}function a(c){let l=c.target;l.removeEventListener("dispose",a),t.remove(l.instanceMatrix),l.instanceColor!==null&&t.remove(l.instanceColor)}return{update:o,dispose:s}}var xI=new zr,iI=new l0(1,1),MI=new Kh,SI=new ep,wI=new t0,rI=[],oI=[],sI=new Float32Array(16),aI=new Float32Array(9),cI=new Float32Array(4);function K1(n,e,t){let i=n[0];if(i<=0||i>0)return n;let r=e*t,o=rI[r];if(o===void 0&&(o=new Float32Array(r),rI[r]=o),e!==0){i.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=t,n[s].toArray(o,a)}return o}function Si(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function wi(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function c8(n,e){let t=oI[e];t===void 0&&(t=new Int32Array(e),oI[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function SK(n,e){let t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function wK(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Si(t,e))return;n.uniform2fv(this.addr,e),wi(t,e)}}function CK(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Si(t,e))return;n.uniform3fv(this.addr,e),wi(t,e)}}function TK(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Si(t,e))return;n.uniform4fv(this.addr,e),wi(t,e)}}function EK(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(Si(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),wi(t,e)}else{if(Si(t,i))return;cI.set(i),n.uniformMatrix2fv(this.addr,!1,cI),wi(t,i)}}function DK(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(Si(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),wi(t,e)}else{if(Si(t,i))return;aI.set(i),n.uniformMatrix3fv(this.addr,!1,aI),wi(t,i)}}function zK(n,e){let t=this.cache,i=e.elements;if(i===void 0){if(Si(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),wi(t,e)}else{if(Si(t,i))return;sI.set(i),n.uniformMatrix4fv(this.addr,!1,sI),wi(t,i)}}function AK(n,e){let t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function IK(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Si(t,e))return;n.uniform2iv(this.addr,e),wi(t,e)}}function PK(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Si(t,e))return;n.uniform3iv(this.addr,e),wi(t,e)}}function RK(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Si(t,e))return;n.uniform4iv(this.addr,e),wi(t,e)}}function kK(n,e){let t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function NK(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Si(t,e))return;n.uniform2uiv(this.addr,e),wi(t,e)}}function OK(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Si(t,e))return;n.uniform3uiv(this.addr,e),wi(t,e)}}function LK(n,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Si(t,e))return;n.uniform4uiv(this.addr,e),wi(t,e)}}function FK(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let o;this.type===n.SAMPLER_2D_SHADOW?(iI.compareFunction=c9,o=iI):o=xI,t.setTexture2D(e||o,r)}function VK(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||SI,r)}function HK(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||wI,r)}function BK(n,e,t){let i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||MI,r)}function UK(n){switch(n){case 5126:return SK;case 35664:return wK;case 35665:return CK;case 35666:return TK;case 35674:return EK;case 35675:return DK;case 35676:return zK;case 5124:case 35670:return AK;case 35667:case 35671:return IK;case 35668:case 35672:return PK;case 35669:case 35673:return RK;case 5125:return kK;case 36294:return NK;case 36295:return OK;case 36296:return LK;case 35678:case 36198:case 36298:case 36306:case 35682:return FK;case 35679:case 36299:case 36307:return VK;case 35680:case 36300:case 36308:case 36293:return HK;case 36289:case 36303:case 36311:case 36292:return BK}}function YK(n,e){n.uniform1fv(this.addr,e)}function jK(n,e){let t=K1(e,this.size,2);n.uniform2fv(this.addr,t)}function GK(n,e){let t=K1(e,this.size,3);n.uniform3fv(this.addr,t)}function WK(n,e){let t=K1(e,this.size,4);n.uniform4fv(this.addr,t)}function $K(n,e){let t=K1(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function qK(n,e){let t=K1(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function XK(n,e){let t=K1(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function KK(n,e){n.uniform1iv(this.addr,e)}function ZK(n,e){n.uniform2iv(this.addr,e)}function QK(n,e){n.uniform3iv(this.addr,e)}function JK(n,e){n.uniform4iv(this.addr,e)}function eZ(n,e){n.uniform1uiv(this.addr,e)}function tZ(n,e){n.uniform2uiv(this.addr,e)}function nZ(n,e){n.uniform3uiv(this.addr,e)}function iZ(n,e){n.uniform4uiv(this.addr,e)}function rZ(n,e,t){let i=this.cache,r=e.length,o=c8(t,r);Si(i,o)||(n.uniform1iv(this.addr,o),wi(i,o));for(let s=0;s!==r;++s)t.setTexture2D(e[s]||xI,o[s])}function oZ(n,e,t){let i=this.cache,r=e.length,o=c8(t,r);Si(i,o)||(n.uniform1iv(this.addr,o),wi(i,o));for(let s=0;s!==r;++s)t.setTexture3D(e[s]||SI,o[s])}function sZ(n,e,t){let i=this.cache,r=e.length,o=c8(t,r);Si(i,o)||(n.uniform1iv(this.addr,o),wi(i,o));for(let s=0;s!==r;++s)t.setTextureCube(e[s]||wI,o[s])}function aZ(n,e,t){let i=this.cache,r=e.length,o=c8(t,r);Si(i,o)||(n.uniform1iv(this.addr,o),wi(i,o));for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||MI,o[s])}function cZ(n){switch(n){case 5126:return YK;case 35664:return jK;case 35665:return GK;case 35666:return WK;case 35674:return $K;case 35675:return qK;case 35676:return XK;case 5124:case 35670:return KK;case 35667:case 35671:return ZK;case 35668:case 35672:return QK;case 35669:case 35673:return JK;case 5125:return eZ;case 36294:return tZ;case 36295:return nZ;case 36296:return iZ;case 35678:case 36198:case 36298:case 36306:case 35682:return rZ;case 35679:case 36299:case 36307:return oZ;case 35680:case 36300:case 36308:case 36293:return sZ;case 36289:case 36303:case 36311:case 36292:return aZ}}var M9=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=UK(t.type)}},S9=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=cZ(t.type)}},w9=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){let r=this.seq;for(let o=0,s=r.length;o!==s;++o){let a=r[o];a.setValue(e,t[a.id],i)}}},x9=/(\w+)(\])?(\[|\.)?/g;function lI(n,e){n.seq.push(e),n.map[e.id]=e}function lZ(n,e,t){let i=n.name,r=i.length;for(x9.lastIndex=0;;){let o=x9.exec(i),s=x9.lastIndex,a=o[1],c=o[2]==="]",l=o[3];if(c&&(a=a|0),l===void 0||l==="["&&s+2===r){lI(t,l===void 0?new M9(a,n,e):new S9(a,n,e));break}else{let d=t.map[a];d===void 0&&(d=new w9(a),lI(t,d)),t=d}}}var q1=class{constructor(e,t){this.seq=[],this.map={};let i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){let o=e.getActiveUniform(t,r),s=e.getUniformLocation(t,o.name);lZ(o,s,this)}}setValue(e,t,i,r){let o=this.map[t];o!==void 0&&o.setValue(e,i,r)}setOptional(e,t,i){let r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let o=0,s=t.length;o!==s;++o){let a=t[o],c=i[a.id];c.needsUpdate!==!1&&a.setValue(e,c.value,r)}}static seqWithValue(e,t){let i=[];for(let r=0,o=e.length;r!==o;++r){let s=e[r];s.id in t&&i.push(s)}return i}};function uI(n,e,t){let i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}var uZ=37297,dZ=0;function hZ(n,e){let t=n.split(`
`),i=[],r=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let s=r;s<o;s++){let a=s+1;i.push(`${a===e?">":" "} ${a}: ${t[s]}`)}return i.join(`
`)}var dI=new Nt;function fZ(n){qt._getMatrix(dI,qt.workingColorSpace,n);let e=`mat3( ${dI.elements.map(t=>t.toFixed(4))} )`;switch(qt.getTransfer(n)){case qh:return[e,"LinearTransferOETF"];case yn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function hI(n,e,t){let i=n.getShaderParameter(e,n.COMPILE_STATUS),o=(n.getShaderInfoLog(e)||"").trim();if(i&&o==="")return"";let s=/ERROR: 0:(\d+)/.exec(o);if(s){let a=parseInt(s[1]);return t.toUpperCase()+`

`+o+`

`+hZ(n.getShaderSource(e),a)}else return o}function pZ(n,e){let t=fZ(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function mZ(n,e){let t;switch(e){case EA:t="Linear";break;case DA:t="Reinhard";break;case zA:t="Cineon";break;case xp:t="ACESFilmic";break;case IA:t="AgX";break;case PA:t="Neutral";break;case AA:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}var o8=new k;function gZ(){qt.getLuminanceCoefficients(o8);let n=o8.x.toFixed(4),e=o8.y.toFixed(4),t=o8.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function vZ(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(w0).join(`
`)}function yZ(n){let e=[];for(let t in n){let i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function _Z(n,e){let t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){let o=n.getActiveAttrib(e,r),s=o.name,a=1;o.type===n.FLOAT_MAT2&&(a=2),o.type===n.FLOAT_MAT3&&(a=3),o.type===n.FLOAT_MAT4&&(a=4),t[s]={type:o.type,location:n.getAttribLocation(e,s),locationSize:a}}return t}function w0(n){return n!==""}function fI(n,e){let t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function pI(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var bZ=/^[ \t]*#include +<([\w\d./]+)>/gm;function C9(n){return n.replace(bZ,MZ)}var xZ=new Map;function MZ(n,e){let t=Vt[e];if(t===void 0){let i=xZ.get(e);if(i!==void 0)t=Vt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return C9(t)}var SZ=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function mI(n){return n.replace(SZ,wZ)}function wZ(n,e,t,i){let r="";for(let o=parseInt(e);o<parseInt(t);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function gI(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function CZ(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===qv?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===V1?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===bs&&(e="SHADOWMAP_TYPE_VSM"),e}function TZ(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ml:case Sl:e="ENVMAP_TYPE_CUBE";break;case v0:e="ENVMAP_TYPE_CUBE_UV";break}return e}function EZ(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Sl:e="ENVMAP_MODE_REFRACTION";break}return e}function DZ(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Qv:e="ENVMAP_BLENDING_MULTIPLY";break;case CA:e="ENVMAP_BLENDING_MIX";break;case TA:e="ENVMAP_BLENDING_ADD";break}return e}function zZ(n){let e=n.envMapCubeUVHeight;if(e===null)return null;let t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function AZ(n,e,t,i){let r=n.getContext(),o=t.defines,s=t.vertexShader,a=t.fragmentShader,c=CZ(t),l=TZ(t),u=EZ(t),d=DZ(t),h=zZ(t),f=vZ(t),p=yZ(o),v=r.createProgram(),g,m,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(w0).join(`
`),g.length>0&&(g+=`
`),m=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(w0).join(`
`),m.length>0&&(m+=`
`)):(g=[gI(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(w0).join(`
`),m=[gI(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==sa?"#define TONE_MAPPING":"",t.toneMapping!==sa?Vt.tonemapping_pars_fragment:"",t.toneMapping!==sa?mZ("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Vt.colorspace_pars_fragment,pZ("linearToOutputTexel",t.outputColorSpace),gZ(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(w0).join(`
`)),s=C9(s),s=fI(s,t),s=pI(s,t),a=C9(a),a=fI(a,t),a=pI(a,t),s=mI(s),a=mI(a),t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,g=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,m=["#define varying in",t.glslVersion===l9?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===l9?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);let w=C+g+s,y=C+m+a,z=uI(r,r.VERTEX_SHADER,w),D=uI(r,r.FRAGMENT_SHADER,y);r.attachShader(v,z),r.attachShader(v,D),t.index0AttributeName!==void 0?r.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v);function x(A){if(n.debug.checkShaderErrors){let J=r.getProgramInfoLog(v)||"",K=r.getShaderInfoLog(z)||"",Q=r.getShaderInfoLog(D)||"",ee=J.trim(),L=K.trim(),B=Q.trim(),F=!0,ae=!0;if(r.getProgramParameter(v,r.LINK_STATUS)===!1)if(F=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,v,z,D);else{let be=hI(r,z,"vertex"),Ne=hI(r,D,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(v,r.VALIDATE_STATUS)+`

Material Name: `+A.name+`
Material Type: `+A.type+`

Program Info Log: `+ee+`
`+be+`
`+Ne)}else ee!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ee):(L===""||B==="")&&(ae=!1);ae&&(A.diagnostics={runnable:F,programLog:ee,vertexShader:{log:L,prefix:g},fragmentShader:{log:B,prefix:m}})}r.deleteShader(z),r.deleteShader(D),I=new q1(r,v),S=_Z(r,v)}let I;this.getUniforms=function(){return I===void 0&&x(this),I};let S;this.getAttributes=function(){return S===void 0&&x(this),S};let M=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return M===!1&&(M=r.getProgramParameter(v,uZ)),M},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=dZ++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=z,this.fragmentShader=D,this}var IZ=0,T9=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),o=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){let t=this.shaderCache,i=t.get(e);return i===void 0&&(i=new E9(e),t.set(e,i)),i}},E9=class{constructor(e){this.id=IZ++,this.code=e,this.usedTimes=0}};function PZ(n,e,t,i,r,o,s){let a=new Zh,c=new T9,l=new Set,u=[],d=r.logarithmicDepthBuffer,h=r.vertexTextures,f=r.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(S){return l.add(S),S===0?"uv":`uv${S}`}function g(S,M,A,J,K){let Q=J.fog,ee=K.geometry,L=S.isMeshStandardMaterial?J.environment:null,B=(S.isMeshStandardMaterial?t:e).get(S.envMap||L),F=B&&B.mapping===v0?B.image.height:null,ae=p[S.type];S.precision!==null&&(f=r.getMaxPrecision(S.precision),f!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",f,"instead."));let be=ee.morphAttributes.position||ee.morphAttributes.normal||ee.morphAttributes.color,Ne=be!==void 0?be.length:0,tt=0;ee.morphAttributes.position!==void 0&&(tt=1),ee.morphAttributes.normal!==void 0&&(tt=2),ee.morphAttributes.color!==void 0&&(tt=3);let tn,st,ne,we;if(ae){let hn=xs[ae];tn=hn.vertexShader,st=hn.fragmentShader}else tn=S.vertexShader,st=S.fragmentShader,c.update(S),ne=c.getVertexShaderID(S),we=c.getFragmentShaderID(S);let ue=n.getRenderTarget(),Xe=n.state.buffers.depth.getReversed(),Ve=K.isInstancedMesh===!0,gt=K.isBatchedMesh===!0,Vn=!!S.map,nn=!!S.matcap,P=!!B,kn=!!S.aoMap,at=!!S.lightMap,cn=!!S.bumpMap,et=!!S.normalMap,jn=!!S.displacementMap,He=!!S.emissiveMap,Ht=!!S.metalnessMap,Ti=!!S.roughnessMap,oi=S.anisotropy>0,E=S.clearcoat>0,_=S.dispersion>0,U=S.iridescence>0,ie=S.sheen>0,he=S.transmission>0,te=oi&&!!S.anisotropyMap,Qe=E&&!!S.clearcoatMap,xe=E&&!!S.clearcoatNormalMap,qe=E&&!!S.clearcoatRoughnessMap,Ke=U&&!!S.iridescenceMap,ve=U&&!!S.iridescenceThicknessMap,De=ie&&!!S.sheenColorMap,vt=ie&&!!S.sheenRoughnessMap,Ze=!!S.specularMap,Te=!!S.specularColorMap,Ot=!!S.specularIntensityMap,N=he&&!!S.transmissionMap,ye=he&&!!S.thicknessMap,Se=!!S.gradientMap,Le=!!S.alphaMap,pe=S.alphaTest>0,oe=!!S.alphaHash,Ye=!!S.extensions,zt=sa;S.toneMapped&&(ue===null||ue.isXRRenderTarget===!0)&&(zt=n.toneMapping);let Nn={shaderID:ae,shaderType:S.type,shaderName:S.name,vertexShader:tn,fragmentShader:st,defines:S.defines,customVertexShaderID:ne,customFragmentShaderID:we,isRawShaderMaterial:S.isRawShaderMaterial===!0,glslVersion:S.glslVersion,precision:f,batching:gt,batchingColor:gt&&K._colorsTexture!==null,instancing:Ve,instancingColor:Ve&&K.instanceColor!==null,instancingMorph:Ve&&K.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:ue===null?n.outputColorSpace:ue.isXRRenderTarget===!0?ue.texture.colorSpace:Vi,alphaToCoverage:!!S.alphaToCoverage,map:Vn,matcap:nn,envMap:P,envMapMode:P&&B.mapping,envMapCubeUVHeight:F,aoMap:kn,lightMap:at,bumpMap:cn,normalMap:et,displacementMap:h&&jn,emissiveMap:He,normalMapObjectSpace:et&&S.normalMapType===LA,normalMapTangentSpace:et&&S.normalMapType===a9,metalnessMap:Ht,roughnessMap:Ti,anisotropy:oi,anisotropyMap:te,clearcoat:E,clearcoatMap:Qe,clearcoatNormalMap:xe,clearcoatRoughnessMap:qe,dispersion:_,iridescence:U,iridescenceMap:Ke,iridescenceThicknessMap:ve,sheen:ie,sheenColorMap:De,sheenRoughnessMap:vt,specularMap:Ze,specularColorMap:Te,specularIntensityMap:Ot,transmission:he,transmissionMap:N,thicknessMap:ye,gradientMap:Se,opaque:S.transparent===!1&&S.blending===dl&&S.alphaToCoverage===!1,alphaMap:Le,alphaTest:pe,alphaHash:oe,combine:S.combine,mapUv:Vn&&v(S.map.channel),aoMapUv:kn&&v(S.aoMap.channel),lightMapUv:at&&v(S.lightMap.channel),bumpMapUv:cn&&v(S.bumpMap.channel),normalMapUv:et&&v(S.normalMap.channel),displacementMapUv:jn&&v(S.displacementMap.channel),emissiveMapUv:He&&v(S.emissiveMap.channel),metalnessMapUv:Ht&&v(S.metalnessMap.channel),roughnessMapUv:Ti&&v(S.roughnessMap.channel),anisotropyMapUv:te&&v(S.anisotropyMap.channel),clearcoatMapUv:Qe&&v(S.clearcoatMap.channel),clearcoatNormalMapUv:xe&&v(S.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:qe&&v(S.clearcoatRoughnessMap.channel),iridescenceMapUv:Ke&&v(S.iridescenceMap.channel),iridescenceThicknessMapUv:ve&&v(S.iridescenceThicknessMap.channel),sheenColorMapUv:De&&v(S.sheenColorMap.channel),sheenRoughnessMapUv:vt&&v(S.sheenRoughnessMap.channel),specularMapUv:Ze&&v(S.specularMap.channel),specularColorMapUv:Te&&v(S.specularColorMap.channel),specularIntensityMapUv:Ot&&v(S.specularIntensityMap.channel),transmissionMapUv:N&&v(S.transmissionMap.channel),thicknessMapUv:ye&&v(S.thicknessMap.channel),alphaMapUv:Le&&v(S.alphaMap.channel),vertexTangents:!!ee.attributes.tangent&&(et||oi),vertexColors:S.vertexColors,vertexAlphas:S.vertexColors===!0&&!!ee.attributes.color&&ee.attributes.color.itemSize===4,pointsUvs:K.isPoints===!0&&!!ee.attributes.uv&&(Vn||Le),fog:!!Q,useFog:S.fog===!0,fogExp2:!!Q&&Q.isFogExp2,flatShading:S.flatShading===!0&&S.wireframe===!1,sizeAttenuation:S.sizeAttenuation===!0,logarithmicDepthBuffer:d,reversedDepthBuffer:Xe,skinning:K.isSkinnedMesh===!0,morphTargets:ee.morphAttributes.position!==void 0,morphNormals:ee.morphAttributes.normal!==void 0,morphColors:ee.morphAttributes.color!==void 0,morphTargetsCount:Ne,morphTextureStride:tt,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numLightProbes:M.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:S.dithering,shadowMapEnabled:n.shadowMap.enabled&&A.length>0,shadowMapType:n.shadowMap.type,toneMapping:zt,decodeVideoTexture:Vn&&S.map.isVideoTexture===!0&&qt.getTransfer(S.map.colorSpace)===yn,decodeVideoTextureEmissive:He&&S.emissiveMap.isVideoTexture===!0&&qt.getTransfer(S.emissiveMap.colorSpace)===yn,premultipliedAlpha:S.premultipliedAlpha,doubleSided:S.side===Dr,flipSided:S.side===ar,useDepthPacking:S.depthPacking>=0,depthPacking:S.depthPacking||0,index0AttributeName:S.index0AttributeName,extensionClipCullDistance:Ye&&S.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ye&&S.extensions.multiDraw===!0||gt)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:S.customProgramCacheKey()};return Nn.vertexUv1s=l.has(1),Nn.vertexUv2s=l.has(2),Nn.vertexUv3s=l.has(3),l.clear(),Nn}function m(S){let M=[];if(S.shaderID?M.push(S.shaderID):(M.push(S.customVertexShaderID),M.push(S.customFragmentShaderID)),S.defines!==void 0)for(let A in S.defines)M.push(A),M.push(S.defines[A]);return S.isRawShaderMaterial===!1&&(C(M,S),w(M,S),M.push(n.outputColorSpace)),M.push(S.customProgramCacheKey),M.join()}function C(S,M){S.push(M.precision),S.push(M.outputColorSpace),S.push(M.envMapMode),S.push(M.envMapCubeUVHeight),S.push(M.mapUv),S.push(M.alphaMapUv),S.push(M.lightMapUv),S.push(M.aoMapUv),S.push(M.bumpMapUv),S.push(M.normalMapUv),S.push(M.displacementMapUv),S.push(M.emissiveMapUv),S.push(M.metalnessMapUv),S.push(M.roughnessMapUv),S.push(M.anisotropyMapUv),S.push(M.clearcoatMapUv),S.push(M.clearcoatNormalMapUv),S.push(M.clearcoatRoughnessMapUv),S.push(M.iridescenceMapUv),S.push(M.iridescenceThicknessMapUv),S.push(M.sheenColorMapUv),S.push(M.sheenRoughnessMapUv),S.push(M.specularMapUv),S.push(M.specularColorMapUv),S.push(M.specularIntensityMapUv),S.push(M.transmissionMapUv),S.push(M.thicknessMapUv),S.push(M.combine),S.push(M.fogExp2),S.push(M.sizeAttenuation),S.push(M.morphTargetsCount),S.push(M.morphAttributeCount),S.push(M.numDirLights),S.push(M.numPointLights),S.push(M.numSpotLights),S.push(M.numSpotLightMaps),S.push(M.numHemiLights),S.push(M.numRectAreaLights),S.push(M.numDirLightShadows),S.push(M.numPointLightShadows),S.push(M.numSpotLightShadows),S.push(M.numSpotLightShadowsWithMaps),S.push(M.numLightProbes),S.push(M.shadowMapType),S.push(M.toneMapping),S.push(M.numClippingPlanes),S.push(M.numClipIntersection),S.push(M.depthPacking)}function w(S,M){a.disableAll(),M.supportsVertexTextures&&a.enable(0),M.instancing&&a.enable(1),M.instancingColor&&a.enable(2),M.instancingMorph&&a.enable(3),M.matcap&&a.enable(4),M.envMap&&a.enable(5),M.normalMapObjectSpace&&a.enable(6),M.normalMapTangentSpace&&a.enable(7),M.clearcoat&&a.enable(8),M.iridescence&&a.enable(9),M.alphaTest&&a.enable(10),M.vertexColors&&a.enable(11),M.vertexAlphas&&a.enable(12),M.vertexUv1s&&a.enable(13),M.vertexUv2s&&a.enable(14),M.vertexUv3s&&a.enable(15),M.vertexTangents&&a.enable(16),M.anisotropy&&a.enable(17),M.alphaHash&&a.enable(18),M.batching&&a.enable(19),M.dispersion&&a.enable(20),M.batchingColor&&a.enable(21),M.gradientMap&&a.enable(22),S.push(a.mask),a.disableAll(),M.fog&&a.enable(0),M.useFog&&a.enable(1),M.flatShading&&a.enable(2),M.logarithmicDepthBuffer&&a.enable(3),M.reversedDepthBuffer&&a.enable(4),M.skinning&&a.enable(5),M.morphTargets&&a.enable(6),M.morphNormals&&a.enable(7),M.morphColors&&a.enable(8),M.premultipliedAlpha&&a.enable(9),M.shadowMapEnabled&&a.enable(10),M.doubleSided&&a.enable(11),M.flipSided&&a.enable(12),M.useDepthPacking&&a.enable(13),M.dithering&&a.enable(14),M.transmission&&a.enable(15),M.sheen&&a.enable(16),M.opaque&&a.enable(17),M.pointsUvs&&a.enable(18),M.decodeVideoTexture&&a.enable(19),M.decodeVideoTextureEmissive&&a.enable(20),M.alphaToCoverage&&a.enable(21),S.push(a.mask)}function y(S){let M=p[S.type],A;if(M){let J=xs[M];A=qA.clone(J.uniforms)}else A=S.uniforms;return A}function z(S,M){let A;for(let J=0,K=u.length;J<K;J++){let Q=u[J];if(Q.cacheKey===M){A=Q,++A.usedTimes;break}}return A===void 0&&(A=new AZ(n,M,S,o),u.push(A)),A}function D(S){if(--S.usedTimes===0){let M=u.indexOf(S);u[M]=u[u.length-1],u.pop(),S.destroy()}}function x(S){c.remove(S)}function I(){c.dispose()}return{getParameters:g,getProgramCacheKey:m,getUniforms:y,acquireProgram:z,releaseProgram:D,releaseShaderCache:x,programs:u,dispose:I}}function RZ(){let n=new WeakMap;function e(s){return n.has(s)}function t(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function i(s){n.delete(s)}function r(s,a,c){n.get(s)[a]=c}function o(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:o}}function kZ(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function vI(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function yI(){let n=[],e=0,t=[],i=[],r=[];function o(){e=0,t.length=0,i.length=0,r.length=0}function s(d,h,f,p,v,g){let m=n[e];return m===void 0?(m={id:d.id,object:d,geometry:h,material:f,groupOrder:p,renderOrder:d.renderOrder,z:v,group:g},n[e]=m):(m.id=d.id,m.object=d,m.geometry=h,m.material=f,m.groupOrder=p,m.renderOrder=d.renderOrder,m.z=v,m.group=g),e++,m}function a(d,h,f,p,v,g){let m=s(d,h,f,p,v,g);f.transmission>0?i.push(m):f.transparent===!0?r.push(m):t.push(m)}function c(d,h,f,p,v,g){let m=s(d,h,f,p,v,g);f.transmission>0?i.unshift(m):f.transparent===!0?r.unshift(m):t.unshift(m)}function l(d,h){t.length>1&&t.sort(d||kZ),i.length>1&&i.sort(h||vI),r.length>1&&r.sort(h||vI)}function u(){for(let d=e,h=n.length;d<h;d++){let f=n[d];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:i,transparent:r,init:o,push:a,unshift:c,finish:u,sort:l}}function NZ(){let n=new WeakMap;function e(i,r){let o=n.get(i),s;return o===void 0?(s=new yI,n.set(i,[s])):r>=o.length?(s=new yI,o.push(s)):s=o[r],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function OZ(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new k,color:new ot};break;case"SpotLight":t={position:new k,direction:new k,color:new ot,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new k,color:new ot,distance:0,decay:0};break;case"HemisphereLight":t={direction:new k,skyColor:new ot,groundColor:new ot};break;case"RectAreaLight":t={color:new ot,position:new k,halfWidth:new k,halfHeight:new k};break}return n[e.id]=t,t}}}function LZ(){let n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}var FZ=0;function VZ(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function HZ(n){let e=new OZ,t=LZ(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)i.probe.push(new k);let r=new k,o=new Dt,s=new Dt;function a(l){let u=0,d=0,h=0;for(let S=0;S<9;S++)i.probe[S].set(0,0,0);let f=0,p=0,v=0,g=0,m=0,C=0,w=0,y=0,z=0,D=0,x=0;l.sort(VZ);for(let S=0,M=l.length;S<M;S++){let A=l[S],J=A.color,K=A.intensity,Q=A.distance,ee=A.shadow&&A.shadow.map?A.shadow.map.texture:null;if(A.isAmbientLight)u+=J.r*K,d+=J.g*K,h+=J.b*K;else if(A.isLightProbe){for(let L=0;L<9;L++)i.probe[L].addScaledVector(A.sh.coefficients[L],K);x++}else if(A.isDirectionalLight){let L=e.get(A);if(L.color.copy(A.color).multiplyScalar(A.intensity),A.castShadow){let B=A.shadow,F=t.get(A);F.shadowIntensity=B.intensity,F.shadowBias=B.bias,F.shadowNormalBias=B.normalBias,F.shadowRadius=B.radius,F.shadowMapSize=B.mapSize,i.directionalShadow[f]=F,i.directionalShadowMap[f]=ee,i.directionalShadowMatrix[f]=A.shadow.matrix,C++}i.directional[f]=L,f++}else if(A.isSpotLight){let L=e.get(A);L.position.setFromMatrixPosition(A.matrixWorld),L.color.copy(J).multiplyScalar(K),L.distance=Q,L.coneCos=Math.cos(A.angle),L.penumbraCos=Math.cos(A.angle*(1-A.penumbra)),L.decay=A.decay,i.spot[v]=L;let B=A.shadow;if(A.map&&(i.spotLightMap[z]=A.map,z++,B.updateMatrices(A),A.castShadow&&D++),i.spotLightMatrix[v]=B.matrix,A.castShadow){let F=t.get(A);F.shadowIntensity=B.intensity,F.shadowBias=B.bias,F.shadowNormalBias=B.normalBias,F.shadowRadius=B.radius,F.shadowMapSize=B.mapSize,i.spotShadow[v]=F,i.spotShadowMap[v]=ee,y++}v++}else if(A.isRectAreaLight){let L=e.get(A);L.color.copy(J).multiplyScalar(K),L.halfWidth.set(A.width*.5,0,0),L.halfHeight.set(0,A.height*.5,0),i.rectArea[g]=L,g++}else if(A.isPointLight){let L=e.get(A);if(L.color.copy(A.color).multiplyScalar(A.intensity),L.distance=A.distance,L.decay=A.decay,A.castShadow){let B=A.shadow,F=t.get(A);F.shadowIntensity=B.intensity,F.shadowBias=B.bias,F.shadowNormalBias=B.normalBias,F.shadowRadius=B.radius,F.shadowMapSize=B.mapSize,F.shadowCameraNear=B.camera.near,F.shadowCameraFar=B.camera.far,i.pointShadow[p]=F,i.pointShadowMap[p]=ee,i.pointShadowMatrix[p]=A.shadow.matrix,w++}i.point[p]=L,p++}else if(A.isHemisphereLight){let L=e.get(A);L.skyColor.copy(A.color).multiplyScalar(K),L.groundColor.copy(A.groundColor).multiplyScalar(K),i.hemi[m]=L,m++}}g>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ce.LTC_FLOAT_1,i.rectAreaLTC2=Ce.LTC_FLOAT_2):(i.rectAreaLTC1=Ce.LTC_HALF_1,i.rectAreaLTC2=Ce.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=d,i.ambient[2]=h;let I=i.hash;(I.directionalLength!==f||I.pointLength!==p||I.spotLength!==v||I.rectAreaLength!==g||I.hemiLength!==m||I.numDirectionalShadows!==C||I.numPointShadows!==w||I.numSpotShadows!==y||I.numSpotMaps!==z||I.numLightProbes!==x)&&(i.directional.length=f,i.spot.length=v,i.rectArea.length=g,i.point.length=p,i.hemi.length=m,i.directionalShadow.length=C,i.directionalShadowMap.length=C,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=y,i.spotShadowMap.length=y,i.directionalShadowMatrix.length=C,i.pointShadowMatrix.length=w,i.spotLightMatrix.length=y+z-D,i.spotLightMap.length=z,i.numSpotLightShadowsWithMaps=D,i.numLightProbes=x,I.directionalLength=f,I.pointLength=p,I.spotLength=v,I.rectAreaLength=g,I.hemiLength=m,I.numDirectionalShadows=C,I.numPointShadows=w,I.numSpotShadows=y,I.numSpotMaps=z,I.numLightProbes=x,i.version=FZ++)}function c(l,u){let d=0,h=0,f=0,p=0,v=0,g=u.matrixWorldInverse;for(let m=0,C=l.length;m<C;m++){let w=l[m];if(w.isDirectionalLight){let y=i.directional[d];y.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),y.direction.sub(r),y.direction.transformDirection(g),d++}else if(w.isSpotLight){let y=i.spot[f];y.position.setFromMatrixPosition(w.matrixWorld),y.position.applyMatrix4(g),y.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),y.direction.sub(r),y.direction.transformDirection(g),f++}else if(w.isRectAreaLight){let y=i.rectArea[p];y.position.setFromMatrixPosition(w.matrixWorld),y.position.applyMatrix4(g),s.identity(),o.copy(w.matrixWorld),o.premultiply(g),s.extractRotation(o),y.halfWidth.set(w.width*.5,0,0),y.halfHeight.set(0,w.height*.5,0),y.halfWidth.applyMatrix4(s),y.halfHeight.applyMatrix4(s),p++}else if(w.isPointLight){let y=i.point[h];y.position.setFromMatrixPosition(w.matrixWorld),y.position.applyMatrix4(g),h++}else if(w.isHemisphereLight){let y=i.hemi[v];y.direction.setFromMatrixPosition(w.matrixWorld),y.direction.transformDirection(g),v++}}}return{setup:a,setupView:c,state:i}}function _I(n){let e=new HZ(n),t=[],i=[];function r(u){l.camera=u,t.length=0,i.length=0}function o(u){t.push(u)}function s(u){i.push(u)}function a(){e.setup(t)}function c(u){e.setupView(t,u)}let l={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:l,setupLights:a,setupLightsView:c,pushLight:o,pushShadow:s}}function BZ(n){let e=new WeakMap;function t(r,o=0){let s=e.get(r),a;return s===void 0?(a=new _I(n),e.set(r,[a])):o>=s.length?(a=new _I(n),s.push(a)):a=s[o],a}function i(){e=new WeakMap}return{get:t,dispose:i}}var UZ=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,YZ=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function jZ(n,e,t){let i=new R1,r=new mt,o=new mt,s=new an,a=new op({depthPacking:OA}),c=new sp,l={},u=t.maxTextureSize,d={[Lo]:ar,[ar]:Lo,[Dr]:Dr},h=new Vo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new mt},radius:{value:4}},vertexShader:UZ,fragmentShader:YZ}),f=h.clone();f.defines.HORIZONTAL_PASS=1;let p=new qr;p.setAttribute("position",new _n(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let v=new ri(p,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=qv;let m=this.type;this.render=function(D,x,I){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||D.length===0)return;let S=n.getRenderTarget(),M=n.getActiveCubeFace(),A=n.getActiveMipmapLevel(),J=n.state;J.setBlending(oa),J.buffers.depth.getReversed()?J.buffers.color.setClear(0,0,0,0):J.buffers.color.setClear(1,1,1,1),J.buffers.depth.setTest(!0),J.setScissorTest(!1);let K=m!==bs&&this.type===bs,Q=m===bs&&this.type!==bs;for(let ee=0,L=D.length;ee<L;ee++){let B=D[ee],F=B.shadow;if(F===void 0){console.warn("THREE.WebGLShadowMap:",B,"has no shadow.");continue}if(F.autoUpdate===!1&&F.needsUpdate===!1)continue;r.copy(F.mapSize);let ae=F.getFrameExtents();if(r.multiply(ae),o.copy(F.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(o.x=Math.floor(u/ae.x),r.x=o.x*ae.x,F.mapSize.x=o.x),r.y>u&&(o.y=Math.floor(u/ae.y),r.y=o.y*ae.y,F.mapSize.y=o.y)),F.map===null||K===!0||Q===!0){let Ne=this.type!==bs?{minFilter:Mi,magFilter:Mi}:{};F.map!==null&&F.map.dispose(),F.map=new ms(r.x,r.y,Ne),F.map.texture.name=B.name+".shadowMap",F.camera.updateProjectionMatrix()}n.setRenderTarget(F.map),n.clear();let be=F.getViewportCount();for(let Ne=0;Ne<be;Ne++){let tt=F.getViewport(Ne);s.set(o.x*tt.x,o.y*tt.y,o.x*tt.z,o.y*tt.w),J.viewport(s),F.updateMatrices(B,Ne),i=F.getFrustum(),y(x,I,F.camera,B,this.type)}F.isPointLightShadow!==!0&&this.type===bs&&C(F,I),F.needsUpdate=!1}m=this.type,g.needsUpdate=!1,n.setRenderTarget(S,M,A)};function C(D,x){let I=e.update(v);h.defines.VSM_SAMPLES!==D.blurSamples&&(h.defines.VSM_SAMPLES=D.blurSamples,f.defines.VSM_SAMPLES=D.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),D.mapPass===null&&(D.mapPass=new ms(r.x,r.y)),h.uniforms.shadow_pass.value=D.map.texture,h.uniforms.resolution.value=D.mapSize,h.uniforms.radius.value=D.radius,n.setRenderTarget(D.mapPass),n.clear(),n.renderBufferDirect(x,null,I,h,v,null),f.uniforms.shadow_pass.value=D.mapPass.texture,f.uniforms.resolution.value=D.mapSize,f.uniforms.radius.value=D.radius,n.setRenderTarget(D.map),n.clear(),n.renderBufferDirect(x,null,I,f,v,null)}function w(D,x,I,S){let M=null,A=I.isPointLight===!0?D.customDistanceMaterial:D.customDepthMaterial;if(A!==void 0)M=A;else if(M=I.isPointLight===!0?c:a,n.localClippingEnabled&&x.clipShadows===!0&&Array.isArray(x.clippingPlanes)&&x.clippingPlanes.length!==0||x.displacementMap&&x.displacementScale!==0||x.alphaMap&&x.alphaTest>0||x.map&&x.alphaTest>0||x.alphaToCoverage===!0){let J=M.uuid,K=x.uuid,Q=l[J];Q===void 0&&(Q={},l[J]=Q);let ee=Q[K];ee===void 0&&(ee=M.clone(),Q[K]=ee,x.addEventListener("dispose",z)),M=ee}if(M.visible=x.visible,M.wireframe=x.wireframe,S===bs?M.side=x.shadowSide!==null?x.shadowSide:x.side:M.side=x.shadowSide!==null?x.shadowSide:d[x.side],M.alphaMap=x.alphaMap,M.alphaTest=x.alphaToCoverage===!0?.5:x.alphaTest,M.map=x.map,M.clipShadows=x.clipShadows,M.clippingPlanes=x.clippingPlanes,M.clipIntersection=x.clipIntersection,M.displacementMap=x.displacementMap,M.displacementScale=x.displacementScale,M.displacementBias=x.displacementBias,M.wireframeLinewidth=x.wireframeLinewidth,M.linewidth=x.linewidth,I.isPointLight===!0&&M.isMeshDistanceMaterial===!0){let J=n.properties.get(M);J.light=I}return M}function y(D,x,I,S,M){if(D.visible===!1)return;if(D.layers.test(x.layers)&&(D.isMesh||D.isLine||D.isPoints)&&(D.castShadow||D.receiveShadow&&M===bs)&&(!D.frustumCulled||i.intersectsObject(D))){D.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,D.matrixWorld);let K=e.update(D),Q=D.material;if(Array.isArray(Q)){let ee=K.groups;for(let L=0,B=ee.length;L<B;L++){let F=ee[L],ae=Q[F.materialIndex];if(ae&&ae.visible){let be=w(D,ae,S,M);D.onBeforeShadow(n,D,x,I,K,be,F),n.renderBufferDirect(I,null,K,be,D,F),D.onAfterShadow(n,D,x,I,K,be,F)}}}else if(Q.visible){let ee=w(D,Q,S,M);D.onBeforeShadow(n,D,x,I,K,ee,null),n.renderBufferDirect(I,null,K,ee,D,null),D.onAfterShadow(n,D,x,I,K,ee,null)}}let J=D.children;for(let K=0,Q=J.length;K<Q;K++)y(J[K],x,I,S,M)}function z(D){D.target.removeEventListener("dispose",z);for(let I in l){let S=l[I],M=D.target.uuid;M in S&&(S[M].dispose(),delete S[M])}}}var GZ={[pp]:mp,[gp]:_p,[vp]:bp,[hl]:yp,[mp]:pp,[_p]:gp,[bp]:vp,[yp]:hl};function WZ(n,e){function t(){let N=!1,ye=new an,Se=null,Le=new an(0,0,0,0);return{setMask:function(pe){Se!==pe&&!N&&(n.colorMask(pe,pe,pe,pe),Se=pe)},setLocked:function(pe){N=pe},setClear:function(pe,oe,Ye,zt,Nn){Nn===!0&&(pe*=zt,oe*=zt,Ye*=zt),ye.set(pe,oe,Ye,zt),Le.equals(ye)===!1&&(n.clearColor(pe,oe,Ye,zt),Le.copy(ye))},reset:function(){N=!1,Se=null,Le.set(-1,0,0,0)}}}function i(){let N=!1,ye=!1,Se=null,Le=null,pe=null;return{setReversed:function(oe){if(ye!==oe){let Ye=e.get("EXT_clip_control");oe?Ye.clipControlEXT(Ye.LOWER_LEFT_EXT,Ye.ZERO_TO_ONE_EXT):Ye.clipControlEXT(Ye.LOWER_LEFT_EXT,Ye.NEGATIVE_ONE_TO_ONE_EXT),ye=oe;let zt=pe;pe=null,this.setClear(zt)}},getReversed:function(){return ye},setTest:function(oe){oe?ue(n.DEPTH_TEST):Xe(n.DEPTH_TEST)},setMask:function(oe){Se!==oe&&!N&&(n.depthMask(oe),Se=oe)},setFunc:function(oe){if(ye&&(oe=GZ[oe]),Le!==oe){switch(oe){case pp:n.depthFunc(n.NEVER);break;case mp:n.depthFunc(n.ALWAYS);break;case gp:n.depthFunc(n.LESS);break;case hl:n.depthFunc(n.LEQUAL);break;case vp:n.depthFunc(n.EQUAL);break;case yp:n.depthFunc(n.GEQUAL);break;case _p:n.depthFunc(n.GREATER);break;case bp:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Le=oe}},setLocked:function(oe){N=oe},setClear:function(oe){pe!==oe&&(ye&&(oe=1-oe),n.clearDepth(oe),pe=oe)},reset:function(){N=!1,Se=null,Le=null,pe=null,ye=!1}}}function r(){let N=!1,ye=null,Se=null,Le=null,pe=null,oe=null,Ye=null,zt=null,Nn=null;return{setTest:function(hn){N||(hn?ue(n.STENCIL_TEST):Xe(n.STENCIL_TEST))},setMask:function(hn){ye!==hn&&!N&&(n.stencilMask(hn),ye=hn)},setFunc:function(hn,Ms,Uo){(Se!==hn||Le!==Ms||pe!==Uo)&&(n.stencilFunc(hn,Ms,Uo),Se=hn,Le=Ms,pe=Uo)},setOp:function(hn,Ms,Uo){(oe!==hn||Ye!==Ms||zt!==Uo)&&(n.stencilOp(hn,Ms,Uo),oe=hn,Ye=Ms,zt=Uo)},setLocked:function(hn){N=hn},setClear:function(hn){Nn!==hn&&(n.clearStencil(hn),Nn=hn)},reset:function(){N=!1,ye=null,Se=null,Le=null,pe=null,oe=null,Ye=null,zt=null,Nn=null}}}let o=new t,s=new i,a=new r,c=new WeakMap,l=new WeakMap,u={},d={},h=new WeakMap,f=[],p=null,v=!1,g=null,m=null,C=null,w=null,y=null,z=null,D=null,x=new ot(0,0,0),I=0,S=!1,M=null,A=null,J=null,K=null,Q=null,ee=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),L=!1,B=0,F=n.getParameter(n.VERSION);F.indexOf("WebGL")!==-1?(B=parseFloat(/^WebGL (\d)/.exec(F)[1]),L=B>=1):F.indexOf("OpenGL ES")!==-1&&(B=parseFloat(/^OpenGL ES (\d)/.exec(F)[1]),L=B>=2);let ae=null,be={},Ne=n.getParameter(n.SCISSOR_BOX),tt=n.getParameter(n.VIEWPORT),tn=new an().fromArray(Ne),st=new an().fromArray(tt);function ne(N,ye,Se,Le){let pe=new Uint8Array(4),oe=n.createTexture();n.bindTexture(N,oe),n.texParameteri(N,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(N,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ye=0;Ye<Se;Ye++)N===n.TEXTURE_3D||N===n.TEXTURE_2D_ARRAY?n.texImage3D(ye,0,n.RGBA,1,1,Le,0,n.RGBA,n.UNSIGNED_BYTE,pe):n.texImage2D(ye+Ye,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,pe);return oe}let we={};we[n.TEXTURE_2D]=ne(n.TEXTURE_2D,n.TEXTURE_2D,1),we[n.TEXTURE_CUBE_MAP]=ne(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),we[n.TEXTURE_2D_ARRAY]=ne(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),we[n.TEXTURE_3D]=ne(n.TEXTURE_3D,n.TEXTURE_3D,1,1),o.setClear(0,0,0,1),s.setClear(1),a.setClear(0),ue(n.DEPTH_TEST),s.setFunc(hl),cn(!1),et($v),ue(n.CULL_FACE),kn(oa);function ue(N){u[N]!==!0&&(n.enable(N),u[N]=!0)}function Xe(N){u[N]!==!1&&(n.disable(N),u[N]=!1)}function Ve(N,ye){return d[N]!==ye?(n.bindFramebuffer(N,ye),d[N]=ye,N===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=ye),N===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=ye),!0):!1}function gt(N,ye){let Se=f,Le=!1;if(N){Se=h.get(ye),Se===void 0&&(Se=[],h.set(ye,Se));let pe=N.textures;if(Se.length!==pe.length||Se[0]!==n.COLOR_ATTACHMENT0){for(let oe=0,Ye=pe.length;oe<Ye;oe++)Se[oe]=n.COLOR_ATTACHMENT0+oe;Se.length=pe.length,Le=!0}}else Se[0]!==n.BACK&&(Se[0]=n.BACK,Le=!0);Le&&n.drawBuffers(Se)}function Vn(N){return p!==N?(n.useProgram(N),p=N,!0):!1}let nn={[Ja]:n.FUNC_ADD,[cA]:n.FUNC_SUBTRACT,[lA]:n.FUNC_REVERSE_SUBTRACT};nn[uA]=n.MIN,nn[dA]=n.MAX;let P={[hA]:n.ZERO,[fA]:n.ONE,[pA]:n.SRC_COLOR,[K3]:n.SRC_ALPHA,[bA]:n.SRC_ALPHA_SATURATE,[yA]:n.DST_COLOR,[gA]:n.DST_ALPHA,[mA]:n.ONE_MINUS_SRC_COLOR,[Z3]:n.ONE_MINUS_SRC_ALPHA,[_A]:n.ONE_MINUS_DST_COLOR,[vA]:n.ONE_MINUS_DST_ALPHA,[xA]:n.CONSTANT_COLOR,[MA]:n.ONE_MINUS_CONSTANT_COLOR,[SA]:n.CONSTANT_ALPHA,[wA]:n.ONE_MINUS_CONSTANT_ALPHA};function kn(N,ye,Se,Le,pe,oe,Ye,zt,Nn,hn){if(N===oa){v===!0&&(Xe(n.BLEND),v=!1);return}if(v===!1&&(ue(n.BLEND),v=!0),N!==aA){if(N!==g||hn!==S){if((m!==Ja||y!==Ja)&&(n.blendEquation(n.FUNC_ADD),m=Ja,y=Ja),hn)switch(N){case dl:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Xv:n.blendFunc(n.ONE,n.ONE);break;case Kv:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Zv:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",N);break}else switch(N){case dl:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Xv:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case Kv:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case Zv:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",N);break}C=null,w=null,z=null,D=null,x.set(0,0,0),I=0,g=N,S=hn}return}pe=pe||ye,oe=oe||Se,Ye=Ye||Le,(ye!==m||pe!==y)&&(n.blendEquationSeparate(nn[ye],nn[pe]),m=ye,y=pe),(Se!==C||Le!==w||oe!==z||Ye!==D)&&(n.blendFuncSeparate(P[Se],P[Le],P[oe],P[Ye]),C=Se,w=Le,z=oe,D=Ye),(zt.equals(x)===!1||Nn!==I)&&(n.blendColor(zt.r,zt.g,zt.b,Nn),x.copy(zt),I=Nn),g=N,S=!1}function at(N,ye){N.side===Dr?Xe(n.CULL_FACE):ue(n.CULL_FACE);let Se=N.side===ar;ye&&(Se=!Se),cn(Se),N.blending===dl&&N.transparent===!1?kn(oa):kn(N.blending,N.blendEquation,N.blendSrc,N.blendDst,N.blendEquationAlpha,N.blendSrcAlpha,N.blendDstAlpha,N.blendColor,N.blendAlpha,N.premultipliedAlpha),s.setFunc(N.depthFunc),s.setTest(N.depthTest),s.setMask(N.depthWrite),o.setMask(N.colorWrite);let Le=N.stencilWrite;a.setTest(Le),Le&&(a.setMask(N.stencilWriteMask),a.setFunc(N.stencilFunc,N.stencilRef,N.stencilFuncMask),a.setOp(N.stencilFail,N.stencilZFail,N.stencilZPass)),He(N.polygonOffset,N.polygonOffsetFactor,N.polygonOffsetUnits),N.alphaToCoverage===!0?ue(n.SAMPLE_ALPHA_TO_COVERAGE):Xe(n.SAMPLE_ALPHA_TO_COVERAGE)}function cn(N){M!==N&&(N?n.frontFace(n.CW):n.frontFace(n.CCW),M=N)}function et(N){N!==oA?(ue(n.CULL_FACE),N!==A&&(N===$v?n.cullFace(n.BACK):N===sA?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Xe(n.CULL_FACE),A=N}function jn(N){N!==J&&(L&&n.lineWidth(N),J=N)}function He(N,ye,Se){N?(ue(n.POLYGON_OFFSET_FILL),(K!==ye||Q!==Se)&&(n.polygonOffset(ye,Se),K=ye,Q=Se)):Xe(n.POLYGON_OFFSET_FILL)}function Ht(N){N?ue(n.SCISSOR_TEST):Xe(n.SCISSOR_TEST)}function Ti(N){N===void 0&&(N=n.TEXTURE0+ee-1),ae!==N&&(n.activeTexture(N),ae=N)}function oi(N,ye,Se){Se===void 0&&(ae===null?Se=n.TEXTURE0+ee-1:Se=ae);let Le=be[Se];Le===void 0&&(Le={type:void 0,texture:void 0},be[Se]=Le),(Le.type!==N||Le.texture!==ye)&&(ae!==Se&&(n.activeTexture(Se),ae=Se),n.bindTexture(N,ye||we[N]),Le.type=N,Le.texture=ye)}function E(){let N=be[ae];N!==void 0&&N.type!==void 0&&(n.bindTexture(N.type,null),N.type=void 0,N.texture=void 0)}function _(){try{n.compressedTexImage2D(...arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function U(){try{n.compressedTexImage3D(...arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function ie(){try{n.texSubImage2D(...arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function he(){try{n.texSubImage3D(...arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function te(){try{n.compressedTexSubImage2D(...arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function Qe(){try{n.compressedTexSubImage3D(...arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function xe(){try{n.texStorage2D(...arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function qe(){try{n.texStorage3D(...arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function Ke(){try{n.texImage2D(...arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function ve(){try{n.texImage3D(...arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function De(N){tn.equals(N)===!1&&(n.scissor(N.x,N.y,N.z,N.w),tn.copy(N))}function vt(N){st.equals(N)===!1&&(n.viewport(N.x,N.y,N.z,N.w),st.copy(N))}function Ze(N,ye){let Se=l.get(ye);Se===void 0&&(Se=new WeakMap,l.set(ye,Se));let Le=Se.get(N);Le===void 0&&(Le=n.getUniformBlockIndex(ye,N.name),Se.set(N,Le))}function Te(N,ye){let Le=l.get(ye).get(N);c.get(ye)!==Le&&(n.uniformBlockBinding(ye,Le,N.__bindingPointIndex),c.set(ye,Le))}function Ot(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},ae=null,be={},d={},h=new WeakMap,f=[],p=null,v=!1,g=null,m=null,C=null,w=null,y=null,z=null,D=null,x=new ot(0,0,0),I=0,S=!1,M=null,A=null,J=null,K=null,Q=null,tn.set(0,0,n.canvas.width,n.canvas.height),st.set(0,0,n.canvas.width,n.canvas.height),o.reset(),s.reset(),a.reset()}return{buffers:{color:o,depth:s,stencil:a},enable:ue,disable:Xe,bindFramebuffer:Ve,drawBuffers:gt,useProgram:Vn,setBlending:kn,setMaterial:at,setFlipSided:cn,setCullFace:et,setLineWidth:jn,setPolygonOffset:He,setScissorTest:Ht,activeTexture:Ti,bindTexture:oi,unbindTexture:E,compressedTexImage2D:_,compressedTexImage3D:U,texImage2D:Ke,texImage3D:ve,updateUBOMapping:Ze,uniformBlockBinding:Te,texStorage2D:xe,texStorage3D:qe,texSubImage2D:ie,texSubImage3D:he,compressedTexSubImage2D:te,compressedTexSubImage3D:Qe,scissor:De,viewport:vt,reset:Ot}}function $Z(n,e,t,i,r,o,s){let a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),l=new mt,u=new WeakMap,d,h=new WeakMap,f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(E,_){return f?new OffscreenCanvas(E,_):E1("canvas")}function v(E,_,U){let ie=1,he=oi(E);if((he.width>U||he.height>U)&&(ie=U/Math.max(he.width,he.height)),ie<1)if(typeof HTMLImageElement<"u"&&E instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&E instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&E instanceof ImageBitmap||typeof VideoFrame<"u"&&E instanceof VideoFrame){let te=Math.floor(ie*he.width),Qe=Math.floor(ie*he.height);d===void 0&&(d=p(te,Qe));let xe=_?p(te,Qe):d;return xe.width=te,xe.height=Qe,xe.getContext("2d").drawImage(E,0,0,te,Qe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+he.width+"x"+he.height+") to ("+te+"x"+Qe+")."),xe}else return"data"in E&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+he.width+"x"+he.height+")."),E;return E}function g(E){return E.generateMipmaps}function m(E){n.generateMipmap(E)}function C(E){return E.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:E.isWebGL3DRenderTarget?n.TEXTURE_3D:E.isWebGLArrayRenderTarget||E.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function w(E,_,U,ie,he=!1){if(E!==null){if(n[E]!==void 0)return n[E];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+E+"'")}let te=_;if(_===n.RED&&(U===n.FLOAT&&(te=n.R32F),U===n.HALF_FLOAT&&(te=n.R16F),U===n.UNSIGNED_BYTE&&(te=n.R8)),_===n.RED_INTEGER&&(U===n.UNSIGNED_BYTE&&(te=n.R8UI),U===n.UNSIGNED_SHORT&&(te=n.R16UI),U===n.UNSIGNED_INT&&(te=n.R32UI),U===n.BYTE&&(te=n.R8I),U===n.SHORT&&(te=n.R16I),U===n.INT&&(te=n.R32I)),_===n.RG&&(U===n.FLOAT&&(te=n.RG32F),U===n.HALF_FLOAT&&(te=n.RG16F),U===n.UNSIGNED_BYTE&&(te=n.RG8)),_===n.RG_INTEGER&&(U===n.UNSIGNED_BYTE&&(te=n.RG8UI),U===n.UNSIGNED_SHORT&&(te=n.RG16UI),U===n.UNSIGNED_INT&&(te=n.RG32UI),U===n.BYTE&&(te=n.RG8I),U===n.SHORT&&(te=n.RG16I),U===n.INT&&(te=n.RG32I)),_===n.RGB_INTEGER&&(U===n.UNSIGNED_BYTE&&(te=n.RGB8UI),U===n.UNSIGNED_SHORT&&(te=n.RGB16UI),U===n.UNSIGNED_INT&&(te=n.RGB32UI),U===n.BYTE&&(te=n.RGB8I),U===n.SHORT&&(te=n.RGB16I),U===n.INT&&(te=n.RGB32I)),_===n.RGBA_INTEGER&&(U===n.UNSIGNED_BYTE&&(te=n.RGBA8UI),U===n.UNSIGNED_SHORT&&(te=n.RGBA16UI),U===n.UNSIGNED_INT&&(te=n.RGBA32UI),U===n.BYTE&&(te=n.RGBA8I),U===n.SHORT&&(te=n.RGBA16I),U===n.INT&&(te=n.RGBA32I)),_===n.RGB&&U===n.UNSIGNED_INT_5_9_9_9_REV&&(te=n.RGB9_E5),_===n.RGBA){let Qe=he?qh:qt.getTransfer(ie);U===n.FLOAT&&(te=n.RGBA32F),U===n.HALF_FLOAT&&(te=n.RGBA16F),U===n.UNSIGNED_BYTE&&(te=Qe===yn?n.SRGB8_ALPHA8:n.RGBA8),U===n.UNSIGNED_SHORT_4_4_4_4&&(te=n.RGBA4),U===n.UNSIGNED_SHORT_5_5_5_1&&(te=n.RGB5_A1)}return(te===n.R16F||te===n.R32F||te===n.RG16F||te===n.RG32F||te===n.RGBA16F||te===n.RGBA32F)&&e.get("EXT_color_buffer_float"),te}function y(E,_){let U;return E?_===null||_===cc||_===Y1?U=n.DEPTH24_STENCIL8:_===uo?U=n.DEPTH32F_STENCIL8:_===B1&&(U=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):_===null||_===cc||_===Y1?U=n.DEPTH_COMPONENT24:_===uo?U=n.DEPTH_COMPONENT32F:_===B1&&(U=n.DEPTH_COMPONENT16),U}function z(E,_){return g(E)===!0||E.isFramebufferTexture&&E.minFilter!==Mi&&E.minFilter!==Fi?Math.log2(Math.max(_.width,_.height))+1:E.mipmaps!==void 0&&E.mipmaps.length>0?E.mipmaps.length:E.isCompressedTexture&&Array.isArray(E.image)?_.mipmaps.length:1}function D(E){let _=E.target;_.removeEventListener("dispose",D),I(_),_.isVideoTexture&&u.delete(_)}function x(E){let _=E.target;_.removeEventListener("dispose",x),M(_)}function I(E){let _=i.get(E);if(_.__webglInit===void 0)return;let U=E.source,ie=h.get(U);if(ie){let he=ie[_.__cacheKey];he.usedTimes--,he.usedTimes===0&&S(E),Object.keys(ie).length===0&&h.delete(U)}i.remove(E)}function S(E){let _=i.get(E);n.deleteTexture(_.__webglTexture);let U=E.source,ie=h.get(U);delete ie[_.__cacheKey],s.memory.textures--}function M(E){let _=i.get(E);if(E.depthTexture&&(E.depthTexture.dispose(),i.remove(E.depthTexture)),E.isWebGLCubeRenderTarget)for(let ie=0;ie<6;ie++){if(Array.isArray(_.__webglFramebuffer[ie]))for(let he=0;he<_.__webglFramebuffer[ie].length;he++)n.deleteFramebuffer(_.__webglFramebuffer[ie][he]);else n.deleteFramebuffer(_.__webglFramebuffer[ie]);_.__webglDepthbuffer&&n.deleteRenderbuffer(_.__webglDepthbuffer[ie])}else{if(Array.isArray(_.__webglFramebuffer))for(let ie=0;ie<_.__webglFramebuffer.length;ie++)n.deleteFramebuffer(_.__webglFramebuffer[ie]);else n.deleteFramebuffer(_.__webglFramebuffer);if(_.__webglDepthbuffer&&n.deleteRenderbuffer(_.__webglDepthbuffer),_.__webglMultisampledFramebuffer&&n.deleteFramebuffer(_.__webglMultisampledFramebuffer),_.__webglColorRenderbuffer)for(let ie=0;ie<_.__webglColorRenderbuffer.length;ie++)_.__webglColorRenderbuffer[ie]&&n.deleteRenderbuffer(_.__webglColorRenderbuffer[ie]);_.__webglDepthRenderbuffer&&n.deleteRenderbuffer(_.__webglDepthRenderbuffer)}let U=E.textures;for(let ie=0,he=U.length;ie<he;ie++){let te=i.get(U[ie]);te.__webglTexture&&(n.deleteTexture(te.__webglTexture),s.memory.textures--),i.remove(U[ie])}i.remove(E)}let A=0;function J(){A=0}function K(){let E=A;return E>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+E+" texture units while this GPU supports only "+r.maxTextures),A+=1,E}function Q(E){let _=[];return _.push(E.wrapS),_.push(E.wrapT),_.push(E.wrapR||0),_.push(E.magFilter),_.push(E.minFilter),_.push(E.anisotropy),_.push(E.internalFormat),_.push(E.format),_.push(E.type),_.push(E.generateMipmaps),_.push(E.premultiplyAlpha),_.push(E.flipY),_.push(E.unpackAlignment),_.push(E.colorSpace),_.join()}function ee(E,_){let U=i.get(E);if(E.isVideoTexture&&Ht(E),E.isRenderTargetTexture===!1&&E.isExternalTexture!==!0&&E.version>0&&U.__version!==E.version){let ie=E.image;if(ie===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ie.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{we(U,E,_);return}}else E.isExternalTexture&&(U.__webglTexture=E.sourceTexture?E.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,U.__webglTexture,n.TEXTURE0+_)}function L(E,_){let U=i.get(E);if(E.isRenderTargetTexture===!1&&E.version>0&&U.__version!==E.version){we(U,E,_);return}t.bindTexture(n.TEXTURE_2D_ARRAY,U.__webglTexture,n.TEXTURE0+_)}function B(E,_){let U=i.get(E);if(E.isRenderTargetTexture===!1&&E.version>0&&U.__version!==E.version){we(U,E,_);return}t.bindTexture(n.TEXTURE_3D,U.__webglTexture,n.TEXTURE0+_)}function F(E,_){let U=i.get(E);if(E.version>0&&U.__version!==E.version){ue(U,E,_);return}t.bindTexture(n.TEXTURE_CUBE_MAP,U.__webglTexture,n.TEXTURE0+_)}let ae={[fs]:n.REPEAT,[lo]:n.CLAMP_TO_EDGE,[ec]:n.MIRRORED_REPEAT},be={[Mi]:n.NEAREST,[H1]:n.NEAREST_MIPMAP_NEAREST,[aa]:n.NEAREST_MIPMAP_LINEAR,[Fi]:n.LINEAR,[ac]:n.LINEAR_MIPMAP_NEAREST,[Xr]:n.LINEAR_MIPMAP_LINEAR},Ne={[FA]:n.NEVER,[jA]:n.ALWAYS,[VA]:n.LESS,[c9]:n.LEQUAL,[HA]:n.EQUAL,[YA]:n.GEQUAL,[BA]:n.GREATER,[UA]:n.NOTEQUAL};function tt(E,_){if(_.type===uo&&e.has("OES_texture_float_linear")===!1&&(_.magFilter===Fi||_.magFilter===ac||_.magFilter===aa||_.magFilter===Xr||_.minFilter===Fi||_.minFilter===ac||_.minFilter===aa||_.minFilter===Xr)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(E,n.TEXTURE_WRAP_S,ae[_.wrapS]),n.texParameteri(E,n.TEXTURE_WRAP_T,ae[_.wrapT]),(E===n.TEXTURE_3D||E===n.TEXTURE_2D_ARRAY)&&n.texParameteri(E,n.TEXTURE_WRAP_R,ae[_.wrapR]),n.texParameteri(E,n.TEXTURE_MAG_FILTER,be[_.magFilter]),n.texParameteri(E,n.TEXTURE_MIN_FILTER,be[_.minFilter]),_.compareFunction&&(n.texParameteri(E,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(E,n.TEXTURE_COMPARE_FUNC,Ne[_.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(_.magFilter===Mi||_.minFilter!==aa&&_.minFilter!==Xr||_.type===uo&&e.has("OES_texture_float_linear")===!1)return;if(_.anisotropy>1||i.get(_).__currentAnisotropy){let U=e.get("EXT_texture_filter_anisotropic");n.texParameterf(E,U.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(_.anisotropy,r.getMaxAnisotropy())),i.get(_).__currentAnisotropy=_.anisotropy}}}function tn(E,_){let U=!1;E.__webglInit===void 0&&(E.__webglInit=!0,_.addEventListener("dispose",D));let ie=_.source,he=h.get(ie);he===void 0&&(he={},h.set(ie,he));let te=Q(_);if(te!==E.__cacheKey){he[te]===void 0&&(he[te]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,U=!0),he[te].usedTimes++;let Qe=he[E.__cacheKey];Qe!==void 0&&(he[E.__cacheKey].usedTimes--,Qe.usedTimes===0&&S(_)),E.__cacheKey=te,E.__webglTexture=he[te].texture}return U}function st(E,_,U){return Math.floor(Math.floor(E/U)/_)}function ne(E,_,U,ie){let te=E.updateRanges;if(te.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,_.width,_.height,U,ie,_.data);else{te.sort((ve,De)=>ve.start-De.start);let Qe=0;for(let ve=1;ve<te.length;ve++){let De=te[Qe],vt=te[ve],Ze=De.start+De.count,Te=st(vt.start,_.width,4),Ot=st(De.start,_.width,4);vt.start<=Ze+1&&Te===Ot&&st(vt.start+vt.count-1,_.width,4)===Te?De.count=Math.max(De.count,vt.start+vt.count-De.start):(++Qe,te[Qe]=vt)}te.length=Qe+1;let xe=n.getParameter(n.UNPACK_ROW_LENGTH),qe=n.getParameter(n.UNPACK_SKIP_PIXELS),Ke=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,_.width);for(let ve=0,De=te.length;ve<De;ve++){let vt=te[ve],Ze=Math.floor(vt.start/4),Te=Math.ceil(vt.count/4),Ot=Ze%_.width,N=Math.floor(Ze/_.width),ye=Te,Se=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,Ot),n.pixelStorei(n.UNPACK_SKIP_ROWS,N),t.texSubImage2D(n.TEXTURE_2D,0,Ot,N,ye,Se,U,ie,_.data)}E.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,xe),n.pixelStorei(n.UNPACK_SKIP_PIXELS,qe),n.pixelStorei(n.UNPACK_SKIP_ROWS,Ke)}}function we(E,_,U){let ie=n.TEXTURE_2D;(_.isDataArrayTexture||_.isCompressedArrayTexture)&&(ie=n.TEXTURE_2D_ARRAY),_.isData3DTexture&&(ie=n.TEXTURE_3D);let he=tn(E,_),te=_.source;t.bindTexture(ie,E.__webglTexture,n.TEXTURE0+U);let Qe=i.get(te);if(te.version!==Qe.__version||he===!0){t.activeTexture(n.TEXTURE0+U);let xe=qt.getPrimaries(qt.workingColorSpace),qe=_.colorSpace===Bo?null:qt.getPrimaries(_.colorSpace),Ke=_.colorSpace===Bo||xe===qe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,_.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,_.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,_.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ke);let ve=v(_.image,!1,r.maxTextureSize);ve=Ti(_,ve);let De=o.convert(_.format,_.colorSpace),vt=o.convert(_.type),Ze=w(_.internalFormat,De,vt,_.colorSpace,_.isVideoTexture);tt(ie,_);let Te,Ot=_.mipmaps,N=_.isVideoTexture!==!0,ye=Qe.__version===void 0||he===!0,Se=te.dataReady,Le=z(_,ve);if(_.isDepthTexture)Ze=y(_.format===j1,_.type),ye&&(N?t.texStorage2D(n.TEXTURE_2D,1,Ze,ve.width,ve.height):t.texImage2D(n.TEXTURE_2D,0,Ze,ve.width,ve.height,0,De,vt,null));else if(_.isDataTexture)if(Ot.length>0){N&&ye&&t.texStorage2D(n.TEXTURE_2D,Le,Ze,Ot[0].width,Ot[0].height);for(let pe=0,oe=Ot.length;pe<oe;pe++)Te=Ot[pe],N?Se&&t.texSubImage2D(n.TEXTURE_2D,pe,0,0,Te.width,Te.height,De,vt,Te.data):t.texImage2D(n.TEXTURE_2D,pe,Ze,Te.width,Te.height,0,De,vt,Te.data);_.generateMipmaps=!1}else N?(ye&&t.texStorage2D(n.TEXTURE_2D,Le,Ze,ve.width,ve.height),Se&&ne(_,ve,De,vt)):t.texImage2D(n.TEXTURE_2D,0,Ze,ve.width,ve.height,0,De,vt,ve.data);else if(_.isCompressedTexture)if(_.isCompressedArrayTexture){N&&ye&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Le,Ze,Ot[0].width,Ot[0].height,ve.depth);for(let pe=0,oe=Ot.length;pe<oe;pe++)if(Te=Ot[pe],_.format!==cr)if(De!==null)if(N){if(Se)if(_.layerUpdates.size>0){let Ye=m9(Te.width,Te.height,_.format,_.type);for(let zt of _.layerUpdates){let Nn=Te.data.subarray(zt*Ye/Te.data.BYTES_PER_ELEMENT,(zt+1)*Ye/Te.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,pe,0,0,zt,Te.width,Te.height,1,De,Nn)}_.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,pe,0,0,0,Te.width,Te.height,ve.depth,De,Te.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,pe,Ze,Te.width,Te.height,ve.depth,0,Te.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else N?Se&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,pe,0,0,0,Te.width,Te.height,ve.depth,De,vt,Te.data):t.texImage3D(n.TEXTURE_2D_ARRAY,pe,Ze,Te.width,Te.height,ve.depth,0,De,vt,Te.data)}else{N&&ye&&t.texStorage2D(n.TEXTURE_2D,Le,Ze,Ot[0].width,Ot[0].height);for(let pe=0,oe=Ot.length;pe<oe;pe++)Te=Ot[pe],_.format!==cr?De!==null?N?Se&&t.compressedTexSubImage2D(n.TEXTURE_2D,pe,0,0,Te.width,Te.height,De,Te.data):t.compressedTexImage2D(n.TEXTURE_2D,pe,Ze,Te.width,Te.height,0,Te.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):N?Se&&t.texSubImage2D(n.TEXTURE_2D,pe,0,0,Te.width,Te.height,De,vt,Te.data):t.texImage2D(n.TEXTURE_2D,pe,Ze,Te.width,Te.height,0,De,vt,Te.data)}else if(_.isDataArrayTexture)if(N){if(ye&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Le,Ze,ve.width,ve.height,ve.depth),Se)if(_.layerUpdates.size>0){let pe=m9(ve.width,ve.height,_.format,_.type);for(let oe of _.layerUpdates){let Ye=ve.data.subarray(oe*pe/ve.data.BYTES_PER_ELEMENT,(oe+1)*pe/ve.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,oe,ve.width,ve.height,1,De,vt,Ye)}_.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,ve.width,ve.height,ve.depth,De,vt,ve.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Ze,ve.width,ve.height,ve.depth,0,De,vt,ve.data);else if(_.isData3DTexture)N?(ye&&t.texStorage3D(n.TEXTURE_3D,Le,Ze,ve.width,ve.height,ve.depth),Se&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,ve.width,ve.height,ve.depth,De,vt,ve.data)):t.texImage3D(n.TEXTURE_3D,0,Ze,ve.width,ve.height,ve.depth,0,De,vt,ve.data);else if(_.isFramebufferTexture){if(ye)if(N)t.texStorage2D(n.TEXTURE_2D,Le,Ze,ve.width,ve.height);else{let pe=ve.width,oe=ve.height;for(let Ye=0;Ye<Le;Ye++)t.texImage2D(n.TEXTURE_2D,Ye,Ze,pe,oe,0,De,vt,null),pe>>=1,oe>>=1}}else if(Ot.length>0){if(N&&ye){let pe=oi(Ot[0]);t.texStorage2D(n.TEXTURE_2D,Le,Ze,pe.width,pe.height)}for(let pe=0,oe=Ot.length;pe<oe;pe++)Te=Ot[pe],N?Se&&t.texSubImage2D(n.TEXTURE_2D,pe,0,0,De,vt,Te):t.texImage2D(n.TEXTURE_2D,pe,Ze,De,vt,Te);_.generateMipmaps=!1}else if(N){if(ye){let pe=oi(ve);t.texStorage2D(n.TEXTURE_2D,Le,Ze,pe.width,pe.height)}Se&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,De,vt,ve)}else t.texImage2D(n.TEXTURE_2D,0,Ze,De,vt,ve);g(_)&&m(ie),Qe.__version=te.version,_.onUpdate&&_.onUpdate(_)}E.__version=_.version}function ue(E,_,U){if(_.image.length!==6)return;let ie=tn(E,_),he=_.source;t.bindTexture(n.TEXTURE_CUBE_MAP,E.__webglTexture,n.TEXTURE0+U);let te=i.get(he);if(he.version!==te.__version||ie===!0){t.activeTexture(n.TEXTURE0+U);let Qe=qt.getPrimaries(qt.workingColorSpace),xe=_.colorSpace===Bo?null:qt.getPrimaries(_.colorSpace),qe=_.colorSpace===Bo||Qe===xe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,_.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,_.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,_.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,qe);let Ke=_.isCompressedTexture||_.image[0].isCompressedTexture,ve=_.image[0]&&_.image[0].isDataTexture,De=[];for(let oe=0;oe<6;oe++)!Ke&&!ve?De[oe]=v(_.image[oe],!0,r.maxCubemapSize):De[oe]=ve?_.image[oe].image:_.image[oe],De[oe]=Ti(_,De[oe]);let vt=De[0],Ze=o.convert(_.format,_.colorSpace),Te=o.convert(_.type),Ot=w(_.internalFormat,Ze,Te,_.colorSpace),N=_.isVideoTexture!==!0,ye=te.__version===void 0||ie===!0,Se=he.dataReady,Le=z(_,vt);tt(n.TEXTURE_CUBE_MAP,_);let pe;if(Ke){N&&ye&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Le,Ot,vt.width,vt.height);for(let oe=0;oe<6;oe++){pe=De[oe].mipmaps;for(let Ye=0;Ye<pe.length;Ye++){let zt=pe[Ye];_.format!==cr?Ze!==null?N?Se&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Ye,0,0,zt.width,zt.height,Ze,zt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Ye,Ot,zt.width,zt.height,0,zt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):N?Se&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Ye,0,0,zt.width,zt.height,Ze,Te,zt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Ye,Ot,zt.width,zt.height,0,Ze,Te,zt.data)}}}else{if(pe=_.mipmaps,N&&ye){pe.length>0&&Le++;let oe=oi(De[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Le,Ot,oe.width,oe.height)}for(let oe=0;oe<6;oe++)if(ve){N?Se&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,0,0,0,De[oe].width,De[oe].height,Ze,Te,De[oe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,0,Ot,De[oe].width,De[oe].height,0,Ze,Te,De[oe].data);for(let Ye=0;Ye<pe.length;Ye++){let Nn=pe[Ye].image[oe].image;N?Se&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Ye+1,0,0,Nn.width,Nn.height,Ze,Te,Nn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Ye+1,Ot,Nn.width,Nn.height,0,Ze,Te,Nn.data)}}else{N?Se&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,0,0,0,Ze,Te,De[oe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,0,Ot,Ze,Te,De[oe]);for(let Ye=0;Ye<pe.length;Ye++){let zt=pe[Ye];N?Se&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Ye+1,0,0,Ze,Te,zt.image[oe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+oe,Ye+1,Ot,Ze,Te,zt.image[oe])}}}g(_)&&m(n.TEXTURE_CUBE_MAP),te.__version=he.version,_.onUpdate&&_.onUpdate(_)}E.__version=_.version}function Xe(E,_,U,ie,he,te){let Qe=o.convert(U.format,U.colorSpace),xe=o.convert(U.type),qe=w(U.internalFormat,Qe,xe,U.colorSpace),Ke=i.get(_),ve=i.get(U);if(ve.__renderTarget=_,!Ke.__hasExternalTextures){let De=Math.max(1,_.width>>te),vt=Math.max(1,_.height>>te);he===n.TEXTURE_3D||he===n.TEXTURE_2D_ARRAY?t.texImage3D(he,te,qe,De,vt,_.depth,0,Qe,xe,null):t.texImage2D(he,te,qe,De,vt,0,Qe,xe,null)}t.bindFramebuffer(n.FRAMEBUFFER,E),He(_)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ie,he,ve.__webglTexture,0,jn(_)):(he===n.TEXTURE_2D||he>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&he<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ie,he,ve.__webglTexture,te),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ve(E,_,U){if(n.bindRenderbuffer(n.RENDERBUFFER,E),_.depthBuffer){let ie=_.depthTexture,he=ie&&ie.isDepthTexture?ie.type:null,te=y(_.stencilBuffer,he),Qe=_.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,xe=jn(_);He(_)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,xe,te,_.width,_.height):U?n.renderbufferStorageMultisample(n.RENDERBUFFER,xe,te,_.width,_.height):n.renderbufferStorage(n.RENDERBUFFER,te,_.width,_.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Qe,n.RENDERBUFFER,E)}else{let ie=_.textures;for(let he=0;he<ie.length;he++){let te=ie[he],Qe=o.convert(te.format,te.colorSpace),xe=o.convert(te.type),qe=w(te.internalFormat,Qe,xe,te.colorSpace),Ke=jn(_);U&&He(_)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ke,qe,_.width,_.height):He(_)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ke,qe,_.width,_.height):n.renderbufferStorage(n.RENDERBUFFER,qe,_.width,_.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function gt(E,_){if(_&&_.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,E),!(_.depthTexture&&_.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let ie=i.get(_.depthTexture);ie.__renderTarget=_,(!ie.__webglTexture||_.depthTexture.image.width!==_.width||_.depthTexture.image.height!==_.height)&&(_.depthTexture.image.width=_.width,_.depthTexture.image.height=_.height,_.depthTexture.needsUpdate=!0),ee(_.depthTexture,0);let he=ie.__webglTexture,te=jn(_);if(_.depthTexture.format===T1)He(_)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,he,0,te):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,he,0);else if(_.depthTexture.format===j1)He(_)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,he,0,te):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,he,0);else throw new Error("Unknown depthTexture format")}function Vn(E){let _=i.get(E),U=E.isWebGLCubeRenderTarget===!0;if(_.__boundDepthTexture!==E.depthTexture){let ie=E.depthTexture;if(_.__depthDisposeCallback&&_.__depthDisposeCallback(),ie){let he=()=>{delete _.__boundDepthTexture,delete _.__depthDisposeCallback,ie.removeEventListener("dispose",he)};ie.addEventListener("dispose",he),_.__depthDisposeCallback=he}_.__boundDepthTexture=ie}if(E.depthTexture&&!_.__autoAllocateDepthBuffer){if(U)throw new Error("target.depthTexture not supported in Cube render targets");let ie=E.texture.mipmaps;ie&&ie.length>0?gt(_.__webglFramebuffer[0],E):gt(_.__webglFramebuffer,E)}else if(U){_.__webglDepthbuffer=[];for(let ie=0;ie<6;ie++)if(t.bindFramebuffer(n.FRAMEBUFFER,_.__webglFramebuffer[ie]),_.__webglDepthbuffer[ie]===void 0)_.__webglDepthbuffer[ie]=n.createRenderbuffer(),Ve(_.__webglDepthbuffer[ie],E,!1);else{let he=E.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,te=_.__webglDepthbuffer[ie];n.bindRenderbuffer(n.RENDERBUFFER,te),n.framebufferRenderbuffer(n.FRAMEBUFFER,he,n.RENDERBUFFER,te)}}else{let ie=E.texture.mipmaps;if(ie&&ie.length>0?t.bindFramebuffer(n.FRAMEBUFFER,_.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,_.__webglFramebuffer),_.__webglDepthbuffer===void 0)_.__webglDepthbuffer=n.createRenderbuffer(),Ve(_.__webglDepthbuffer,E,!1);else{let he=E.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,te=_.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,te),n.framebufferRenderbuffer(n.FRAMEBUFFER,he,n.RENDERBUFFER,te)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function nn(E,_,U){let ie=i.get(E);_!==void 0&&Xe(ie.__webglFramebuffer,E,E.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),U!==void 0&&Vn(E)}function P(E){let _=E.texture,U=i.get(E),ie=i.get(_);E.addEventListener("dispose",x);let he=E.textures,te=E.isWebGLCubeRenderTarget===!0,Qe=he.length>1;if(Qe||(ie.__webglTexture===void 0&&(ie.__webglTexture=n.createTexture()),ie.__version=_.version,s.memory.textures++),te){U.__webglFramebuffer=[];for(let xe=0;xe<6;xe++)if(_.mipmaps&&_.mipmaps.length>0){U.__webglFramebuffer[xe]=[];for(let qe=0;qe<_.mipmaps.length;qe++)U.__webglFramebuffer[xe][qe]=n.createFramebuffer()}else U.__webglFramebuffer[xe]=n.createFramebuffer()}else{if(_.mipmaps&&_.mipmaps.length>0){U.__webglFramebuffer=[];for(let xe=0;xe<_.mipmaps.length;xe++)U.__webglFramebuffer[xe]=n.createFramebuffer()}else U.__webglFramebuffer=n.createFramebuffer();if(Qe)for(let xe=0,qe=he.length;xe<qe;xe++){let Ke=i.get(he[xe]);Ke.__webglTexture===void 0&&(Ke.__webglTexture=n.createTexture(),s.memory.textures++)}if(E.samples>0&&He(E)===!1){U.__webglMultisampledFramebuffer=n.createFramebuffer(),U.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,U.__webglMultisampledFramebuffer);for(let xe=0;xe<he.length;xe++){let qe=he[xe];U.__webglColorRenderbuffer[xe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,U.__webglColorRenderbuffer[xe]);let Ke=o.convert(qe.format,qe.colorSpace),ve=o.convert(qe.type),De=w(qe.internalFormat,Ke,ve,qe.colorSpace,E.isXRRenderTarget===!0),vt=jn(E);n.renderbufferStorageMultisample(n.RENDERBUFFER,vt,De,E.width,E.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+xe,n.RENDERBUFFER,U.__webglColorRenderbuffer[xe])}n.bindRenderbuffer(n.RENDERBUFFER,null),E.depthBuffer&&(U.__webglDepthRenderbuffer=n.createRenderbuffer(),Ve(U.__webglDepthRenderbuffer,E,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(te){t.bindTexture(n.TEXTURE_CUBE_MAP,ie.__webglTexture),tt(n.TEXTURE_CUBE_MAP,_);for(let xe=0;xe<6;xe++)if(_.mipmaps&&_.mipmaps.length>0)for(let qe=0;qe<_.mipmaps.length;qe++)Xe(U.__webglFramebuffer[xe][qe],E,_,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,qe);else Xe(U.__webglFramebuffer[xe],E,_,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0);g(_)&&m(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Qe){for(let xe=0,qe=he.length;xe<qe;xe++){let Ke=he[xe],ve=i.get(Ke),De=n.TEXTURE_2D;(E.isWebGL3DRenderTarget||E.isWebGLArrayRenderTarget)&&(De=E.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(De,ve.__webglTexture),tt(De,Ke),Xe(U.__webglFramebuffer,E,Ke,n.COLOR_ATTACHMENT0+xe,De,0),g(Ke)&&m(De)}t.unbindTexture()}else{let xe=n.TEXTURE_2D;if((E.isWebGL3DRenderTarget||E.isWebGLArrayRenderTarget)&&(xe=E.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(xe,ie.__webglTexture),tt(xe,_),_.mipmaps&&_.mipmaps.length>0)for(let qe=0;qe<_.mipmaps.length;qe++)Xe(U.__webglFramebuffer[qe],E,_,n.COLOR_ATTACHMENT0,xe,qe);else Xe(U.__webglFramebuffer,E,_,n.COLOR_ATTACHMENT0,xe,0);g(_)&&m(xe),t.unbindTexture()}E.depthBuffer&&Vn(E)}function kn(E){let _=E.textures;for(let U=0,ie=_.length;U<ie;U++){let he=_[U];if(g(he)){let te=C(E),Qe=i.get(he).__webglTexture;t.bindTexture(te,Qe),m(te),t.unbindTexture()}}}let at=[],cn=[];function et(E){if(E.samples>0){if(He(E)===!1){let _=E.textures,U=E.width,ie=E.height,he=n.COLOR_BUFFER_BIT,te=E.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Qe=i.get(E),xe=_.length>1;if(xe)for(let Ke=0;Ke<_.length;Ke++)t.bindFramebuffer(n.FRAMEBUFFER,Qe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ke,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Qe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ke,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Qe.__webglMultisampledFramebuffer);let qe=E.texture.mipmaps;qe&&qe.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Qe.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Qe.__webglFramebuffer);for(let Ke=0;Ke<_.length;Ke++){if(E.resolveDepthBuffer&&(E.depthBuffer&&(he|=n.DEPTH_BUFFER_BIT),E.stencilBuffer&&E.resolveStencilBuffer&&(he|=n.STENCIL_BUFFER_BIT)),xe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Qe.__webglColorRenderbuffer[Ke]);let ve=i.get(_[Ke]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,ve,0)}n.blitFramebuffer(0,0,U,ie,0,0,U,ie,he,n.NEAREST),c===!0&&(at.length=0,cn.length=0,at.push(n.COLOR_ATTACHMENT0+Ke),E.depthBuffer&&E.resolveDepthBuffer===!1&&(at.push(te),cn.push(te),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,cn)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,at))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),xe)for(let Ke=0;Ke<_.length;Ke++){t.bindFramebuffer(n.FRAMEBUFFER,Qe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ke,n.RENDERBUFFER,Qe.__webglColorRenderbuffer[Ke]);let ve=i.get(_[Ke]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Qe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ke,n.TEXTURE_2D,ve,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Qe.__webglMultisampledFramebuffer)}else if(E.depthBuffer&&E.resolveDepthBuffer===!1&&c){let _=E.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[_])}}}function jn(E){return Math.min(r.maxSamples,E.samples)}function He(E){let _=i.get(E);return E.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&_.__useRenderToTexture!==!1}function Ht(E){let _=s.render.frame;u.get(E)!==_&&(u.set(E,_),E.update())}function Ti(E,_){let U=E.colorSpace,ie=E.format,he=E.type;return E.isCompressedTexture===!0||E.isVideoTexture===!0||U!==Vi&&U!==Bo&&(qt.getTransfer(U)===yn?(ie!==cr||he!==Ho)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",U)),_}function oi(E){return typeof HTMLImageElement<"u"&&E instanceof HTMLImageElement?(l.width=E.naturalWidth||E.width,l.height=E.naturalHeight||E.height):typeof VideoFrame<"u"&&E instanceof VideoFrame?(l.width=E.displayWidth,l.height=E.displayHeight):(l.width=E.width,l.height=E.height),l}this.allocateTextureUnit=K,this.resetTextureUnits=J,this.setTexture2D=ee,this.setTexture2DArray=L,this.setTexture3D=B,this.setTextureCube=F,this.rebindTextures=nn,this.setupRenderTarget=P,this.updateRenderTargetMipmap=kn,this.updateMultisampleRenderTarget=et,this.setupDepthRenderbuffer=Vn,this.setupFrameBufferTexture=Xe,this.useMultisampledRTT=He}function qZ(n,e){function t(i,r=Bo){let o,s=qt.getTransfer(r);if(i===Ho)return n.UNSIGNED_BYTE;if(i===Cp)return n.UNSIGNED_SHORT_4_4_4_4;if(i===Tp)return n.UNSIGNED_SHORT_5_5_5_1;if(i===t9)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===Jv)return n.BYTE;if(i===e9)return n.SHORT;if(i===B1)return n.UNSIGNED_SHORT;if(i===wp)return n.INT;if(i===cc)return n.UNSIGNED_INT;if(i===uo)return n.FLOAT;if(i===U1)return n.HALF_FLOAT;if(i===n9)return n.ALPHA;if(i===i9)return n.RGB;if(i===cr)return n.RGBA;if(i===T1)return n.DEPTH_COMPONENT;if(i===j1)return n.DEPTH_STENCIL;if(i===Ep)return n.RED;if(i===Dp)return n.RED_INTEGER;if(i===r9)return n.RG;if(i===zp)return n.RG_INTEGER;if(i===Ap)return n.RGBA_INTEGER;if(i===y0||i===_0||i===b0||i===x0)if(s===yn)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(i===y0)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===_0)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===b0)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===x0)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(i===y0)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===_0)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===b0)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===x0)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Ip||i===Pp||i===Rp||i===kp)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(i===Ip)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Pp)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Rp)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===kp)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Np||i===Op||i===Lp)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(i===Np||i===Op)return s===yn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(i===Lp)return s===yn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===Fp||i===Vp||i===Hp||i===Bp||i===Up||i===Yp||i===jp||i===Gp||i===Wp||i===$p||i===qp||i===Xp||i===Kp||i===Zp)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(i===Fp)return s===yn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Vp)return s===yn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Hp)return s===yn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Bp)return s===yn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Up)return s===yn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Yp)return s===yn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===jp)return s===yn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Gp)return s===yn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Wp)return s===yn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===$p)return s===yn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===qp)return s===yn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Xp)return s===yn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Kp)return s===yn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Zp)return s===yn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===M0||i===Qp||i===Jp)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(i===M0)return s===yn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Qp)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Jp)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===o9||i===e8||i===t8||i===n8)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(i===M0)return o.COMPRESSED_RED_RGTC1_EXT;if(i===e8)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===t8)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===n8)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Y1?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}var a8=class extends zr{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}},XZ=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,KZ=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,D9=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){let i=new a8(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){let t=e.cameras[0].viewport,i=new Vo({vertexShader:XZ,fragmentShader:KZ,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new ri(new u0(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},z9=class extends ps{constructor(e,t){super();let i=this,r=null,o=1,s=null,a="local-floor",c=1,l=null,u=null,d=null,h=null,f=null,p=null,v=new D9,g={},m=t.getContextAttributes(),C=null,w=null,y=[],z=[],D=new mt,x=null,I=new ii;I.viewport=new an;let S=new ii;S.viewport=new an;let M=[I,S],A=new fp,J=null,K=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ne){let we=y[ne];return we===void 0&&(we=new z1,y[ne]=we),we.getTargetRaySpace()},this.getControllerGrip=function(ne){let we=y[ne];return we===void 0&&(we=new z1,y[ne]=we),we.getGripSpace()},this.getHand=function(ne){let we=y[ne];return we===void 0&&(we=new z1,y[ne]=we),we.getHandSpace()};function Q(ne){let we=z.indexOf(ne.inputSource);if(we===-1)return;let ue=y[we];ue!==void 0&&(ue.update(ne.inputSource,ne.frame,l||s),ue.dispatchEvent({type:ne.type,data:ne.inputSource}))}function ee(){r.removeEventListener("select",Q),r.removeEventListener("selectstart",Q),r.removeEventListener("selectend",Q),r.removeEventListener("squeeze",Q),r.removeEventListener("squeezestart",Q),r.removeEventListener("squeezeend",Q),r.removeEventListener("end",ee),r.removeEventListener("inputsourceschange",L);for(let ne=0;ne<y.length;ne++){let we=z[ne];we!==null&&(z[ne]=null,y[ne].disconnect(we))}J=null,K=null,v.reset();for(let ne in g)delete g[ne];e.setRenderTarget(C),f=null,h=null,d=null,r=null,w=null,st.stop(),i.isPresenting=!1,e.setPixelRatio(x),e.setSize(D.width,D.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ne){o=ne,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ne){a=ne,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(ne){l=ne},this.getBaseLayer=function(){return h!==null?h:f},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=function(ne){return Xt(this,null,function*(){if(r=ne,r!==null){if(C=e.getRenderTarget(),r.addEventListener("select",Q),r.addEventListener("selectstart",Q),r.addEventListener("selectend",Q),r.addEventListener("squeeze",Q),r.addEventListener("squeezestart",Q),r.addEventListener("squeezeend",Q),r.addEventListener("end",ee),r.addEventListener("inputsourceschange",L),m.xrCompatible!==!0&&(yield t.makeXRCompatible()),x=e.getPixelRatio(),e.getSize(D),typeof XRWebGLBinding<"u"&&(d=new XRWebGLBinding(r,t)),d!==null&&"createProjectionLayer"in XRWebGLBinding.prototype){let ue=null,Xe=null,Ve=null;m.depth&&(Ve=m.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ue=m.stencil?j1:T1,Xe=m.stencil?Y1:cc);let gt={colorFormat:t.RGBA8,depthFormat:Ve,scaleFactor:o};h=d.createProjectionLayer(gt),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),w=new ms(h.textureWidth,h.textureHeight,{format:cr,type:Ho,depthTexture:new l0(h.textureWidth,h.textureHeight,Xe,void 0,void 0,void 0,void 0,void 0,void 0,ue),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1,resolveStencilBuffer:h.ignoreDepthValues===!1})}else{let ue={antialias:m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:o};f=new XRWebGLLayer(r,t,ue),r.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),w=new ms(f.framebufferWidth,f.framebufferHeight,{format:cr,type:Ho,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil,resolveDepthBuffer:f.ignoreDepthValues===!1,resolveStencilBuffer:f.ignoreDepthValues===!1})}w.isXRRenderTarget=!0,this.setFoveation(c),l=null,s=yield r.requestReferenceSpace(a),st.setContext(r),st.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};function L(ne){for(let we=0;we<ne.removed.length;we++){let ue=ne.removed[we],Xe=z.indexOf(ue);Xe>=0&&(z[Xe]=null,y[Xe].disconnect(ue))}for(let we=0;we<ne.added.length;we++){let ue=ne.added[we],Xe=z.indexOf(ue);if(Xe===-1){for(let gt=0;gt<y.length;gt++)if(gt>=z.length){z.push(ue),Xe=gt;break}else if(z[gt]===null){z[gt]=ue,Xe=gt;break}if(Xe===-1)break}let Ve=y[Xe];Ve&&Ve.connect(ue)}}let B=new k,F=new k;function ae(ne,we,ue){B.setFromMatrixPosition(we.matrixWorld),F.setFromMatrixPosition(ue.matrixWorld);let Xe=B.distanceTo(F),Ve=we.projectionMatrix.elements,gt=ue.projectionMatrix.elements,Vn=Ve[14]/(Ve[10]-1),nn=Ve[14]/(Ve[10]+1),P=(Ve[9]+1)/Ve[5],kn=(Ve[9]-1)/Ve[5],at=(Ve[8]-1)/Ve[0],cn=(gt[8]+1)/gt[0],et=Vn*at,jn=Vn*cn,He=Xe/(-at+cn),Ht=He*-at;if(we.matrixWorld.decompose(ne.position,ne.quaternion,ne.scale),ne.translateX(Ht),ne.translateZ(He),ne.matrixWorld.compose(ne.position,ne.quaternion,ne.scale),ne.matrixWorldInverse.copy(ne.matrixWorld).invert(),Ve[10]===-1)ne.projectionMatrix.copy(we.projectionMatrix),ne.projectionMatrixInverse.copy(we.projectionMatrixInverse);else{let Ti=Vn+He,oi=nn+He,E=et-Ht,_=jn+(Xe-Ht),U=P*nn/oi*Ti,ie=kn*nn/oi*Ti;ne.projectionMatrix.makePerspective(E,_,U,ie,Ti,oi),ne.projectionMatrixInverse.copy(ne.projectionMatrix).invert()}}function be(ne,we){we===null?ne.matrixWorld.copy(ne.matrix):ne.matrixWorld.multiplyMatrices(we.matrixWorld,ne.matrix),ne.matrixWorldInverse.copy(ne.matrixWorld).invert()}this.updateCamera=function(ne){if(r===null)return;let we=ne.near,ue=ne.far;v.texture!==null&&(v.depthNear>0&&(we=v.depthNear),v.depthFar>0&&(ue=v.depthFar)),A.near=S.near=I.near=we,A.far=S.far=I.far=ue,(J!==A.near||K!==A.far)&&(r.updateRenderState({depthNear:A.near,depthFar:A.far}),J=A.near,K=A.far),A.layers.mask=ne.layers.mask|6,I.layers.mask=A.layers.mask&3,S.layers.mask=A.layers.mask&5;let Xe=ne.parent,Ve=A.cameras;be(A,Xe);for(let gt=0;gt<Ve.length;gt++)be(Ve[gt],Xe);Ve.length===2?ae(A,I,S):A.projectionMatrix.copy(I.projectionMatrix),Ne(ne,A,Xe)};function Ne(ne,we,ue){ue===null?ne.matrix.copy(we.matrixWorld):(ne.matrix.copy(ue.matrixWorld),ne.matrix.invert(),ne.matrix.multiply(we.matrixWorld)),ne.matrix.decompose(ne.position,ne.quaternion,ne.scale),ne.updateMatrixWorld(!0),ne.projectionMatrix.copy(we.projectionMatrix),ne.projectionMatrixInverse.copy(we.projectionMatrixInverse),ne.isPerspectiveCamera&&(ne.fov=fl*2*Math.atan(1/ne.projectionMatrix.elements[5]),ne.zoom=1)}this.getCamera=function(){return A},this.getFoveation=function(){if(!(h===null&&f===null))return c},this.setFoveation=function(ne){c=ne,h!==null&&(h.fixedFoveation=ne),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=ne)},this.hasDepthSensing=function(){return v.texture!==null},this.getDepthSensingMesh=function(){return v.getMesh(A)},this.getCameraTexture=function(ne){return g[ne]};let tt=null;function tn(ne,we){if(u=we.getViewerPose(l||s),p=we,u!==null){let ue=u.views;f!==null&&(e.setRenderTargetFramebuffer(w,f.framebuffer),e.setRenderTarget(w));let Xe=!1;ue.length!==A.cameras.length&&(A.cameras.length=0,Xe=!0);for(let nn=0;nn<ue.length;nn++){let P=ue[nn],kn=null;if(f!==null)kn=f.getViewport(P);else{let cn=d.getViewSubImage(h,P);kn=cn.viewport,nn===0&&(e.setRenderTargetTextures(w,cn.colorTexture,cn.depthStencilTexture),e.setRenderTarget(w))}let at=M[nn];at===void 0&&(at=new ii,at.layers.enable(nn),at.viewport=new an,M[nn]=at),at.matrix.fromArray(P.transform.matrix),at.matrix.decompose(at.position,at.quaternion,at.scale),at.projectionMatrix.fromArray(P.projectionMatrix),at.projectionMatrixInverse.copy(at.projectionMatrix).invert(),at.viewport.set(kn.x,kn.y,kn.width,kn.height),nn===0&&(A.matrix.copy(at.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale)),Xe===!0&&A.cameras.push(at)}let Ve=r.enabledFeatures;if(Ve&&Ve.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&d){let nn=d.getDepthInformation(ue[0]);nn&&nn.isValid&&nn.texture&&v.init(nn,r.renderState)}if(Ve&&Ve.includes("camera-access")&&(e.state.unbindTexture(),d))for(let nn=0;nn<ue.length;nn++){let P=ue[nn].camera;if(P){let kn=g[P];kn||(kn=new a8,g[P]=kn);let at=d.getCameraImage(P);kn.sourceTexture=at}}}for(let ue=0;ue<y.length;ue++){let Xe=z[ue],Ve=y[ue];Xe!==null&&Ve!==void 0&&Ve.update(Xe,we,l||s)}tt&&tt(ne,we),we.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:we}),p=null}let st=new bI;st.setAnimationLoop(tn),this.setAnimationLoop=function(ne){tt=ne},this.dispose=function(){}}},El=new nc,ZZ=new Dt;function QZ(n,e){function t(g,m){g.matrixAutoUpdate===!0&&g.updateMatrix(),m.value.copy(g.matrix)}function i(g,m){m.color.getRGB(g.fogColor.value,h9(n)),m.isFog?(g.fogNear.value=m.near,g.fogFar.value=m.far):m.isFogExp2&&(g.fogDensity.value=m.density)}function r(g,m,C,w,y){m.isMeshBasicMaterial||m.isMeshLambertMaterial?o(g,m):m.isMeshToonMaterial?(o(g,m),d(g,m)):m.isMeshPhongMaterial?(o(g,m),u(g,m)):m.isMeshStandardMaterial?(o(g,m),h(g,m),m.isMeshPhysicalMaterial&&f(g,m,y)):m.isMeshMatcapMaterial?(o(g,m),p(g,m)):m.isMeshDepthMaterial?o(g,m):m.isMeshDistanceMaterial?(o(g,m),v(g,m)):m.isMeshNormalMaterial?o(g,m):m.isLineBasicMaterial?(s(g,m),m.isLineDashedMaterial&&a(g,m)):m.isPointsMaterial?c(g,m,C,w):m.isSpriteMaterial?l(g,m):m.isShadowMaterial?(g.color.value.copy(m.color),g.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function o(g,m){g.opacity.value=m.opacity,m.color&&g.diffuse.value.copy(m.color),m.emissive&&g.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(g.map.value=m.map,t(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,t(m.alphaMap,g.alphaMapTransform)),m.bumpMap&&(g.bumpMap.value=m.bumpMap,t(m.bumpMap,g.bumpMapTransform),g.bumpScale.value=m.bumpScale,m.side===ar&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,t(m.normalMap,g.normalMapTransform),g.normalScale.value.copy(m.normalScale),m.side===ar&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,t(m.displacementMap,g.displacementMapTransform),g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap,t(m.emissiveMap,g.emissiveMapTransform)),m.specularMap&&(g.specularMap.value=m.specularMap,t(m.specularMap,g.specularMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest);let C=e.get(m),w=C.envMap,y=C.envMapRotation;w&&(g.envMap.value=w,El.copy(y),El.x*=-1,El.y*=-1,El.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(El.y*=-1,El.z*=-1),g.envMapRotation.value.setFromMatrix4(ZZ.makeRotationFromEuler(El)),g.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=m.reflectivity,g.ior.value=m.ior,g.refractionRatio.value=m.refractionRatio),m.lightMap&&(g.lightMap.value=m.lightMap,g.lightMapIntensity.value=m.lightMapIntensity,t(m.lightMap,g.lightMapTransform)),m.aoMap&&(g.aoMap.value=m.aoMap,g.aoMapIntensity.value=m.aoMapIntensity,t(m.aoMap,g.aoMapTransform))}function s(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,m.map&&(g.map.value=m.map,t(m.map,g.mapTransform))}function a(g,m){g.dashSize.value=m.dashSize,g.totalSize.value=m.dashSize+m.gapSize,g.scale.value=m.scale}function c(g,m,C,w){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.size.value=m.size*C,g.scale.value=w*.5,m.map&&(g.map.value=m.map,t(m.map,g.uvTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,t(m.alphaMap,g.alphaMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}function l(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.rotation.value=m.rotation,m.map&&(g.map.value=m.map,t(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,t(m.alphaMap,g.alphaMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}function u(g,m){g.specular.value.copy(m.specular),g.shininess.value=Math.max(m.shininess,1e-4)}function d(g,m){m.gradientMap&&(g.gradientMap.value=m.gradientMap)}function h(g,m){g.metalness.value=m.metalness,m.metalnessMap&&(g.metalnessMap.value=m.metalnessMap,t(m.metalnessMap,g.metalnessMapTransform)),g.roughness.value=m.roughness,m.roughnessMap&&(g.roughnessMap.value=m.roughnessMap,t(m.roughnessMap,g.roughnessMapTransform)),m.envMap&&(g.envMapIntensity.value=m.envMapIntensity)}function f(g,m,C){g.ior.value=m.ior,m.sheen>0&&(g.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),g.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(g.sheenColorMap.value=m.sheenColorMap,t(m.sheenColorMap,g.sheenColorMapTransform)),m.sheenRoughnessMap&&(g.sheenRoughnessMap.value=m.sheenRoughnessMap,t(m.sheenRoughnessMap,g.sheenRoughnessMapTransform))),m.clearcoat>0&&(g.clearcoat.value=m.clearcoat,g.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(g.clearcoatMap.value=m.clearcoatMap,t(m.clearcoatMap,g.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,t(m.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(g.clearcoatNormalMap.value=m.clearcoatNormalMap,t(m.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===ar&&g.clearcoatNormalScale.value.negate())),m.dispersion>0&&(g.dispersion.value=m.dispersion),m.iridescence>0&&(g.iridescence.value=m.iridescence,g.iridescenceIOR.value=m.iridescenceIOR,g.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(g.iridescenceMap.value=m.iridescenceMap,t(m.iridescenceMap,g.iridescenceMapTransform)),m.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=m.iridescenceThicknessMap,t(m.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),m.transmission>0&&(g.transmission.value=m.transmission,g.transmissionSamplerMap.value=C.texture,g.transmissionSamplerSize.value.set(C.width,C.height),m.transmissionMap&&(g.transmissionMap.value=m.transmissionMap,t(m.transmissionMap,g.transmissionMapTransform)),g.thickness.value=m.thickness,m.thicknessMap&&(g.thicknessMap.value=m.thicknessMap,t(m.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=m.attenuationDistance,g.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(g.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(g.anisotropyMap.value=m.anisotropyMap,t(m.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=m.specularIntensity,g.specularColor.value.copy(m.specularColor),m.specularColorMap&&(g.specularColorMap.value=m.specularColorMap,t(m.specularColorMap,g.specularColorMapTransform)),m.specularIntensityMap&&(g.specularIntensityMap.value=m.specularIntensityMap,t(m.specularIntensityMap,g.specularIntensityMapTransform))}function p(g,m){m.matcap&&(g.matcap.value=m.matcap)}function v(g,m){let C=e.get(m).light;g.referencePosition.value.setFromMatrixPosition(C.matrixWorld),g.nearDistance.value=C.shadow.camera.near,g.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function JZ(n,e,t,i){let r={},o={},s=[],a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(C,w){let y=w.program;i.uniformBlockBinding(C,y)}function l(C,w){let y=r[C.id];y===void 0&&(p(C),y=u(C),r[C.id]=y,C.addEventListener("dispose",g));let z=w.program;i.updateUBOMapping(C,z);let D=e.render.frame;o[C.id]!==D&&(h(C),o[C.id]=D)}function u(C){let w=d();C.__bindingPointIndex=w;let y=n.createBuffer(),z=C.__size,D=C.usage;return n.bindBuffer(n.UNIFORM_BUFFER,y),n.bufferData(n.UNIFORM_BUFFER,z,D),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,w,y),y}function d(){for(let C=0;C<a;C++)if(s.indexOf(C)===-1)return s.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(C){let w=r[C.id],y=C.uniforms,z=C.__cache;n.bindBuffer(n.UNIFORM_BUFFER,w);for(let D=0,x=y.length;D<x;D++){let I=Array.isArray(y[D])?y[D]:[y[D]];for(let S=0,M=I.length;S<M;S++){let A=I[S];if(f(A,D,S,z)===!0){let J=A.__offset,K=Array.isArray(A.value)?A.value:[A.value],Q=0;for(let ee=0;ee<K.length;ee++){let L=K[ee],B=v(L);typeof L=="number"||typeof L=="boolean"?(A.__data[0]=L,n.bufferSubData(n.UNIFORM_BUFFER,J+Q,A.__data)):L.isMatrix3?(A.__data[0]=L.elements[0],A.__data[1]=L.elements[1],A.__data[2]=L.elements[2],A.__data[3]=0,A.__data[4]=L.elements[3],A.__data[5]=L.elements[4],A.__data[6]=L.elements[5],A.__data[7]=0,A.__data[8]=L.elements[6],A.__data[9]=L.elements[7],A.__data[10]=L.elements[8],A.__data[11]=0):(L.toArray(A.__data,Q),Q+=B.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,J,A.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function f(C,w,y,z){let D=C.value,x=w+"_"+y;if(z[x]===void 0)return typeof D=="number"||typeof D=="boolean"?z[x]=D:z[x]=D.clone(),!0;{let I=z[x];if(typeof D=="number"||typeof D=="boolean"){if(I!==D)return z[x]=D,!0}else if(I.equals(D)===!1)return I.copy(D),!0}return!1}function p(C){let w=C.uniforms,y=0,z=16;for(let x=0,I=w.length;x<I;x++){let S=Array.isArray(w[x])?w[x]:[w[x]];for(let M=0,A=S.length;M<A;M++){let J=S[M],K=Array.isArray(J.value)?J.value:[J.value];for(let Q=0,ee=K.length;Q<ee;Q++){let L=K[Q],B=v(L),F=y%z,ae=F%B.boundary,be=F+ae;y+=ae,be!==0&&z-be<B.storage&&(y+=z-be),J.__data=new Float32Array(B.storage/Float32Array.BYTES_PER_ELEMENT),J.__offset=y,y+=B.storage}}}let D=y%z;return D>0&&(y+=z-D),C.__size=y,C.__cache={},this}function v(C){let w={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(w.boundary=4,w.storage=4):C.isVector2?(w.boundary=8,w.storage=8):C.isVector3||C.isColor?(w.boundary=16,w.storage=12):C.isVector4?(w.boundary=16,w.storage=16):C.isMatrix3?(w.boundary=48,w.storage=48):C.isMatrix4?(w.boundary=64,w.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),w}function g(C){let w=C.target;w.removeEventListener("dispose",g);let y=s.indexOf(w.__bindingPointIndex);s.splice(y,1),n.deleteBuffer(r[w.id]),delete r[w.id],delete o[w.id]}function m(){for(let C in r)n.deleteBuffer(r[C]);s=[],r={},o={}}return{bind:c,update:l,dispose:m}}var X1=class{constructor(e={}){let{canvas:t=GA(),context:i=null,depth:r=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:l=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reversedDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let f;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");f=i.getContextAttributes().alpha}else f=s;let p=new Uint32Array(4),v=new Int32Array(4),g=null,m=null,C=[],w=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=sa,this.toneMappingExposure=1,this.transmissionResolutionScale=1;let y=this,z=!1;this._outputColorSpace=Zn;let D=0,x=0,I=null,S=-1,M=null,A=new an,J=new an,K=null,Q=new ot(0),ee=0,L=t.width,B=t.height,F=1,ae=null,be=null,Ne=new an(0,0,L,B),tt=new an(0,0,L,B),tn=!1,st=new R1,ne=!1,we=!1,ue=new Dt,Xe=new k,Ve=new an,gt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},Vn=!1;function nn(){return I===null?F:1}let P=i;function kn(b,V){return t.getContext(b,V)}try{let b={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${F1}`),t.addEventListener("webglcontextlost",Se,!1),t.addEventListener("webglcontextrestored",Le,!1),t.addEventListener("webglcontextcreationerror",pe,!1),P===null){let V="webgl2";if(P=kn(V,b),P===null)throw kn(V)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(b){throw console.error("THREE.WebGLRenderer: "+b.message),b}let at,cn,et,jn,He,Ht,Ti,oi,E,_,U,ie,he,te,Qe,xe,qe,Ke,ve,De,vt,Ze,Te,Ot;function N(){at=new vK(P),at.init(),Ze=new qZ(P,at),cn=new uK(P,at,e,Ze),et=new WZ(P,at),cn.reversedDepthBuffer&&h&&et.buffers.depth.setReversed(!0),jn=new bK(P),He=new RZ,Ht=new $Z(P,at,et,He,cn,Ze,jn),Ti=new hK(y),oi=new gK(y),E=new T$(P),Te=new cK(P,E),_=new yK(P,E,jn,Te),U=new MK(P,_,E,jn),ve=new xK(P,cn,Ht),xe=new dK(He),ie=new PZ(y,Ti,oi,at,cn,Te,xe),he=new QZ(y,He),te=new NZ,Qe=new BZ(at),Ke=new aK(y,Ti,oi,et,U,f,c),qe=new jZ(y,U,cn),Ot=new JZ(P,jn,cn,et),De=new lK(P,at,jn),vt=new _K(P,at,jn),jn.programs=ie.programs,y.capabilities=cn,y.extensions=at,y.properties=He,y.renderLists=te,y.shadowMap=qe,y.state=et,y.info=jn}N();let ye=new z9(y,P);this.xr=ye,this.getContext=function(){return P},this.getContextAttributes=function(){return P.getContextAttributes()},this.forceContextLoss=function(){let b=at.get("WEBGL_lose_context");b&&b.loseContext()},this.forceContextRestore=function(){let b=at.get("WEBGL_lose_context");b&&b.restoreContext()},this.getPixelRatio=function(){return F},this.setPixelRatio=function(b){b!==void 0&&(F=b,this.setSize(L,B,!1))},this.getSize=function(b){return b.set(L,B)},this.setSize=function(b,V,W=!0){if(ye.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}L=b,B=V,t.width=Math.floor(b*F),t.height=Math.floor(V*F),W===!0&&(t.style.width=b+"px",t.style.height=V+"px"),this.setViewport(0,0,b,V)},this.getDrawingBufferSize=function(b){return b.set(L*F,B*F).floor()},this.setDrawingBufferSize=function(b,V,W){L=b,B=V,F=W,t.width=Math.floor(b*W),t.height=Math.floor(V*W),this.setViewport(0,0,b,V)},this.getCurrentViewport=function(b){return b.copy(A)},this.getViewport=function(b){return b.copy(Ne)},this.setViewport=function(b,V,W,X){b.isVector4?Ne.set(b.x,b.y,b.z,b.w):Ne.set(b,V,W,X),et.viewport(A.copy(Ne).multiplyScalar(F).round())},this.getScissor=function(b){return b.copy(tt)},this.setScissor=function(b,V,W,X){b.isVector4?tt.set(b.x,b.y,b.z,b.w):tt.set(b,V,W,X),et.scissor(J.copy(tt).multiplyScalar(F).round())},this.getScissorTest=function(){return tn},this.setScissorTest=function(b){et.setScissorTest(tn=b)},this.setOpaqueSort=function(b){ae=b},this.setTransparentSort=function(b){be=b},this.getClearColor=function(b){return b.copy(Ke.getClearColor())},this.setClearColor=function(){Ke.setClearColor(...arguments)},this.getClearAlpha=function(){return Ke.getClearAlpha()},this.setClearAlpha=function(){Ke.setClearAlpha(...arguments)},this.clear=function(b=!0,V=!0,W=!0){let X=0;if(b){let H=!1;if(I!==null){let ge=I.texture.format;H=ge===Ap||ge===zp||ge===Dp}if(H){let ge=I.texture.type,Ee=ge===Ho||ge===cc||ge===B1||ge===Y1||ge===Cp||ge===Tp,Be=Ke.getClearColor(),Ie=Ke.getClearAlpha(),ft=Be.r,bt=Be.g,nt=Be.b;Ee?(p[0]=ft,p[1]=bt,p[2]=nt,p[3]=Ie,P.clearBufferuiv(P.COLOR,0,p)):(v[0]=ft,v[1]=bt,v[2]=nt,v[3]=Ie,P.clearBufferiv(P.COLOR,0,v))}else X|=P.COLOR_BUFFER_BIT}V&&(X|=P.DEPTH_BUFFER_BIT),W&&(X|=P.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),P.clear(X)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Se,!1),t.removeEventListener("webglcontextrestored",Le,!1),t.removeEventListener("webglcontextcreationerror",pe,!1),Ke.dispose(),te.dispose(),Qe.dispose(),He.dispose(),Ti.dispose(),oi.dispose(),U.dispose(),Te.dispose(),Ot.dispose(),ie.dispose(),ye.dispose(),ye.removeEventListener("sessionstart",Uo),ye.removeEventListener("sessionend",By),dc.stop()};function Se(b){b.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),z=!0}function Le(){console.log("THREE.WebGLRenderer: Context Restored."),z=!1;let b=jn.autoReset,V=qe.enabled,W=qe.autoUpdate,X=qe.needsUpdate,H=qe.type;N(),jn.autoReset=b,qe.enabled=V,qe.autoUpdate=W,qe.needsUpdate=X,qe.type=H}function pe(b){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",b.statusMessage)}function oe(b){let V=b.target;V.removeEventListener("dispose",oe),Ye(V)}function Ye(b){zt(b),He.remove(b)}function zt(b){let V=He.get(b).programs;V!==void 0&&(V.forEach(function(W){ie.releaseProgram(W)}),b.isShaderMaterial&&ie.releaseShaderCache(b))}this.renderBufferDirect=function(b,V,W,X,H,ge){V===null&&(V=gt);let Ee=H.isMesh&&H.matrixWorld.determinant()<0,Be=BP(b,V,W,X,H);et.setMaterial(X,Ee);let Ie=W.index,ft=1;if(X.wireframe===!0){if(Ie=_.getWireframeAttribute(W),Ie===void 0)return;ft=2}let bt=W.drawRange,nt=W.attributes.position,Gt=bt.start*ft,bn=(bt.start+bt.count)*ft;ge!==null&&(Gt=Math.max(Gt,ge.start*ft),bn=Math.min(bn,(ge.start+ge.count)*ft)),Ie!==null?(Gt=Math.max(Gt,0),bn=Math.min(bn,Ie.count)):nt!=null&&(Gt=Math.max(Gt,0),bn=Math.min(bn,nt.count));let Qn=bn-Gt;if(Qn<0||Qn===1/0)return;Te.setup(H,X,Be,W,Ie);let Hn,En=De;if(Ie!==null&&(Hn=E.get(Ie),En=vt,En.setIndex(Hn)),H.isMesh)X.wireframe===!0?(et.setLineWidth(X.wireframeLinewidth*nn()),En.setMode(P.LINES)):En.setMode(P.TRIANGLES);else if(H.isLine){let ct=X.linewidth;ct===void 0&&(ct=1),et.setLineWidth(ct*nn()),H.isLineSegments?En.setMode(P.LINES):H.isLineLoop?En.setMode(P.LINE_LOOP):En.setMode(P.LINE_STRIP)}else H.isPoints?En.setMode(P.POINTS):H.isSprite&&En.setMode(P.TRIANGLES);if(H.isBatchedMesh)if(H._multiDrawInstances!==null)pl("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),En.renderMultiDrawInstances(H._multiDrawStarts,H._multiDrawCounts,H._multiDrawCount,H._multiDrawInstances);else if(at.get("WEBGL_multi_draw"))En.renderMultiDraw(H._multiDrawStarts,H._multiDrawCounts,H._multiDrawCount);else{let ct=H._multiDrawStarts,Wn=H._multiDrawCounts,sn=H._multiDrawCount,Ir=Ie?E.get(Ie).bytesPerElement:1,Ll=He.get(X).currentProgram.getUniforms();for(let Pr=0;Pr<sn;Pr++)Ll.setValue(P,"_gl_DrawID",Pr),En.render(ct[Pr]/Ir,Wn[Pr])}else if(H.isInstancedMesh)En.renderInstances(Gt,Qn,H.count);else if(W.isInstancedBufferGeometry){let ct=W._maxInstanceCount!==void 0?W._maxInstanceCount:1/0,Wn=Math.min(W.instanceCount,ct);En.renderInstances(Gt,Qn,Wn)}else En.render(Gt,Qn)};function Nn(b,V,W){b.transparent===!0&&b.side===Dr&&b.forceSinglePass===!1?(b.side=ar,b.needsUpdate=!0,k0(b,V,W),b.side=Lo,b.needsUpdate=!0,k0(b,V,W),b.side=Dr):k0(b,V,W)}this.compile=function(b,V,W=null){W===null&&(W=b),m=Qe.get(W),m.init(V),w.push(m),W.traverseVisible(function(H){H.isLight&&H.layers.test(V.layers)&&(m.pushLight(H),H.castShadow&&m.pushShadow(H))}),b!==W&&b.traverseVisible(function(H){H.isLight&&H.layers.test(V.layers)&&(m.pushLight(H),H.castShadow&&m.pushShadow(H))}),m.setupLights();let X=new Set;return b.traverse(function(H){if(!(H.isMesh||H.isPoints||H.isLine||H.isSprite))return;let ge=H.material;if(ge)if(Array.isArray(ge))for(let Ee=0;Ee<ge.length;Ee++){let Be=ge[Ee];Nn(Be,W,H),X.add(Be)}else Nn(ge,W,H),X.add(ge)}),m=w.pop(),X},this.compileAsync=function(b,V,W=null){let X=this.compile(b,V,W);return new Promise(H=>{function ge(){if(X.forEach(function(Ee){He.get(Ee).currentProgram.isReady()&&X.delete(Ee)}),X.size===0){H(b);return}setTimeout(ge,10)}at.get("KHR_parallel_shader_compile")!==null?ge():setTimeout(ge,10)})};let hn=null;function Ms(b){hn&&hn(b)}function Uo(){dc.stop()}function By(){dc.start()}let dc=new bI;dc.setAnimationLoop(Ms),typeof self<"u"&&dc.setContext(self),this.setAnimationLoop=function(b){hn=b,ye.setAnimationLoop(b),b===null?dc.stop():dc.start()},ye.addEventListener("sessionstart",Uo),ye.addEventListener("sessionend",By),this.render=function(b,V){if(V!==void 0&&V.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(z===!0)return;if(b.matrixWorldAutoUpdate===!0&&b.updateMatrixWorld(),V.parent===null&&V.matrixWorldAutoUpdate===!0&&V.updateMatrixWorld(),ye.enabled===!0&&ye.isPresenting===!0&&(ye.cameraAutoUpdate===!0&&ye.updateCamera(V),V=ye.getCamera()),b.isScene===!0&&b.onBeforeRender(y,b,V,I),m=Qe.get(b,w.length),m.init(V),w.push(m),ue.multiplyMatrices(V.projectionMatrix,V.matrixWorldInverse),st.setFromProjectionMatrix(ue,ko,V.reversedDepth),we=this.localClippingEnabled,ne=xe.init(this.clippingPlanes,we),g=te.get(b,C.length),g.init(),C.push(g),ye.enabled===!0&&ye.isPresenting===!0){let ge=y.xr.getDepthSensingMesh();ge!==null&&I8(ge,V,-1/0,y.sortObjects)}I8(b,V,0,y.sortObjects),g.finish(),y.sortObjects===!0&&g.sort(ae,be),Vn=ye.enabled===!1||ye.isPresenting===!1||ye.hasDepthSensing()===!1,Vn&&Ke.addToRenderList(g,b),this.info.render.frame++,ne===!0&&xe.beginShadows();let W=m.state.shadowsArray;qe.render(W,b,V),ne===!0&&xe.endShadows(),this.info.autoReset===!0&&this.info.reset();let X=g.opaque,H=g.transmissive;if(m.setupLights(),V.isArrayCamera){let ge=V.cameras;if(H.length>0)for(let Ee=0,Be=ge.length;Ee<Be;Ee++){let Ie=ge[Ee];Yy(X,H,b,Ie)}Vn&&Ke.render(b);for(let Ee=0,Be=ge.length;Ee<Be;Ee++){let Ie=ge[Ee];Uy(g,b,Ie,Ie.viewport)}}else H.length>0&&Yy(X,H,b,V),Vn&&Ke.render(b),Uy(g,b,V);I!==null&&x===0&&(Ht.updateMultisampleRenderTarget(I),Ht.updateRenderTargetMipmap(I)),b.isScene===!0&&b.onAfterRender(y,b,V),Te.resetDefaultState(),S=-1,M=null,w.pop(),w.length>0?(m=w[w.length-1],ne===!0&&xe.setGlobalState(y.clippingPlanes,m.state.camera)):m=null,C.pop(),C.length>0?g=C[C.length-1]:g=null};function I8(b,V,W,X){if(b.visible===!1)return;if(b.layers.test(V.layers)){if(b.isGroup)W=b.renderOrder;else if(b.isLOD)b.autoUpdate===!0&&b.update(V);else if(b.isLight)m.pushLight(b),b.castShadow&&m.pushShadow(b);else if(b.isSprite){if(!b.frustumCulled||st.intersectsSprite(b)){X&&Ve.setFromMatrixPosition(b.matrixWorld).applyMatrix4(ue);let Ee=U.update(b),Be=b.material;Be.visible&&g.push(b,Ee,Be,W,Ve.z,null)}}else if((b.isMesh||b.isLine||b.isPoints)&&(!b.frustumCulled||st.intersectsObject(b))){let Ee=U.update(b),Be=b.material;if(X&&(b.boundingSphere!==void 0?(b.boundingSphere===null&&b.computeBoundingSphere(),Ve.copy(b.boundingSphere.center)):(Ee.boundingSphere===null&&Ee.computeBoundingSphere(),Ve.copy(Ee.boundingSphere.center)),Ve.applyMatrix4(b.matrixWorld).applyMatrix4(ue)),Array.isArray(Be)){let Ie=Ee.groups;for(let ft=0,bt=Ie.length;ft<bt;ft++){let nt=Ie[ft],Gt=Be[nt.materialIndex];Gt&&Gt.visible&&g.push(b,Ee,Gt,W,Ve.z,nt)}}else Be.visible&&g.push(b,Ee,Be,W,Ve.z,null)}}let ge=b.children;for(let Ee=0,Be=ge.length;Ee<Be;Ee++)I8(ge[Ee],V,W,X)}function Uy(b,V,W,X){let H=b.opaque,ge=b.transmissive,Ee=b.transparent;m.setupLightsView(W),ne===!0&&xe.setGlobalState(y.clippingPlanes,W),X&&et.viewport(A.copy(X)),H.length>0&&R0(H,V,W),ge.length>0&&R0(ge,V,W),Ee.length>0&&R0(Ee,V,W),et.buffers.depth.setTest(!0),et.buffers.depth.setMask(!0),et.buffers.color.setMask(!0),et.setPolygonOffset(!1)}function Yy(b,V,W,X){if((W.isScene===!0?W.overrideMaterial:null)!==null)return;m.state.transmissionRenderTarget[X.id]===void 0&&(m.state.transmissionRenderTarget[X.id]=new ms(1,1,{generateMipmaps:!0,type:at.has("EXT_color_buffer_half_float")||at.has("EXT_color_buffer_float")?U1:Ho,minFilter:Xr,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:qt.workingColorSpace}));let ge=m.state.transmissionRenderTarget[X.id],Ee=X.viewport||A;ge.setSize(Ee.z*y.transmissionResolutionScale,Ee.w*y.transmissionResolutionScale);let Be=y.getRenderTarget(),Ie=y.getActiveCubeFace(),ft=y.getActiveMipmapLevel();y.setRenderTarget(ge),y.getClearColor(Q),ee=y.getClearAlpha(),ee<1&&y.setClearColor(16777215,.5),y.clear(),Vn&&Ke.render(W);let bt=y.toneMapping;y.toneMapping=sa;let nt=X.viewport;if(X.viewport!==void 0&&(X.viewport=void 0),m.setupLightsView(X),ne===!0&&xe.setGlobalState(y.clippingPlanes,X),R0(b,W,X),Ht.updateMultisampleRenderTarget(ge),Ht.updateRenderTargetMipmap(ge),at.has("WEBGL_multisampled_render_to_texture")===!1){let Gt=!1;for(let bn=0,Qn=V.length;bn<Qn;bn++){let Hn=V[bn],En=Hn.object,ct=Hn.geometry,Wn=Hn.material,sn=Hn.group;if(Wn.side===Dr&&En.layers.test(X.layers)){let Ir=Wn.side;Wn.side=ar,Wn.needsUpdate=!0,jy(En,W,X,ct,Wn,sn),Wn.side=Ir,Wn.needsUpdate=!0,Gt=!0}}Gt===!0&&(Ht.updateMultisampleRenderTarget(ge),Ht.updateRenderTargetMipmap(ge))}y.setRenderTarget(Be,Ie,ft),y.setClearColor(Q,ee),nt!==void 0&&(X.viewport=nt),y.toneMapping=bt}function R0(b,V,W){let X=V.isScene===!0?V.overrideMaterial:null;for(let H=0,ge=b.length;H<ge;H++){let Ee=b[H],Be=Ee.object,Ie=Ee.geometry,ft=Ee.group,bt=Ee.material;bt.allowOverride===!0&&X!==null&&(bt=X),Be.layers.test(W.layers)&&jy(Be,V,W,Ie,bt,ft)}}function jy(b,V,W,X,H,ge){b.onBeforeRender(y,V,W,X,H,ge),b.modelViewMatrix.multiplyMatrices(W.matrixWorldInverse,b.matrixWorld),b.normalMatrix.getNormalMatrix(b.modelViewMatrix),H.onBeforeRender(y,V,W,X,b,ge),H.transparent===!0&&H.side===Dr&&H.forceSinglePass===!1?(H.side=ar,H.needsUpdate=!0,y.renderBufferDirect(W,V,X,H,b,ge),H.side=Lo,H.needsUpdate=!0,y.renderBufferDirect(W,V,X,H,b,ge),H.side=Dr):y.renderBufferDirect(W,V,X,H,b,ge),b.onAfterRender(y,V,W,X,H,ge)}function k0(b,V,W){V.isScene!==!0&&(V=gt);let X=He.get(b),H=m.state.lights,ge=m.state.shadowsArray,Ee=H.state.version,Be=ie.getParameters(b,H.state,ge,V,W),Ie=ie.getProgramCacheKey(Be),ft=X.programs;X.environment=b.isMeshStandardMaterial?V.environment:null,X.fog=V.fog,X.envMap=(b.isMeshStandardMaterial?oi:Ti).get(b.envMap||X.environment),X.envMapRotation=X.environment!==null&&b.envMap===null?V.environmentRotation:b.envMapRotation,ft===void 0&&(b.addEventListener("dispose",oe),ft=new Map,X.programs=ft);let bt=ft.get(Ie);if(bt!==void 0){if(X.currentProgram===bt&&X.lightsStateVersion===Ee)return Wy(b,Be),bt}else Be.uniforms=ie.getUniforms(b),b.onBeforeCompile(Be,y),bt=ie.acquireProgram(Be,Ie),ft.set(Ie,bt),X.uniforms=Be.uniforms;let nt=X.uniforms;return(!b.isShaderMaterial&&!b.isRawShaderMaterial||b.clipping===!0)&&(nt.clippingPlanes=xe.uniform),Wy(b,Be),X.needsLights=YP(b),X.lightsStateVersion=Ee,X.needsLights&&(nt.ambientLightColor.value=H.state.ambient,nt.lightProbe.value=H.state.probe,nt.directionalLights.value=H.state.directional,nt.directionalLightShadows.value=H.state.directionalShadow,nt.spotLights.value=H.state.spot,nt.spotLightShadows.value=H.state.spotShadow,nt.rectAreaLights.value=H.state.rectArea,nt.ltc_1.value=H.state.rectAreaLTC1,nt.ltc_2.value=H.state.rectAreaLTC2,nt.pointLights.value=H.state.point,nt.pointLightShadows.value=H.state.pointShadow,nt.hemisphereLights.value=H.state.hemi,nt.directionalShadowMap.value=H.state.directionalShadowMap,nt.directionalShadowMatrix.value=H.state.directionalShadowMatrix,nt.spotShadowMap.value=H.state.spotShadowMap,nt.spotLightMatrix.value=H.state.spotLightMatrix,nt.spotLightMap.value=H.state.spotLightMap,nt.pointShadowMap.value=H.state.pointShadowMap,nt.pointShadowMatrix.value=H.state.pointShadowMatrix),X.currentProgram=bt,X.uniformsList=null,bt}function Gy(b){if(b.uniformsList===null){let V=b.currentProgram.getUniforms();b.uniformsList=q1.seqWithValue(V.seq,b.uniforms)}return b.uniformsList}function Wy(b,V){let W=He.get(b);W.outputColorSpace=V.outputColorSpace,W.batching=V.batching,W.batchingColor=V.batchingColor,W.instancing=V.instancing,W.instancingColor=V.instancingColor,W.instancingMorph=V.instancingMorph,W.skinning=V.skinning,W.morphTargets=V.morphTargets,W.morphNormals=V.morphNormals,W.morphColors=V.morphColors,W.morphTargetsCount=V.morphTargetsCount,W.numClippingPlanes=V.numClippingPlanes,W.numIntersection=V.numClipIntersection,W.vertexAlphas=V.vertexAlphas,W.vertexTangents=V.vertexTangents,W.toneMapping=V.toneMapping}function BP(b,V,W,X,H){V.isScene!==!0&&(V=gt),Ht.resetTextureUnits();let ge=V.fog,Ee=X.isMeshStandardMaterial?V.environment:null,Be=I===null?y.outputColorSpace:I.isXRRenderTarget===!0?I.texture.colorSpace:Vi,Ie=(X.isMeshStandardMaterial?oi:Ti).get(X.envMap||Ee),ft=X.vertexColors===!0&&!!W.attributes.color&&W.attributes.color.itemSize===4,bt=!!W.attributes.tangent&&(!!X.normalMap||X.anisotropy>0),nt=!!W.morphAttributes.position,Gt=!!W.morphAttributes.normal,bn=!!W.morphAttributes.color,Qn=sa;X.toneMapped&&(I===null||I.isXRRenderTarget===!0)&&(Qn=y.toneMapping);let Hn=W.morphAttributes.position||W.morphAttributes.normal||W.morphAttributes.color,En=Hn!==void 0?Hn.length:0,ct=He.get(X),Wn=m.state.lights;if(ne===!0&&(we===!0||b!==M)){let tr=b===M&&X.id===S;xe.setState(X,b,tr)}let sn=!1;X.version===ct.__version?(ct.needsLights&&ct.lightsStateVersion!==Wn.state.version||ct.outputColorSpace!==Be||H.isBatchedMesh&&ct.batching===!1||!H.isBatchedMesh&&ct.batching===!0||H.isBatchedMesh&&ct.batchingColor===!0&&H.colorTexture===null||H.isBatchedMesh&&ct.batchingColor===!1&&H.colorTexture!==null||H.isInstancedMesh&&ct.instancing===!1||!H.isInstancedMesh&&ct.instancing===!0||H.isSkinnedMesh&&ct.skinning===!1||!H.isSkinnedMesh&&ct.skinning===!0||H.isInstancedMesh&&ct.instancingColor===!0&&H.instanceColor===null||H.isInstancedMesh&&ct.instancingColor===!1&&H.instanceColor!==null||H.isInstancedMesh&&ct.instancingMorph===!0&&H.morphTexture===null||H.isInstancedMesh&&ct.instancingMorph===!1&&H.morphTexture!==null||ct.envMap!==Ie||X.fog===!0&&ct.fog!==ge||ct.numClippingPlanes!==void 0&&(ct.numClippingPlanes!==xe.numPlanes||ct.numIntersection!==xe.numIntersection)||ct.vertexAlphas!==ft||ct.vertexTangents!==bt||ct.morphTargets!==nt||ct.morphNormals!==Gt||ct.morphColors!==bn||ct.toneMapping!==Qn||ct.morphTargetsCount!==En)&&(sn=!0):(sn=!0,ct.__version=X.version);let Ir=ct.currentProgram;sn===!0&&(Ir=k0(X,V,H));let Ll=!1,Pr=!1,td=!1,$n=Ir.getUniforms(),Zr=ct.uniforms;if(et.useProgram(Ir.program)&&(Ll=!0,Pr=!0,td=!0),X.id!==S&&(S=X.id,Pr=!0),Ll||M!==b){et.buffers.depth.getReversed()&&b.reversedDepth!==!0&&(b._reversedDepth=!0,b.updateProjectionMatrix()),$n.setValue(P,"projectionMatrix",b.projectionMatrix),$n.setValue(P,"viewMatrix",b.matrixWorldInverse);let lr=$n.map.cameraPosition;lr!==void 0&&lr.setValue(P,Xe.setFromMatrixPosition(b.matrixWorld)),cn.logarithmicDepthBuffer&&$n.setValue(P,"logDepthBufFC",2/(Math.log(b.far+1)/Math.LN2)),(X.isMeshPhongMaterial||X.isMeshToonMaterial||X.isMeshLambertMaterial||X.isMeshBasicMaterial||X.isMeshStandardMaterial||X.isShaderMaterial)&&$n.setValue(P,"isOrthographic",b.isOrthographicCamera===!0),M!==b&&(M=b,Pr=!0,td=!0)}if(H.isSkinnedMesh){$n.setOptional(P,H,"bindMatrix"),$n.setOptional(P,H,"bindMatrixInverse");let tr=H.skeleton;tr&&(tr.boneTexture===null&&tr.computeBoneTexture(),$n.setValue(P,"boneTexture",tr.boneTexture,Ht))}H.isBatchedMesh&&($n.setOptional(P,H,"batchingTexture"),$n.setValue(P,"batchingTexture",H._matricesTexture,Ht),$n.setOptional(P,H,"batchingIdTexture"),$n.setValue(P,"batchingIdTexture",H._indirectTexture,Ht),$n.setOptional(P,H,"batchingColorTexture"),H._colorsTexture!==null&&$n.setValue(P,"batchingColorTexture",H._colorsTexture,Ht));let Qr=W.morphAttributes;if((Qr.position!==void 0||Qr.normal!==void 0||Qr.color!==void 0)&&ve.update(H,W,Ir),(Pr||ct.receiveShadow!==H.receiveShadow)&&(ct.receiveShadow=H.receiveShadow,$n.setValue(P,"receiveShadow",H.receiveShadow)),X.isMeshGouraudMaterial&&X.envMap!==null&&(Zr.envMap.value=Ie,Zr.flipEnvMap.value=Ie.isCubeTexture&&Ie.isRenderTargetTexture===!1?-1:1),X.isMeshStandardMaterial&&X.envMap===null&&V.environment!==null&&(Zr.envMapIntensity.value=V.environmentIntensity),Pr&&($n.setValue(P,"toneMappingExposure",y.toneMappingExposure),ct.needsLights&&UP(Zr,td),ge&&X.fog===!0&&he.refreshFogUniforms(Zr,ge),he.refreshMaterialUniforms(Zr,X,F,B,m.state.transmissionRenderTarget[b.id]),q1.upload(P,Gy(ct),Zr,Ht)),X.isShaderMaterial&&X.uniformsNeedUpdate===!0&&(q1.upload(P,Gy(ct),Zr,Ht),X.uniformsNeedUpdate=!1),X.isSpriteMaterial&&$n.setValue(P,"center",H.center),$n.setValue(P,"modelViewMatrix",H.modelViewMatrix),$n.setValue(P,"normalMatrix",H.normalMatrix),$n.setValue(P,"modelMatrix",H.matrixWorld),X.isShaderMaterial||X.isRawShaderMaterial){let tr=X.uniformsGroups;for(let lr=0,P8=tr.length;lr<P8;lr++){let hc=tr[lr];Ot.update(hc,Ir),Ot.bind(hc,Ir)}}return Ir}function UP(b,V){b.ambientLightColor.needsUpdate=V,b.lightProbe.needsUpdate=V,b.directionalLights.needsUpdate=V,b.directionalLightShadows.needsUpdate=V,b.pointLights.needsUpdate=V,b.pointLightShadows.needsUpdate=V,b.spotLights.needsUpdate=V,b.spotLightShadows.needsUpdate=V,b.rectAreaLights.needsUpdate=V,b.hemisphereLights.needsUpdate=V}function YP(b){return b.isMeshLambertMaterial||b.isMeshToonMaterial||b.isMeshPhongMaterial||b.isMeshStandardMaterial||b.isShadowMaterial||b.isShaderMaterial&&b.lights===!0}this.getActiveCubeFace=function(){return D},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(b,V,W){let X=He.get(b);X.__autoAllocateDepthBuffer=b.resolveDepthBuffer===!1,X.__autoAllocateDepthBuffer===!1&&(X.__useRenderToTexture=!1),He.get(b.texture).__webglTexture=V,He.get(b.depthTexture).__webglTexture=X.__autoAllocateDepthBuffer?void 0:W,X.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(b,V){let W=He.get(b);W.__webglFramebuffer=V,W.__useDefaultFramebuffer=V===void 0};let jP=P.createFramebuffer();this.setRenderTarget=function(b,V=0,W=0){I=b,D=V,x=W;let X=!0,H=null,ge=!1,Ee=!1;if(b){let Ie=He.get(b);if(Ie.__useDefaultFramebuffer!==void 0)et.bindFramebuffer(P.FRAMEBUFFER,null),X=!1;else if(Ie.__webglFramebuffer===void 0)Ht.setupRenderTarget(b);else if(Ie.__hasExternalTextures)Ht.rebindTextures(b,He.get(b.texture).__webglTexture,He.get(b.depthTexture).__webglTexture);else if(b.depthBuffer){let nt=b.depthTexture;if(Ie.__boundDepthTexture!==nt){if(nt!==null&&He.has(nt)&&(b.width!==nt.image.width||b.height!==nt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Ht.setupDepthRenderbuffer(b)}}let ft=b.texture;(ft.isData3DTexture||ft.isDataArrayTexture||ft.isCompressedArrayTexture)&&(Ee=!0);let bt=He.get(b).__webglFramebuffer;b.isWebGLCubeRenderTarget?(Array.isArray(bt[V])?H=bt[V][W]:H=bt[V],ge=!0):b.samples>0&&Ht.useMultisampledRTT(b)===!1?H=He.get(b).__webglMultisampledFramebuffer:Array.isArray(bt)?H=bt[W]:H=bt,A.copy(b.viewport),J.copy(b.scissor),K=b.scissorTest}else A.copy(Ne).multiplyScalar(F).floor(),J.copy(tt).multiplyScalar(F).floor(),K=tn;if(W!==0&&(H=jP),et.bindFramebuffer(P.FRAMEBUFFER,H)&&X&&et.drawBuffers(b,H),et.viewport(A),et.scissor(J),et.setScissorTest(K),ge){let Ie=He.get(b.texture);P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_CUBE_MAP_POSITIVE_X+V,Ie.__webglTexture,W)}else if(Ee){let Ie=V;for(let ft=0;ft<b.textures.length;ft++){let bt=He.get(b.textures[ft]);P.framebufferTextureLayer(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0+ft,bt.__webglTexture,W,Ie)}}else if(b!==null&&W!==0){let Ie=He.get(b.texture);P.framebufferTexture2D(P.FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,Ie.__webglTexture,W)}S=-1},this.readRenderTargetPixels=function(b,V,W,X,H,ge,Ee,Be=0){if(!(b&&b.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ie=He.get(b).__webglFramebuffer;if(b.isWebGLCubeRenderTarget&&Ee!==void 0&&(Ie=Ie[Ee]),Ie){et.bindFramebuffer(P.FRAMEBUFFER,Ie);try{let ft=b.textures[Be],bt=ft.format,nt=ft.type;if(!cn.textureFormatReadable(bt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!cn.textureTypeReadable(nt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}V>=0&&V<=b.width-X&&W>=0&&W<=b.height-H&&(b.textures.length>1&&P.readBuffer(P.COLOR_ATTACHMENT0+Be),P.readPixels(V,W,X,H,Ze.convert(bt),Ze.convert(nt),ge))}finally{let ft=I!==null?He.get(I).__webglFramebuffer:null;et.bindFramebuffer(P.FRAMEBUFFER,ft)}}},this.readRenderTargetPixelsAsync=function(b,V,W,X,H,ge,Ee,Be=0){return Xt(this,null,function*(){if(!(b&&b.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ie=He.get(b).__webglFramebuffer;if(b.isWebGLCubeRenderTarget&&Ee!==void 0&&(Ie=Ie[Ee]),Ie)if(V>=0&&V<=b.width-X&&W>=0&&W<=b.height-H){et.bindFramebuffer(P.FRAMEBUFFER,Ie);let ft=b.textures[Be],bt=ft.format,nt=ft.type;if(!cn.textureFormatReadable(bt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!cn.textureTypeReadable(nt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");let Gt=P.createBuffer();P.bindBuffer(P.PIXEL_PACK_BUFFER,Gt),P.bufferData(P.PIXEL_PACK_BUFFER,ge.byteLength,P.STREAM_READ),b.textures.length>1&&P.readBuffer(P.COLOR_ATTACHMENT0+Be),P.readPixels(V,W,X,H,Ze.convert(bt),Ze.convert(nt),0);let bn=I!==null?He.get(I).__webglFramebuffer:null;et.bindFramebuffer(P.FRAMEBUFFER,bn);let Qn=P.fenceSync(P.SYNC_GPU_COMMANDS_COMPLETE,0);return P.flush(),yield WA(P,Qn,4),P.bindBuffer(P.PIXEL_PACK_BUFFER,Gt),P.getBufferSubData(P.PIXEL_PACK_BUFFER,0,ge),P.deleteBuffer(Gt),P.deleteSync(Qn),ge}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")})},this.copyFramebufferToTexture=function(b,V=null,W=0){let X=Math.pow(2,-W),H=Math.floor(b.image.width*X),ge=Math.floor(b.image.height*X),Ee=V!==null?V.x:0,Be=V!==null?V.y:0;Ht.setTexture2D(b,0),P.copyTexSubImage2D(P.TEXTURE_2D,W,0,0,Ee,Be,H,ge),et.unbindTexture()};let GP=P.createFramebuffer(),WP=P.createFramebuffer();this.copyTextureToTexture=function(b,V,W=null,X=null,H=0,ge=null){ge===null&&(H!==0?(pl("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),ge=H,H=0):ge=0);let Ee,Be,Ie,ft,bt,nt,Gt,bn,Qn,Hn=b.isCompressedTexture?b.mipmaps[ge]:b.image;if(W!==null)Ee=W.max.x-W.min.x,Be=W.max.y-W.min.y,Ie=W.isBox3?W.max.z-W.min.z:1,ft=W.min.x,bt=W.min.y,nt=W.isBox3?W.min.z:0;else{let Qr=Math.pow(2,-H);Ee=Math.floor(Hn.width*Qr),Be=Math.floor(Hn.height*Qr),b.isDataArrayTexture?Ie=Hn.depth:b.isData3DTexture?Ie=Math.floor(Hn.depth*Qr):Ie=1,ft=0,bt=0,nt=0}X!==null?(Gt=X.x,bn=X.y,Qn=X.z):(Gt=0,bn=0,Qn=0);let En=Ze.convert(V.format),ct=Ze.convert(V.type),Wn;V.isData3DTexture?(Ht.setTexture3D(V,0),Wn=P.TEXTURE_3D):V.isDataArrayTexture||V.isCompressedArrayTexture?(Ht.setTexture2DArray(V,0),Wn=P.TEXTURE_2D_ARRAY):(Ht.setTexture2D(V,0),Wn=P.TEXTURE_2D),P.pixelStorei(P.UNPACK_FLIP_Y_WEBGL,V.flipY),P.pixelStorei(P.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),P.pixelStorei(P.UNPACK_ALIGNMENT,V.unpackAlignment);let sn=P.getParameter(P.UNPACK_ROW_LENGTH),Ir=P.getParameter(P.UNPACK_IMAGE_HEIGHT),Ll=P.getParameter(P.UNPACK_SKIP_PIXELS),Pr=P.getParameter(P.UNPACK_SKIP_ROWS),td=P.getParameter(P.UNPACK_SKIP_IMAGES);P.pixelStorei(P.UNPACK_ROW_LENGTH,Hn.width),P.pixelStorei(P.UNPACK_IMAGE_HEIGHT,Hn.height),P.pixelStorei(P.UNPACK_SKIP_PIXELS,ft),P.pixelStorei(P.UNPACK_SKIP_ROWS,bt),P.pixelStorei(P.UNPACK_SKIP_IMAGES,nt);let $n=b.isDataArrayTexture||b.isData3DTexture,Zr=V.isDataArrayTexture||V.isData3DTexture;if(b.isDepthTexture){let Qr=He.get(b),tr=He.get(V),lr=He.get(Qr.__renderTarget),P8=He.get(tr.__renderTarget);et.bindFramebuffer(P.READ_FRAMEBUFFER,lr.__webglFramebuffer),et.bindFramebuffer(P.DRAW_FRAMEBUFFER,P8.__webglFramebuffer);for(let hc=0;hc<Ie;hc++)$n&&(P.framebufferTextureLayer(P.READ_FRAMEBUFFER,P.COLOR_ATTACHMENT0,He.get(b).__webglTexture,H,nt+hc),P.framebufferTextureLayer(P.DRAW_FRAMEBUFFER,P.COLOR_ATTACHMENT0,He.get(V).__webglTexture,ge,Qn+hc)),P.blitFramebuffer(ft,bt,Ee,Be,Gt,bn,Ee,Be,P.DEPTH_BUFFER_BIT,P.NEAREST);et.bindFramebuffer(P.READ_FRAMEBUFFER,null),et.bindFramebuffer(P.DRAW_FRAMEBUFFER,null)}else if(H!==0||b.isRenderTargetTexture||He.has(b)){let Qr=He.get(b),tr=He.get(V);et.bindFramebuffer(P.READ_FRAMEBUFFER,GP),et.bindFramebuffer(P.DRAW_FRAMEBUFFER,WP);for(let lr=0;lr<Ie;lr++)$n?P.framebufferTextureLayer(P.READ_FRAMEBUFFER,P.COLOR_ATTACHMENT0,Qr.__webglTexture,H,nt+lr):P.framebufferTexture2D(P.READ_FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,Qr.__webglTexture,H),Zr?P.framebufferTextureLayer(P.DRAW_FRAMEBUFFER,P.COLOR_ATTACHMENT0,tr.__webglTexture,ge,Qn+lr):P.framebufferTexture2D(P.DRAW_FRAMEBUFFER,P.COLOR_ATTACHMENT0,P.TEXTURE_2D,tr.__webglTexture,ge),H!==0?P.blitFramebuffer(ft,bt,Ee,Be,Gt,bn,Ee,Be,P.COLOR_BUFFER_BIT,P.NEAREST):Zr?P.copyTexSubImage3D(Wn,ge,Gt,bn,Qn+lr,ft,bt,Ee,Be):P.copyTexSubImage2D(Wn,ge,Gt,bn,ft,bt,Ee,Be);et.bindFramebuffer(P.READ_FRAMEBUFFER,null),et.bindFramebuffer(P.DRAW_FRAMEBUFFER,null)}else Zr?b.isDataTexture||b.isData3DTexture?P.texSubImage3D(Wn,ge,Gt,bn,Qn,Ee,Be,Ie,En,ct,Hn.data):V.isCompressedArrayTexture?P.compressedTexSubImage3D(Wn,ge,Gt,bn,Qn,Ee,Be,Ie,En,Hn.data):P.texSubImage3D(Wn,ge,Gt,bn,Qn,Ee,Be,Ie,En,ct,Hn):b.isDataTexture?P.texSubImage2D(P.TEXTURE_2D,ge,Gt,bn,Ee,Be,En,ct,Hn.data):b.isCompressedTexture?P.compressedTexSubImage2D(P.TEXTURE_2D,ge,Gt,bn,Hn.width,Hn.height,En,Hn.data):P.texSubImage2D(P.TEXTURE_2D,ge,Gt,bn,Ee,Be,En,ct,Hn);P.pixelStorei(P.UNPACK_ROW_LENGTH,sn),P.pixelStorei(P.UNPACK_IMAGE_HEIGHT,Ir),P.pixelStorei(P.UNPACK_SKIP_PIXELS,Ll),P.pixelStorei(P.UNPACK_SKIP_ROWS,Pr),P.pixelStorei(P.UNPACK_SKIP_IMAGES,td),ge===0&&V.generateMipmaps&&P.generateMipmap(Wn),et.unbindTexture()},this.copyTextureToTexture3D=function(b,V,W=null,X=null,H=0){return pl('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(b,V,W,X,H)},this.initRenderTarget=function(b){He.get(b).__webglFramebuffer===void 0&&Ht.setupRenderTarget(b)},this.initTexture=function(b){b.isCubeTexture?Ht.setTextureCube(b,0):b.isData3DTexture?Ht.setTexture3D(b,0):b.isDataArrayTexture||b.isCompressedArrayTexture?Ht.setTexture2DArray(b,0):Ht.setTexture2D(b,0),et.unbindTexture()},this.resetState=function(){D=0,x=0,I=null,et.reset(),Te.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ko}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorSpace=qt._getDrawingBufferColorSpace(e),t.unpackColorSpace=qt._getUnpackColorSpace()}};function I9(n,e){if(e===s9)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===G1||e===S0){let t=n.getIndex();if(t===null){let s=[],a=n.getAttribute("position");if(a!==void 0){for(let c=0;c<a.count;c++)s.push(c);n.setIndex(s),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}let i=t.count-2,r=[];if(e===G1)for(let s=1;s<=i;s++)r.push(t.getX(0)),r.push(t.getX(s)),r.push(t.getX(s+1));else for(let s=0;s<i;s++)s%2===0?(r.push(t.getX(s)),r.push(t.getX(s+1)),r.push(t.getX(s+2))):(r.push(t.getX(s+2)),r.push(t.getX(s+1)),r.push(t.getX(s)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let o=n.clone();return o.setIndex(r),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var l8=class extends Cl{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new F9(t)}),this.register(function(t){return new V9(t)}),this.register(function(t){return new q9(t)}),this.register(function(t){return new X9(t)}),this.register(function(t){return new K9(t)}),this.register(function(t){return new B9(t)}),this.register(function(t){return new U9(t)}),this.register(function(t){return new Y9(t)}),this.register(function(t){return new j9(t)}),this.register(function(t){return new L9(t)}),this.register(function(t){return new G9(t)}),this.register(function(t){return new H9(t)}),this.register(function(t){return new $9(t)}),this.register(function(t){return new W9(t)}),this.register(function(t){return new N9(t)}),this.register(function(t){return new Z9(t)}),this.register(function(t){return new Q9(t)})}load(e,t,i,r){let o=this,s;if(this.resourcePath!=="")s=this.resourcePath;else if(this.path!==""){let l=ra.extractUrlBase(e);s=ra.resolveURL(l,this.path)}else s=ra.extractUrlBase(e);this.manager.itemStart(e);let a=function(l){r?r(l):console.error(l),o.manager.itemError(e),o.manager.itemEnd(e)},c=new O1(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(l){try{o.parse(l,s,function(u){t(u),o.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let o,s={},a={},c=new TextDecoder;if(typeof e=="string")o=JSON.parse(e);else if(e instanceof ArrayBuffer)if(c.decode(new Uint8Array(e,0,4))===AI){try{s[Yt.KHR_BINARY_GLTF]=new J9(e)}catch(d){r&&r(d);return}o=JSON.parse(s[Yt.KHR_BINARY_GLTF].content)}else o=JSON.parse(c.decode(e));else o=e;if(o.asset===void 0||o.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}let l=new sy(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){let d=this.pluginCallbacks[u](l);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[d.name]=d,s[d.name]=!0}if(o.extensionsUsed)for(let u=0;u<o.extensionsUsed.length;++u){let d=o.extensionsUsed[u],h=o.extensionsRequired||[];switch(d){case Yt.KHR_MATERIALS_UNLIT:s[d]=new O9;break;case Yt.KHR_DRACO_MESH_COMPRESSION:s[d]=new ey(o,this.dracoLoader);break;case Yt.KHR_TEXTURE_TRANSFORM:s[d]=new ty;break;case Yt.KHR_MESH_QUANTIZATION:s[d]=new ny;break;default:h.indexOf(d)>=0&&a[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}l.setExtensions(s),l.setPlugins(a),l.parse(i,r)}parseAsync(e,t){let i=this;return new Promise(function(r,o){i.parse(e,t,r,o)})}};function eQ(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}var Yt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"},N9=class{constructor(e){this.parser=e,this.name=Yt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){let e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){let o=t[i];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){let t=this.parser,i="light:"+e,r=t.cache.get(i);if(r)return r;let o=t.json,c=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e],l,u=new ot(16777215);c.color!==void 0&&u.setRGB(c.color[0],c.color[1],c.color[2],Vi);let d=c.range!==void 0?c.range:0;switch(c.type){case"directional":l=new sr(u),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new _l(u),l.distance=d;break;case"spot":l=new p0(u),l.distance=d,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,l.angle=c.spot.outerConeAngle,l.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return l.position.set(0,0,0),la(l,c),c.intensity!==void 0&&(l.intensity=c.intensity),l.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(l),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){let t=this,i=this.parser,o=i.json.nodes[e],a=(o.extensions&&o.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(c){return i._getNodeRef(t.cache,a,c)})}},O9=class{constructor(){this.name=Yt.KHR_MATERIALS_UNLIT}getMaterialType(){return Fo}extendParams(e,t,i){let r=[];e.color=new ot(1,1,1),e.opacity=1;let o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){let s=o.baseColorFactor;e.color.setRGB(s[0],s[1],s[2],Vi),e.opacity=s[3]}o.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",o.baseColorTexture,Zn))}return Promise.all(r)}},L9=class{constructor(e){this.parser=e,this.name=Yt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name].emissiveStrength;return o!==void 0&&(t.emissiveIntensity=o),Promise.resolve()}},F9=class{constructor(e){this.parser=e,this.name=Yt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tr}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];if(s.clearcoatFactor!==void 0&&(t.clearcoat=s.clearcoatFactor),s.clearcoatTexture!==void 0&&o.push(i.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),s.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),s.clearcoatRoughnessTexture!==void 0&&o.push(i.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),s.clearcoatNormalTexture!==void 0&&(o.push(i.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),s.clearcoatNormalTexture.scale!==void 0)){let a=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new mt(a,a)}return Promise.all(o)}},V9=class{constructor(e){this.parser=e,this.name=Yt.KHR_MATERIALS_DISPERSION}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tr}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return t.dispersion=o.dispersion!==void 0?o.dispersion:0,Promise.resolve()}},H9=class{constructor(e){this.parser=e,this.name=Yt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tr}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.iridescenceFactor!==void 0&&(t.iridescence=s.iridescenceFactor),s.iridescenceTexture!==void 0&&o.push(i.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),s.iridescenceIor!==void 0&&(t.iridescenceIOR=s.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),s.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),s.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),s.iridescenceThicknessTexture!==void 0&&o.push(i.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(o)}},B9=class{constructor(e){this.parser=e,this.name=Yt.KHR_MATERIALS_SHEEN}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tr}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[];t.sheenColor=new ot(0,0,0),t.sheenRoughness=0,t.sheen=1;let s=r.extensions[this.name];if(s.sheenColorFactor!==void 0){let a=s.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Vi)}return s.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=s.sheenRoughnessFactor),s.sheenColorTexture!==void 0&&o.push(i.assignTexture(t,"sheenColorMap",s.sheenColorTexture,Zn)),s.sheenRoughnessTexture!==void 0&&o.push(i.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(o)}},U9=class{constructor(e){this.parser=e,this.name=Yt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tr}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.transmissionFactor!==void 0&&(t.transmission=s.transmissionFactor),s.transmissionTexture!==void 0&&o.push(i.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(o)}},Y9=class{constructor(e){this.parser=e,this.name=Yt.KHR_MATERIALS_VOLUME}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tr}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];t.thickness=s.thicknessFactor!==void 0?s.thicknessFactor:0,s.thicknessTexture!==void 0&&o.push(i.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||1/0;let a=s.attenuationColor||[1,1,1];return t.attenuationColor=new ot().setRGB(a[0],a[1],a[2],Vi),Promise.all(o)}},j9=class{constructor(e){this.parser=e,this.name=Yt.KHR_MATERIALS_IOR}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tr}extendMaterialParams(e,t){let r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=r.extensions[this.name];return t.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}},G9=class{constructor(e){this.parser=e,this.name=Yt.KHR_MATERIALS_SPECULAR}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tr}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];t.specularIntensity=s.specularFactor!==void 0?s.specularFactor:1,s.specularTexture!==void 0&&o.push(i.assignTexture(t,"specularIntensityMap",s.specularTexture));let a=s.specularColorFactor||[1,1,1];return t.specularColor=new ot().setRGB(a[0],a[1],a[2],Vi),s.specularColorTexture!==void 0&&o.push(i.assignTexture(t,"specularColorMap",s.specularColorTexture,Zn)),Promise.all(o)}},W9=class{constructor(e){this.parser=e,this.name=Yt.EXT_MATERIALS_BUMP}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tr}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return t.bumpScale=s.bumpFactor!==void 0?s.bumpFactor:1,s.bumpTexture!==void 0&&o.push(i.assignTexture(t,"bumpMap",s.bumpTexture)),Promise.all(o)}},$9=class{constructor(e){this.parser=e,this.name=Yt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){let i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Tr}extendMaterialParams(e,t){let i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();let o=[],s=r.extensions[this.name];return s.anisotropyStrength!==void 0&&(t.anisotropy=s.anisotropyStrength),s.anisotropyRotation!==void 0&&(t.anisotropyRotation=s.anisotropyRotation),s.anisotropyTexture!==void 0&&o.push(i.assignTexture(t,"anisotropyMap",s.anisotropyTexture)),Promise.all(o)}},q9=class{constructor(e){this.parser=e,this.name=Yt.KHR_TEXTURE_BASISU}loadTexture(e){let t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;let o=r.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o.source,s)}},X9=class{constructor(e){this.parser=e,this.name=Yt.EXT_TEXTURE_WEBP}loadTexture(e){let t=this.name,i=this.parser,r=i.json,o=r.textures[e];if(!o.extensions||!o.extensions[t])return null;let s=o.extensions[t],a=r.images[s.source],c=i.textureLoader;if(a.uri){let l=i.options.manager.getHandler(a.uri);l!==null&&(c=l)}return i.loadTextureImage(e,s.source,c)}},K9=class{constructor(e){this.parser=e,this.name=Yt.EXT_TEXTURE_AVIF}loadTexture(e){let t=this.name,i=this.parser,r=i.json,o=r.textures[e];if(!o.extensions||!o.extensions[t])return null;let s=o.extensions[t],a=r.images[s.source],c=i.textureLoader;if(a.uri){let l=i.options.manager.getHandler(a.uri);l!==null&&(c=l)}return i.loadTextureImage(e,s.source,c)}},Z9=class{constructor(e){this.name=Yt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){let t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){let r=i.extensions[this.name],o=this.parser.getDependency("buffer",r.buffer),s=this.parser.options.meshoptDecoder;if(!s||!s.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(a){let c=r.byteOffset||0,l=r.byteLength||0,u=r.count,d=r.byteStride,h=new Uint8Array(a,c,l);return s.decodeGltfBufferAsync?s.decodeGltfBufferAsync(u,d,h,r.mode,r.filter).then(function(f){return f.buffer}):s.ready.then(function(){let f=new ArrayBuffer(u*d);return s.decodeGltfBuffer(new Uint8Array(f),u,d,h,r.mode,r.filter),f})})}else return null}},Q9=class{constructor(e){this.name=Yt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){let t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;let r=t.meshes[i.mesh];for(let l of r.primitives)if(l.mode!==ho.TRIANGLES&&l.mode!==ho.TRIANGLE_STRIP&&l.mode!==ho.TRIANGLE_FAN&&l.mode!==void 0)return null;let s=i.extensions[this.name].attributes,a=[],c={};for(let l in s)a.push(this.parser.getDependency("accessor",s[l]).then(u=>(c[l]=u,c[l])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(l=>{let u=l.pop(),d=u.isGroup?u.children:[u],h=l[0].count,f=[];for(let p of d){let v=new Dt,g=new k,m=new Hi,C=new k(1,1,1),w=new o0(p.geometry,p.material,h);for(let y=0;y<h;y++)c.TRANSLATION&&g.fromBufferAttribute(c.TRANSLATION,y),c.ROTATION&&m.fromBufferAttribute(c.ROTATION,y),c.SCALE&&C.fromBufferAttribute(c.SCALE,y),w.setMatrixAt(y,v.compose(g,m,C));for(let y in c)if(y==="_COLOR_0"){let z=c[y];w.instanceColor=new rc(z.array,z.itemSize,z.normalized)}else y!=="TRANSLATION"&&y!=="ROTATION"&&y!=="SCALE"&&p.geometry.setAttribute(y,c[y]);Ri.prototype.copy.call(w,p),this.parser.assignFinalMaterial(w),f.push(w)}return u.isGroup?(u.clear(),u.add(...f),u):f[0]}))}},AI="glTF",C0=12,TI={JSON:1313821514,BIN:5130562},J9=class{constructor(e){this.name=Yt.KHR_BINARY_GLTF,this.content=null,this.body=null;let t=new DataView(e,0,C0),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==AI)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");let r=this.header.length-C0,o=new DataView(e,C0),s=0;for(;s<r;){let a=o.getUint32(s,!0);s+=4;let c=o.getUint32(s,!0);if(s+=4,c===TI.JSON){let l=new Uint8Array(e,C0+s,a);this.content=i.decode(l)}else if(c===TI.BIN){let l=C0+s;this.body=e.slice(l,l+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},ey=class{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Yt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){let i=this.json,r=this.dracoLoader,o=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,a={},c={},l={};for(let u in s){let d=ry[u]||u.toLowerCase();a[d]=s[u]}for(let u in e.attributes){let d=ry[u]||u.toLowerCase();if(s[u]!==void 0){let h=i.accessors[e.attributes[u]],f=Z1[h.componentType];l[d]=f.name,c[d]=h.normalized===!0}}return t.getDependency("bufferView",o).then(function(u){return new Promise(function(d,h){r.decodeDracoFile(u,function(f){for(let p in f.attributes){let v=f.attributes[p],g=c[p];g!==void 0&&(v.normalized=g)}d(f)},a,l,Vi,h)})})}},ty=class{constructor(){this.name=Yt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}},ny=class{constructor(){this.name=Yt.KHR_MESH_QUANTIZATION}},u8=class extends ta{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,o=e*r*3+r;for(let s=0;s!==r;s++)t[s]=i[o+s];return t}interpolate_(e,t,i,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=a*2,l=a*3,u=r-t,d=(i-t)/u,h=d*d,f=h*d,p=e*l,v=p-l,g=-2*f+3*h,m=f-h,C=1-g,w=m-h+d;for(let y=0;y!==a;y++){let z=s[v+y+a],D=s[v+y+c]*u,x=s[p+y+a],I=s[p+y]*u;o[y]=C*z+w*D+g*x+m*I}return o}},tQ=new Hi,iy=class extends u8{interpolate_(e,t,i,r){let o=super.interpolate_(e,t,i,r);return tQ.fromArray(o).normalize().toArray(o),o}},ho={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Z1={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},EI={9728:Mi,9729:Fi,9984:H1,9985:ac,9986:aa,9987:Xr},DI={33071:lo,33648:ec,10497:fs},P9={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ry={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},lc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},nQ={CUBICSPLINE:void 0,LINEAR:Js,STEP:Qs},R9={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function iQ(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Ui({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Lo})),n.DefaultMaterial}function Al(n,e,t){for(let i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function la(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function rQ(n,e,t){let i=!1,r=!1,o=!1;for(let l=0,u=e.length;l<u;l++){let d=e[l];if(d.POSITION!==void 0&&(i=!0),d.NORMAL!==void 0&&(r=!0),d.COLOR_0!==void 0&&(o=!0),i&&r&&o)break}if(!i&&!r&&!o)return Promise.resolve(n);let s=[],a=[],c=[];for(let l=0,u=e.length;l<u;l++){let d=e[l];if(i){let h=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;s.push(h)}if(r){let h=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(h)}if(o){let h=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;c.push(h)}}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(c)]).then(function(l){let u=l[0],d=l[1],h=l[2];return i&&(n.morphAttributes.position=u),r&&(n.morphAttributes.normal=d),o&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}function oQ(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){let t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function sQ(n){let e,t=n.extensions&&n.extensions[Yt.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+k9(t.attributes):e=n.indices+":"+k9(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+k9(n.targets[i]);return e}function k9(n){let e="",t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function oy(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function aQ(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":n.search(/\.ktx2($|\?)/i)>0||n.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}var cQ=new Dt,sy=class{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new eQ,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=-1,o=!1,s=-1;if(typeof navigator<"u"){let a=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(a)===!0;let c=a.match(/Version\/(\d+)/);r=i&&c?parseInt(c[1],10):-1,o=a.indexOf("Firefox")>-1,s=o?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&r<17||o&&s<98?this.textureLoader=new vl(this.options.manager):this.textureLoader=new m0(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new O1(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){let i=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(s){return s._markDefs&&s._markDefs()}),Promise.all(this._invokeAll(function(s){return s.beforeRoot&&s.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(s){let a={scene:s[0][r.scene||0],scenes:s[0],animations:s[1],cameras:s[2],asset:r.asset,parser:i,userData:{}};return Al(o,a,r),la(a,r),Promise.all(i._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){for(let c of a.scenes)c.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){let e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,o=t.length;r<o;r++){let s=t[r].joints;for(let a=0,c=s.length;a<c;a++)e[s[a]].isBone=!0}for(let r=0,o=e.length;r<o;r++){let s=e[r];s.mesh!==void 0&&(this._addNodeRef(this.meshCache,s.mesh),s.skin!==void 0&&(i[s.mesh].isSkinnedMesh=!0)),s.camera!==void 0&&this._addNodeRef(this.cameraCache,s.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;let r=i.clone(),o=(s,a)=>{let c=this.associations.get(s);c!=null&&this.associations.set(a,c);for(let[l,u]of s.children.entries())o(u,a.children[l])};return o(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){let t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){let r=e(t[i]);if(r)return r}return null}_invokeAll(e){let t=Object.values(this.plugins);t.unshift(this);let i=[];for(let r=0;r<t.length;r++){let o=e(t[r]);o&&i.push(o)}return i}getDependency(e,t){let i=e+":"+t,r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(o){return o.loadNode&&o.loadNode(t)});break;case"mesh":r=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){let i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(o,s){return i.getDependency(e,s)})),this.cache.add(e,t)}return t}loadBuffer(e){let t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Yt.KHR_BINARY_GLTF].body);let r=this.options;return new Promise(function(o,s){i.load(ra.resolveURL(t.uri,r.path),o,void 0,function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){let t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){let r=t.byteLength||0,o=t.byteOffset||0;return i.slice(o,o+r)})}loadAccessor(e){let t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){let s=P9[r.type],a=Z1[r.componentType],c=r.normalized===!0,l=new a(r.count*s);return Promise.resolve(new _n(l,s,c))}let o=[];return r.bufferView!==void 0?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),r.sparse!==void 0&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(s){let a=s[0],c=P9[r.type],l=Z1[r.componentType],u=l.BYTES_PER_ELEMENT,d=u*c,h=r.byteOffset||0,f=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,p=r.normalized===!0,v,g;if(f&&f!==d){let m=Math.floor(h/f),C="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+m+":"+r.count,w=t.cache.get(C);w||(v=new l(a,m*f,r.count*f/u),w=new A1(v,f/u),t.cache.add(C,w)),g=new I1(w,c,h%f/u,p)}else a===null?v=new l(r.count*c):v=new l(a,h,r.count*c),g=new _n(v,c,p);if(r.sparse!==void 0){let m=P9.SCALAR,C=Z1[r.sparse.indices.componentType],w=r.sparse.indices.byteOffset||0,y=r.sparse.values.byteOffset||0,z=new C(s[1],w,r.sparse.count*m),D=new l(s[2],y,r.sparse.count*c);a!==null&&(g=new _n(g.array.slice(),g.itemSize,g.normalized)),g.normalized=!1;for(let x=0,I=z.length;x<I;x++){let S=z[x];if(g.setX(S,D[x*c]),c>=2&&g.setY(S,D[x*c+1]),c>=3&&g.setZ(S,D[x*c+2]),c>=4&&g.setW(S,D[x*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}g.normalized=p}return g})}loadTexture(e){let t=this.json,i=this.options,o=t.textures[e].source,s=t.images[o],a=this.textureLoader;if(s.uri){let c=i.manager.getHandler(s.uri);c!==null&&(a=c)}return this.loadTextureImage(e,o,a)}loadTextureImage(e,t,i){let r=this,o=this.json,s=o.textures[e],a=o.images[t],c=(a.uri||a.bufferView)+":"+s.sampler;if(this.textureCache[c])return this.textureCache[c];let l=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=s.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);let h=(o.samplers||{})[s.sampler]||{};return u.magFilter=EI[h.magFilter]||Fi,u.minFilter=EI[h.minFilter]||Xr,u.wrapS=DI[h.wrapS]||fs,u.wrapT=DI[h.wrapT]||fs,u.generateMipmaps=!u.isCompressedTexture&&u.minFilter!==Mi&&u.minFilter!==Fi,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[c]=l,l}loadImageSource(e,t){let i=this,r=this.json,o=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());let s=r.images[e],a=self.URL||self.webkitURL,c=s.uri||"",l=!1;if(s.bufferView!==void 0)c=i.getDependency("bufferView",s.bufferView).then(function(d){l=!0;let h=new Blob([d],{type:s.mimeType});return c=a.createObjectURL(h),c});else if(s.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");let u=Promise.resolve(c).then(function(d){return new Promise(function(h,f){let p=h;t.isImageBitmapLoader===!0&&(p=function(v){let g=new zr(v);g.needsUpdate=!0,h(g)}),t.load(ra.resolveURL(d,o.path),p,void 0,f)})}).then(function(d){return l===!0&&a.revokeObjectURL(c),la(d,s),d.userData.mimeType=s.mimeType||aQ(s.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),d});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){let o=this;return this.getDependency("texture",i.index).then(function(s){if(!s)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(s=s.clone(),s.channel=i.texCoord),o.extensions[Yt.KHR_TEXTURE_TRANSFORM]){let a=i.extensions!==void 0?i.extensions[Yt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){let c=o.associations.get(s);s=o.extensions[Yt.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),o.associations.set(s,c)}}return r!==void 0&&(s.colorSpace=r),e[t]=s,s})}assignFinalMaterial(e){let t=e.geometry,i=e.material,r=t.attributes.tangent===void 0,o=t.attributes.color!==void 0,s=t.attributes.normal===void 0;if(e.isPoints){let a="PointsMaterial:"+i.uuid,c=this.cache.get(a);c||(c=new N1,Cr.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,c.sizeAttenuation=!1,this.cache.add(a,c)),i=c}else if(e.isLine){let a="LineBasicMaterial:"+i.uuid,c=this.cache.get(a);c||(c=new k1,Cr.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,this.cache.add(a,c)),i=c}if(r||o||s){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),o&&(a+="vertex-colors:"),s&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=i.clone(),o&&(c.vertexColors=!0),s&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(i))),i=c}e.material=i}getMaterialType(){return Ui}loadMaterial(e){let t=this,i=this.json,r=this.extensions,o=i.materials[e],s,a={},c=o.extensions||{},l=[];if(c[Yt.KHR_MATERIALS_UNLIT]){let d=r[Yt.KHR_MATERIALS_UNLIT];s=d.getMaterialType(),l.push(d.extendParams(a,o,t))}else{let d=o.pbrMetallicRoughness||{};if(a.color=new ot(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){let h=d.baseColorFactor;a.color.setRGB(h[0],h[1],h[2],Vi),a.opacity=h[3]}d.baseColorTexture!==void 0&&l.push(t.assignTexture(a,"map",d.baseColorTexture,Zn)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(l.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),l.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),s=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}o.doubleSided===!0&&(a.side=Dr);let u=o.alphaMode||R9.OPAQUE;if(u===R9.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===R9.MASK&&(a.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&s!==Fo&&(l.push(t.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new mt(1,1),o.normalTexture.scale!==void 0)){let d=o.normalTexture.scale;a.normalScale.set(d,d)}if(o.occlusionTexture!==void 0&&s!==Fo&&(l.push(t.assignTexture(a,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&s!==Fo){let d=o.emissiveFactor;a.emissive=new ot().setRGB(d[0],d[1],d[2],Vi)}return o.emissiveTexture!==void 0&&s!==Fo&&l.push(t.assignTexture(a,"emissiveMap",o.emissiveTexture,Zn)),Promise.all(l).then(function(){let d=new s(a);return o.name&&(d.name=o.name),la(d,o),t.associations.set(d,{materials:e}),o.extensions&&Al(r,d,o),d})}createUniqueName(e){let t=vn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){let t=this,i=this.extensions,r=this.primitiveCache;function o(a){return i[Yt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(c){return zI(c,a,t)})}let s=[];for(let a=0,c=e.length;a<c;a++){let l=e[a],u=sQ(l),d=r[u];if(d)s.push(d.promise);else{let h;l.extensions&&l.extensions[Yt.KHR_DRACO_MESH_COMPRESSION]?h=o(l):h=zI(new qr,l,t),r[u]={primitive:l,promise:h},s.push(h)}}return Promise.all(s)}loadMesh(e){let t=this,i=this.json,r=this.extensions,o=i.meshes[e],s=o.primitives,a=[];for(let c=0,l=s.length;c<l;c++){let u=s[c].material===void 0?iQ(this.cache):this.getDependency("material",s[c].material);a.push(u)}return a.push(t.loadGeometries(s)),Promise.all(a).then(function(c){let l=c.slice(0,c.length-1),u=c[c.length-1],d=[];for(let f=0,p=u.length;f<p;f++){let v=u[f],g=s[f],m,C=l[f];if(g.mode===ho.TRIANGLES||g.mode===ho.TRIANGLE_STRIP||g.mode===ho.TRIANGLE_FAN||g.mode===void 0)m=o.isSkinnedMesh===!0?new n0(v,C):new ri(v,C),m.isSkinnedMesh===!0&&m.normalizeSkinWeights(),g.mode===ho.TRIANGLE_STRIP?m.geometry=I9(m.geometry,S0):g.mode===ho.TRIANGLE_FAN&&(m.geometry=I9(m.geometry,G1));else if(g.mode===ho.LINES)m=new s0(v,C);else if(g.mode===ho.LINE_STRIP)m=new ml(v,C);else if(g.mode===ho.LINE_LOOP)m=new a0(v,C);else if(g.mode===ho.POINTS)m=new c0(v,C);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(m.geometry.morphAttributes).length>0&&oQ(m,o),m.name=t.createUniqueName(o.name||"mesh_"+e),la(m,o),g.extensions&&Al(r,m,g),t.assignFinalMaterial(m),d.push(m)}for(let f=0,p=d.length;f<p;f++)t.associations.set(d[f],{meshes:e,primitives:f});if(d.length===1)return o.extensions&&Al(r,d[0],o),d[0];let h=new No;o.extensions&&Al(r,h,o),t.associations.set(h,{meshes:e});for(let f=0,p=d.length;f<p;f++)h.add(d[f]);return h})}loadCamera(e){let t,i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new ii(ca.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new bl(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),la(t,i),Promise.resolve(t)}loadSkin(e){let t=this.json.skins[e],i=[];for(let r=0,o=t.joints.length;r<o;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){let o=r.pop(),s=r,a=[],c=[];for(let l=0,u=s.length;l<u;l++){let d=s[l];if(d){a.push(d);let h=new Dt;o!==null&&h.fromArray(o.array,l*16),c.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[l])}return new r0(a,c)})}loadAnimation(e){let t=this.json,i=this,r=t.animations[e],o=r.name?r.name:"animation_"+e,s=[],a=[],c=[],l=[],u=[];for(let d=0,h=r.channels.length;d<h;d++){let f=r.channels[d],p=r.samplers[f.sampler],v=f.target,g=v.node,m=r.parameters!==void 0?r.parameters[p.input]:p.input,C=r.parameters!==void 0?r.parameters[p.output]:p.output;v.node!==void 0&&(s.push(this.getDependency("node",g)),a.push(this.getDependency("accessor",m)),c.push(this.getDependency("accessor",C)),l.push(p),u.push(v))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(c),Promise.all(l),Promise.all(u)]).then(function(d){let h=d[0],f=d[1],p=d[2],v=d[3],g=d[4],m=[];for(let C=0,w=h.length;C<w;C++){let y=h[C],z=f[C],D=p[C],x=v[C],I=g[C];if(y===void 0)continue;y.updateMatrix&&y.updateMatrix();let S=i._createAnimationTracks(y,z,D,x,I);if(S)for(let M=0;M<S.length;M++)m.push(S[M])}return new h0(o,void 0,m)})}createNodeMesh(e){let t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(o){let s=i._getNodeRef(i.meshCache,r.mesh,o);return r.weights!==void 0&&s.traverse(function(a){if(a.isMesh)for(let c=0,l=r.weights.length;c<l;c++)a.morphTargetInfluences[c]=r.weights[c]}),s})}loadNode(e){let t=this.json,i=this,r=t.nodes[e],o=i._loadNodeShallow(e),s=[],a=r.children||[];for(let l=0,u=a.length;l<u;l++)s.push(i.getDependency("node",a[l]));let c=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([o,Promise.all(s),c]).then(function(l){let u=l[0],d=l[1],h=l[2];h!==null&&u.traverse(function(f){f.isSkinnedMesh&&f.bind(h,cQ)});for(let f=0,p=d.length;f<p;f++)u.add(d[f]);return u})}_loadNodeShallow(e){let t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];let o=t.nodes[e],s=o.name?r.createUniqueName(o.name):"",a=[],c=r._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return c&&a.push(c),o.camera!==void 0&&a.push(r.getDependency("camera",o.camera).then(function(l){return r._getNodeRef(r.cameraCache,o.camera,l)})),r._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){a.push(l)}),this.nodeCache[e]=Promise.all(a).then(function(l){let u;if(o.isBone===!0?u=new P1:l.length>1?u=new No:l.length===1?u=l[0]:u=new Ri,u!==l[0])for(let d=0,h=l.length;d<h;d++)u.add(l[d]);if(o.name&&(u.userData.name=o.name,u.name=s),la(u,o),o.extensions&&Al(i,u,o),o.matrix!==void 0){let d=new Dt;d.fromArray(o.matrix),u.applyMatrix4(d)}else o.translation!==void 0&&u.position.fromArray(o.translation),o.rotation!==void 0&&u.quaternion.fromArray(o.rotation),o.scale!==void 0&&u.scale.fromArray(o.scale);if(!r.associations.has(u))r.associations.set(u,{});else if(o.mesh!==void 0&&r.meshCache.refs[o.mesh]>1){let d=r.associations.get(u);r.associations.set(u,Z({},d))}return r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){let t=this.extensions,i=this.json.scenes[e],r=this,o=new No;i.name&&(o.name=r.createUniqueName(i.name)),la(o,i),i.extensions&&Al(t,o,i);let s=i.nodes||[],a=[];for(let c=0,l=s.length;c<l;c++)a.push(r.getDependency("node",s[c]));return Promise.all(a).then(function(c){for(let u=0,d=c.length;u<d;u++)o.add(c[u]);let l=u=>{let d=new Map;for(let[h,f]of r.associations)(h instanceof Cr||h instanceof zr)&&d.set(h,f);return u.traverse(h=>{let f=r.associations.get(h);f!=null&&d.set(h,f)}),d};return r.associations=l(o),o})}_createAnimationTracks(e,t,i,r,o){let s=[],a=e.name?e.name:e.uuid,c=[];lc[o.path]===lc.weights?e.traverse(function(h){h.morphTargetInfluences&&c.push(h.name?h.name:h.uuid)}):c.push(a);let l;switch(lc[o.path]){case lc.weights:l=vs;break;case lc.rotation:l=ys;break;case lc.translation:case lc.scale:l=_s;break;default:switch(i.itemSize){case 1:l=vs;break;case 2:case 3:default:l=_s;break}break}let u=r.interpolation!==void 0?nQ[r.interpolation]:Js,d=this._getArrayFromAccessor(i);for(let h=0,f=c.length;h<f;h++){let p=new l(c[h]+"."+lc[o.path],t.array,d,u);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(p),s.push(p)}return s}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){let i=oy(t.constructor),r=new Float32Array(t.length);for(let o=0,s=t.length;o<s;o++)r[o]=t[o]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){let r=this instanceof ys?iy:u8;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function lQ(n,e,t){let i=e.attributes,r=new Bi;if(i.POSITION!==void 0){let a=t.json.accessors[i.POSITION],c=a.min,l=a.max;if(c!==void 0&&l!==void 0){if(r.set(new k(c[0],c[1],c[2]),new k(l[0],l[1],l[2])),a.normalized){let u=oy(Z1[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;let o=e.targets;if(o!==void 0){let a=new k,c=new k;for(let l=0,u=o.length;l<u;l++){let d=o[l];if(d.POSITION!==void 0){let h=t.json.accessors[d.POSITION],f=h.min,p=h.max;if(f!==void 0&&p!==void 0){if(c.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),c.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),c.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),h.normalized){let v=oy(Z1[h.componentType]);c.multiplyScalar(v)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;let s=new wr;r.getCenter(s.center),s.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=s}function zI(n,e,t){let i=e.attributes,r=[];function o(s,a){return t.getDependency("accessor",s).then(function(c){n.setAttribute(a,c)})}for(let s in i){let a=ry[s]||s.toLowerCase();a in n.attributes||r.push(o(i[s],a))}if(e.indices!==void 0&&!n.index){let s=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(s)}return qt.workingColorSpace!==Vi&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${qt.workingColorSpace}" not supported.`),la(n,e),lQ(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?rQ(n,e.targets,t):n})}var II={type:"change"},cy={type:"start"},RI={type:"end"},d8=new ea,PI=new co,uQ=Math.cos(70*ca.DEG2RAD),Ci=new k,Ar=2*Math.PI,Cn={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},ay=1e-6,h8=class extends g0{constructor(e,t=null){super(e,t),this.state=Cn.NONE,this.target=new k,this.cursor=new k,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:oc.ROTATE,MIDDLE:oc.DOLLY,RIGHT:oc.PAN},this.touches={ONE:sc.ROTATE,TWO:sc.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new k,this._lastQuaternion=new Hi,this._lastTargetPosition=new k,this._quat=new Hi().setFromUnitVectors(e.up,new k(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new L1,this._sphericalDelta=new L1,this._scale=1,this._panOffset=new k,this._rotateStart=new mt,this._rotateEnd=new mt,this._rotateDelta=new mt,this._panStart=new mt,this._panEnd=new mt,this._panDelta=new mt,this._dollyStart=new mt,this._dollyEnd=new mt,this._dollyDelta=new mt,this._dollyDirection=new k,this._mouse=new mt,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=hQ.bind(this),this._onPointerDown=dQ.bind(this),this._onPointerUp=fQ.bind(this),this._onContextMenu=bQ.bind(this),this._onMouseWheel=gQ.bind(this),this._onKeyDown=vQ.bind(this),this._onTouchStart=yQ.bind(this),this._onTouchMove=_Q.bind(this),this._onMouseDown=pQ.bind(this),this._onMouseMove=mQ.bind(this),this._interceptControlDown=xQ.bind(this),this._interceptControlUp=MQ.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(II),this.update(),this.state=Cn.NONE}update(e=null){let t=this.object.position;Ci.copy(t).sub(this.target),Ci.applyQuaternion(this._quat),this._spherical.setFromVector3(Ci),this.autoRotate&&this.state===Cn.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(i)&&isFinite(r)&&(i<-Math.PI?i+=Ar:i>Math.PI&&(i-=Ar),r<-Math.PI?r+=Ar:r>Math.PI&&(r-=Ar),i<=r?this._spherical.theta=Math.max(i,Math.min(r,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+r)/2?Math.max(i,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let o=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{let s=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),o=s!=this._spherical.radius}if(Ci.setFromSpherical(this._spherical),Ci.applyQuaternion(this._quatInverse),t.copy(this.target).add(Ci),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let s=null;if(this.object.isPerspectiveCamera){let a=Ci.length();s=this._clampDistance(a*this._scale);let c=a-s;this.object.position.addScaledVector(this._dollyDirection,c),this.object.updateMatrixWorld(),o=!!c}else if(this.object.isOrthographicCamera){let a=new k(this._mouse.x,this._mouse.y,0);a.unproject(this.object);let c=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),o=c!==this.object.zoom;let l=new k(this._mouse.x,this._mouse.y,0);l.unproject(this.object),this.object.position.sub(l).add(a),this.object.updateMatrixWorld(),s=Ci.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;s!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(s).add(this.object.position):(d8.origin.copy(this.object.position),d8.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(d8.direction))<uQ?this.object.lookAt(this.target):(PI.setFromNormalAndCoplanarPoint(this.object.up,this.target),d8.intersectPlane(PI,this.target))))}else if(this.object.isOrthographicCamera){let s=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),s!==this.object.zoom&&(this.object.updateProjectionMatrix(),o=!0)}return this._scale=1,this._performCursorZoom=!1,o||this._lastPosition.distanceToSquared(this.object.position)>ay||8*(1-this._lastQuaternion.dot(this.object.quaternion))>ay||this._lastTargetPosition.distanceToSquared(this.target)>ay?(this.dispatchEvent(II),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Ar/60*this.autoRotateSpeed*e:Ar/60/60*this.autoRotateSpeed}_getZoomScale(e){let t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){Ci.setFromMatrixColumn(t,0),Ci.multiplyScalar(-e),this._panOffset.add(Ci)}_panUp(e,t){this.screenSpacePanning===!0?Ci.setFromMatrixColumn(t,1):(Ci.setFromMatrixColumn(t,0),Ci.crossVectors(this.object.up,Ci)),Ci.multiplyScalar(e),this._panOffset.add(Ci)}_pan(e,t){let i=this.domElement;if(this.object.isPerspectiveCamera){let r=this.object.position;Ci.copy(r).sub(this.target);let o=Ci.length();o*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*o/i.clientHeight,this.object.matrix),this._panUp(2*t*o/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;let i=this.domElement.getBoundingClientRect(),r=e-i.left,o=t-i.top,s=i.width,a=i.height;this._mouse.x=r/s*2-1,this._mouse.y=-(o/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;this._rotateLeft(Ar*this._rotateDelta.x/t.clientHeight),this._rotateUp(Ar*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(Ar*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-Ar*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(Ar*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-Ar*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._rotateStart.set(i,r)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panStart.set(i,r)}}_handleTouchStartDolly(e){let t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,o=Math.sqrt(i*i+r*r);this._dollyStart.set(0,o)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{let i=this._getSecondPointerPosition(e),r=.5*(e.pageX+i.x),o=.5*(e.pageY+i.y);this._rotateEnd.set(r,o)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;this._rotateLeft(Ar*this._rotateDelta.x/t.clientHeight),this._rotateUp(Ar*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{let t=this._getSecondPointerPosition(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this._panEnd.set(i,r)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){let t=this._getSecondPointerPosition(e),i=e.pageX-t.x,r=e.pageY-t.y,o=Math.sqrt(i*i+r*r);this._dollyEnd.set(0,o),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);let s=(e.pageX+t.x)*.5,a=(e.pageY+t.y)*.5;this._updateZoomParameters(s,a)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new mt,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){let t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){let t=e.deltaMode,i={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}};function dQ(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function hQ(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function fQ(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(RI),this.state=Cn.NONE;break;case 1:let e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function pQ(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case oc.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=Cn.DOLLY;break;case oc.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Cn.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Cn.ROTATE}break;case oc.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Cn.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Cn.PAN}break;default:this.state=Cn.NONE}this.state!==Cn.NONE&&this.dispatchEvent(cy)}function mQ(n){switch(this.state){case Cn.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case Cn.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case Cn.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function gQ(n){this.enabled===!1||this.enableZoom===!1||this.state!==Cn.NONE||(n.preventDefault(),this.dispatchEvent(cy),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(RI))}function vQ(n){this.enabled!==!1&&this._handleKeyDown(n)}function yQ(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case sc.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=Cn.TOUCH_ROTATE;break;case sc.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=Cn.TOUCH_PAN;break;default:this.state=Cn.NONE}break;case 2:switch(this.touches.TWO){case sc.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=Cn.TOUCH_DOLLY_PAN;break;case sc.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=Cn.TOUCH_DOLLY_ROTATE;break;default:this.state=Cn.NONE}break;default:this.state=Cn.NONE}this.state!==Cn.NONE&&this.dispatchEvent(cy)}function _Q(n){switch(this._trackPointer(n),this.state){case Cn.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case Cn.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case Cn.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case Cn.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=Cn.NONE}}function bQ(n){this.enabled!==!1&&n.preventDefault()}function xQ(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function MQ(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}var SQ=["rendererContainer"];function wQ(n,e){if(n&1&&(j(0,"div",16),me(1,"nz-alert",17),q()),n&2){let t=R();O(),$("nzMessage",t.errorMessage)}}function CQ(n,e){n&1&&(j(0,"div",18)(1,"nz-spin",19)(2,"div",20),rt(3,"Loading GLB model..."),q()()())}function TQ(n,e){n&1&&me(0,"span",21)}var f8=class n{constructor(e){this.iconService=e;this.iconService.addIcon(Oa,Zu,jT,xE)}rendererContainer;glbUrl="";isLoading=!1;errorMessage="";scene;camera;renderer;controls;loader;currentModel=null;ngOnInit(){this.initThreeJS()}initThreeJS(){this.scene=new gs,this.scene.background=new ot(0),this.camera=new ii(75,this.rendererContainer.nativeElement.clientWidth/this.rendererContainer.nativeElement.clientHeight,.1,1e3),this.camera.position.set(0,0,5),this.renderer=new X1({antialias:!0}),this.renderer.setSize(this.rendererContainer.nativeElement.clientWidth,this.rendererContainer.nativeElement.clientHeight),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=V1,this.renderer.toneMapping=xp,this.renderer.toneMappingExposure=1.2,this.renderer.outputColorSpace=Zn,this.rendererContainer.nativeElement.appendChild(this.renderer.domElement),this.addLights(),this.controls=new h8(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.05,this.loader=new l8,this.animate(),window.addEventListener("resize",()=>this.onWindowResize())}addLights(){let e=new xl(16777215,1);this.scene.add(e);let t=new sr(16777215,1.5);t.position.set(10,10,5),t.castShadow=!0,t.shadow.mapSize.width=2048,t.shadow.mapSize.height=2048,t.shadow.camera.near=.5,t.shadow.camera.far=50,this.scene.add(t);let i=new sr(16777215,1);i.position.set(-10,-10,5),this.scene.add(i);let r=new sr(16777215,1);r.position.set(0,10,0),this.scene.add(r);let o=new sr(16777215,1);o.position.set(0,0,10),this.scene.add(o);let s=new _l(16777215,.8);s.position.set(0,0,0),this.scene.add(s)}loadGlbModel(){if(!this.glbUrl.trim()){this.errorMessage="Please enter a valid GLB URL";return}this.isLoading=!0,this.errorMessage="",this.currentModel&&(this.scene.remove(this.currentModel),this.currentModel=null),this.loader.load(this.glbUrl,e=>{this.currentModel=e.scene,this.currentModel.traverse(a=>{a instanceof ri&&(a.castShadow=!0,a.receiveShadow=!0,a.material&&(Array.isArray(a.material)?a.material.forEach(c=>{c instanceof Ui&&(c.metalness=.1,c.roughness=.8,c.envMapIntensity=1)}):a.material instanceof Ui&&(a.material.metalness=.1,a.material.roughness=.8,a.material.envMapIntensity=1)))});let t=new Bi().setFromObject(this.currentModel),i=t.getCenter(new k),r=t.getSize(new k),s=2/Math.max(r.x,r.y,r.z);this.currentModel.scale.setScalar(s),this.currentModel.position.sub(i.multiplyScalar(s)),this.scene.add(this.currentModel),this.camera.position.set(0,0,5),this.controls.reset(),this.isLoading=!1},e=>{console.log("Loading progress:",e.loaded/e.total*100+"%")},e=>{console.error("Error loading GLB:",e),this.errorMessage="Failed to load GLB file. Please check the URL and try again.",this.isLoading=!1})}animate(){requestAnimationFrame(()=>this.animate()),this.controls.update(),this.renderer.render(this.scene,this.camera)}onWindowResize(){let e=this.rendererContainer.nativeElement.clientWidth,t=this.rendererContainer.nativeElement.clientHeight;this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t)}resetCamera(){this.camera.position.set(0,0,5),this.controls.reset()}toggleWireframe(){this.currentModel&&this.currentModel.traverse(e=>{e instanceof ri&&(e.material.wireframe=!e.material.wireframe)})}static \u0275fac=function(t){return new(t||n)(Y(Ba))};static \u0275cmp=Fe({type:n,selectors:[["app-glb-viewer"]],viewQuery:function(t,i){if(t&1&&Ai(SQ,7),t&2){let r;Wt(r=$t())&&(i.rendererContainer=r.first)}},decls:21,vars:7,consts:[["rendererContainer",""],["suffixTemplate",""],[1,"glb-viewer-container"],[1,"input-section"],[3,"nzSuffix"],["nz-input","","placeholder","Enter GLB file URL",3,"ngModelChange","keyup.enter","ngModel"],[1,"controls-section"],["nz-button","","nzType","primary",3,"click","nzLoading"],["nz-icon","","nzType","eye","nzTheme","outline"],["nz-button","","nzType","default",3,"click","disabled"],["nz-icon","","nzType","reload","nzTheme","outline"],["nz-icon","","nzType","border","nzTheme","outline"],["class","error-section",4,"ngIf"],[1,"viewer-section"],[1,"renderer-container"],["class","loading-overlay",4,"ngIf"],[1,"error-section"],["nzType","error","nzShowIcon","",3,"nzMessage"],[1,"loading-overlay"],["nzSize","large"],[1,"loading-text"],["nz-icon","","nzType","link","nzTheme","outline"]],template:function(t,i){if(t&1){let r=un();j(0,"div",2)(1,"div",3)(2,"nz-input-group",4)(3,"input",5),Oc("ngModelChange",function(s){return je(r),Iu(i.glbUrl,s)||(i.glbUrl=s),Ge(s)}),We("keyup.enter",function(){return je(r),Ge(i.loadGlbModel())}),q()()(),j(4,"div",6)(5,"button",7),We("click",function(){return je(r),Ge(i.loadGlbModel())}),me(6,"span",8),rt(7," Load Model "),q(),j(8,"button",9),We("click",function(){return je(r),Ge(i.resetCamera())}),me(9,"span",10),rt(10," Reset Camera "),q(),j(11,"button",9),We("click",function(){return je(r),Ge(i.toggleWireframe())}),me(12,"span",11),rt(13," Toggle Wireframe "),q()(),G(14,wQ,2,1,"div",12),j(15,"div",13)(16,"div",14,0),G(18,CQ,4,0,"div",15),q()()(),G(19,TQ,1,0,"ng-template",null,1,Jt)}if(t&2){let r=dt(20);O(2),$("nzSuffix",r),O(),Nc("ngModel",i.glbUrl),O(2),$("nzLoading",i.isLoading),O(3),$("disabled",!i.currentModel),O(3),$("disabled",!i.currentModel),O(3),$("ngIf",i.errorMessage),O(4),$("ngIf",i.isLoading)}},dependencies:[Da,Ld,f3,a1,c1,el,_3,y3,Q7,rz,u1,ol,l1,b3,x3,S3,M3,Mz,av,wn,pn],styles:[".glb-viewer-container[_ngcontent-%COMP%]{height:100vh;background:#000;color:#fff;display:flex;flex-direction:column;padding:20px;gap:20px}.input-section[_ngcontent-%COMP%]{flex-shrink:0}.input-section[_ngcontent-%COMP%]   nz-input-group[_ngcontent-%COMP%]{width:100%;max-width:600px}.input-section[_ngcontent-%COMP%]     .ant-input{background:#fff!important;border:1px solid rgba(255,255,255,.2)!important;border-bottom:2px solid rgba(255,255,255,.4)!important;color:#000!important;border-radius:8px!important}.input-section[_ngcontent-%COMP%]     .ant-input:focus{border-color:#1890ff!important;border-bottom:2px solid #1890ff!important;box-shadow:0 0 0 2px #1890ff33!important;background:#fff!important;color:#000!important}.input-section[_ngcontent-%COMP%]     .ant-input::placeholder{color:#666!important}.controls-section[_ngcontent-%COMP%]{display:flex;gap:10px;flex-shrink:0;flex-wrap:wrap}.controls-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.controls-section[_ngcontent-%COMP%]     .ant-btn{background:#ffffff1a!important;border:1px solid rgba(255,255,255,.2)!important;color:#fff!important;border-radius:8px!important}.controls-section[_ngcontent-%COMP%]     .ant-btn:hover{background:#fff3!important;border-color:#fff6!important}.controls-section[_ngcontent-%COMP%]     .ant-btn-primary{background:#1890ff!important;border-color:#1890ff!important}.controls-section[_ngcontent-%COMP%]     .ant-btn-primary:hover{background:#40a9ff!important;border-color:#40a9ff!important}.controls-section[_ngcontent-%COMP%]     .ant-btn:disabled{background:#ffffff0d!important;color:#ffffff4d!important;border-color:#ffffff1a!important}.error-section[_ngcontent-%COMP%]{flex-shrink:0}.error-section[_ngcontent-%COMP%]     .ant-alert{background:#ff4d4f1a!important;border:1px solid rgba(255,77,79,.3)!important;color:#ff4d4f!important;border-radius:8px!important}.viewer-section[_ngcontent-%COMP%]{flex:1;position:relative;min-height:0}.renderer-container[_ngcontent-%COMP%]{width:100%;height:calc(100% - 100px);border:2px solid rgba(255,255,255,.1);border-radius:8px;overflow:hidden;position:relative;background:#000}.renderer-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:block;width:100%!important;height:100%!important}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:10}.loading-text[_ngcontent-%COMP%]{margin-top:10px;color:#fff;font-size:14px}.instructions[_ngcontent-%COMP%]{background:#f8f9fa;padding:15px;border-radius:6px;border-left:4px solid #1890ff}.instructions[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;color:#1890ff;font-size:16px}.instructions[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px}.instructions[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:5px;color:#666;line-height:1.5}@media (max-width: 768px){.glb-viewer-container[_ngcontent-%COMP%]{padding:10px;gap:15px}.controls-section[_ngcontent-%COMP%]{flex-direction:column}.controls-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 480px){.renderer-container[_ngcontent-%COMP%]{height:250px}}"]})};var EQ=n=>({$implicit:n});function DQ(n,e){if(n&1&&me(0,"nz-icon",3),n&2){let t=R(3);$("nzType",t.icon)}}function zQ(n,e){if(n&1&&(An(0),rt(1),In()),n&2){let t=e.$implicit,i=R(4);O(),Mo(" ",t(i.nzPercent)," ")}}function AQ(n,e){if(n&1&&G(0,zQ,2,1,"ng-container",4),n&2){let t=R(3);$("nzStringTemplateOutlet",t.formatter)("nzStringTemplateOutletContext",Fr(2,EQ,t.nzPercent))}}function IQ(n,e){if(n&1&&(j(0,"span",2),G(1,DQ,1,1,"nz-icon",3)(2,AQ,1,4,"ng-container"),q()),n&2){let t=R(2);O(),le((t.status==="exception"||t.status==="success")&&!t.nzFormat?1:2)}}function PQ(n,e){if(n&1&&G(0,IQ,3,1,"span",2),n&2){let t=R();le(t.nzShowInfo?0:-1)}}function RQ(n,e){if(n&1&&me(0,"div",8),n&2){let t=e.$implicit;mr(t)}}function kQ(n,e){}function NQ(n,e){if(n&1&&(j(0,"div",5),Xi(1,RQ,1,2,"div",6,Ta),G(3,kQ,0,0,"ng-template",7),q()),n&2){let t=R(2),i=dt(1);O(),Ki(t.steps),O(2),$("ngTemplateOutlet",i)}}function OQ(n,e){if(n&1&&me(0,"div",13),n&2){let t=R(3);Sn("width",t.nzSuccessPercent,"%")("border-radius",t.nzStrokeLinecap==="round"?"100px":"0")("height",t.strokeWidth,"px")}}function LQ(n,e){}function FQ(n,e){if(n&1&&(j(0,"div",9)(1,"div",10),me(2,"div",11),G(3,OQ,1,6,"div",12),q()(),G(4,LQ,0,0,"ng-template",7)),n&2){let t=R(2),i=dt(1);O(2),Sn("width",t.nzPercent,"%")("border-radius",t.nzStrokeLinecap==="round"?"100px":"0")("background",t.isGradient?null:t.nzStrokeColor)("background-image",t.isGradient?t.lineGradient:null)("height",t.strokeWidth,"px"),O(),le(t.nzSuccessPercent||t.nzSuccessPercent===0?3:-1),O(),$("ngTemplateOutlet",i)}}function VQ(n,e){if(n&1&&(j(0,"div"),G(1,NQ,4,1,"div",5)(2,FQ,5,12),q()),n&2){let t=R();O(),le(t.isSteps?1:2)}}function HQ(n,e){if(n&1&&(Tu(),me(0,"stop")),n&2){let t=e.$implicit;fn("offset",t.offset)("stop-color",t.color)}}function BQ(n,e){if(n&1&&(Tu(),j(0,"defs")(1,"linearGradient",17),Xi(2,HQ,1,2,":svg:stop",null,Ta),q()()),n&2){let t=R(2);O(),$("id","gradient-"+t.gradientId),O(),Ki(t.circleGradient)}}function UQ(n,e){if(n&1&&(Tu(),me(0,"path",18)),n&2){let t=e.$implicit,i=R(2);mr(t.strokePathStyle),fn("d",i.pathString)("stroke-linecap",i.nzStrokeLinecap)("stroke",t.stroke)("stroke-width",i.nzPercent?i.strokeWidth:0)}}function YQ(n,e){}function jQ(n,e){if(n&1&&(j(0,"div",10),Tu(),j(1,"svg",14),G(2,BQ,4,1,":svg:defs"),me(3,"path",15),Xi(4,UQ,1,6,":svg:path",16,Ta),q(),G(6,YQ,0,0,"ng-template",7),q()),n&2){let t=R(),i=dt(1);Sn("width",t.nzWidth,"px")("height",t.nzWidth,"px")("font-size",t.nzWidth*.15+6,"px"),ze("ant-progress-circle-gradient",t.isGradient),O(2),le(t.isGradient?2:-1),O(),mr(t.trailPathStyle),fn("stroke-width",t.strokeWidth)("d",t.pathString),O(),Ki(t.progressCirclePath),O(2),$("ngTemplateOutlet",i)}}function GQ(n){return+n.replace("%","")}var OI=n=>{let e=[];return Object.keys(n).forEach(t=>{let i=n[t],r=GQ(t);isNaN(r)||e.push({key:r,value:i})}),e=e.sort((t,i)=>t.key-i.key),e},WQ=n=>OI(n).map(({key:e,value:t})=>({offset:`${e}%`,color:t})),$Q=n=>{let o=n,{from:e="#1890ff",to:t="#1890ff",direction:i="to right"}=o,r=nd(o,["from","to","direction"]);if(Object.keys(r).length!==0){let s=OI(r).map(({key:a,value:c})=>`${c} ${a}%`).join(", ");return`linear-gradient(${i}, ${s})`}return`linear-gradient(${i}, ${e}, ${t})`},qQ=0,NI="progress",XQ=new Map([["success","check"],["exception","close"]]),KQ=new Map([["normal","#108ee9"],["exception","#ff5500"],["success","#87d068"]]),ZQ=n=>`${n}%`,uy=(()=>{let n,e=[],t=[],i,r=[],o=[],s,a=[],c=[],l,u=[],d=[],h,f=[],p=[],v,g=[],m=[],C,w=[],y=[];return class ly{static{let D=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;n=[Fn()],i=[Fn()],s=[Fn()],l=[Fn()],h=[Fn()],v=[Fn()],C=[Fn()],On(null,null,n,{kind:"field",name:"nzShowInfo",static:!1,private:!1,access:{has:x=>"nzShowInfo"in x,get:x=>x.nzShowInfo,set:(x,I)=>{x.nzShowInfo=I}},metadata:D},e,t),On(null,null,i,{kind:"field",name:"nzStrokeColor",static:!1,private:!1,access:{has:x=>"nzStrokeColor"in x,get:x=>x.nzStrokeColor,set:(x,I)=>{x.nzStrokeColor=I}},metadata:D},r,o),On(null,null,s,{kind:"field",name:"nzSize",static:!1,private:!1,access:{has:x=>"nzSize"in x,get:x=>x.nzSize,set:(x,I)=>{x.nzSize=I}},metadata:D},a,c),On(null,null,l,{kind:"field",name:"nzStrokeWidth",static:!1,private:!1,access:{has:x=>"nzStrokeWidth"in x,get:x=>x.nzStrokeWidth,set:(x,I)=>{x.nzStrokeWidth=I}},metadata:D},u,d),On(null,null,h,{kind:"field",name:"nzGapDegree",static:!1,private:!1,access:{has:x=>"nzGapDegree"in x,get:x=>x.nzGapDegree,set:(x,I)=>{x.nzGapDegree=I}},metadata:D},f,p),On(null,null,v,{kind:"field",name:"nzGapPosition",static:!1,private:!1,access:{has:x=>"nzGapPosition"in x,get:x=>x.nzGapPosition,set:(x,I)=>{x.nzGapPosition=I}},metadata:D},g,m),On(null,null,C,{kind:"field",name:"nzStrokeLinecap",static:!1,private:!1,access:{has:x=>"nzStrokeLinecap"in x,get:x=>x.nzStrokeLinecap,set:(x,I)=>{x.nzStrokeLinecap=I}},metadata:D},w,y),D&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:D})}cdr;nzConfigService;directionality;_nzModuleName=NI;nzShowInfo=Ct(this,e,!0);nzWidth=(Ct(this,t),132);nzStrokeColor=Ct(this,r,void 0);nzSize=(Ct(this,o),Ct(this,a,"default"));nzFormat=Ct(this,c);nzSuccessPercent;nzPercent=0;nzStrokeWidth=Ct(this,u,void 0);nzGapDegree=(Ct(this,d),Ct(this,f,void 0));nzStatus=Ct(this,p);nzType="line";nzGapPosition=Ct(this,g,"top");nzStrokeLinecap=(Ct(this,m),Ct(this,w,"round"));nzSteps=(Ct(this,y),0);steps=[];lineGradient=null;isGradient=!1;isSteps=!1;gradientId=qQ++;progressCirclePath=[];circleGradient;trailPathStyle=null;pathString;icon;dir="ltr";get formatter(){return this.nzFormat||ZQ}get status(){return this.nzStatus||this.inferredStatus}get strokeWidth(){return this.nzStrokeWidth||(this.nzType==="line"&&this.nzSize!=="small"?8:6)}get isCircleStyle(){return this.nzType==="circle"||this.nzType==="dashboard"}cachedStatus="normal";inferredStatus="normal";destroy$=new ce;constructor(D,x,I){this.cdr=D,this.nzConfigService=x,this.directionality=I}ngOnChanges(D){let{nzSteps:x,nzGapPosition:I,nzStrokeLinecap:S,nzStrokeColor:M,nzGapDegree:A,nzType:J,nzStatus:K,nzPercent:Q,nzSuccessPercent:ee,nzStrokeWidth:L}=D;K&&(this.cachedStatus=this.nzStatus||this.cachedStatus),(Q||ee)&&(parseInt(this.nzPercent.toString(),10)>=100?(us(this.nzSuccessPercent)&&this.nzSuccessPercent>=100||this.nzSuccessPercent===void 0)&&(this.inferredStatus="success"):this.inferredStatus=this.cachedStatus),(K||Q||ee||M)&&this.updateIcon(),M&&this.setStrokeColor(),(I||S||A||J||Q||M||M)&&this.getCirclePaths(),(Q||x||L)&&(this.isSteps=this.nzSteps>0,this.isSteps&&this.getSteps())}ngOnInit(){this.nzConfigService.getConfigChangeEventForComponent(NI).pipe(_e(this.destroy$)).subscribe(()=>{this.updateIcon(),this.setStrokeColor(),this.getCirclePaths()}),this.directionality.change?.pipe(_e(this.destroy$)).subscribe(D=>{this.dir=D,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}updateIcon(){let D=XQ.get(this.status);this.icon=D?D+(this.isCircleStyle?"-o":"-circle-fill"):""}getSteps(){let D=Math.floor(this.nzSteps*(this.nzPercent/100)),x=this.nzSize==="small"?2:14,I=[];for(let S=0;S<this.nzSteps;S++){let M;S<=D-1&&(M=this.nzStrokeColor);let A={backgroundColor:`${M}`,width:`${x}px`,height:`${this.strokeWidth}px`};I.push(A)}this.steps=I}getCirclePaths(){if(!this.isCircleStyle)return;let D=us(this.nzSuccessPercent)?[this.nzSuccessPercent,this.nzPercent]:[this.nzPercent],x=50-this.strokeWidth/2,I=this.nzGapPosition||(this.nzType==="circle"?"top":"bottom"),S=Math.PI*2*x,M=this.nzGapDegree||(this.nzType==="circle"?0:75),A=0,J=-x,K=0,Q=x*-2;switch(I){case"left":A=-x,J=0,K=x*2,Q=0;break;case"right":A=x,J=0,K=x*-2,Q=0;break;case"bottom":J=x,Q=x*2;break;default:}this.pathString=`M 50,50 m ${A},${J}
       a ${x},${x} 0 1 1 ${K},${-Q}
       a ${x},${x} 0 1 1 ${-K},${Q}`,this.trailPathStyle={strokeDasharray:`${S-M}px ${S}px`,strokeDashoffset:`-${M/2}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s"},this.progressCirclePath=D.map((ee,L)=>{let B=D.length===2&&L===0;return{stroke:this.isGradient&&!B?`url(#gradient-${this.gradientId})`:null,strokePathStyle:{stroke:this.isGradient?null:B?KQ.get("success"):this.nzStrokeColor,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s",strokeDasharray:`${(ee||0)/100*(S-M)}px ${S}px`,strokeDashoffset:`-${M/2}px`}}}).reverse()}setStrokeColor(){let D=this.nzStrokeColor,x=this.isGradient=!!D&&typeof D!="string";x&&!this.isCircleStyle?this.lineGradient=$Q(D):x&&this.isCircleStyle?this.circleGradient=WQ(this.nzStrokeColor):(this.lineGradient=null,this.circleGradient=[])}static \u0275fac=function(x){return new(x||ly)(Y(Mt),Y(ci),Y(Ut))};static \u0275cmp=Fe({type:ly,selectors:[["nz-progress"]],inputs:{nzShowInfo:"nzShowInfo",nzWidth:"nzWidth",nzStrokeColor:"nzStrokeColor",nzSize:"nzSize",nzFormat:"nzFormat",nzSuccessPercent:[2,"nzSuccessPercent","nzSuccessPercent",t1],nzPercent:[2,"nzPercent","nzPercent",yi],nzStrokeWidth:[2,"nzStrokeWidth","nzStrokeWidth",t1],nzGapDegree:[2,"nzGapDegree","nzGapDegree",t1],nzStatus:"nzStatus",nzType:"nzType",nzGapPosition:"nzGapPosition",nzStrokeLinecap:"nzStrokeLinecap",nzSteps:[2,"nzSteps","nzSteps",yi]},exportAs:["nzProgress"],features:[$e],decls:5,vars:18,consts:[["progressInfoTemplate",""],[1,"ant-progress-inner",3,"width","height","fontSize","ant-progress-circle-gradient"],[1,"ant-progress-text"],[3,"nzType"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],[1,"ant-progress-steps-outer"],[1,"ant-progress-steps-item",3,"style"],[3,"ngTemplateOutlet"],[1,"ant-progress-steps-item"],[1,"ant-progress-outer"],[1,"ant-progress-inner"],[1,"ant-progress-bg"],[1,"ant-progress-success-bg",3,"width","border-radius","height"],[1,"ant-progress-success-bg"],["viewBox","0 0 100 100",1,"ant-progress-circle"],["stroke","#f3f3f3","fill-opacity","0",1,"ant-progress-circle-trail"],["fill-opacity","0",1,"ant-progress-circle-path",3,"style"],["x1","100%","y1","0%","x2","0%","y2","0%",3,"id"],["fill-opacity","0",1,"ant-progress-circle-path"]],template:function(x,I){x&1&&(G(0,PQ,1,1,"ng-template",null,0,Jt),j(2,"div"),G(3,VQ,3,1,"div")(4,jQ,7,14,"div",1),q()),x&2&&(O(2),si("ant-progress ant-progress-status-"+I.status),ze("ant-progress-line",I.nzType==="line")("ant-progress-small",I.nzSize==="small")("ant-progress-default",I.nzSize==="default")("ant-progress-show-info",I.nzShowInfo)("ant-progress-circle",I.isCircleStyle)("ant-progress-steps",I.isSteps)("ant-progress-rtl",I.dir==="rtl"),O(),le(I.nzType==="line"?3:-1),O(),le(I.isCircleStyle?4:-1))},dependencies:[wn,pn,xi,li,ni],encapsulation:2,changeDetection:0})}})(),LI=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({imports:[uy]})}return n})();var JQ=20,VI=(()=>{class n{_ngZone=T(_t);_platform=T(Un);_renderer=T(Xn).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new ce;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=JQ){return this._platform.isBrowser?new it(i=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let r=t>0?this._scrolled.pipe(va(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):Ae()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){let r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(xt(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(t){let i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,t)&&i.push(o)}),i}_scrollableContainsElement(t,i){let r=Ju(i),o=t.getElementRef().nativeElement;do if(r==o)return!0;while(r=r.parentElement);return!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var eJ=20,dy=(()=>{class n{_platform=T(Un);_listeners;_viewportSize;_change=new ce;_document=T(At,{optional:!0});constructor(){let t=T(_t),i=T(Xn).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let r=o=>this._change.next(o);this._listeners=[i.listen("window","resize",r),i.listen("window","orientationchange",r)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,i=this._getWindow(),r=t.documentElement,o=r.getBoundingClientRect(),s=-o.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,a=-o.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:s,left:a}}change(t=eJ){return t>0?this._change.pipe(va(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var FI=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({})}return n})(),hy=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({imports:[nl,FI,nl,FI]})}return n})();var Q1=class{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},J1=class extends Q1{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(e,t,i,r,o){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.projectableNodes=o}},ed=class extends Q1{templateRef;viewContainerRef;context;injector;constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}},p8=class extends Q1{element;constructor(e){super(),this.element=e instanceof Je?e.nativeElement:e}},m8=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof J1)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof ed)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof p8)return this._attachedPortal=e,this.attachDomPortal(e)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var T0=class extends m8{outletElement;_appRef;_defaultInjector;_document;constructor(e,t,i,r,o){super(),this.outletElement=e,this._appRef=i,this._defaultInjector=r,this._document=o}attachComponentPortal(e){let t;if(e.viewContainerRef){let i=e.injector||e.viewContainerRef.injector,r=i.get(Sa,null,{optional:!0})||void 0;t=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:i,ngModuleRef:r,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>t.destroy())}else{let i=this._appRef,r=e.injector||this._defaultInjector||Ln.NULL,o=r.get(Jn,i.injector);t=C2(e.component,{elementInjector:r,environmentInjector:o,projectableNodes:e.projectableNodes||void 0}),i.attachView(t.hostView),this.setDisposeFn(()=>{i.viewCount>0&&i.detachView(t.hostView),t.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(t)),this._attachedPortal=e,t}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);r!==-1&&t.remove(r)}),this._attachedPortal=e,i}attachDomPortal=e=>{let t=e.element;t.parentNode;let i=this._document.createComment("dom-portal");t.parentNode.insertBefore(i,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(t,i)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var fy=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({})}return n})();var HI=nD(),g8=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,t){this._viewportRuler=e,this._document=t}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Gn(-this._previousScrollPosition.left),e.style.top=Gn(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,t=this._document.body,i=e.style,r=t.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),HI&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),HI&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let t=this._document.documentElement,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}};var v8=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(xt(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}},E0=class{enable(){}disable(){}attach(){}};function py(n,e){return e.some(t=>{let i=n.bottom<t.top,r=n.top>t.bottom,o=n.right<t.left,s=n.left>t.right;return i||r||o||s})}function BI(n,e){return e.some(t=>{let i=n.top<t.top,r=n.bottom>t.bottom,o=n.left<t.left,s=n.right>t.right;return i||r||o||s})}var y8=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();py(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},$I=(()=>{class n{_scrollDispatcher=T(VI);_viewportRuler=T(dy);_ngZone=T(_t);_document=T(At);constructor(){}noop=()=>new E0;close=t=>new v8(this._scrollDispatcher,this._ngZone,this._viewportRuler,t);block=()=>new g8(this._viewportRuler,this._document);reposition=t=>new y8(this._scrollDispatcher,this._viewportRuler,this._ngZone,t);static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),D0=class{positionStrategy;scrollStrategy=new E0;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(e){if(e){let t=Object.keys(e);for(let i of t)e[i]!==void 0&&(this[i]=e[i])}}},Yn=class{offsetX;offsetY;panelClass;originX;originY;overlayX;overlayY;constructor(e,t,i,r,o){this.offsetX=i,this.offsetY=r,this.panelClass=o,this.originX=e.originX,this.originY=e.originY,this.overlayX=t.overlayX,this.overlayY=t.overlayY}};var _8=class{connectionPair;scrollableViewProperties;constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}};var qI=(()=>{class n{_attachedOverlays=[];_document=T(At);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){let i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),XI=(()=>{class n extends qI{_ngZone=T(_t);_renderer=T(Xn).createRenderer(null,null);_cleanupKeydown;add(t){super.add(t),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=t=>{let i=this._attachedOverlays;for(let r=i.length-1;r>-1;r--)if(i[r]._keydownEvents.observers.length>0){this._ngZone.run(()=>i[r]._keydownEvents.next(t));break}};static \u0275fac=(()=>{let t;return function(r){return(t||(t=qi(n)))(r||n)}})();static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),KI=(()=>{class n extends qI{_platform=T(Un);_ngZone=T(_t);_renderer=T(Xn).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(t){if(super.add(t),!this._isAttached){let i=this._document.body,r={capture:!0};this._cleanups=this._ngZone.runOutsideAngular(()=>[Ys(this._renderer,i,"pointerdown",this._pointerDownListener,r),Ys(this._renderer,i,"click",this._clickListener,r),Ys(this._renderer,i,"auxclick",this._clickListener,r),Ys(this._renderer,i,"contextmenu",this._clickListener,r)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(t=>t()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=t=>{this._pointerDownEventTarget=Ur(t)};_clickListener=t=>{let i=Ur(t),r=t.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:i;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let s=o.length-1;s>-1;s--){let a=o[s];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(UI(a.overlayElement,i)||UI(a.overlayElement,r))break;let c=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>c.next(t)):c.next(t)}};static \u0275fac=(()=>{let t;return function(r){return(t||(t=qi(n)))(r||n)}})();static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function UI(n,e){let t=typeof ShadowRoot<"u"&&ShadowRoot,i=e;for(;i;){if(i===n)return!0;i=t&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var ZI=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return n})(),QI=(()=>{class n{_platform=T(Un);_containerElement;_document=T(At);_styleLoader=T(W7);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t="cdk-overlay-container";if(this._platform.isBrowser||x7()){let r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}let i=this._document.createElement("div");i.classList.add(t),x7()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}_loadStyles(){this._styleLoader.load(ZI)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),my=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(e,t,i,r){this._renderer=t,this._ngZone=i,this.element=e.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=t.listen(this.element,"click",r)}detach(){this._ngZone.runOutsideAngular(()=>{let e=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(e,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),e.style.pointerEvents="none",e.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},b8=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new ce;_attachments=new ce;_detachments=new ce;_positionStrategy;_scrollStrategy;_locationChanges=Kt.EMPTY;_backdropRef=null;_previousHostParent;_keydownEvents=new ce;_outsidePointerEvents=new ce;_renders=new ce;_afterRenderRef;_afterNextRenderRef;constructor(e,t,i,r,o,s,a,c,l,u=!1,d,h){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._injector=d,this._renderer=h,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=gr(()=>ig(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=xo(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof t?.onDestroy=="function"&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Z(Z({},this._config),e),this._updateElementSize()}setDirection(e){this._config=lt(Z({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Gn(this._config.width),e.height=Gn(this._config.height),e.minWidth=Gn(this._config.minWidth),e.minHeight=Gn(this._config.minHeight),e.maxWidth=Gn(this._config.maxWidth),e.maxHeight=Gn(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new my(this._document,this._renderer,this._ngZone,t=>{this._backdropClick.next(t)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(e))}):this._backdropRef.element.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(e,t,i){let r=f7(t||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let e=this._renders.pipe(_e(ga(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e?.disable(),e?.detach?.()}},YI="cdk-overlay-connected-position-bounding-box",tJ=/([A-Za-z%]+)$/,x8=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new ce;_resizeSubscription=Kt.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(YI),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[],s;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,t,a),u=this._getOverlayFit(l,t,i,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(u,l,i)){o.push({position:a,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!s||s.overlayFit.visibleArea<u.visibleArea)&&(s={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:t})}if(o.length){let a=null,c=-1;for(let l of o){let u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Il(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(YI),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r=i.originX=="start"?s:a}t.left<0&&(r-=t.left);let o;return i.originY=="center"?o=e.top+e.height/2:o=i.originY=="top"?e.top:e.bottom,t.top<0&&(o-=t.top),{x:r,y:o}}_getOverlayPoint(e,t,i){let r;i.overlayX=="center"?r=-t.width/2:i.overlayX==="start"?r=this._isRtl()?-t.width:0:r=this._isRtl()?0:-t.width;let o;return i.overlayY=="center"?o=-t.height/2:o=i.overlayY=="top"?0:-t.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,t,i,r){let o=GI(t),{x:s,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(s+=c),l&&(a+=l);let u=0-s,d=s+o.width-i.width,h=0-a,f=a+o.height-i.height,p=this._subtractOverflows(o.width,u,d),v=this._subtractOverflows(o.height,h,f),g=p*v;return{visibleArea:g,isCompletelyWithinViewport:o.width*o.height===g,fitsInViewportVertically:v===o.height,fitsInViewportHorizontally:p==o.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){let r=i.bottom-t.y,o=i.right-t.x,s=jI(this._overlayRef.getConfig().minHeight),a=jI(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportVertically||s!=null&&s<=r,l=e.fitsInViewportHorizontally||a!=null&&a<=o;return c&&l}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=GI(t),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),a=Math.max(e.y+r.height-o.height,0),c=Math.max(o.top-i.top-e.y,0),l=Math.max(o.left-i.left-e.x,0),u=0,d=0;return r.width<=o.width?u=l||-s:u=e.x<this._viewportMargin?o.left-i.left-e.x:0,r.height<=o.height?d=c||-a:d=e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!nJ(this._lastScrollVisibility,i)){let r=new _8(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let t=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){let i=this._viewportRect,r=this._isRtl(),o,s,a;if(t.overlayY==="top")s=e.y,o=i.height-s+this._viewportMargin;else if(t.overlayY==="bottom")a=i.height-e.y+this._viewportMargin*2,o=i.height-a+this._viewportMargin;else{let f=Math.min(i.bottom-e.y+i.top,e.y),p=this._lastBoundingBoxSize.height;o=f*2,s=e.y-f,o>p&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-p/2)}let c=t.overlayX==="start"&&!r||t.overlayX==="end"&&r,l=t.overlayX==="end"&&!r||t.overlayX==="start"&&r,u,d,h;if(l)h=i.width-e.x+this._viewportMargin*2,u=e.x-this._viewportMargin;else if(c)d=e.x,u=i.right-e.x;else{let f=Math.min(i.right-e.x+i.left,e.x),p=this._lastBoundingBoxSize.width;u=f*2,d=e.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-p/2)}return{top:s,left:d,bottom:a,right:h,width:u,height:o}}_setBoundingBoxStyles(e,t){let i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=Gn(i.height),r.top=Gn(i.top),r.bottom=Gn(i.bottom),r.width=Gn(i.width),r.left=Gn(i.left),r.right=Gn(i.right),t.overlayX==="center"?r.alignItems="center":r.alignItems=t.overlayX==="end"?"flex-end":"flex-start",t.overlayY==="center"?r.justifyContent="center":r.justifyContent=t.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=Gn(o)),s&&(r.maxWidth=Gn(s))}this._lastBoundingBoxSize=i,Il(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Il(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Il(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){let i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){let u=this._viewportRuler.getViewportScrollPosition();Il(i,this._getExactOverlayY(t,e,u)),Il(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",c=this._getOffset(t,"x"),l=this._getOffset(t,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=Gn(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=Gn(s.maxWidth):o&&(i.maxWidth="")),Il(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),e.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;r.bottom=`${s-(o.y+this._overlayRect.height)}px`}else r.top=Gn(o.y);return r}_getExactOverlayX(e,t,i){let r={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let s;if(this._isRtl()?s=e.overlayX==="end"?"left":"right":s=e.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(o.x+this._overlayRect.width)}px`}else r.left=Gn(o.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:BI(e,i),isOriginOutsideView:py(e,i),isOverlayClipped:BI(t,i),isOverlayOutsideView:py(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return t==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&f7(e).forEach(t=>{t!==""&&this._appliedPanelClasses.indexOf(t)===-1&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof Je)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}};function Il(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function jI(n){if(typeof n!="number"&&n!=null){let[e,t]=n.split(tJ);return!t||t==="px"?parseFloat(e):null}return n||null}function GI(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function nJ(n,e){return n===e?!0:n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}var WI="cdk-global-overlay-wrapper",M8=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){let t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(WI),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,c=(r==="100%"||r==="100vw")&&(!s||s==="100%"||s==="100vw"),l=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,d=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",f="",p="",v="";c?v="flex-start":u==="center"?(v="center",h?p=d:f=d):h?u==="left"||u==="end"?(v="flex-end",f=d):(u==="right"||u==="start")&&(v="flex-start",p=d):u==="left"||u==="start"?(v="flex-start",f=d):(u==="right"||u==="end")&&(v="flex-end",p=d),e.position=this._cssPosition,e.marginLeft=c?"0":f,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":p,t.justifyContent=v,t.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(WI),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},JI=(()=>{class n{_viewportRuler=T(dy);_document=T(At);_platform=T(Un);_overlayContainer=T(QI);constructor(){}global(){return new M8}flexibleConnectedTo(t){return new x8(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Pl=(()=>{class n{scrollStrategies=T($I);_overlayContainer=T(QI);_positionBuilder=T(JI);_keyboardDispatcher=T(XI);_injector=T(Ln);_ngZone=T(_t);_document=T(At);_directionality=T(Ut);_location=T(ts);_outsideClickDispatcher=T(KI);_animationsModuleType=T(es,{optional:!0});_idGenerator=T(ez);_renderer=T(Xn).createRenderer(null,null);_appRef;_styleLoader=T(W7);constructor(){}create(t){this._styleLoader.load(ZI);let i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),s=new D0(t);return s.direction=s.direction||this._directionality.value,new b8(o,i,r,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(Jn),this._renderer)}position(){return this._positionBuilder}_createPaneElement(t){let i=this._document.createElement("div");return i.id=this._idGenerator.getId("cdk-overlay-"),i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){let t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(no)),new T0(t,null,this._appRef,this._injector,this._document)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),iJ=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],eP=new de("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let n=T(Pl);return()=>n.scrollStrategies.reposition()}}),ua=(()=>{class n{elementRef=T(Je);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Oe({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]})}return n})(),Rl=(()=>{class n{_overlay=T(Pl);_dir=T(Ut,{optional:!0});_overlayRef;_templatePortal;_backdropSubscription=Kt.EMPTY;_attachSubscription=Kt.EMPTY;_detachSubscription=Kt.EMPTY;_positionSubscription=Kt.EMPTY;_offsetX;_offsetY;_position;_scrollStrategyFactory=T(eP);_disposeOnNavigation=!1;_ngZone=T(_t);origin;positions;positionStrategy;get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}width;height;minWidth;minHeight;backdropClass;panelClass;viewportMargin=0;scrollStrategy;open=!1;disableClose=!1;transformOriginSelector;hasBackdrop=!1;lockPosition=!1;flexibleDimensions=!1;growAfterOpen=!1;push=!1;get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(t){this._disposeOnNavigation=t}backdropClick=new pt;positionChange=new pt;attach=new pt;detach=new pt;overlayKeydown=new pt;overlayOutsideClick=new pt;constructor(){let t=T(ui),i=T(zi);this._templatePortal=new ed(t,i),this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef?.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef?.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this.attachOverlay():this.detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=iJ);let t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),i.keyCode===27&&!this.disableClose&&!tz(i)&&(i.preventDefault(),this.detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{let r=this._getOriginElement(),o=Ur(i);(!r||r!==o&&!r.contains(o))&&this.overlayOutsideClick.next(i)})}_buildConfig(){let t=this._position=this.positionStrategy||this._createPositionStrategy(),i=new D0({direction:this._dir||"ltr",positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(i.width=this.width),(this.height||this.height===0)&&(i.height=this.height),(this.minWidth||this.minWidth===0)&&(i.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(t){let i=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return t.setOrigin(this._getOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let t=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(t),t}_getOrigin(){return this.origin instanceof ua?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof ua?this.origin.elementRef.nativeElement:this.origin instanceof Je?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(h6(()=>this.positionChange.observers.length>0)).subscribe(t=>{this._ngZone.run(()=>this.positionChange.emit(t)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()})),this.open=!0}detachOverlay(){this._overlayRef?.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.open=!1}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Oe({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",fe],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",fe],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",fe],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",fe],push:[2,"cdkConnectedOverlayPush","push",fe],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",fe]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[$e]})}return n})();function rJ(n){return()=>n.scrollStrategies.reposition()}var oJ={provide:eP,deps:[Pl],useFactory:rJ},z0=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({providers:[Pl,oJ],imports:[nl,fy,hy,hy]})}return n})();var kl=(()=>{class n{animationType=T(es,{optional:!0});nzNoAnimation=!1;static \u0275fac=function(i){return new(i||n)};static \u0275dir=Oe({type:n,selectors:[["","nzNoAnimation",""]],hostVars:2,hostBindings:function(i,r){i&2&&ze("nz-animate-disabled",r.nzNoAnimation||r.animationType==="NoopAnimations")},inputs:{nzNoAnimation:[2,"nzNoAnimation","nzNoAnimation",fe]},exportAs:["nzNoAnimation"]})}return n})();var Tn={top:new Yn({originX:"center",originY:"top"},{overlayX:"center",overlayY:"bottom"}),topCenter:new Yn({originX:"center",originY:"top"},{overlayX:"center",overlayY:"bottom"}),topLeft:new Yn({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"}),topRight:new Yn({originX:"end",originY:"top"},{overlayX:"end",overlayY:"bottom"}),right:new Yn({originX:"end",originY:"center"},{overlayX:"start",overlayY:"center"}),rightTop:new Yn({originX:"end",originY:"top"},{overlayX:"start",overlayY:"top"}),rightBottom:new Yn({originX:"end",originY:"bottom"},{overlayX:"start",overlayY:"bottom"}),bottom:new Yn({originX:"center",originY:"bottom"},{overlayX:"center",overlayY:"top"}),bottomCenter:new Yn({originX:"center",originY:"bottom"},{overlayX:"center",overlayY:"top"}),bottomLeft:new Yn({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),bottomRight:new Yn({originX:"end",originY:"bottom"},{overlayX:"end",overlayY:"top"}),left:new Yn({originX:"start",originY:"center"},{overlayX:"end",overlayY:"center"}),leftTop:new Yn({originX:"start",originY:"top"},{overlayX:"end",overlayY:"top"}),leftBottom:new Yn({originX:"start",originY:"bottom"},{overlayX:"end",overlayY:"bottom"})},gy=[Tn.top,Tn.right,Tn.bottom,Tn.left],ive=[Tn.bottomLeft,Tn.bottomRight,Tn.topLeft,Tn.topRight],rve=[new Yn({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"bottom"}),new Yn({originX:"start",originY:"bottom"},{overlayX:"end",overlayY:"bottom"})],ove=[Tn.bottomLeft,new Yn({originX:"start",originY:"bottom"},{overlayX:"end",overlayY:"top"})];function A0(n){for(let e in Tn)if(n.connectionPair.originX===Tn[e].originX&&n.connectionPair.originY===Tn[e].originY&&n.connectionPair.overlayX===Tn[e].overlayX&&n.connectionPair.overlayY===Tn[e].overlayY)return e}var w8={bottomLeft:new Yn({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"},void 0,2),topLeft:new Yn({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"},void 0,-2),bottomRight:new Yn({originX:"end",originY:"bottom"},{overlayX:"end",overlayY:"top"},void 0,2),topRight:new Yn({originX:"end",originY:"top"},{overlayX:"end",overlayY:"bottom"},void 0,-2)},sve=[w8.bottomLeft,w8.topLeft,w8.bottomRight,w8.topRight],tP=(()=>{class n{cdkConnectedOverlay;nzDestroyService;nzArrowPointAtCenter=!1;constructor(t,i){this.cdkConnectedOverlay=t,this.nzDestroyService=i,this.cdkConnectedOverlay.backdropClass="nz-overlay-transparent-backdrop",this.cdkConnectedOverlay.positionChange.pipe(_e(this.nzDestroyService)).subscribe(r=>{this.nzArrowPointAtCenter&&this.updateArrowPosition(r)})}updateArrowPosition(t){let i=this.getOriginRect(),r=A0(t),o=0,s=0;r==="topLeft"||r==="bottomLeft"?o=i.width/2-14:r==="topRight"||r==="bottomRight"?o=-(i.width/2-14):r==="leftTop"||r==="rightTop"?s=i.height/2-10:(r==="leftBottom"||r==="rightBottom")&&(s=-(i.height/2-10)),(this.cdkConnectedOverlay.offsetX!==o||this.cdkConnectedOverlay.offsetY!==s)&&(this.cdkConnectedOverlay.offsetY=s,this.cdkConnectedOverlay.offsetX=o,this.cdkConnectedOverlay.overlayRef.updatePosition())}getFlexibleConnectedPositionStrategyOrigin(){return this.cdkConnectedOverlay.origin instanceof ua?this.cdkConnectedOverlay.origin.elementRef:this.cdkConnectedOverlay.origin}getOriginRect(){let t=this.getFlexibleConnectedPositionStrategyOrigin();if(t instanceof Je)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let i=t.width||0,r=t.height||0;return{top:t.y,bottom:t.y+r,left:t.x,right:t.x+i,height:r,width:i}}static \u0275fac=function(i){return new(i||n)(Y(Rl),Y(jr))};static \u0275dir=Oe({type:n,selectors:[["","cdkConnectedOverlay","","nzConnectedOverlay",""]],inputs:{nzArrowPointAtCenter:[2,"nzArrowPointAtCenter","nzArrowPointAtCenter",fe]},exportAs:["nzConnectedOverlay"],features:[Rn([jr])]})}return n})(),nP=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({})}return n})();var aJ=["overlay"];function cJ(n,e){if(n&1&&(An(0),rt(1),In()),n&2){let t=R(2);O(),Pn(t.nzTitle)}}function lJ(n,e){if(n&1&&(j(0,"div",2)(1,"div",3)(2,"div",4),me(3,"span",5),q(),j(4,"div",6),G(5,cJ,2,1,"ng-container",7),q()()()),n&2){let t=R();mr(t.nzOverlayStyle),si(t._classMap),ze("ant-tooltip-rtl",t.dir==="rtl"),$("@.disabled",!!(t.noAnimation!=null&&t.noAnimation.nzNoAnimation))("nzNoAnimation",t.noAnimation==null?null:t.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),O(3),mr(t._contentStyleMap),O(),mr(t._contentStyleMap),O(),$("nzStringTemplateOutlet",t.nzTitle)("nzStringTemplateOutletContext",t.nzTitleContext)}}var uJ=(()=>{class n{componentType;config;cdkConnectedOverlayPush;visibleChange=new pt;get _title(){return this.title||this.directiveTitle||null}get _content(){return this.content||this.directiveContent||null}get _trigger(){return typeof this.trigger<"u"?this.trigger:"hover"}get _placement(){let t=this.placement;return Array.isArray(t)&&t.length>0?t:typeof t=="string"&&t?[t]:["top"]}get _visible(){return(typeof this.visible<"u"?this.visible:this.internalVisible)||!1}get _mouseEnterDelay(){return this.mouseEnterDelay||.15}get _mouseLeaveDelay(){return this.mouseLeaveDelay||.1}get _overlayClassName(){return this.overlayClassName||null}get _overlayStyle(){return this.overlayStyle||null}get _overlayClickable(){return this.overlayClickable??!0}internalVisible=!1;getProxyPropertyMap(){return{noAnimation:["noAnimation",()=>!!this.noAnimation]}}component;destroy$=new ce;triggerDisposables=[];delayTimer;elementRef=T(Je);hostView=T(zi);renderer=T(Mn);noAnimation=T(kl,{host:!0,optional:!0});nzConfigService=T(ci);platformId=T(Jo);constructor(t){this.componentType=t}ngAfterViewInit(){Vd(this.platformId)&&(this.createComponent(),this.registerTriggers())}ngOnChanges(t){let{trigger:i}=t;i&&!i.isFirstChange()&&this.registerTriggers(),this.component&&this.updatePropertiesByChanges(t)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.clearTogglingTimer(),this.removeTriggerListeners()}show(){this.component?.show()}hide(){this.component?.hide()}updatePosition(){this.component&&this.component.updatePosition()}createComponent(){let t=this.hostView.createComponent(this.componentType);this.component=t.instance,this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),t.location.nativeElement),this.component.setOverlayOrigin(this.origin||this.elementRef),this.initProperties();let i=this.component.nzVisibleChange.pipe(ki());i.pipe(_e(this.destroy$)).subscribe(r=>{this.internalVisible=r,this.visibleChange.emit(r)}),i.pipe(xt(r=>r),s6(0,e4),xt(()=>!!this.component?.overlay?.overlayRef),_e(this.destroy$)).subscribe(()=>{this.component?.updatePosition()})}registerTriggers(){let t=this.elementRef.nativeElement,i=this.trigger;if(this.removeTriggerListeners(),i==="hover"){let r;this.triggerDisposables.push(this.renderer.listen(t,"mouseenter",()=>{this.delayEnterLeave(!0,!0,this._mouseEnterDelay)})),this.triggerDisposables.push(this.renderer.listen(t,"mouseleave",()=>{this.delayEnterLeave(!0,!1,this._mouseLeaveDelay),this.component?.overlay.overlayRef&&!r&&(r=this.component.overlay.overlayRef.overlayElement,this.triggerDisposables.push(this.renderer.listen(r,"mouseenter",()=>{this.delayEnterLeave(!1,!0,this._mouseEnterDelay)})),this.triggerDisposables.push(this.renderer.listen(r,"mouseleave",()=>{this.delayEnterLeave(!1,!1,this._mouseLeaveDelay)})))}))}else i==="focus"?(this.triggerDisposables.push(this.renderer.listen(t,"focusin",()=>this.show())),this.triggerDisposables.push(this.renderer.listen(t,"focusout",()=>this.hide()))):i==="click"&&this.triggerDisposables.push(this.renderer.listen(t,"click",r=>{r.preventDefault(),this.show()}))}updatePropertiesByChanges(t){this.updatePropertiesByKeys(Object.keys(t))}updatePropertiesByKeys(t){let i=Z({title:["nzTitle",()=>this._title],directiveTitle:["nzTitle",()=>this._title],content:["nzContent",()=>this._content],directiveContent:["nzContent",()=>this._content],trigger:["nzTrigger",()=>this._trigger],placement:["nzPlacement",()=>this._placement],visible:["nzVisible",()=>this._visible],mouseEnterDelay:["nzMouseEnterDelay",()=>this._mouseEnterDelay],mouseLeaveDelay:["nzMouseLeaveDelay",()=>this._mouseLeaveDelay],overlayClassName:["nzOverlayClassName",()=>this._overlayClassName],overlayStyle:["nzOverlayStyle",()=>this._overlayStyle],overlayClickable:["nzOverlayClickable",()=>this._overlayClickable],arrowPointAtCenter:["nzArrowPointAtCenter",()=>this.arrowPointAtCenter],cdkConnectedOverlayPush:["cdkConnectedOverlayPush",()=>this.cdkConnectedOverlayPush]},this.getProxyPropertyMap());(t||Object.keys(i).filter(r=>!r.startsWith("directive"))).forEach(r=>{if(i[r]){let[o,s]=i[r];this.updateComponentValue(o,s())}}),this.component?.updateByDirective()}initProperties(){this.updatePropertiesByKeys()}updateComponentValue(t,i){typeof i<"u"&&(this.component[t]=i)}delayEnterLeave(t,i,r=-1){this.delayTimer?this.clearTogglingTimer():r>0?this.delayTimer=setTimeout(()=>{this.delayTimer=void 0,i?this.show():this.hide()},r*1e3):i&&t?this.show():this.hide()}removeTriggerListeners(){this.triggerDisposables.forEach(t=>t()),this.triggerDisposables.length=0}clearTogglingTimer(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0)}static \u0275fac=function(i){return new(i||n)(Y(Kb))};static \u0275dir=Oe({type:n,features:[$e]})}return n})(),dJ=(()=>{class n{overlay;noAnimation=T(kl,{host:!0,optional:!0});cdr=T(Mt);directionality=T(Ut);nzTitle=null;nzContent=null;nzArrowPointAtCenter=!1;nzOverlayClassName;nzOverlayStyle={};nzOverlayClickable=!0;nzBackdrop=!1;nzMouseEnterDelay;nzMouseLeaveDelay;cdkConnectedOverlayPush=!0;nzVisibleChange=new ce;set nzVisible(t){let i=e1(t);this._visible!==i&&(this._visible=i,this.nzVisibleChange.next(i))}get nzVisible(){return this._visible}_visible=!1;set nzTrigger(t){this._trigger=t}get nzTrigger(){return this._trigger}_trigger="hover";set nzPlacement(t){let i=t.map(r=>Tn[r]);this._positions=[...i,...gy]}preferredPlacement="top";origin;dir="ltr";_classMap={};_prefix="ant-tooltip";_positions=[...gy];destroy$=new ce;ngOnInit(){this.directionality.change?.pipe(_e(this.destroy$)).subscribe(t=>{this.dir=t,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.nzVisibleChange.complete(),this.destroy$.next(),this.destroy$.complete()}show(){this.nzVisible||(this.isEmpty()||(this.nzVisible=!0,this.nzVisibleChange.next(!0),this.cdr.detectChanges()),this.origin&&this.overlay&&this.overlay.overlayRef&&this.overlay.overlayRef.getDirection()==="rtl"&&this.overlay.overlayRef.setDirection("ltr"))}hide(){this.nzVisible&&(this.nzVisible=!1,this.nzVisibleChange.next(!1),this.cdr.detectChanges())}updateByDirective(){this.updateStyles(),this.cdr.detectChanges(),Promise.resolve().then(()=>{this.updatePosition(),this.updateVisibilityByTitle()})}updatePosition(){this.origin&&this.overlay&&this.overlay.overlayRef&&this.overlay.overlayRef.updatePosition()}onPositionChange(t){this.preferredPlacement=A0(t),this.updateStyles(),this.cdr.detectChanges()}setOverlayOrigin(t){this.origin=t,this.cdr.markForCheck()}onClickOutside(t){if(!this.nzOverlayClickable)return;let i=Ur(t);!this.origin.nativeElement.contains(i)&&this.nzTrigger!==null&&this.hide()}updateVisibilityByTitle(){this.isEmpty()&&this.hide()}updateStyles(){this._classMap=lt(Z({},this.transformClassListToMap(this.nzOverlayClassName)),{[`${this._prefix}-placement-${this.preferredPlacement}`]:!0})}transformClassListToMap(t){let i={};return(t!==null?t.split(/\s+/):[]).forEach(o=>i[o]=!0),i}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Oe({type:n,viewQuery:function(i,r){if(i&1&&Ai(aJ,5),i&2){let o;Wt(o=$t())&&(r.overlay=o.first)}}})}return n})();function hJ(n){return n instanceof ui?!1:n===""||!us(n)}var C8=(()=>{class n extends uJ{title;titleContext=null;directiveTitle;trigger="hover";placement="top";origin;visible;mouseEnterDelay;mouseLeaveDelay;overlayClassName;overlayStyle;arrowPointAtCenter;cdkConnectedOverlayPush=!0;nzTooltipColor;directiveContent=null;content=null;overlayClickable;visibleChange=new pt;constructor(){super(iP)}getProxyPropertyMap(){return lt(Z({},super.getProxyPropertyMap()),{nzTooltipColor:["nzColor",()=>this.nzTooltipColor],titleContext:["nzTitleContext",()=>this.titleContext]})}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Oe({type:n,selectors:[["","nz-tooltip",""]],hostVars:2,hostBindings:function(i,r){i&2&&ze("ant-tooltip-open",r.visible)},inputs:{title:[0,"nzTooltipTitle","title"],titleContext:[0,"nzTooltipTitleContext","titleContext"],directiveTitle:[0,"nz-tooltip","directiveTitle"],trigger:[0,"nzTooltipTrigger","trigger"],placement:[0,"nzTooltipPlacement","placement"],origin:[0,"nzTooltipOrigin","origin"],visible:[0,"nzTooltipVisible","visible"],mouseEnterDelay:[0,"nzTooltipMouseEnterDelay","mouseEnterDelay"],mouseLeaveDelay:[0,"nzTooltipMouseLeaveDelay","mouseLeaveDelay"],overlayClassName:[0,"nzTooltipOverlayClassName","overlayClassName"],overlayStyle:[0,"nzTooltipOverlayStyle","overlayStyle"],arrowPointAtCenter:[2,"nzTooltipArrowPointAtCenter","arrowPointAtCenter",fe],cdkConnectedOverlayPush:[2,"cdkConnectedOverlayPush","cdkConnectedOverlayPush",fe],nzTooltipColor:"nzTooltipColor"},outputs:{visibleChange:"nzTooltipVisibleChange"},exportAs:["nzTooltip"],features:[vi]})}return n})(),iP=(()=>{class n extends dJ{nzTitle=null;nzTitleContext=null;nzColor;_contentStyleMap={};isEmpty(){return hJ(this.nzTitle)}updateStyles(){let t=this.nzColor&&GE(this.nzColor);this._classMap=lt(Z({},this.transformClassListToMap(this.nzOverlayClassName)),{[`${this._prefix}-placement-${this.preferredPlacement}`]:!0,[`${this._prefix}-${this.nzColor}`]:t}),this._contentStyleMap={backgroundColor:this.nzColor&&!t?this.nzColor:null,"--antd-arrow-background-color":this.nzColor}}static \u0275fac=(()=>{let t;return function(r){return(t||(t=qi(n)))(r||n)}})();static \u0275cmp=Fe({type:n,selectors:[["nz-tooltip"]],exportAs:["nzTooltipComponent"],features:[vi],decls:2,vars:5,consts:[["overlay","cdkConnectedOverlay"],["cdkConnectedOverlay","","nzConnectedOverlay","",3,"overlayOutsideClick","detach","positionChange","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayPush","nzArrowPointAtCenter"],[1,"ant-tooltip",3,"nzNoAnimation"],[1,"ant-tooltip-content"],[1,"ant-tooltip-arrow"],[1,"ant-tooltip-arrow-content"],[1,"ant-tooltip-inner"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"]],template:function(i,r){if(i&1){let o=un();G(0,lJ,6,15,"ng-template",1,0,Jt),We("overlayOutsideClick",function(a){return je(o),Ge(r.onClickOutside(a))})("detach",function(){return je(o),Ge(r.hide())})("positionChange",function(a){return je(o),Ge(r.onPositionChange(a))})}i&2&&$("cdkConnectedOverlayOrigin",r.origin)("cdkConnectedOverlayOpen",r._visible)("cdkConnectedOverlayPositions",r._positions)("cdkConnectedOverlayPush",r.cdkConnectedOverlayPush)("nzArrowPointAtCenter",r.nzArrowPointAtCenter)},dependencies:[z0,Rl,kl,xi,li,nP,tP],encapsulation:2,data:{animation:[w3]},changeDetection:0})}return n})(),rP=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({imports:[iP]})}return n})();var pJ={locale:"en",Pagination:{items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},DatePicker:{lang:{placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"],locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},timePickerLocale:{placeholder:"Select time",rangePlaceholder:["Start time","End time"]}},TimePicker:{placeholder:"Select time",rangePlaceholder:["Start time","End time"]},Calendar:{lang:{placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"],locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"Ok",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},timePickerLocale:{placeholder:"Select time",rangePlaceholder:["Start time","End time"]}},global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",selectNone:"Clear all data"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Image:{preview:"Preview"},CronExpression:{cronError:"Invalid cron expression",second:"second",minute:"minute",hour:"hour",day:"day",month:"month",week:"week"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},CheckList:{checkList:"Check List",checkListFinish:"You have successfully completed the list!",checkListClose:"Close",checkListFooter:"Check list is no longer required",checkListCheck:"Do you want to close the list?",ok:"OK",cancel:"Cancel",checkListCheckOther:"No longer required to show"}},mJ={locale:"zh-cn",Pagination:{items_per_page:"\u6761/\u9875",jump_to:"\u8DF3\u81F3",jump_to_confirm:"\u786E\u5B9A",page:"\u9875",prev_page:"\u4E0A\u4E00\u9875",next_page:"\u4E0B\u4E00\u9875",prev_5:"\u5411\u524D 5 \u9875",next_5:"\u5411\u540E 5 \u9875",prev_3:"\u5411\u524D 3 \u9875",next_3:"\u5411\u540E 3 \u9875",page_size:"\u9875\u7801"},DatePicker:{lang:{placeholder:"\u8BF7\u9009\u62E9\u65E5\u671F",yearPlaceholder:"\u8BF7\u9009\u62E9\u5E74\u4EFD",quarterPlaceholder:"\u8BF7\u9009\u62E9\u5B63\u5EA6",monthPlaceholder:"\u8BF7\u9009\u62E9\u6708\u4EFD",weekPlaceholder:"\u8BF7\u9009\u62E9\u5468",rangePlaceholder:["\u5F00\u59CB\u65E5\u671F","\u7ED3\u675F\u65E5\u671F"],rangeYearPlaceholder:["\u5F00\u59CB\u5E74\u4EFD","\u7ED3\u675F\u5E74\u4EFD"],rangeQuarterPlaceholder:["\u5F00\u59CB\u5B63\u5EA6","\u7ED3\u675F\u5B63\u5EA6"],rangeMonthPlaceholder:["\u5F00\u59CB\u6708\u4EFD","\u7ED3\u675F\u6708\u4EFD"],rangeWeekPlaceholder:["\u5F00\u59CB\u5468","\u7ED3\u675F\u5468"],locale:"zh_CN",today:"\u4ECA\u5929",now:"\u6B64\u523B",backToToday:"\u8FD4\u56DE\u4ECA\u5929",ok:"\u786E\u5B9A",timeSelect:"\u9009\u62E9\u65F6\u95F4",dateSelect:"\u9009\u62E9\u65E5\u671F",weekSelect:"\u9009\u62E9\u5468",clear:"\u6E05\u9664",month:"\u6708",year:"\u5E74",previousMonth:"\u4E0A\u4E2A\u6708 (\u7FFB\u9875\u4E0A\u952E)",nextMonth:"\u4E0B\u4E2A\u6708 (\u7FFB\u9875\u4E0B\u952E)",monthSelect:"\u9009\u62E9\u6708\u4EFD",yearSelect:"\u9009\u62E9\u5E74\u4EFD",decadeSelect:"\u9009\u62E9\u5E74\u4EE3",yearFormat:"YYYY\u5E74",dayFormat:"D\u65E5",dateFormat:"YYYY\u5E74M\u6708D\u65E5",dateTimeFormat:"YYYY\u5E74M\u6708D\u65E5 HH\u65F6mm\u5206ss\u79D2",previousYear:"\u4E0A\u4E00\u5E74 (Control\u952E\u52A0\u5DE6\u65B9\u5411\u952E)",nextYear:"\u4E0B\u4E00\u5E74 (Control\u952E\u52A0\u53F3\u65B9\u5411\u952E)",previousDecade:"\u4E0A\u4E00\u5E74\u4EE3",nextDecade:"\u4E0B\u4E00\u5E74\u4EE3",previousCentury:"\u4E0A\u4E00\u4E16\u7EAA",nextCentury:"\u4E0B\u4E00\u4E16\u7EAA"},timePickerLocale:{placeholder:"\u8BF7\u9009\u62E9\u65F6\u95F4",rangePlaceholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"]}},TimePicker:{placeholder:"\u8BF7\u9009\u62E9\u65F6\u95F4",rangePlaceholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"]},Calendar:{lang:{placeholder:"\u8BF7\u9009\u62E9\u65E5\u671F",yearPlaceholder:"\u8BF7\u9009\u62E9\u5E74\u4EFD",quarterPlaceholder:"\u8BF7\u9009\u62E9\u5B63\u5EA6",monthPlaceholder:"\u8BF7\u9009\u62E9\u6708\u4EFD",weekPlaceholder:"\u8BF7\u9009\u62E9\u5468",rangePlaceholder:["\u5F00\u59CB\u65E5\u671F","\u7ED3\u675F\u65E5\u671F"],rangeYearPlaceholder:["\u5F00\u59CB\u5E74\u4EFD","\u7ED3\u675F\u5E74\u4EFD"],rangeMonthPlaceholder:["\u5F00\u59CB\u6708\u4EFD","\u7ED3\u675F\u6708\u4EFD"],rangeWeekPlaceholder:["\u5F00\u59CB\u5468","\u7ED3\u675F\u5468"],locale:"zh_CN",today:"\u4ECA\u5929",now:"\u6B64\u523B",backToToday:"\u8FD4\u56DE\u4ECA\u5929",ok:"\u786E\u5B9A",timeSelect:"\u9009\u62E9\u65F6\u95F4",dateSelect:"\u9009\u62E9\u65E5\u671F",weekSelect:"\u9009\u62E9\u5468",clear:"\u6E05\u9664",month:"\u6708",year:"\u5E74",previousMonth:"\u4E0A\u4E2A\u6708 (\u7FFB\u9875\u4E0A\u952E)",nextMonth:"\u4E0B\u4E2A\u6708 (\u7FFB\u9875\u4E0B\u952E)",monthSelect:"\u9009\u62E9\u6708\u4EFD",yearSelect:"\u9009\u62E9\u5E74\u4EFD",decadeSelect:"\u9009\u62E9\u5E74\u4EE3",yearFormat:"YYYY\u5E74",dayFormat:"D\u65E5",dateFormat:"YYYY\u5E74M\u6708D\u65E5",dateTimeFormat:"YYYY\u5E74M\u6708D\u65E5 HH\u65F6mm\u5206ss\u79D2",previousYear:"\u4E0A\u4E00\u5E74 (Control\u952E\u52A0\u5DE6\u65B9\u5411\u952E)",nextYear:"\u4E0B\u4E00\u5E74 (Control\u952E\u52A0\u53F3\u65B9\u5411\u952E)",previousDecade:"\u4E0A\u4E00\u5E74\u4EE3",nextDecade:"\u4E0B\u4E00\u5E74\u4EE3",previousCentury:"\u4E0A\u4E00\u4E16\u7EAA",nextCentury:"\u4E0B\u4E00\u4E16\u7EAA"},timePickerLocale:{placeholder:"\u8BF7\u9009\u62E9\u65F6\u95F4",rangePlaceholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"]}},global:{placeholder:"\u8BF7\u9009\u62E9"},Table:{filterTitle:"\u7B5B\u9009",filterConfirm:"\u786E\u5B9A",filterReset:"\u91CD\u7F6E",filterEmptyText:"\u65E0\u7B5B\u9009\u9879",selectAll:"\u5168\u9009\u5F53\u9875",selectInvert:"\u53CD\u9009\u5F53\u9875",selectionAll:"\u5168\u9009\u6240\u6709",sortTitle:"\u6392\u5E8F",expand:"\u5C55\u5F00\u884C",collapse:"\u5173\u95ED\u884C",triggerDesc:"\u70B9\u51FB\u964D\u5E8F",triggerAsc:"\u70B9\u51FB\u5347\u5E8F",cancelSort:"\u53D6\u6D88\u6392\u5E8F",filterCheckall:"\u5168\u9009",filterSearchPlaceholder:"\u5728\u7B5B\u9009\u9879\u4E2D\u641C\u7D22",selectNone:"\u6E05\u7A7A\u6240\u6709"},Modal:{okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",justOkText:"\u77E5\u9053\u4E86"},Popconfirm:{cancelText:"\u53D6\u6D88",okText:"\u786E\u5B9A"},Transfer:{searchPlaceholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5185\u5BB9",itemUnit:"\u9879",itemsUnit:"\u9879",remove:"\u5220\u9664",selectCurrent:"\u5168\u9009\u5F53\u9875",removeCurrent:"\u5220\u9664\u5F53\u9875",selectAll:"\u5168\u9009\u6240\u6709",removeAll:"\u5220\u9664\u5168\u90E8",selectInvert:"\u53CD\u9009\u5F53\u9875"},Upload:{uploading:"\u6587\u4EF6\u4E0A\u4F20\u4E2D",removeFile:"\u5220\u9664\u6587\u4EF6",uploadError:"\u4E0A\u4F20\u9519\u8BEF",previewFile:"\u9884\u89C8\u6587\u4EF6",downloadFile:"\u4E0B\u8F7D\u6587\u4EF6"},Empty:{description:"\u6682\u65E0\u6570\u636E"},Icon:{icon:"\u56FE\u6807"},Text:{edit:"\u7F16\u8F91",copy:"\u590D\u5236",copied:"\u590D\u5236\u6210\u529F",expand:"\u5C55\u5F00"},PageHeader:{back:"\u8FD4\u56DE"},Image:{preview:"\u9884\u89C8"},CronExpression:{cronError:"cron \u8868\u8FBE\u5F0F\u4E0D\u5408\u6CD5",second:"\u79D2",minute:"\u5206\u949F",hour:"\u5C0F\u65F6",day:"\u65E5",month:"\u6708",week:"\u5468"},QRCode:{expired:"\u4E8C\u7EF4\u7801\u8FC7\u671F",refresh:"\u70B9\u51FB\u5237\u65B0",scanned:"\u5DF2\u626B\u63CF"},CheckList:{checkList:"\u4EFB\u52A1\u6E05\u5355",checkListFinish:"\u4F60\u5DF2\u6210\u529F\u5B8C\u6210\u4EFB\u52A1\u6E05\u5355\uFF01",checkListClose:"\u5173\u95ED",checkListFooter:"\u4E0D\u9700\u8981\u64CD\u4F5C\u6307\u5F15",checkListCheck:"\u4F60\u8981\u5173\u95ED\u64CD\u4F5C\u6E05\u5355\u5417",ok:"\u786E\u5B9A",cancel:"\u53D6\u6D88",checkListCheckOther:"\u4EE5\u540E\u4E0D\u518D\u9700\u8981\u64CD\u4F5C\u6E05\u5355"}},gJ=new de("nz-i18n");var vJ=new de("nz-date-locale"),T8=(()=>{class n{_locale;_change=new Qt(this._locale);dateLocale;get localeChange(){return this._change.asObservable()}constructor(){this.setLocale(T(gJ,{optional:!0})||mJ),this.setDateLocale(T(vJ,{optional:!0}))}translate(t,i){let r=this._getObjectPath(this._locale,t);return typeof r=="string"?(i&&Object.keys(i).forEach(o=>r=r.replace(new RegExp(`%${o}%`,"g"),i[o])),r):t}setLocale(t){this._locale&&this._locale.locale===t.locale||(this._locale=t,this._change.next(t))}getLocale(){return this._locale}getLocaleId(){return this._locale?this._locale.locale:""}setDateLocale(t){this.dateLocale=t}getDateLocale(){return this.dateLocale}getLocaleData(t,i){let r=t?this._getObjectPath(this._locale,t):this._locale;return!r&&!i&&Do(`Missing translations for "${t}" in language "${this._locale.locale}".
You can use "NzI18nService.setLocale" as a temporary fix.
Welcome to submit a pull request to help us optimize the translations!
https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/CONTRIBUTING.md`),r||i||this._getObjectPath(pJ,t)||{}}_getObjectPath(t,i){let r=t,o=i.split("."),s=o.length,a=0;for(;r&&a<s;)r=r[o[a++]];return a===s?r:null}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ove=new de("date-config");var _J=["file"],bJ=["nz-upload-btn",""],aP=["*"],I0=n=>({$implicit:n}),xJ=()=>({opacity:.5,"pointer-events":"none"});function MJ(n,e){}function SJ(n,e){if(n&1&&(j(0,"div",16),G(1,MJ,0,0,"ng-template",17),q()),n&2){let t=R(2).$implicit,i=dt(5);ze("ant-upload-list-item-file",!t.isUploading),O(),$("ngTemplateOutlet",i)("ngTemplateOutletContext",Fr(4,I0,t))}}function wJ(n,e){if(n&1&&me(0,"img",19),n&2){let t=R(3).$implicit;$("src",t.thumbUrl||t.url,Au),fn("alt",t.name)}}function CJ(n,e){}function TJ(n,e){if(n&1&&G(0,CJ,0,0,"ng-template",17),n&2){let t=R(3).$implicit,i=dt(5);$("ngTemplateOutlet",i)("ngTemplateOutletContext",Fr(2,I0,t))}}function EJ(n,e){if(n&1){let t=un();j(0,"a",18),We("click",function(r){je(t);let o=R(2).$implicit,s=R();return Ge(s.handlePreview(o,r))}),G(1,wJ,1,2,"img",19)(2,TJ,1,4,null,17),q()}if(n&2){let t=R(2).$implicit;ze("ant-upload-list-item-file",!t.isImageUrl),$("href",t.url||t.thumbUrl,Au),O(),le(t.isImageUrl?1:2)}}function DJ(n,e){}function zJ(n,e){if(n&1&&(j(0,"div",15),G(1,DJ,0,0,"ng-template",17),q()),n&2){let t=R(2).$implicit,i=dt(5);O(),$("ngTemplateOutlet",i)("ngTemplateOutletContext",Fr(2,I0,t))}}function AJ(n,e){if(n&1&&G(0,SJ,2,6,"div",13)(1,EJ,3,4,"a",14)(2,zJ,2,4,"div",15),n&2){let t,i=R().$implicit;le((t=i.iconType)==="uploading"?0:t==="thumbnail"?1:2)}}function IJ(n,e){n&1&&me(0,"nz-icon",21)}function PJ(n,e){if(n&1&&me(0,"nz-icon",22),n&2){let t=R(3).$implicit;$("nzType",t.isImageUrl?"picture":"file")}}function RJ(n,e){if(n&1&&G(0,IJ,1,0,"nz-icon",21)(1,PJ,1,1,"nz-icon",22),n&2){let t=R(2).$implicit;le(t.isUploading?0:1)}}function kJ(n,e){if(n&1&&rt(0),n&2){let t=R(5);Mo(" ",t.locale.uploading," ")}}function NJ(n,e){if(n&1&&me(0,"nz-icon",22),n&2){let t=R(3).$implicit;$("nzType",t.isImageUrl?"picture":"file")}}function OJ(n,e){if(n&1&&G(0,kJ,1,1)(1,NJ,1,1,"nz-icon",22),n&2){let t=R(2).$implicit;le(t.isUploading?0:1)}}function LJ(n,e){if(n&1&&me(0,"nz-icon",20),n&2){let t=R(2).$implicit;$("nzType",t.isUploading?"loading":"paper-clip")}}function FJ(n,e){if(n&1&&G(0,RJ,2,1)(1,OJ,2,1)(2,LJ,1,1,"nz-icon",20),n&2){let t,i=R(3);le((t=i.listType)==="picture"?0:t==="picture-card"?1:2)}}function VJ(n,e){}function HJ(n,e){if(n&1&&G(0,VJ,0,0,"ng-template",17),n&2){let t=R().$implicit,i=R(2);$("ngTemplateOutlet",i.iconRender)("ngTemplateOutletContext",Fr(2,I0,t))}}function BJ(n,e){if(n&1&&G(0,FJ,3,1)(1,HJ,1,4,null,17),n&2){let t=R(2);le(t.iconRender?1:0)}}function UJ(n,e){if(n&1){let t=un();j(0,"button",24),We("click",function(r){je(t);let o=R(2).$implicit,s=R();return Ge(s.handleRemove(o,r))}),me(1,"nz-icon",25),q()}if(n&2){let t=R(3);fn("title",t.locale.removeFile)}}function YJ(n,e){if(n&1&&G(0,UJ,2,1,"button",23),n&2){let t=R(2);le(t.icons.showRemoveIcon?0:-1)}}function jJ(n,e){if(n&1){let t=un();j(0,"button",24),We("click",function(){je(t);let r=R(2).$implicit,o=R();return Ge(o.handleDownload(r))}),me(1,"nz-icon",26),q()}if(n&2){let t=R(3);fn("title",t.locale.downloadFile)}}function GJ(n,e){if(n&1&&G(0,jJ,2,1,"button",23),n&2){let t=R().$implicit;le(t.showDownload?0:-1)}}function WJ(n,e){}function $J(n,e){}function qJ(n,e){if(n&1&&(j(0,"span"),G(1,WJ,0,0,"ng-template",10)(2,$J,0,0,"ng-template",10),q()),n&2){R(2);let t=dt(7),i=dt(9),r=R();Ag("ant-upload-list-item-card-actions ",r.listType==="picture"?"picture":"",""),O(),$("ngTemplateOutlet",i),O(),$("ngTemplateOutlet",t)}}function XJ(n,e){if(n&1&&G(0,qJ,3,5,"span",6),n&2){let t=R(2);le(t.listType!=="picture-card"?0:-1)}}function KJ(n,e){if(n&1){let t=un();j(0,"a",29),We("click",function(r){je(t);let o=R(2).$implicit,s=R();return Ge(s.handlePreview(o,r))}),rt(1),q()}if(n&2){let t=R(2).$implicit;$("href",t.url,Au),fn("title",t.name)("download",t.linkProps&&t.linkProps.download),O(),Mo(" ",t.name," ")}}function ZJ(n,e){if(n&1){let t=un();j(0,"span",30),We("click",function(r){je(t);let o=R(2).$implicit,s=R();return Ge(s.handlePreview(o,r))}),rt(1),q()}if(n&2){let t=R(2).$implicit;fn("title",t.name),O(),Mo(" ",t.name," ")}}function QJ(n,e){}function JJ(n,e){if(n&1&&G(0,KJ,2,4,"a",27)(1,ZJ,2,2,"span",28)(2,QJ,0,0,"ng-template",10),n&2){let t=R().$implicit,i=dt(11);le(t.url?0:1),O(2),$("ngTemplateOutlet",i)}}function eee(n,e){}function tee(n,e){}function nee(n,e){if(n&1){let t=un();j(0,"a",32),We("click",function(r){je(t);let o=R(2).$implicit,s=R();return Ge(s.handlePreview(o,r))}),me(1,"nz-icon",33),q()}if(n&2){let t=R(2).$implicit,i=R();mr(t.url||t.thumbUrl?null:Rd(4,xJ)),$("href",t.url||t.thumbUrl,Au),fn("title",i.locale.previewFile)}}function iee(n,e){}function ree(n,e){if(n&1&&G(0,iee,0,0,"ng-template",10),n&2){R(2);let t=dt(9);$("ngTemplateOutlet",t)}}function oee(n,e){}function see(n,e){if(n&1&&(j(0,"span",11),G(1,nee,2,5,"a",31)(2,ree,1,1,null,10)(3,oee,0,0,"ng-template",10),q()),n&2){let t=R().$implicit,i=dt(7),r=R();O(),le(r.icons.showPreviewIcon?1:-1),O(),le(t.status==="done"?2:-1),O(),$("ngTemplateOutlet",i)}}function aee(n,e){if(n&1&&(j(0,"div",12),me(1,"nz-progress",34),q()),n&2){let t=R().$implicit;O(),$("nzPercent",t.percent)("nzShowInfo",!1)("nzStrokeWidth",2)}}function cee(n,e){if(n&1&&(j(0,"div")(1,"div",7),G(2,AJ,3,1,"ng-template",null,0,Jt)(4,BJ,2,1,"ng-template",null,1,Jt)(6,YJ,1,1,"ng-template",null,2,Jt)(8,GJ,1,1,"ng-template",null,3,Jt)(10,XJ,1,1,"ng-template",null,4,Jt)(12,JJ,3,2,"ng-template",null,5,Jt),j(14,"div",8)(15,"span",9),G(16,eee,0,0,"ng-template",10)(17,tee,0,0,"ng-template",10),q()(),G(18,see,4,3,"span",11)(19,aee,2,3,"div",12),q()()),n&2){let t=e.$implicit,i=dt(3),r=dt(13),o=R();Ag("ant-upload-list-",o.listType,"-container"),O(),_S("ant-upload-list-item ant-upload-list-item-",t.status," ant-upload-list-item-list-type-",o.listType,""),$("@itemState",void 0)("nzTooltipTitle",t.status==="error"?t.message:null),fn("data-key",t.key),O(15),$("ngTemplateOutlet",i),O(),$("ngTemplateOutlet",r),O(),le(o.listType==="picture-card"&&!t.isUploading?18:-1),O(),le(t.isUploading?19:-1)}}var lee=["uploadComp"],uee=["listComp"],dee=()=>[];function hee(n,e){if(n&1&&me(0,"nz-upload-list",6,3),n&2){let t=R(2);Sn("display",t.nzShowUploadList?"":"none"),$("locale",t.locale)("listType",t.nzListType)("items",t.nzFileList||Rd(13,dee))("icons",t.nzShowUploadList)("iconRender",t.nzIconRender)("previewFile",t.nzPreviewFile)("previewIsImage",t.nzPreviewIsImage)("onPreview",t.nzPreview)("onRemove",t.onRemove)("onDownload",t.nzDownload)("dir",t.dir)}}function fee(n,e){n&1&&kc(0)}function pee(n,e){if(n&1&&G(0,fee,1,0,"ng-container",7),n&2){let t=R(2);$("ngTemplateOutlet",t.nzFileListRender)("ngTemplateOutletContext",Fr(2,I0,t.nzFileList))}}function mee(n,e){if(n&1&&G(0,hee,2,14,"nz-upload-list",5)(1,pee,1,4,"ng-container"),n&2){let t=R();le(t.locale&&!t.nzFileListRender?0:-1),O(),le(t.nzFileListRender?1:-1)}}function gee(n,e){n&1&&Rt(0)}function vee(n,e){}function yee(n,e){if(n&1&&(j(0,"div")(1,"div",8,4),G(3,vee,0,0,"ng-template",9),q()()),n&2){let t=R(),i=dt(3);si(t.classList),Sn("display",t.nzShowButton?"":"none"),O(),$("options",t._btnOptions),O(2),$("ngTemplateOutlet",i)}}function _ee(n,e){}function bee(n,e){}function xee(n,e){if(n&1){let t=un();j(0,"div",10),We("drop",function(r){je(t);let o=R();return Ge(o.fileDrop(r))})("dragover",function(r){je(t);let o=R();return Ge(o.fileDrop(r))})("dragleave",function(r){je(t);let o=R();return Ge(o.fileDrop(r))}),j(1,"div",11,4)(3,"div",12),G(4,_ee,0,0,"ng-template",9),q()()(),G(5,bee,0,0,"ng-template",9)}if(n&2){let t=R(),i=dt(1),r=dt(3);si(t.classList),O(),$("options",t._btnOptions),O(3),$("ngTemplateOutlet",r),O(),$("ngTemplateOutlet",i)}}function Mee(n,e){}function See(n,e){}function wee(n,e){if(n&1&&G(0,Mee,0,0,"ng-template",9)(1,See,0,0,"ng-template",9),n&2){R(2);let t=dt(1),i=dt(5);$("ngTemplateOutlet",t),O(),$("ngTemplateOutlet",i)}}function Cee(n,e){}function Tee(n,e){}function Eee(n,e){if(n&1&&G(0,Cee,0,0,"ng-template",9)(1,Tee,0,0,"ng-template",9),n&2){R(2);let t=dt(1),i=dt(5);$("ngTemplateOutlet",i),O(),$("ngTemplateOutlet",t)}}function Dee(n,e){if(n&1&&G(0,wee,2,2)(1,Eee,2,2),n&2){let t=R();le(t.nzListType==="picture-card"?0:1)}}var zee=(()=>{class n{elementRef;reqs={};destroy=!1;destroy$=new ce;file;options;onClick(){this.options.disabled||!this.options.openFileDialogOnClick||this.file.nativeElement.click()}onFileDrop(t){if(this.options.disabled||t.type==="dragover"){t.preventDefault();return}if(this.options.directory)this.traverseFileTree(t.dataTransfer.items);else{let i=Array.prototype.slice.call(t.dataTransfer.files).filter(r=>this.attrAccept(r,this.options.accept));i.length&&this.uploadFiles(i)}t.preventDefault()}onChange(t){if(this.options.disabled)return;let i=t.target;this.uploadFiles(i.files),i.value=""}traverseFileTree(t){let i=(r,o)=>{r.isFile?r.file(s=>{this.attrAccept(s,this.options.accept)&&this.uploadFiles([s])}):r.isDirectory&&r.createReader().readEntries(a=>{for(let c of a)i(c,`${o}${r.name}/`)})};for(let r of t)i(r.webkitGetAsEntry(),"")}attrAccept(t,i){if(t&&i){let r=Array.isArray(i)?i:i.split(","),o=`${t.name}`,s=`${t.type}`,a=s.replace(/\/.*$/,"");return r.some(c=>{let l=c.trim();return l.charAt(0)==="."?o.toLowerCase().indexOf(l.toLowerCase(),o.toLowerCase().length-l.toLowerCase().length)!==-1:/\/\*$/.test(l)?a===l.replace(/\/.*$/,""):s===l})}return!0}attachUid(t){return t.uid||(t.uid=Math.random().toString(36).substring(2)),t}uploadFiles(t){let i=Ae(Array.prototype.slice.call(t));this.options.filters&&this.options.filters.forEach(r=>{i=i.pipe(Dn(o=>{let s=r.fn(o);return s instanceof it?s:Ae(s)}))}),i.subscribe({next:r=>{r.forEach(o=>{this.attachUid(o),this.upload(o,r)})},error:r=>{Do("Unhandled upload filter error",r)}})}upload(t,i){if(!this.options.beforeUpload)return this.post(t);let r=this.options.beforeUpload(t,i);if(r instanceof it)r.subscribe({next:o=>{let s=Object.prototype.toString.call(o);s==="[object File]"||s==="[object Blob]"?(this.attachUid(o),this.post(o)):o&&this.post(t)},error:o=>{Do("Unhandled upload beforeUpload error",o)}});else if(r)return this.post(t)}post(t){if(this.destroy)return;let i=Ae(t),r,o=this.options,{uid:s}=t,{action:a,data:c,headers:l,transformFile:u}=o,d={action:typeof a=="string"?a:"",name:o.name,headers:l,file:t,postFile:t,data:c,withCredentials:o.withCredentials,onProgress:o.onProgress?h=>{o.onProgress(h,t)}:void 0,onSuccess:(h,f)=>{this.clean(s),o.onSuccess(h,t,f)},onError:h=>{this.clean(s),o.onError(h,t)}};if(typeof a=="function"){let h=a(t);h instanceof it?i=i.pipe(Dn(()=>h),Pe(f=>(d.action=f,t))):d.action=h}if(typeof u=="function"){let h=u(t);i=i.pipe(Dn(()=>h instanceof it?h:Ae(h)),Bn(f=>r=f))}if(typeof c=="function"){let h=c(t);h instanceof it?i=i.pipe(Dn(()=>h),Pe(f=>(d.data=f,r??t))):d.data=h}if(typeof l=="function"){let h=l(t);h instanceof it?i=i.pipe(Dn(()=>h),Pe(f=>(d.headers=f,r??t))):d.headers=h}i.subscribe(h=>{d.postFile=h;let f=(o.customRequest||this.xhr).call(this,d);f instanceof Kt||Do("Must return Subscription type in '[nzCustomRequest]' property"),this.reqs[s]=f,o.onStart(t)})}xhr(t){let i=new FormData;t.data&&Object.keys(t.data).map(o=>{i.append(o,t.data[o])}),i.append(t.name,t.postFile),t.headers||(t.headers={}),t.headers["X-Requested-With"]!==null?t.headers["X-Requested-With"]="XMLHttpRequest":delete t.headers["X-Requested-With"];let r=new za("POST",t.action,i,{reportProgress:!0,withCredentials:t.withCredentials,headers:new ns(t.headers)});return this.http.request(r).subscribe({next:o=>{o.type===Ls.UploadProgress?(o.total>0&&(o.percent=o.loaded/o.total*100),t.onProgress(o,t.file)):o instanceof Fc&&t.onSuccess(o.body,t.file,o)},error:o=>{this.abort(t.file),t.onError(o,t.file)}})}clean(t){let i=this.reqs[t];i instanceof Kt&&i.unsubscribe(),delete this.reqs[t]}abort(t){t?this.clean(t&&t.uid):Object.keys(this.reqs).forEach(i=>this.clean(i))}http=T(ku,{optional:!0});constructor(t){if(this.elementRef=t,!this.http)throw new Error("Not found 'HttpClient', You can configure 'HttpClient' with 'provideHttpClient()' in your root module.")}ngOnInit(){i1(this.elementRef.nativeElement,"click").pipe(_e(this.destroy$)).subscribe(()=>this.onClick()),i1(this.elementRef.nativeElement,"keydown").pipe(_e(this.destroy$)).subscribe(t=>{this.options.disabled||(t.key==="Enter"||t.keyCode===13)&&this.onClick()})}ngOnDestroy(){this.destroy=!0,this.destroy$.next(),this.abort()}static \u0275fac=function(i){return new(i||n)(Y(Je))};static \u0275cmp=Fe({type:n,selectors:[["","nz-upload-btn",""]],viewQuery:function(i,r){if(i&1&&Ai(_J,7),i&2){let o;Wt(o=$t())&&(r.file=o.first)}},hostAttrs:[1,"ant-upload"],hostVars:4,hostBindings:function(i,r){i&1&&We("drop",function(s){return r.onFileDrop(s)})("dragover",function(s){return r.onFileDrop(s)}),i&2&&(fn("tabindex","0")("role","button"),ze("ant-upload-disabled",r.options.disabled))},inputs:{options:"options"},exportAs:["nzUploadBtn"],attrs:bJ,ngContentSelectors:aP,decls:3,vars:6,consts:[["file",""],["type","file",3,"change","multiple"]],template:function(i,r){if(i&1){let o=un();Zt(),j(0,"input",1,0),We("change",function(a){return je(o),Ge(r.onChange(a))}),q(),Rt(2)}i&2&&(Sn("display","none"),$("multiple",r.options.multiple),fn("accept",r.options.accept)("directory",r.options.directory?"directory":null)("webkitdirectory",r.options.directory?"webkitdirectory":null))},encapsulation:2})}return n})(),sP=n=>!!n&&n.indexOf("image/")===0,uc=200,cP=(()=>{class n{cdr;ngZone;platform;list=[];get showPic(){return this.listType==="picture"||this.listType==="picture-card"}locale={};listType;set items(t){this.list=t}icons;onPreview;onRemove;onDownload;previewFile;previewIsImage;iconRender=null;dir="ltr";document=T(At);destroy$=new ce;genErr(t){return t.response&&typeof t.response=="string"?t.response:t.error&&t.error.statusText||this.locale.uploadError}extname(t){let i=t.split("/"),o=i[i.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(o)||[""])[0]}isImageUrl(t){if(sP(t.type))return!0;let i=t.thumbUrl||t.url||"";if(!i)return!1;let r=this.extname(i);return/^data:image\//.test(i)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg)$/i.test(r)?!0:/^data:/.test(i)?!1:!r}getIconType(t){return this.showPic?t.isUploading||!t.thumbUrl&&!t.url?"uploading":"thumbnail":""}previewImage(t){if(!sP(t.type)||!this.platform.isBrowser)return Ae("");let i=this.document.createElement("canvas");i.width=uc,i.height=uc,i.style.cssText=`position: fixed; left: 0; top: 0; width: ${uc}px; height: ${uc}px; z-index: 9999; display: none;`,this.document.body.appendChild(i);let r=i.getContext("2d"),o=new Image,s=URL.createObjectURL(t);return o.src=s,yc(o,"load").pipe(Pe(()=>{let{width:a,height:c}=o,l=uc,u=uc,d=0,h=0;a<c?(u=c*(uc/a),h=-(u-l)/2):(l=a*(uc/c),d=-(l-u)/2);try{r.drawImage(o,d,h,l,u)}catch{}let f=i.toDataURL();return this.document.body.removeChild(i),URL.revokeObjectURL(s),f}))}genThumb(){if(!this.platform.isBrowser)return;let t=window;!this.showPic||typeof document>"u"||typeof t>"u"||!t.FileReader||!t.File||this.list.filter(i=>i.originFileObj instanceof File&&i.thumbUrl===void 0).forEach(i=>{i.thumbUrl="";let r=(this.previewFile?this.previewFile(i):this.previewImage(i.originFileObj)).pipe(_e(this.destroy$));this.ngZone.runOutsideAngular(()=>{r.subscribe(o=>{this.ngZone.run(()=>{i.thumbUrl=o,this.detectChanges()})})})})}showDownload(t){return!!(this.icons.showDownloadIcon&&t.status==="done")}fixData(){this.list.forEach(t=>{t.isUploading=t.status==="uploading",t.message=this.genErr(t),t.linkProps=typeof t.linkProps=="string"?JSON.parse(t.linkProps):t.linkProps,t.isImageUrl=this.previewIsImage?this.previewIsImage(t):this.isImageUrl(t),t.iconType=this.getIconType(t),t.showDownload=this.showDownload(t)})}handlePreview(t,i){if(this.onPreview)return i.preventDefault(),this.onPreview(t)}handleRemove(t,i){i.preventDefault(),this.onRemove&&this.onRemove(t)}handleDownload(t){typeof this.onDownload=="function"?this.onDownload(t):t.url&&window.open(t.url)}constructor(t,i,r){this.cdr=t,this.ngZone=i,this.platform=r}detectChanges(){this.fixData(),this.cdr.detectChanges()}ngOnChanges(){this.fixData(),this.genThumb()}ngOnDestroy(){this.destroy$.next()}static \u0275fac=function(i){return new(i||n)(Y(Mt),Y(_t),Y(Un))};static \u0275cmp=Fe({type:n,selectors:[["nz-upload-list"]],hostAttrs:[1,"ant-upload-list"],hostVars:8,hostBindings:function(i,r){i&2&&ze("ant-upload-list-rtl",r.dir==="rtl")("ant-upload-list-text",r.listType==="text")("ant-upload-list-picture",r.listType==="picture")("ant-upload-list-picture-card",r.listType==="picture-card")},inputs:{locale:"locale",listType:"listType",items:"items",icons:"icons",onPreview:"onPreview",onRemove:"onRemove",onDownload:"onDownload",previewFile:"previewFile",previewIsImage:"previewIsImage",iconRender:"iconRender",dir:"dir"},exportAs:["nzUploadList"],features:[$e],decls:2,vars:0,consts:[["icon",""],["iconNode",""],["removeIcon",""],["downloadIcon",""],["downloadOrDelete",""],["preview",""],[3,"class"],["nz-tooltip","",3,"nzTooltipTitle"],[1,"ant-upload-list-item-info"],[1,"ant-upload-span"],[3,"ngTemplateOutlet"],[1,"ant-upload-list-item-actions"],[1,"ant-upload-list-item-progress"],[1,"ant-upload-list-item-thumbnail",3,"ant-upload-list-item-file"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-thumbnail",3,"ant-upload-list-item-file","href"],[1,"ant-upload-text-icon"],[1,"ant-upload-list-item-thumbnail"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-thumbnail",3,"click","href"],[1,"ant-upload-list-item-image",3,"src"],[3,"nzType"],["nzType","loading"],["nzTheme","twotone",3,"nzType"],["type","button","nz-button","","nzType","text","nzSize","small",1,"ant-upload-list-item-card-actions-btn"],["type","button","nz-button","","nzType","text","nzSize","small",1,"ant-upload-list-item-card-actions-btn",3,"click"],["nzType","delete"],["nzType","download"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-name",3,"href"],[1,"ant-upload-list-item-name"],["target","_blank","rel","noopener noreferrer",1,"ant-upload-list-item-name",3,"click","href"],[1,"ant-upload-list-item-name",3,"click"],["target","_blank","rel","noopener noreferrer",3,"href","style"],["target","_blank","rel","noopener noreferrer",3,"click","href"],["nzType","eye"],["nzType","line",3,"nzPercent","nzShowInfo","nzStrokeWidth"]],template:function(i,r){i&1&&Xi(0,cee,20,14,"div",6,Ea),i&2&&Ki(r.list)},dependencies:[rP,C8,ni,wn,pn,u1,ol,l1,LI,uy],encapsulation:2,data:{animation:[Oi("itemState",[on(":enter",[Ue({height:"0",width:"0",opacity:0}),en(150,Ue({height:"*",width:"*",opacity:1}))]),on(":leave",[en(150,Ue({height:"0",width:"0",opacity:0}))])])]},changeDetection:0})}return n})(),Aee=(()=>{class n{cdr;i18n;directionality;static ngAcceptInputType_nzShowUploadList;destroy$=new ce;uploadComp;listComp;locale;dir="ltr";nzType="select";nzLimit=0;nzSize=0;nzFileType;nzAccept;nzAction;nzDirectory=!1;nzOpenFileDialogOnClick=!0;nzBeforeUpload;nzCustomRequest;nzData;nzFilter=[];nzFileList=[];nzDisabled=!1;nzHeaders;nzListType="text";nzMultiple=!1;nzName="file";_showUploadList=!0;document=T(At);set nzShowUploadList(t){this._showUploadList=typeof t=="boolean"?e1(t):t}get nzShowUploadList(){return this._showUploadList}nzShowButton=!0;nzWithCredentials=!1;nzRemove;nzPreview;nzPreviewFile;nzPreviewIsImage;nzTransformFile;nzDownload;nzIconRender=null;nzFileListRender=null;nzChange=new pt;nzFileListChange=new pt;_btnOptions;zipOptions(){typeof this.nzShowUploadList=="boolean"&&this.nzShowUploadList&&(this.nzShowUploadList={showPreviewIcon:!0,showRemoveIcon:!0,showDownloadIcon:!0});let t=this.nzFilter.slice();if(this.nzMultiple&&this.nzLimit>0&&t.findIndex(i=>i.name==="limit")===-1&&t.push({name:"limit",fn:i=>i.slice(-this.nzLimit)}),this.nzSize>0&&t.findIndex(i=>i.name==="size")===-1&&t.push({name:"size",fn:i=>i.filter(r=>r.size/1024<=this.nzSize)}),this.nzFileType&&this.nzFileType.length>0&&t.findIndex(i=>i.name==="type")===-1){let i=this.nzFileType.split(",");t.push({name:"type",fn:r=>r.filter(o=>~i.indexOf(o.type))})}return this._btnOptions={disabled:this.nzDisabled,accept:this.nzAccept,action:this.nzAction,directory:this.nzDirectory,openFileDialogOnClick:this.nzOpenFileDialogOnClick,beforeUpload:this.nzBeforeUpload,customRequest:this.nzCustomRequest,data:this.nzData,headers:this.nzHeaders,name:this.nzName,multiple:this.nzMultiple,withCredentials:this.nzWithCredentials,filters:t,transformFile:this.nzTransformFile,onStart:this.onStart,onProgress:this.onProgress,onSuccess:this.onSuccess,onError:this.onError},this}platform=T(Un);constructor(t,i,r){this.cdr=t,this.i18n=i,this.directionality=r}fileToObject(t){return{lastModified:t.lastModified,lastModifiedDate:t.lastModifiedDate,name:t.filename||t.name,size:t.size,type:t.type,uid:t.uid,response:t.response,error:t.error,percent:0,originFileObj:t}}getFileItem(t,i){return i.filter(r=>r.uid===t.uid)[0]}removeFileItem(t,i){return i.filter(r=>r.uid!==t.uid)}onStart=t=>{this.nzFileList||(this.nzFileList=[]);let i=this.fileToObject(t);i.status="uploading",this.nzFileList=this.nzFileList.concat(i),this.nzFileListChange.emit(this.nzFileList),this.nzChange.emit({file:i,fileList:this.nzFileList,type:"start"}),this.detectChangesList()};onProgress=(t,i)=>{let r=this.nzFileList,o=this.getFileItem(i,r);o.percent=t.percent,this.nzChange.emit({event:t,file:Z({},o),fileList:this.nzFileList,type:"progress"}),this.detectChangesList()};onSuccess=(t,i)=>{let r=this.nzFileList,o=this.getFileItem(i,r);o.status="done",o.response=t,this.nzChange.emit({file:Z({},o),fileList:r,type:"success"}),this.detectChangesList()};onError=(t,i)=>{let r=this.nzFileList,o=this.getFileItem(i,r);o.error=t,o.status="error",this.nzChange.emit({file:Z({},o),fileList:r,type:"error"}),this.detectChangesList()};dragState;fileDrop(t){t.type!==this.dragState&&(this.dragState=t.type,this.setClassMap())}detectChangesList(){this.cdr.detectChanges(),this.listComp?.detectChanges()}onRemove=t=>{this.uploadComp.abort(t),t.status="removed";let i=typeof this.nzRemove=="function"?this.nzRemove(t):this.nzRemove==null?!0:this.nzRemove;(i instanceof it?i:Ae(i)).pipe(xt(r=>r)).subscribe(()=>{this.nzFileList=this.removeFileItem(t,this.nzFileList),this.nzChange.emit({file:t,fileList:this.nzFileList,type:"removed"}),this.nzFileListChange.emit(this.nzFileList),this.cdr.detectChanges()})};prefixCls="ant-upload";classList=[];setClassMap(){let t=[];this.nzType==="drag"?(this.nzFileList.some(i=>i.status==="uploading")&&t.push(`${this.prefixCls}-drag-uploading`),this.dragState==="dragover"&&t.push(`${this.prefixCls}-drag-hover`)):t=[`${this.prefixCls}-select-${this.nzListType}`],this.classList=[this.prefixCls,`${this.prefixCls}-${this.nzType}`,...t,this.nzDisabled&&`${this.prefixCls}-disabled`||"",this.dir==="rtl"&&`${this.prefixCls}-rtl`||""].filter(i=>!!i),this.cdr.detectChanges()}ngOnInit(){this.dir=this.directionality.value,this.directionality.change?.pipe(_e(this.destroy$)).subscribe(t=>{this.dir=t,this.setClassMap(),this.cdr.detectChanges()}),this.i18n.localeChange.pipe(_e(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Upload"),this.detectChangesList()})}ngAfterViewInit(){this.platform.FIREFOX&&i1(this.document.body,"drop").pipe(_e(this.destroy$)).subscribe(t=>{t.preventDefault(),t.stopPropagation()})}ngOnChanges(){this.zipOptions().setClassMap()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(i){return new(i||n)(Y(Mt),Y(T8),Y(Ut))};static \u0275cmp=Fe({type:n,selectors:[["nz-upload"]],viewQuery:function(i,r){if(i&1&&(Ai(lee,5),Ai(uee,5)),i&2){let o;Wt(o=$t())&&(r.uploadComp=o.first),Wt(o=$t())&&(r.listComp=o.first)}},hostVars:2,hostBindings:function(i,r){i&2&&ze("ant-upload-picture-card-wrapper",r.nzListType==="picture-card")},inputs:{nzType:"nzType",nzLimit:[2,"nzLimit","nzLimit",yi],nzSize:[2,"nzSize","nzSize",yi],nzFileType:"nzFileType",nzAccept:"nzAccept",nzAction:"nzAction",nzDirectory:[2,"nzDirectory","nzDirectory",fe],nzOpenFileDialogOnClick:[2,"nzOpenFileDialogOnClick","nzOpenFileDialogOnClick",fe],nzBeforeUpload:"nzBeforeUpload",nzCustomRequest:"nzCustomRequest",nzData:"nzData",nzFilter:"nzFilter",nzFileList:"nzFileList",nzDisabled:[2,"nzDisabled","nzDisabled",fe],nzHeaders:"nzHeaders",nzListType:"nzListType",nzMultiple:[2,"nzMultiple","nzMultiple",fe],nzName:"nzName",nzShowUploadList:"nzShowUploadList",nzShowButton:[2,"nzShowButton","nzShowButton",fe],nzWithCredentials:[2,"nzWithCredentials","nzWithCredentials",fe],nzRemove:"nzRemove",nzPreview:"nzPreview",nzPreviewFile:"nzPreviewFile",nzPreviewIsImage:"nzPreviewIsImage",nzTransformFile:"nzTransformFile",nzDownload:"nzDownload",nzIconRender:"nzIconRender",nzFileListRender:"nzFileListRender"},outputs:{nzChange:"nzChange",nzFileListChange:"nzFileListChange"},exportAs:["nzUpload"],features:[$e],ngContentSelectors:aP,decls:8,vars:1,consts:[["list",""],["con",""],["btn",""],["listComp",""],["uploadComp",""],[3,"display","locale","listType","items","icons","iconRender","previewFile","previewIsImage","onPreview","onRemove","onDownload","dir"],[3,"locale","listType","items","icons","iconRender","previewFile","previewIsImage","onPreview","onRemove","onDownload","dir"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["nz-upload-btn","",3,"options"],[3,"ngTemplateOutlet"],[3,"drop","dragover","dragleave"],["nz-upload-btn","",1,"ant-upload-btn",3,"options"],[1,"ant-upload-drag-container"]],template:function(i,r){i&1&&(Zt(),G(0,mee,2,2,"ng-template",null,0,Jt)(2,gee,1,0,"ng-template",null,1,Jt)(4,yee,4,6,"ng-template",null,2,Jt)(6,xee,6,5)(7,Dee,2,1)),i&2&&(O(6),le(r.nzType==="drag"?6:7))},dependencies:[cP,ni,zee],encapsulation:2,changeDetection:0})}return n})(),lP=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({imports:[Aee,cP]})}return n})();var uP=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({})}return n})();var yy=["*"],Iee=n=>[n],Pee=n=>({$implicit:n});function Ree(n,e){if(n&1&&(An(0),rt(1),In()),n&2){let t=R(2);O(),Pn(t.innerTip)}}function kee(n,e){if(n&1&&(j(0,"div",2)(1,"div",4),G(2,Ree,2,1,"ng-container",5),q()()),n&2){let t=R();$("@helpMotion",void 0),O(),si(Fr(5,Iee,"ant-form-item-explain-"+t.status)),O(),$("nzStringTemplateOutlet",t.innerTip)("nzStringTemplateOutletContext",Fr(7,Pee,t.validateControl))}}function Nee(n,e){if(n&1&&(An(0),rt(1),In()),n&2){let t=R(2);O(),Pn(t.nzExtra)}}function Oee(n,e){if(n&1&&(j(0,"div",3),G(1,Nee,2,1,"ng-container",6),q()),n&2){let t=R();O(),$("nzStringTemplateOutlet",t.nzExtra)}}function Lee(n,e){if(n&1&&(An(0),me(1,"nz-icon",2),In()),n&2){let t=e.$implicit,i=R(2);O(),$("nzType",t)("nzTheme",i.tooltipIcon.theme)}}function Fee(n,e){if(n&1&&(j(0,"span",0),G(1,Lee,2,2,"ng-container",1),q()),n&2){let t=R();$("nzTooltipTitle",t.nzTooltipTitle),O(),$("nzStringTemplateOutlet",t.tooltipIcon.type)}}var Vee=(()=>{class n{cdr;status="";hasFeedback=!1;withHelpClass=!1;destroy$=new ce;setWithHelpViaTips(t){this.withHelpClass=t,this.cdr.markForCheck()}setStatus(t){this.status=t,this.cdr.markForCheck()}setHasFeedback(t){this.hasFeedback=t,this.cdr.markForCheck()}constructor(t){this.cdr=t}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}static \u0275fac=function(i){return new(i||n)(Y(Mt))};static \u0275cmp=Fe({type:n,selectors:[["nz-form-item"]],hostAttrs:[1,"ant-form-item"],hostVars:12,hostBindings:function(i,r){i&2&&ze("ant-form-item-has-success",r.status==="success")("ant-form-item-has-warning",r.status==="warning")("ant-form-item-has-error",r.status==="error")("ant-form-item-is-validating",r.status==="validating")("ant-form-item-has-feedback",r.hasFeedback&&r.status)("ant-form-item-with-help",r.withHelpClass)},exportAs:["nzFormItem"],ngContentSelectors:yy,decls:1,vars:0,template:function(i,r){i&1&&(Zt(),Rt(0))},encapsulation:2,changeDetection:0})}return n})(),Hee="form",_y={type:"question-circle",theme:"outline"},hP=(()=>{let n,e=[],t=[],i,r=[],o=[],s,a=[],c=[],l,u=[],d=[];return class vy{static{let f=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;n=[Fn()],i=[Fn()],s=[Fn()],l=[Fn()],On(null,null,n,{kind:"field",name:"nzNoColon",static:!1,private:!1,access:{has:p=>"nzNoColon"in p,get:p=>p.nzNoColon,set:(p,v)=>{p.nzNoColon=v}},metadata:f},e,t),On(null,null,i,{kind:"field",name:"nzAutoTips",static:!1,private:!1,access:{has:p=>"nzAutoTips"in p,get:p=>p.nzAutoTips,set:(p,v)=>{p.nzAutoTips=v}},metadata:f},r,o),On(null,null,s,{kind:"field",name:"nzTooltipIcon",static:!1,private:!1,access:{has:p=>"nzTooltipIcon"in p,get:p=>p.nzTooltipIcon,set:(p,v)=>{p.nzTooltipIcon=v}},metadata:f},a,c),On(null,null,l,{kind:"field",name:"nzLabelWrap",static:!1,private:!1,access:{has:p=>"nzLabelWrap"in p,get:p=>p.nzLabelWrap,set:(p,v)=>{p.nzLabelWrap=v}},metadata:f},u,d),f&&Object.defineProperty(this,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:f})}nzConfigService;directionality;_nzModuleName=Hee;nzLayout="horizontal";nzNoColon=Ct(this,e,!1);nzAutoTips=(Ct(this,t),Ct(this,r,{}));nzDisableAutoTips=(Ct(this,o),!1);nzTooltipIcon=Ct(this,a,_y);nzLabelAlign=(Ct(this,c),"right");nzLabelWrap=Ct(this,u,!1);dir=(Ct(this,d),"ltr");destroy$=new ce;inputChanges$=new ce;getInputObservable(f){return this.inputChanges$.pipe(xt(p=>f in p),Pe(p=>p[f]))}constructor(f,p){this.nzConfigService=f,this.directionality=p,this.dir=this.directionality.value,this.directionality.change?.pipe(_e(this.destroy$)).subscribe(v=>{this.dir=v})}ngOnChanges(f){this.inputChanges$.next(f)}ngOnDestroy(){this.inputChanges$.complete(),this.destroy$.next(!0),this.destroy$.complete()}static \u0275fac=function(p){return new(p||vy)(Y(ci),Y(Ut))};static \u0275dir=Oe({type:vy,selectors:[["","nz-form",""]],hostAttrs:[1,"ant-form"],hostVars:8,hostBindings:function(p,v){p&2&&ze("ant-form-horizontal",v.nzLayout==="horizontal")("ant-form-vertical",v.nzLayout==="vertical")("ant-form-inline",v.nzLayout==="inline")("ant-form-rtl",v.dir==="rtl")},inputs:{nzLayout:"nzLayout",nzNoColon:[2,"nzNoColon","nzNoColon",fe],nzAutoTips:"nzAutoTips",nzDisableAutoTips:[2,"nzDisableAutoTips","nzDisableAutoTips",fe],nzTooltipIcon:"nzTooltipIcon",nzLabelAlign:"nzLabelAlign",nzLabelWrap:[2,"nzLabelWrap","nzLabelWrap",fe]},exportAs:["nzForm"],features:[$e]})}})(),Bee=(()=>{class n{cdr;nzFormStatusService;_hasFeedback=!1;validateChanges=Kt.EMPTY;validateString=null;destroyed$=new ce;localeId;autoErrorTip;get disableAutoTips(){return this.nzDisableAutoTips!==void 0?e1(this.nzDisableAutoTips):!!this.nzFormDirective?.nzDisableAutoTips}status="";validateControl=null;innerTip=null;defaultValidateControl;nzSuccessTip;nzWarningTip;nzErrorTip;nzValidatingTip;nzExtra;nzAutoTips={};nzDisableAutoTips;set nzHasFeedback(t){this._hasFeedback=t,this.nzFormStatusService.formStatusChanges.next({status:this.status,hasFeedback:this._hasFeedback}),this.nzFormItemComponent&&this.nzFormItemComponent.setHasFeedback(this._hasFeedback)}get nzHasFeedback(){return this._hasFeedback}set nzValidateStatus(t){t instanceof Ua||t instanceof el?(this.validateControl=t,this.validateString=null,this.watchControl()):t instanceof N7?(this.validateControl=t.control,this.validateString=null,this.watchControl()):(this.validateString=t,this.validateControl=null,this.setStatus())}watchControl(){this.validateChanges.unsubscribe(),this.validateControl&&this.validateControl.statusChanges&&(this.validateChanges=this.validateControl.statusChanges.pipe(Di(null),_e(this.destroyed$)).subscribe(()=>{this.disableAutoTips||this.updateAutoErrorTip(),this.setStatus(),this.cdr.markForCheck()}))}setStatus(){this.status=this.getControlStatus(this.validateString),this.innerTip=this.getInnerTip(this.status),this.nzFormStatusService.formStatusChanges.next({status:this.status,hasFeedback:this.nzHasFeedback}),this.nzFormItemComponent&&(this.nzFormItemComponent.setWithHelpViaTips(!!this.innerTip),this.nzFormItemComponent.setStatus(this.status))}getControlStatus(t){let i;return t==="warning"||this.validateControlStatus("INVALID","warning")?i="warning":t==="error"||this.validateControlStatus("INVALID")?i="error":t==="validating"||t==="pending"||this.validateControlStatus("PENDING")?i="validating":t==="success"||this.validateControlStatus("VALID")?i="success":i="",i}validateControlStatus(t,i){if(this.validateControl){let{dirty:r,touched:o,status:s}=this.validateControl;return(!!r||!!o)&&(i?this.validateControl.hasError(i):s===t)}else return!1}getInnerTip(t){switch(t){case"error":return!this.disableAutoTips&&this.autoErrorTip||this.nzErrorTip||null;case"validating":return this.nzValidatingTip||null;case"success":return this.nzSuccessTip||null;case"warning":return this.nzWarningTip||null;default:return null}}updateAutoErrorTip(){if(this.validateControl){let t=this.validateControl.errors||{},i="";for(let r in t)if(t.hasOwnProperty(r)&&(i=t[r]?.[this.localeId]??this.nzAutoTips?.[this.localeId]?.[r]??this.nzAutoTips.default?.[r]??this.nzFormDirective?.nzAutoTips?.[this.localeId]?.[r]??this.nzFormDirective?.nzAutoTips.default?.[r]),i)break;this.autoErrorTip=i}}subscribeAutoTips(t){t?.pipe(_e(this.destroyed$)).subscribe(()=>{this.disableAutoTips||(this.updateAutoErrorTip(),this.setStatus(),this.cdr.markForCheck())})}nzFormItemComponent=T(Vee,{host:!0,optional:!0});nzFormDirective=T(hP,{optional:!0});constructor(t,i,r){this.cdr=t,this.nzFormStatusService=r,this.subscribeAutoTips(i.localeChange.pipe(Bn(o=>this.localeId=o.locale))),this.subscribeAutoTips(this.nzFormDirective?.getInputObservable("nzAutoTips")),this.subscribeAutoTips(this.nzFormDirective?.getInputObservable("nzDisableAutoTips").pipe(xt(()=>this.nzDisableAutoTips===void 0)))}ngOnChanges(t){let{nzDisableAutoTips:i,nzAutoTips:r,nzSuccessTip:o,nzWarningTip:s,nzErrorTip:a,nzValidatingTip:c}=t;i||r?(this.updateAutoErrorTip(),this.setStatus()):(o||s||a||c)&&this.setStatus()}ngOnInit(){this.setStatus()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}ngAfterContentInit(){!this.validateControl&&!this.validateString&&(this.defaultValidateControl instanceof Rh?this.nzValidateStatus=this.defaultValidateControl.control:this.nzValidateStatus=this.defaultValidateControl)}static \u0275fac=function(i){return new(i||n)(Y(Mt),Y(T8),Y(js))};static \u0275cmp=Fe({type:n,selectors:[["nz-form-control"]],contentQueries:function(i,r,o){if(i&1&&ai(o,Yr,5),i&2){let s;Wt(s=$t())&&(r.defaultValidateControl=s.first)}},hostAttrs:[1,"ant-form-item-control"],inputs:{nzSuccessTip:"nzSuccessTip",nzWarningTip:"nzWarningTip",nzErrorTip:"nzErrorTip",nzValidatingTip:"nzValidatingTip",nzExtra:"nzExtra",nzAutoTips:"nzAutoTips",nzDisableAutoTips:[2,"nzDisableAutoTips","nzDisableAutoTips",fe],nzHasFeedback:[2,"nzHasFeedback","nzHasFeedback",fe],nzValidateStatus:"nzValidateStatus"},exportAs:["nzFormControl"],features:[Rn([js]),$e],ngContentSelectors:yy,decls:5,vars:2,consts:[[1,"ant-form-item-control-input"],[1,"ant-form-item-control-input-content"],[1,"ant-form-item-explain","ant-form-item-explain-connected"],[1,"ant-form-item-extra"],["role","alert"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],[4,"nzStringTemplateOutlet"]],template:function(i,r){i&1&&(Zt(),j(0,"div",0)(1,"div",1),Rt(2),q()(),G(3,kee,3,9,"div",2)(4,Oee,2,1,"div",3)),i&2&&(O(3),le(r.innerTip?3:-1),O(),le(r.nzExtra?4:-1))},dependencies:[xi,li],encapsulation:2,data:{animation:[vz]},changeDetection:0})}return n})();function dP(n){let e=typeof n=="string"?{type:n}:n;return Z(Z({},_y),e)}var Uee=(()=>{class n{cdr;nzFor;nzRequired=!1;set nzNoColon(t){this.noColon=t}get nzNoColon(){return this.noColon!=="default"?this.noColon:!!this.nzFormDirective?.nzNoColon}noColon="default";nzTooltipTitle;set nzTooltipIcon(t){this._tooltipIcon=dP(t)}get tooltipIcon(){return this._tooltipIcon!=="default"?this._tooltipIcon:dP(this.nzFormDirective?.nzTooltipIcon||_y)}_tooltipIcon="default";set nzLabelAlign(t){this.labelAlign=t}get nzLabelAlign(){return this.labelAlign!=="default"?this.labelAlign:this.nzFormDirective?.nzLabelAlign||"right"}labelAlign="default";set nzLabelWrap(t){this.labelWrap=t}get nzLabelWrap(){return this.labelWrap!=="default"?this.labelWrap:!!this.nzFormDirective?.nzLabelWrap}labelWrap="default";destroy$=new ce;nzFormDirective=T(hP,{skipSelf:!0,optional:!0});constructor(t){this.cdr=t,this.nzFormDirective&&(this.nzFormDirective.getInputObservable("nzNoColon").pipe(xt(()=>this.noColon==="default"),_e(this.destroy$)).subscribe(()=>this.cdr.markForCheck()),this.nzFormDirective.getInputObservable("nzTooltipIcon").pipe(xt(()=>this._tooltipIcon==="default"),_e(this.destroy$)).subscribe(()=>this.cdr.markForCheck()),this.nzFormDirective.getInputObservable("nzLabelAlign").pipe(xt(()=>this.labelAlign==="default"),_e(this.destroy$)).subscribe(()=>this.cdr.markForCheck()),this.nzFormDirective.getInputObservable("nzLabelWrap").pipe(xt(()=>this.labelWrap==="default"),_e(this.destroy$)).subscribe(()=>this.cdr.markForCheck()))}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}static \u0275fac=function(i){return new(i||n)(Y(Mt))};static \u0275cmp=Fe({type:n,selectors:[["nz-form-label"]],hostAttrs:[1,"ant-form-item-label"],hostVars:4,hostBindings:function(i,r){i&2&&ze("ant-form-item-label-left",r.nzLabelAlign==="left")("ant-form-item-label-wrap",r.nzLabelWrap)},inputs:{nzFor:"nzFor",nzRequired:[2,"nzRequired","nzRequired",fe],nzNoColon:[2,"nzNoColon","nzNoColon",fe],nzTooltipTitle:"nzTooltipTitle",nzTooltipIcon:"nzTooltipIcon",nzLabelAlign:"nzLabelAlign",nzLabelWrap:[2,"nzLabelWrap","nzLabelWrap",fe]},exportAs:["nzFormLabel"],ngContentSelectors:yy,decls:3,vars:6,consts:[["nz-tooltip","",1,"ant-form-item-tooltip",3,"nzTooltipTitle"],[4,"nzStringTemplateOutlet"],[3,"nzType","nzTheme"]],template:function(i,r){i&1&&(Zt(),j(0,"label"),Rt(1),G(2,Fee,2,2,"span",0),q()),i&2&&(ze("ant-form-item-no-colon",r.nzNoColon)("ant-form-item-required",r.nzRequired),fn("for",r.nzFor),O(2),le(r.nzTooltipTitle?2:-1))},dependencies:[xi,li,C8,wn,pn],encapsulation:2,changeDetection:0})}return n})();var fP=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({imports:[Uee,Bee,uP]})}return n})();var Yee=["input"],jee=["inputNumberHost"],Gee=[[["","nzInputAddonBefore",""]],[["","nzInputAddonAfter",""]],[["","nzInputPrefix",""]],[["","nzInputSuffix",""]],[["","nzInputNumberUpIcon",""]],[["","nzInputNumberDownIcon",""]]],Wee=["[nzInputAddonBefore]","[nzInputAddonAfter]","[nzInputPrefix]","[nzInputSuffix]","[nzInputNumberUpIcon]","[nzInputNumberDownIcon]"];function $ee(n,e){}function qee(n,e){if(n&1&&G(0,$ee,0,0,"ng-template",8),n&2){R();let t=dt(4);$("ngTemplateOutlet",t)}}function Xee(n,e){}function Kee(n,e){if(n&1&&G(0,Xee,0,0,"ng-template",8),n&2){R();let t=dt(8);$("ngTemplateOutlet",t)}}function Zee(n,e){}function Qee(n,e){if(n&1&&G(0,Zee,0,0,"ng-template",8),n&2){R();let t=dt(12);$("ngTemplateOutlet",t)}}function Jee(n,e){n&1&&(j(0,"div",10),Rt(1),q())}function ete(n,e){}function tte(n,e){if(n&1&&G(0,ete,0,0,"ng-template",8),n&2){R(2);let t=dt(6);$("ngTemplateOutlet",t)}}function nte(n,e){}function ite(n,e){if(n&1&&G(0,nte,0,0,"ng-template",8),n&2){R(2);let t=dt(10);$("ngTemplateOutlet",t)}}function rte(n,e){n&1&&(j(0,"div",10),Rt(1,1),q())}function ote(n,e){if(n&1&&(j(0,"div",9),G(1,Jee,2,0,"div",10)(2,tte,1,1,null,8)(3,ite,1,1,null,8)(4,rte,2,0,"div",10),q()),n&2){let t=R();O(),le(t.addonBefore()?1:-1),O(),le(t.hasAffix()?2:3),O(2),le(t.addonAfter()?4:-1)}}function ste(n,e){}function ate(n,e){if(n&1&&(j(0,"div"),G(1,ste,0,0,"ng-template",8),q()),n&2){let t=R(),i=dt(8);si(t.affixWrapperClass()),O(),$("ngTemplateOutlet",i)}}function cte(n,e){n&1&&(j(0,"span",11),Rt(1,2),q())}function lte(n,e){}function ute(n,e){if(n&1&&me(0,"nz-form-item-feedback-icon",13),n&2){let t=R(3);$("status",t.finalStatus())}}function dte(n,e){if(n&1&&(j(0,"span",12),Rt(1,3),G(2,ute,1,1,"nz-form-item-feedback-icon",13),q()),n&2){let t=R(2);O(2),le(t.hasFeedback()&&t.finalStatus()?2:-1)}}function hte(n,e){if(n&1&&G(0,cte,2,0,"span",11)(1,lte,0,0,"ng-template",8)(2,dte,3,1,"span",12),n&2){let t=R(),i=dt(10);le(t.prefix()?0:-1),O(),$("ngTemplateOutlet",i),O(),le(t.suffix()||t.hasFeedback()?2:-1)}}function fte(n,e){}function pte(n,e){if(n&1&&(j(0,"div",null,5),G(2,fte,0,0,"ng-template",8),q()),n&2){let t=R(),i=dt(12);si(t.inputNumberClass()),O(2),$("ngTemplateOutlet",i)}}function mte(n,e){n&1&&me(0,"nz-icon",20)}function gte(n,e){n&1&&me(0,"nz-icon",21)}function vte(n,e){if(n&1){let t=un();j(0,"div",17,7),We("mouseup",function(){je(t);let r=R(2);return Ge(r.stopAutoStep())})("mouseleave",function(){je(t);let r=R(2);return Ge(r.stopAutoStep())}),j(2,"span",18),We("mousedown",function(r){je(t);let o=R(2);return Ge(o.onStepMouseDown(r,!0))}),Rt(3,4,null,mte,1,0),q(),j(5,"span",19),We("mousedown",function(r){je(t);let o=R(2);return Ge(o.onStepMouseDown(r,!1))}),Rt(6,5,null,gte,1,0),q()()}if(n&2){let t=R(2);O(2),ze("ant-input-number-handler-up-disabled",t.upDisabled()),fn("aria-disabled",t.upDisabled()),O(3),ze("ant-input-number-handler-down-disabled",t.downDisabled()),fn("aria-disabled",t.downDisabled())}}function yte(n,e){if(n&1){let t=un();G(0,vte,8,6,"div",14),j(1,"div",15)(2,"input",16,6),We("input",function(){je(t);let r=dt(3),o=R();return Ge(o.onInput(r.value))}),q()()}if(n&2){let t,i=R();le(i.nzControls()?0:-1),O(2),$("value",i.displayValue())("placeholder",(t=i.nzPlaceHolder())!==null&&t!==void 0?t:"")("disabled",i.finalDisabled())("readOnly",i.nzReadOnly()),fn("aria-valuemin",i.nzMin())("aria-valuemax",i.nzMax())("id",i.nzId())("step",i.nzStep())("value",i.displayValue())}}var xy=(()=>{class n{nzId=Kn(null);nzSize=Kn("default");nzPlaceHolder=Kn(null);nzStatus=Kn("");nzStep=Kn(1,{transform:yi});nzMin=Kn(Number.MIN_SAFE_INTEGER,{transform:yi});nzMax=Kn(Number.MAX_SAFE_INTEGER,{transform:yi});nzPrecision=Kn(null);nzParser=Kn();nzFormatter=Kn();nzDisabled=Kn(!1,{transform:fe});nzReadOnly=Kn(!1,{transform:fe});nzAutoFocus=Kn(!1,{transform:fe});nzBordered=Kn(!0,{transform:fe});nzKeyboard=Kn(!0,{transform:fe});nzControls=Kn(!0,{transform:fe});nzBlur=h2();nzFocus=h2();nzOnStep=h2();onChange=()=>{};onTouched=()=>{};isDisabledFirstChange=!0;compactSize=T(il,{optional:!0});inputRef=wg.required("input");hostRef=wg("inputNumberHost");elementRef=T(Je);injector=T(Ln);focusMonitor=T(Lh);directionality=T(Ut);nzFormStatusService=T(js,{optional:!0});autoStepTimer=null;defaultFormater=t=>{let i=this.nzPrecision();return us(i)?t.toFixed(i):t.toString()};value=gi(null);displayValue=gi("");dir=Nh(this.directionality.change,{initialValue:this.directionality.value});focused=gi(!1);hasFeedback=gi(!1);finalStatus=Ng(()=>this.nzStatus());finalDisabled=Ng(()=>this.nzDisabled());prefix=Ad(K7);suffix=Ad(Z7);addonBefore=Ad(q7);addonAfter=Ad(X7);hasAffix=ti(()=>!!this.prefix()||!!this.suffix()||this.hasFeedback());hasAddon=ti(()=>!!this.addonBefore()||!!this.addonAfter());class=ti(()=>this.hasAddon()?this.groupWrapperClass():this.hasAffix()?this.affixWrapperClass():this.inputNumberClass());inputNumberClass=ti(()=>Z({"ant-input-number":!0,"ant-input-number-lg":this.finalSize()==="large","ant-input-number-sm":this.finalSize()==="small","ant-input-number-disabled":this.finalDisabled(),"ant-input-number-readonly":this.nzReadOnly(),"ant-input-number-borderless":!this.nzBordered(),"ant-input-number-focused":this.focused(),"ant-input-number-rtl":this.dir()==="rtl","ant-input-number-in-form-item":!!this.nzFormStatusService,"ant-input-number-out-of-range":this.value()!==null&&!by(this.value(),this.nzMin(),this.nzMax())},Us("ant-input-number",this.finalStatus(),this.hasFeedback())));affixWrapperClass=ti(()=>Z({"ant-input-number-affix-wrapper":!0,"ant-input-number-affix-wrapper-disabled":this.finalDisabled(),"ant-input-number-affix-wrapper-readonly":this.nzReadOnly(),"ant-input-number-affix-wrapper-borderless":!this.nzBordered(),"ant-input-number-affix-wrapper-focused":this.focused(),"ant-input-number-affix-wrapper-rtl":this.dir()==="rtl"},Us("ant-input-number-affix-wrapper",this.finalStatus(),this.hasFeedback())));groupWrapperClass=ti(()=>Z({"ant-input-number-group-wrapper":!0,"ant-input-number-group-wrapper-rtl":this.dir()==="rtl"},Us("ant-input-number-group-wrapper",this.finalStatus(),this.hasFeedback())));finalSize=ti(()=>this.compactSize?this.compactSize():this.nzSize());upDisabled=ti(()=>!m7(this.value())&&this.value()>=this.nzMax());downDisabled=ti(()=>!m7(this.value())&&this.value()<=this.nzMin());constructor(){let t=T(Nr);xo(()=>{let i=this.hostRef(),r=i||this.elementRef;this.focusMonitor.monitor(r,!0).pipe(m3(t)).subscribe(o=>{this.focused.set(!!o),o?this.nzFocus.emit():(this.fixValue(),this.onTouched(),this.nzBlur.emit())}),t.onDestroy(()=>{this.focusMonitor.stopMonitoring(r)})}),this.nzFormStatusService?.formStatusChanges.pipe(m3()).subscribe(({status:i,hasFeedback:r})=>{this.finalStatus.set(i),this.hasFeedback.set(r)})}ngOnInit(){this.nzAutoFocus()&&xo(()=>this.focus(),{injector:this.injector})}writeValue(t){gr(()=>{this.value.set(t),this.setValue(t)})}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){gr(()=>{this.finalDisabled.set(this.isDisabledFirstChange&&this.nzDisabled()||t)}),this.isDisabledFirstChange=!1}focus(){this.inputRef().nativeElement.focus()}blur(){this.inputRef().nativeElement.blur()}step(t,i){if(i&&this.upDisabled()||!i&&this.downDisabled())return;let r=t.shiftKey?this.nzStep()*10:this.nzStep();i||(r=-r);let s=10**gP(r),a=mP((Math.round((this.value()||0)*s)+Math.round(r*s))/s,this.nzMin(),this.nzMax(),this.nzPrecision());this.setValue(a),this.nzOnStep.emit({type:i?"up":"down",value:this.value(),offset:this.nzStep()}),this.focus()}setValue(t){let i=this.nzFormatter()??this.defaultFormater,r=this.nzPrecision();us(r)&&(t&&=+t.toFixed(r));let o=t===null?"":i(t);this.displayValue.set(o),this.updateValue(t)}setValueByTyping(t){if(t===""){this.displayValue.set(""),this.updateValue(null);return}let r=(this.nzParser()??pP)(t);if(xte(t)||Number.isNaN(r)){this.displayValue.set(t);return}let o=this.nzFormatter()?.(r)??r.toString();this.displayValue.set(o),by(r,this.nzMin(),this.nzMax())&&this.updateValue(r)}updateValue(t){this.value()!==t&&(this.value.set(t),this.onChange(t))}fixValue(){let t=this.displayValue();if(t==="")return;let r=(this.nzParser()??pP)(t);if(Number.isNaN(r))r=this.value();else{let o=this.nzPrecision();us(o)&&gP(r)!==o&&(r=+r.toFixed(o)),by(r,this.nzMin(),this.nzMax())||(r=mP(r,this.nzMin(),this.nzMax(),o))}this.setValue(r)}stopAutoStep(){this.autoStepTimer!==null&&(clearTimeout(this.autoStepTimer),this.autoStepTimer=null)}onStepMouseDown(t,i){t.preventDefault(),this.stopAutoStep(),this.step(t,i);let r=()=>{this.step(t,i),this.autoStepTimer=setTimeout(r,_te)};this.autoStepTimer=setTimeout(r,bte)}onKeyDown(t){switch(t.keyCode){case 38:t.preventDefault(),this.nzKeyboard()&&this.step(t,!0);break;case 40:t.preventDefault(),this.nzKeyboard()&&this.step(t,!1);break;case 13:this.fixValue();break}}onInput(t){this.setValueByTyping(t)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["nz-input-number"]],contentQueries:function(i,r,o){i&1&&(Pd(o,r.prefix,K7,5),Pd(o,r.suffix,Z7,5),Pd(o,r.addonBefore,q7,5),Pd(o,r.addonAfter,X7,5)),i&2&&Pg(4)},viewQuery:function(i,r){i&1&&(Ig(r.inputRef,Yee,5),Ig(r.hostRef,jee,5)),i&2&&Pg(2)},hostVars:2,hostBindings:function(i,r){i&1&&We("keydown",function(s){return r.onKeyDown(s)}),i&2&&si(r.class())},inputs:{nzId:[1,"nzId"],nzSize:[1,"nzSize"],nzPlaceHolder:[1,"nzPlaceHolder"],nzStatus:[1,"nzStatus"],nzStep:[1,"nzStep"],nzMin:[1,"nzMin"],nzMax:[1,"nzMax"],nzPrecision:[1,"nzPrecision"],nzParser:[1,"nzParser"],nzFormatter:[1,"nzFormatter"],nzDisabled:[1,"nzDisabled"],nzReadOnly:[1,"nzReadOnly"],nzAutoFocus:[1,"nzAutoFocus"],nzBordered:[1,"nzBordered"],nzKeyboard:[1,"nzKeyboard"],nzControls:[1,"nzControls"]},outputs:{nzBlur:"nzBlur",nzFocus:"nzFocus",nzOnStep:"nzOnStep"},exportAs:["nzInputNumber"],features:[Rn([{provide:Ya,useExisting:kr(()=>n),multi:!0},{provide:Ga,useValue:"input-number"}]),Pc([rl])],ngContentSelectors:Wee,decls:13,vars:1,consts:[["inputNumberWithAddonInner",""],["inputNumberWithAffix",""],["inputNumberWithAffixInner",""],["inputNumber",""],["inputNumberInner",""],["inputNumberHost",""],["input",""],["handlers",""],[3,"ngTemplateOutlet"],[1,"ant-input-number-wrapper","ant-input-number-group"],[1,"ant-input-number-group-addon"],[1,"ant-input-number-prefix"],[1,"ant-input-number-suffix"],[3,"status"],[1,"ant-input-number-handler-wrap"],[1,"ant-input-number-input-wrap"],["autocomplete","off","role","spinbutton",1,"ant-input-number-input",3,"input","value","placeholder","disabled","readOnly"],[1,"ant-input-number-handler-wrap",3,"mouseup","mouseleave"],["role","button","unselectable","on",1,"ant-input-number-handler","ant-input-number-handler-up",3,"mousedown"],["role","button","unselectable","on",1,"ant-input-number-handler","ant-input-number-handler-down",3,"mousedown"],["nzType","up",1,"ant-input-number-handler-up-inner"],["nzType","down",1,"ant-input-number-handler-down-inner"]],template:function(i,r){i&1&&(Zt(Gee),G(0,qee,1,1,null,8)(1,Kee,1,1,null,8)(2,Qee,1,1,null,8)(3,ote,5,3,"ng-template",null,0,Jt)(5,ate,2,3,"ng-template",null,1,Jt)(7,hte,3,3,"ng-template",null,2,Jt)(9,pte,3,3,"ng-template",null,3,Jt)(11,yte,4,10,"ng-template",null,4,Jt)),i&2&&le(r.hasAddon()?0:r.hasAffix()?1:2)},dependencies:[wn,pn,kh,ni],encapsulation:2,changeDetection:0})}return n})(),_te=200,bte=600;function pP(n){return+n.trim().replace(//g,".")}function by(n,e,t){return n>=e&&n<=t}function mP(n,e,t,i=null){if(i===null)return n<e?e:n>t?t:n;let r=+n.toFixed(i),o=Math.pow(10,i);return r<e?Math.ceil(e*o)/o:r>t?Math.floor(t*o)/o:r}function gP(n){return n.toString().split(".")[1]?.length||0}function xte(n){return/[.](\d*0)?$/.test(n.toString())}var vP=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({imports:[xy]})}return n})();var yP={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]},Nl=class{constructor(){this.textureUtils=null,this.pluginCallbacks=[],this.register(function(e){return new Cy(e)}),this.register(function(e){return new Ty(e)}),this.register(function(e){return new Ay(e)}),this.register(function(e){return new Iy(e)}),this.register(function(e){return new Py(e)}),this.register(function(e){return new Ry(e)}),this.register(function(e){return new Ey(e)}),this.register(function(e){return new Dy(e)}),this.register(function(e){return new zy(e)}),this.register(function(e){return new ky(e)}),this.register(function(e){return new Ny(e)}),this.register(function(e){return new Oy(e)}),this.register(function(e){return new Ly(e)}),this.register(function(e){return new Fy(e)})}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}setTextureUtils(e){return this.textureUtils=e,this}parse(e,t,i,r){let o=new wy,s=[];for(let a=0,c=this.pluginCallbacks.length;a<c;a++)s.push(this.pluginCallbacks[a](o));o.setPlugins(s),o.setTextureUtils(this.textureUtils),o.writeAsync(e,t,r).catch(i)}parseAsync(e,t){let i=this;return new Promise(function(r,o){i.parse(e,r,o,t)})}},jt={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},My="KHR_mesh_quantization",Kr={};Kr[Mi]=jt.NEAREST;Kr[H1]=jt.NEAREST_MIPMAP_NEAREST;Kr[aa]=jt.NEAREST_MIPMAP_LINEAR;Kr[Fi]=jt.LINEAR;Kr[ac]=jt.LINEAR_MIPMAP_NEAREST;Kr[Xr]=jt.LINEAR_MIPMAP_LINEAR;Kr[lo]=jt.CLAMP_TO_EDGE;Kr[fs]=jt.REPEAT;Kr[ec]=jt.MIRRORED_REPEAT;var _P={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},Ste=new ot,bP=12,wte=1179937895,Cte=2,xP=8,Tte=1313821514,Ete=5130562;function P0(n,e){return n.length===e.length&&n.every(function(t,i){return t===e[i]})}function Dte(n){return new TextEncoder().encode(n).buffer}function zte(n){return P0(n.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function Ate(n,e,t){let i={min:new Array(n.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(n.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let r=e;r<e+t;r++)for(let o=0;o<n.itemSize;o++){let s;n.itemSize>4?s=n.array[r*n.itemSize+o]:(o===0?s=n.getX(r):o===1?s=n.getY(r):o===2?s=n.getZ(r):o===3&&(s=n.getW(r)),n.normalized===!0&&(s=ca.normalize(s,n.array))),i.min[o]=Math.min(i.min[o],s),i.max[o]=Math.max(i.max[o],s)}return i}function SP(n){return Math.ceil(n/4)*4}function Sy(n,e=0){let t=SP(n.byteLength);if(t!==n.byteLength){let i=new Uint8Array(t);if(i.set(new Uint8Array(n)),e!==0)for(let r=n.byteLength;r<t;r++)i[r]=e;return i.buffer}return n}function MP(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function Ite(n,e){if(n.toBlob!==void 0)return new Promise(i=>n.toBlob(i,e));let t;return e==="image/jpeg"?t=.92:e==="image/webp"&&(t=.8),n.convertToBlob({type:e,quality:t})}var wy=class{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter r"+F1}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map},this.textureUtils=null}setPlugins(e){this.plugins=e}setTextureUtils(e){this.textureUtils=e}writeAsync(r,o){return Xt(this,arguments,function*(e,t,i={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},i),this.options.animations.length>0&&(this.options.trs=!0),yield this.processInputAsync(e),yield Promise.all(this.pending);let s=this,a=s.buffers,c=s.json;i=s.options;let l=s.extensionsUsed,u=s.extensionsRequired,d=new Blob(a,{type:"application/octet-stream"}),h=Object.keys(l),f=Object.keys(u);if(h.length>0&&(c.extensionsUsed=h),f.length>0&&(c.extensionsRequired=f),c.buffers&&c.buffers.length>0&&(c.buffers[0].byteLength=d.size),i.binary===!0){let p=new FileReader;p.readAsArrayBuffer(d),p.onloadend=function(){let v=Sy(p.result),g=new DataView(new ArrayBuffer(xP));g.setUint32(0,v.byteLength,!0),g.setUint32(4,Ete,!0);let m=Sy(Dte(JSON.stringify(c)),32),C=new DataView(new ArrayBuffer(xP));C.setUint32(0,m.byteLength,!0),C.setUint32(4,Tte,!0);let w=new ArrayBuffer(bP),y=new DataView(w);y.setUint32(0,wte,!0),y.setUint32(4,Cte,!0);let z=bP+C.byteLength+m.byteLength+g.byteLength+v.byteLength;y.setUint32(8,z,!0);let D=new Blob([w,C,m,g,v],{type:"application/octet-stream"}),x=new FileReader;x.readAsArrayBuffer(D),x.onloadend=function(){t(x.result)}}}else if(c.buffers&&c.buffers.length>0){let p=new FileReader;p.readAsDataURL(d),p.onloadend=function(){let v=p.result;c.buffers[0].uri=v,t(c)}}else t(c)})}serializeUserData(e,t){if(Object.keys(e.userData).length===0)return;let i=this.options,r=this.extensionsUsed;try{let o=JSON.parse(JSON.stringify(e.userData));if(i.includeCustomExtensions&&o.gltfExtensions){t.extensions===void 0&&(t.extensions={});for(let s in o.gltfExtensions)t.extensions[s]=o.gltfExtensions[s],r[s]=!0;delete o.gltfExtensions}Object.keys(o).length>0&&(t.extras=o)}catch(o){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+o.message)}}getUID(e,t=!1){if(this.uids.has(e)===!1){let r=new Map;r.set(!0,this.uid++),r.set(!1,this.uid++),this.uids.set(e,r)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;let i=new k;for(let r=0,o=e.count;r<o;r++)if(Math.abs(i.fromBufferAttribute(e,r).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){let t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);let i=e.clone(),r=new k;for(let o=0,s=i.count;o<s;o++)r.fromBufferAttribute(i,o),r.x===0&&r.y===0&&r.z===0?r.setX(1):r.normalize(),i.setXYZ(o,r.x,r.y,r.z);return t.attributesNormalized.set(e,i),i}applyTextureTransform(e,t){let i=!1,r={};(t.offset.x!==0||t.offset.y!==0)&&(r.offset=t.offset.toArray(),i=!0),t.rotation!==0&&(r.rotation=t.rotation,i=!0),(t.repeat.x!==1||t.repeat.y!==1)&&(r.scale=t.repeat.toArray(),i=!0),i&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=r,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTextureAsync(e,t){return Xt(this,null,function*(){if(e===t)return e;function i(f){return f.colorSpace===Zn?function(v){return v<.04045?v*.0773993808:Math.pow(v*.9478672986+.0521327014,2.4)}:function(v){return v}}e instanceof gl&&(e=yield this.decompressTextureAsync(e)),t instanceof gl&&(t=yield this.decompressTextureAsync(t));let r=e?e.image:null,o=t?t.image:null,s=Math.max(r?r.width:0,o?o.width:0),a=Math.max(r?r.height:0,o?o.height:0),c=MP();c.width=s,c.height=a;let l=c.getContext("2d",{willReadFrequently:!0});l.fillStyle="#00ffff",l.fillRect(0,0,s,a);let u=l.getImageData(0,0,s,a);if(r){l.drawImage(r,0,0,s,a);let f=i(e),p=l.getImageData(0,0,s,a).data;for(let v=2;v<p.length;v+=4)u.data[v]=f(p[v]/256)*256}if(o){l.drawImage(o,0,0,s,a);let f=i(t),p=l.getImageData(0,0,s,a).data;for(let v=1;v<p.length;v+=4)u.data[v]=f(p[v]/256)*256}l.putImageData(u,0,0);let h=(e||t).clone();return h.source=new tc(c),h.colorSpace=Bo,h.channel=(e||t).channel,e&&t&&e.channel!==t.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),h})}decompressTextureAsync(e,t=1/0){return Xt(this,null,function*(){if(this.textureUtils===null)throw new Error("THREE.GLTFExporter: setTextureUtils() must be called to process compressed textures.");return yield this.textureUtils.decompress(e,t)})}processBuffer(e){let t=this.json,i=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),i.push(e),0}processBufferView(e,t,i,r,o){let s=this.json;s.bufferViews||(s.bufferViews=[]);let a;switch(t){case jt.BYTE:case jt.UNSIGNED_BYTE:a=1;break;case jt.SHORT:case jt.UNSIGNED_SHORT:a=2;break;default:a=4}let c=e.itemSize*a;o===jt.ARRAY_BUFFER&&(c=Math.ceil(c/4)*4);let l=SP(r*c),u=new DataView(new ArrayBuffer(l)),d=0;for(let p=i;p<i+r;p++){for(let v=0;v<e.itemSize;v++){let g;e.itemSize>4?g=e.array[p*e.itemSize+v]:(v===0?g=e.getX(p):v===1?g=e.getY(p):v===2?g=e.getZ(p):v===3&&(g=e.getW(p)),e.normalized===!0&&(g=ca.normalize(g,e.array))),t===jt.FLOAT?u.setFloat32(d,g,!0):t===jt.INT?u.setInt32(d,g,!0):t===jt.UNSIGNED_INT?u.setUint32(d,g,!0):t===jt.SHORT?u.setInt16(d,g,!0):t===jt.UNSIGNED_SHORT?u.setUint16(d,g,!0):t===jt.BYTE?u.setInt8(d,g):t===jt.UNSIGNED_BYTE&&u.setUint8(d,g),d+=a}d%c!==0&&(d+=c-d%c)}let h={buffer:this.processBuffer(u.buffer),byteOffset:this.byteOffset,byteLength:l};return o!==void 0&&(h.target=o),o===jt.ARRAY_BUFFER&&(h.byteStride=c),this.byteOffset+=l,s.bufferViews.push(h),{id:s.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){let t=this,i=t.json;return i.bufferViews||(i.bufferViews=[]),new Promise(function(r){let o=new FileReader;o.readAsArrayBuffer(e),o.onloadend=function(){let s=Sy(o.result),a={buffer:t.processBuffer(s),byteOffset:t.byteOffset,byteLength:s.byteLength};t.byteOffset+=s.byteLength,r(i.bufferViews.push(a)-1)}})}processAccessor(e,t,i,r){let o=this.json,s={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"},a;if(e.array.constructor===Float32Array)a=jt.FLOAT;else if(e.array.constructor===Int32Array)a=jt.INT;else if(e.array.constructor===Uint32Array)a=jt.UNSIGNED_INT;else if(e.array.constructor===Int16Array)a=jt.SHORT;else if(e.array.constructor===Uint16Array)a=jt.UNSIGNED_SHORT;else if(e.array.constructor===Int8Array)a=jt.BYTE;else if(e.array.constructor===Uint8Array)a=jt.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);if(i===void 0&&(i=0),(r===void 0||r===1/0)&&(r=e.count),r===0)return null;let c=Ate(e,i,r),l;t!==void 0&&(l=e===t.index?jt.ELEMENT_ARRAY_BUFFER:jt.ARRAY_BUFFER);let u=this.processBufferView(e,a,i,r,l),d={bufferView:u.id,byteOffset:u.byteOffset,componentType:a,count:r,max:c.max,min:c.min,type:s[e.itemSize]};return e.normalized===!0&&(d.normalized=!0),o.accessors||(o.accessors=[]),o.accessors.push(d)-1}processImage(e,t,i,r="image/png"){if(e!==null){let o=this,s=o.cache,a=o.json,c=o.options,l=o.pending;s.images.has(e)||s.images.set(e,{});let u=s.images.get(e),d=r+":flipY/"+i.toString();if(u[d]!==void 0)return u[d];a.images||(a.images=[]);let h={mimeType:r},f=MP();f.width=Math.min(e.width,c.maxTextureSize),f.height=Math.min(e.height,c.maxTextureSize);let p=f.getContext("2d",{willReadFrequently:!0});if(i===!0&&(p.translate(0,f.height),p.scale(1,-1)),e.data!==void 0){t!==cr&&console.error("GLTFExporter: Only RGBAFormat is supported.",t),(e.width>c.maxTextureSize||e.height>c.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);let g=new Uint8ClampedArray(e.height*e.width*4);for(let m=0;m<g.length;m+=4)g[m+0]=e.data[m+0],g[m+1]=e.data[m+1],g[m+2]=e.data[m+2],g[m+3]=e.data[m+3];p.putImageData(new ImageData(g,e.width,e.height),0,0)}else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas)p.drawImage(e,0,0,f.width,f.height);else throw new Error("THREE.GLTFExporter: Invalid image type. Use HTMLImageElement, HTMLCanvasElement, ImageBitmap or OffscreenCanvas.");c.binary===!0?l.push(Ite(f,r).then(g=>o.processBufferViewImage(g)).then(g=>{h.bufferView=g})):h.uri=D1.getDataURL(f,r);let v=a.images.push(h)-1;return u[d]=v,v}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){let t=this.json;t.samplers||(t.samplers=[]);let i={magFilter:Kr[e.magFilter],minFilter:Kr[e.minFilter],wrapS:Kr[e.wrapS],wrapT:Kr[e.wrapT]};return t.samplers.push(i)-1}processTextureAsync(e){return Xt(this,null,function*(){let i=this.options,r=this.cache,o=this.json;if(r.textures.has(e))return r.textures.get(e);o.textures||(o.textures=[]),e instanceof gl&&(e=yield this.decompressTextureAsync(e,i.maxTextureSize));let s=e.userData.mimeType;s==="image/webp"&&(s="image/png");let a={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,s)};e.name&&(a.name=e.name),yield this._invokeAllAsync(function(l){return Xt(this,null,function*(){l.writeTexture&&(yield l.writeTexture(e,a))})});let c=o.textures.push(a)-1;return r.textures.set(e,c),c})}processMaterialAsync(e){return Xt(this,null,function*(){let t=this.cache,i=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;i.materials||(i.materials=[]);let r={pbrMetallicRoughness:{}};e.isMeshStandardMaterial!==!0&&e.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");let o=e.color.toArray().concat([e.opacity]);if(P0(o,[1,1,1,1])||(r.pbrMetallicRoughness.baseColorFactor=o),e.isMeshStandardMaterial?(r.pbrMetallicRoughness.metallicFactor=e.metalness,r.pbrMetallicRoughness.roughnessFactor=e.roughness):(r.pbrMetallicRoughness.metallicFactor=0,r.pbrMetallicRoughness.roughnessFactor=1),e.metalnessMap||e.roughnessMap){let a=yield this.buildMetalRoughTextureAsync(e.metalnessMap,e.roughnessMap),c={index:yield this.processTextureAsync(a),texCoord:a.channel};this.applyTextureTransform(c,a),r.pbrMetallicRoughness.metallicRoughnessTexture=c}if(e.map){let a={index:yield this.processTextureAsync(e.map),texCoord:e.map.channel};this.applyTextureTransform(a,e.map),r.pbrMetallicRoughness.baseColorTexture=a}if(e.emissive){let a=e.emissive;if(Math.max(a.r,a.g,a.b)>0&&(r.emissiveFactor=e.emissive.toArray()),e.emissiveMap){let l={index:yield this.processTextureAsync(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(l,e.emissiveMap),r.emissiveTexture=l}}if(e.normalMap){let a={index:yield this.processTextureAsync(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&e.normalScale.x!==1&&(a.scale=e.normalScale.x),this.applyTextureTransform(a,e.normalMap),r.normalTexture=a}if(e.aoMap){let a={index:yield this.processTextureAsync(e.aoMap),texCoord:e.aoMap.channel};e.aoMapIntensity!==1&&(a.strength=e.aoMapIntensity),this.applyTextureTransform(a,e.aoMap),r.occlusionTexture=a}e.transparent?r.alphaMode="BLEND":e.alphaTest>0&&(r.alphaMode="MASK",r.alphaCutoff=e.alphaTest),e.side===Dr&&(r.doubleSided=!0),e.name!==""&&(r.name=e.name),this.serializeUserData(e,r),yield this._invokeAllAsync(function(a){return Xt(this,null,function*(){a.writeMaterialAsync&&(yield a.writeMaterialAsync(e,r))})});let s=i.materials.push(r)-1;return t.materials.set(e,s),s})}processMeshAsync(e){return Xt(this,null,function*(){let t=this.cache,i=this.json,r=[e.geometry.uuid];if(Array.isArray(e.material))for(let y=0,z=e.material.length;y<z;y++)r.push(e.material[y].uuid);else r.push(e.material.uuid);let o=r.join(":");if(t.meshes.has(o))return t.meshes.get(o);let s=e.geometry,a;e.isLineSegments?a=jt.LINES:e.isLineLoop?a=jt.LINE_LOOP:e.isLine?a=jt.LINE_STRIP:e.isPoints?a=jt.POINTS:a=e.material.wireframe?jt.LINES:jt.TRIANGLES;let c={},l={},u=[],d=[],h={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},f=s.getAttribute("normal");f!==void 0&&!this.isNormalizedNormalAttribute(f)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),s.setAttribute("normal",this.createNormalizedNormalAttribute(f)));let p=null;for(let y in s.attributes){if(y.slice(0,5)==="morph")continue;let z=s.attributes[y];if(y=h[y]||y.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(y)||(y="_"+y),t.attributes.has(this.getUID(z))){l[y]=t.attributes.get(this.getUID(z));continue}p=null;let x=z.array;y==="JOINTS_0"&&!(x instanceof Uint16Array)&&!(x instanceof Uint8Array)?(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),p=new _n(new Uint16Array(x),z.itemSize,z.normalized)):(x instanceof Uint32Array||x instanceof Int32Array)&&!y.startsWith("_")&&(console.warn(`GLTFExporter: Attribute "${y}" converted to type FLOAT.`),p=Nl.Utils.toFloat32BufferAttribute(z));let I=this.processAccessor(p||z,s);I!==null&&(y.startsWith("_")||this.detectMeshQuantization(y,z),l[y]=I,t.attributes.set(this.getUID(z),I))}if(f!==void 0&&s.setAttribute("normal",f),Object.keys(l).length===0)return null;if(e.morphTargetInfluences!==void 0&&e.morphTargetInfluences.length>0){let y=[],z=[],D={};if(e.morphTargetDictionary!==void 0)for(let x in e.morphTargetDictionary)D[e.morphTargetDictionary[x]]=x;for(let x=0;x<e.morphTargetInfluences.length;++x){let I={},S=!1;for(let M in s.morphAttributes){if(M!=="position"&&M!=="normal"){S||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),S=!0);continue}let A=s.morphAttributes[M][x],J=M.toUpperCase(),K=s.attributes[M];if(t.attributes.has(this.getUID(A,!0))){I[J]=t.attributes.get(this.getUID(A,!0));continue}let Q=A.clone();if(!s.morphTargetsRelative)for(let ee=0,L=A.count;ee<L;ee++)for(let B=0;B<A.itemSize;B++)B===0&&Q.setX(ee,A.getX(ee)-K.getX(ee)),B===1&&Q.setY(ee,A.getY(ee)-K.getY(ee)),B===2&&Q.setZ(ee,A.getZ(ee)-K.getZ(ee)),B===3&&Q.setW(ee,A.getW(ee)-K.getW(ee));I[J]=this.processAccessor(Q,s),t.attributes.set(this.getUID(K,!0),I[J])}d.push(I),y.push(e.morphTargetInfluences[x]),e.morphTargetDictionary!==void 0&&z.push(D[x])}c.weights=y,z.length>0&&(c.extras={},c.extras.targetNames=z)}let v=Array.isArray(e.material);if(v&&s.groups.length===0)return null;let g=!1;if(v&&s.index===null){let y=[];for(let z=0,D=s.attributes.position.count;z<D;z++)y[z]=z;s.setIndex(y),g=!0}let m=v?e.material:[e.material],C=v?s.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let y=0,z=C.length;y<z;y++){let D={mode:a,attributes:l};if(this.serializeUserData(s,D),d.length>0&&(D.targets=d),s.index!==null){let I=this.getUID(s.index);(C[y].start!==void 0||C[y].count!==void 0)&&(I+=":"+C[y].start+":"+C[y].count),t.attributes.has(I)?D.indices=t.attributes.get(I):(D.indices=this.processAccessor(s.index,s,C[y].start,C[y].count),t.attributes.set(I,D.indices)),D.indices===null&&delete D.indices}let x=yield this.processMaterialAsync(m[C[y].materialIndex]);x!==null&&(D.material=x),u.push(D)}g===!0&&s.setIndex(null),c.primitives=u,i.meshes||(i.meshes=[]),yield this._invokeAllAsync(function(y){y.writeMesh&&y.writeMesh(e,c)});let w=i.meshes.push(c)-1;return t.meshes.set(o,w),w})}detectMeshQuantization(e,t){if(this.extensionsUsed[My])return;let i;switch(t.array.constructor){case Int8Array:i="byte";break;case Uint8Array:i="unsigned byte";break;case Int16Array:i="short";break;case Uint16Array:i="unsigned short";break;default:return}t.normalized&&(i+=" normalized");let r=e.split("_",1)[0];yP[r]&&yP[r].includes(i)&&(this.extensionsUsed[My]=!0,this.extensionsRequired[My]=!0)}processCamera(e){let t=this.json;t.cameras||(t.cameras=[]);let i=e.isOrthographicCamera,r={type:i?"orthographic":"perspective"};return i?r.orthographic={xmag:e.right*2,ymag:e.top*2,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:r.perspective={aspectRatio:e.aspect,yfov:ca.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},e.name!==""&&(r.name=e.type),t.cameras.push(r)-1}processAnimation(e,t){let i=this.json,r=this.nodeMap;i.animations||(i.animations=[]),e=Nl.Utils.mergeMorphTargetTracks(e.clone(),t);let o=e.tracks,s=[],a=[];for(let c=0;c<o.length;++c){let l=o[c],u=vn.parseTrackName(l.name),d=vn.findNode(t,u.nodeName),h=_P[u.propertyName];if(u.objectName==="bones"&&(d.isSkinnedMesh===!0?d=d.skeleton.getBoneByName(u.objectIndex):d=void 0),!d||!h){console.warn('THREE.GLTFExporter: Could not export animation track "%s".',l.name);continue}let f=1,p=l.values.length/l.times.length;h===_P.morphTargetInfluences&&(p/=d.morphTargetInfluences.length);let v;l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(v="CUBICSPLINE",p/=3):l.getInterpolation()===Qs?v="STEP":v="LINEAR",a.push({input:this.processAccessor(new _n(l.times,f)),output:this.processAccessor(new _n(l.values,p)),interpolation:v}),s.push({sampler:a.length-1,target:{node:r.get(d),path:h}})}return i.animations.push({name:e.name||"clip_"+i.animations.length,samplers:a,channels:s}),i.animations.length-1}processSkin(e){let t=this.json,i=this.nodeMap,r=t.nodes[i.get(e)],o=e.skeleton;if(o===void 0)return null;let s=e.skeleton.bones[0];if(s===void 0)return null;let a=[],c=new Float32Array(o.bones.length*16),l=new Dt;for(let d=0;d<o.bones.length;++d)a.push(i.get(o.bones[d])),l.copy(o.boneInverses[d]),l.multiply(e.bindMatrix).toArray(c,d*16);return t.skins===void 0&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new _n(c,16)),joints:a,skeleton:i.get(s)}),r.skin=t.skins.length-1}processNodeAsync(e){return Xt(this,null,function*(){let t=this.json,i=this.options,r=this.nodeMap;t.nodes||(t.nodes=[]);let o={};if(i.trs){let a=e.quaternion.toArray(),c=e.position.toArray(),l=e.scale.toArray();P0(a,[0,0,0,1])||(o.rotation=a),P0(c,[0,0,0])||(o.translation=c),P0(l,[1,1,1])||(o.scale=l)}else e.matrixAutoUpdate&&e.updateMatrix(),zte(e.matrix)===!1&&(o.matrix=e.matrix.elements);if(e.name!==""&&(o.name=String(e.name)),this.serializeUserData(e,o),e.isMesh||e.isLine||e.isPoints){let a=yield this.processMeshAsync(e);a!==null&&(o.mesh=a)}else e.isCamera&&(o.camera=this.processCamera(e));e.isSkinnedMesh&&this.skins.push(e);let s=t.nodes.push(o)-1;if(r.set(e,s),e.children.length>0){let a=[];for(let c=0,l=e.children.length;c<l;c++){let u=e.children[c];if(u.visible||i.onlyVisible===!1){let d=yield this.processNodeAsync(u);d!==null&&a.push(d)}}a.length>0&&(o.children=a)}return yield this._invokeAllAsync(function(a){a.writeNode&&a.writeNode(e,o)}),s})}processSceneAsync(e){return Xt(this,null,function*(){let t=this.json,i=this.options;t.scenes||(t.scenes=[],t.scene=0);let r={};e.name!==""&&(r.name=e.name),t.scenes.push(r);let o=[];for(let s=0,a=e.children.length;s<a;s++){let c=e.children[s];if(c.visible||i.onlyVisible===!1){let l=yield this.processNodeAsync(c);l!==null&&o.push(l)}}o.length>0&&(r.nodes=o),this.serializeUserData(e,r)})}processObjectsAsync(e){return Xt(this,null,function*(){let t=new gs;t.name="AuxScene";for(let i=0;i<e.length;i++)t.children.push(e[i]);yield this.processSceneAsync(t)})}processInputAsync(e){return Xt(this,null,function*(){let t=this.options;e=e instanceof Array?e:[e],yield this._invokeAllAsync(function(r){r.beforeParse&&r.beforeParse(e)});let i=[];for(let r=0;r<e.length;r++)e[r]instanceof gs?yield this.processSceneAsync(e[r]):i.push(e[r]);i.length>0&&(yield this.processObjectsAsync(i));for(let r=0;r<this.skins.length;++r)this.processSkin(this.skins[r]);for(let r=0;r<t.animations.length;++r)this.processAnimation(t.animations[r],e[0]);yield this._invokeAllAsync(function(r){r.afterParse&&r.afterParse(e)})})}_invokeAllAsync(e){return Xt(this,null,function*(){for(let t=0,i=this.plugins.length;t<i;t++)yield e(this.plugins[t])})}},Cy=class{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);return}let i=this.writer,r=i.json,o=i.extensionsUsed,s={};e.name&&(s.name=e.name),s.color=e.color.toArray(),s.intensity=e.intensity,e.isDirectionalLight?s.type="directional":e.isPointLight?(s.type="point",e.distance>0&&(s.range=e.distance)):e.isSpotLight&&(s.type="spot",e.distance>0&&(s.range=e.distance),s.spot={},s.spot.innerConeAngle=(1-e.penumbra)*e.angle,s.spot.outerConeAngle=e.angle),e.decay!==void 0&&e.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||e.target.position.x!==0||e.target.position.y!==0||e.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),o[this.name]||(r.extensions=r.extensions||{},r.extensions[this.name]={lights:[]},o[this.name]=!0);let a=r.extensions[this.name].lights;a.push(s),t.extensions=t.extensions||{},t.extensions[this.name]={light:a.length-1}}},Ty=class{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterialAsync(e,t){return Xt(this,null,function*(){if(!e.isMeshBasicMaterial)return;let r=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},r[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9})}},Ey=class{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}writeMaterialAsync(e,t){return Xt(this,null,function*(){if(!e.isMeshPhysicalMaterial||e.clearcoat===0)return;let i=this.writer,r=i.extensionsUsed,o={};if(o.clearcoatFactor=e.clearcoat,e.clearcoatMap){let s={index:yield i.processTextureAsync(e.clearcoatMap),texCoord:e.clearcoatMap.channel};i.applyTextureTransform(s,e.clearcoatMap),o.clearcoatTexture=s}if(o.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){let s={index:yield i.processTextureAsync(e.clearcoatRoughnessMap),texCoord:e.clearcoatRoughnessMap.channel};i.applyTextureTransform(s,e.clearcoatRoughnessMap),o.clearcoatRoughnessTexture=s}if(e.clearcoatNormalMap){let s={index:yield i.processTextureAsync(e.clearcoatNormalMap),texCoord:e.clearcoatNormalMap.channel};e.clearcoatNormalScale.x!==1&&(s.scale=e.clearcoatNormalScale.x),i.applyTextureTransform(s,e.clearcoatNormalMap),o.clearcoatNormalTexture=s}t.extensions=t.extensions||{},t.extensions[this.name]=o,r[this.name]=!0})}},Dy=class{constructor(e){this.writer=e,this.name="KHR_materials_dispersion"}writeMaterialAsync(e,t){return Xt(this,null,function*(){if(!e.isMeshPhysicalMaterial||e.dispersion===0)return;let r=this.writer.extensionsUsed,o={};o.dispersion=e.dispersion,t.extensions=t.extensions||{},t.extensions[this.name]=o,r[this.name]=!0})}},zy=class{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}writeMaterialAsync(e,t){return Xt(this,null,function*(){if(!e.isMeshPhysicalMaterial||e.iridescence===0)return;let i=this.writer,r=i.extensionsUsed,o={};if(o.iridescenceFactor=e.iridescence,e.iridescenceMap){let s={index:yield i.processTextureAsync(e.iridescenceMap),texCoord:e.iridescenceMap.channel};i.applyTextureTransform(s,e.iridescenceMap),o.iridescenceTexture=s}if(o.iridescenceIor=e.iridescenceIOR,o.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],o.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){let s={index:yield i.processTextureAsync(e.iridescenceThicknessMap),texCoord:e.iridescenceThicknessMap.channel};i.applyTextureTransform(s,e.iridescenceThicknessMap),o.iridescenceThicknessTexture=s}t.extensions=t.extensions||{},t.extensions[this.name]=o,r[this.name]=!0})}},Ay=class{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterialAsync(e,t){return Xt(this,null,function*(){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;let i=this.writer,r=i.extensionsUsed,o={};if(o.transmissionFactor=e.transmission,e.transmissionMap){let s={index:yield i.processTextureAsync(e.transmissionMap),texCoord:e.transmissionMap.channel};i.applyTextureTransform(s,e.transmissionMap),o.transmissionTexture=s}t.extensions=t.extensions||{},t.extensions[this.name]=o,r[this.name]=!0})}},Iy=class{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterialAsync(e,t){return Xt(this,null,function*(){if(!e.isMeshPhysicalMaterial||e.transmission===0)return;let i=this.writer,r=i.extensionsUsed,o={};if(o.thicknessFactor=e.thickness,e.thicknessMap){let s={index:yield i.processTextureAsync(e.thicknessMap),texCoord:e.thicknessMap.channel};i.applyTextureTransform(s,e.thicknessMap),o.thicknessTexture=s}e.attenuationDistance!==1/0&&(o.attenuationDistance=e.attenuationDistance),o.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=o,r[this.name]=!0})}},Py=class{constructor(e){this.writer=e,this.name="KHR_materials_ior"}writeMaterialAsync(e,t){return Xt(this,null,function*(){if(!e.isMeshPhysicalMaterial||e.ior===1.5)return;let r=this.writer.extensionsUsed,o={};o.ior=e.ior,t.extensions=t.extensions||{},t.extensions[this.name]=o,r[this.name]=!0})}},Ry=class{constructor(e){this.writer=e,this.name="KHR_materials_specular"}writeMaterialAsync(e,t){return Xt(this,null,function*(){if(!e.isMeshPhysicalMaterial||e.specularIntensity===1&&e.specularColor.equals(Ste)&&!e.specularIntensityMap&&!e.specularColorMap)return;let i=this.writer,r=i.extensionsUsed,o={};if(e.specularIntensityMap){let s={index:yield i.processTextureAsync(e.specularIntensityMap),texCoord:e.specularIntensityMap.channel};i.applyTextureTransform(s,e.specularIntensityMap),o.specularTexture=s}if(e.specularColorMap){let s={index:yield i.processTextureAsync(e.specularColorMap),texCoord:e.specularColorMap.channel};i.applyTextureTransform(s,e.specularColorMap),o.specularColorTexture=s}o.specularFactor=e.specularIntensity,o.specularColorFactor=e.specularColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=o,r[this.name]=!0})}},ky=class{constructor(e){this.writer=e,this.name="KHR_materials_sheen"}writeMaterialAsync(e,t){return Xt(this,null,function*(){if(!e.isMeshPhysicalMaterial||e.sheen==0)return;let i=this.writer,r=i.extensionsUsed,o={};if(e.sheenRoughnessMap){let s={index:yield i.processTextureAsync(e.sheenRoughnessMap),texCoord:e.sheenRoughnessMap.channel};i.applyTextureTransform(s,e.sheenRoughnessMap),o.sheenRoughnessTexture=s}if(e.sheenColorMap){let s={index:yield i.processTextureAsync(e.sheenColorMap),texCoord:e.sheenColorMap.channel};i.applyTextureTransform(s,e.sheenColorMap),o.sheenColorTexture=s}o.sheenRoughnessFactor=e.sheenRoughness,o.sheenColorFactor=e.sheenColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=o,r[this.name]=!0})}},Ny=class{constructor(e){this.writer=e,this.name="KHR_materials_anisotropy"}writeMaterialAsync(e,t){return Xt(this,null,function*(){if(!e.isMeshPhysicalMaterial||e.anisotropy==0)return;let i=this.writer,r=i.extensionsUsed,o={};if(e.anisotropyMap){let s={index:yield i.processTextureAsync(e.anisotropyMap)};i.applyTextureTransform(s,e.anisotropyMap),o.anisotropyTexture=s}o.anisotropyStrength=e.anisotropy,o.anisotropyRotation=e.anisotropyRotation,t.extensions=t.extensions||{},t.extensions[this.name]=o,r[this.name]=!0})}},Oy=class{constructor(e){this.writer=e,this.name="KHR_materials_emissive_strength"}writeMaterialAsync(e,t){return Xt(this,null,function*(){if(!e.isMeshStandardMaterial||e.emissiveIntensity===1)return;let r=this.writer.extensionsUsed,o={};o.emissiveStrength=e.emissiveIntensity,t.extensions=t.extensions||{},t.extensions[this.name]=o,r[this.name]=!0})}},Ly=class{constructor(e){this.writer=e,this.name="EXT_materials_bump"}writeMaterialAsync(e,t){return Xt(this,null,function*(){if(!e.isMeshStandardMaterial||e.bumpScale===1&&!e.bumpMap)return;let i=this.writer,r=i.extensionsUsed,o={};if(e.bumpMap){let s={index:yield i.processTextureAsync(e.bumpMap),texCoord:e.bumpMap.channel};i.applyTextureTransform(s,e.bumpMap),o.bumpTexture=s}o.bumpFactor=e.bumpScale,t.extensions=t.extensions||{},t.extensions[this.name]=o,r[this.name]=!0})}},Fy=class{constructor(e){this.writer=e,this.name="EXT_mesh_gpu_instancing"}writeNode(e,t){if(!e.isInstancedMesh)return;let i=this.writer,r=e,o=new Float32Array(r.count*3),s=new Float32Array(r.count*4),a=new Float32Array(r.count*3),c=new Dt,l=new k,u=new Hi,d=new k;for(let f=0;f<r.count;f++)r.getMatrixAt(f,c),c.decompose(l,u,d),l.toArray(o,f*3),u.toArray(s,f*4),d.toArray(a,f*3);let h={TRANSLATION:i.processAccessor(new _n(o,3)),ROTATION:i.processAccessor(new _n(s,4)),SCALE:i.processAccessor(new _n(a,3))};r.instanceColor&&(h._COLOR_0=i.processAccessor(r.instanceColor)),t.extensions=t.extensions||{},t.extensions[this.name]={attributes:h},i.extensionsUsed[this.name]=!0,i.extensionsRequired[this.name]=!0}};Nl.Utils={insertKeyframe:function(n,e){let i=n.getValueSize(),r=new n.TimeBufferType(n.times.length+1),o=new n.ValueBufferType(n.values.length+i),s=n.createInterpolant(new n.ValueBufferType(i)),a;if(n.times.length===0){r[0]=e;for(let c=0;c<i;c++)o[c]=0;a=0}else if(e<n.times[0]){if(Math.abs(n.times[0]-e)<.001)return 0;r[0]=e,r.set(n.times,1),o.set(s.evaluate(e),0),o.set(n.values,i),a=0}else if(e>n.times[n.times.length-1]){if(Math.abs(n.times[n.times.length-1]-e)<.001)return n.times.length-1;r[r.length-1]=e,r.set(n.times,0),o.set(n.values,0),o.set(s.evaluate(e),n.values.length),a=r.length-1}else for(let c=0;c<n.times.length;c++){if(Math.abs(n.times[c]-e)<.001)return c;if(n.times[c]<e&&n.times[c+1]>e){r.set(n.times.slice(0,c+1),0),r[c+1]=e,r.set(n.times.slice(c+1),c+2),o.set(n.values.slice(0,(c+1)*i),0),o.set(s.evaluate(e),(c+1)*i),o.set(n.values.slice((c+1)*i),(c+2)*i),a=c+1;break}}return n.times=r,n.values=o,a},mergeMorphTargetTracks:function(n,e){let t=[],i={},r=n.tracks;for(let o=0;o<r.length;++o){let s=r[o],a=vn.parseTrackName(s.name),c=vn.findNode(e,a.nodeName);if(a.propertyName!=="morphTargetInfluences"||a.propertyIndex===void 0){t.push(s);continue}if(s.createInterpolant!==s.InterpolantFactoryMethodDiscrete&&s.createInterpolant!==s.InterpolantFactoryMethodLinear){if(s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),s=s.clone(),s.setInterpolation(Js)}let l=c.morphTargetInfluences.length,u=c.morphTargetDictionary[a.propertyIndex];if(u===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+a.propertyIndex);let d;if(i[c.uuid]===void 0){d=s.clone();let f=new d.ValueBufferType(l*d.times.length);for(let p=0;p<d.times.length;p++)f[p*l+u]=d.values[p];d.name=(a.nodeName||"")+".morphTargetInfluences",d.values=f,i[c.uuid]=d,t.push(d);continue}let h=s.createInterpolant(new s.ValueBufferType(1));d=i[c.uuid];for(let f=0;f<d.times.length;f++)d.values[f*l+u]=h.evaluate(d.times[f]);for(let f=0;f<s.times.length;f++){let p=this.insertKeyframe(d,s.times[f]);d.values[p*l+u]=s.values[f]}}return n.tracks=t,n},toFloat32BufferAttribute:function(n){let e=new _n(new Float32Array(n.count*n.itemSize),n.itemSize,!1);if(!n.normalized&&!n.isInterleavedBufferAttribute)return e.array.set(n.array),e;for(let t=0,i=n.count;t<i;t++)for(let r=0;r<n.itemSize;r++)e.setComponent(t,r,n.getComponent(t,r));return e}};var Pte=(n,e)=>({$implicit:n,data:e});function Rte(n,e){n&1&&me(0,"nz-icon",3)}function kte(n,e){n&1&&me(0,"nz-icon",4)}function Nte(n,e){n&1&&me(0,"nz-icon",5)}function Ote(n,e){n&1&&me(0,"nz-icon",6)}function Lte(n,e){n&1&&me(0,"nz-icon",7)}function Fte(n,e){if(n&1&&(An(0),me(1,"span",9),In()),n&2){let t=R();O(),$("innerHTML",t.instance.content,cM)}}function Vte(n,e){if(n&1){let t=un();j(0,"nz-message",2),We("destroyed",function(r){je(t);let o=R();return Ge(o.remove(r.id,r.userAction))}),q()}if(n&2){let t=e.$implicit;$("instance",t)}}var Hte=0,Vy=class{overlay;injector;container;nzSingletonService=T(VD);constructor(e,t){this.overlay=e,this.injector=t}remove(e){this.container&&(e?this.container.remove(e):this.container.removeAll())}getInstanceId(){return`${this.componentPrefix}-${Hte++}`}withContainer(e){let t=this.nzSingletonService.getSingletonWithKey(this.componentPrefix);if(t)return t;let i=this.overlay.create({hasBackdrop:!1,scrollStrategy:this.overlay.scrollStrategies.noop(),positionStrategy:this.overlay.position().global()}),r=new J1(e,null,this.injector),o=i.attach(r),s=i.hostElement;return s.style.zIndex="1010",t||(this.container=t=o.instance,this.nzSingletonService.registerSingletonWithKey(this.componentPrefix,t),this.container.afterAllInstancesRemoved.subscribe(()=>{this.container=void 0,this.nzSingletonService.unregisterSingletonWithKey(this.componentPrefix),i.dispose()})),t}},Bte=(()=>{class n{config;instances=[];_afterAllInstancesRemoved=new ce;afterAllInstancesRemoved=this._afterAllInstancesRemoved.asObservable();cdr=T(Mt);nzConfigService=T(ci);destroy$=new ce;ngOnInit(){this.subscribeConfigChange()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}create(t){let i=this.onCreate(t);return this.instances.length>=this.config.nzMaxStack&&(this.instances=this.instances.slice(1)),this.instances=[...this.instances,i],this.readyInstances(),i}remove(t,i=!1){this.instances.map((r,o)=>({index:o,instance:r})).filter(({instance:r})=>r.messageId===t).forEach(({index:r,instance:o})=>{this.instances.splice(r,1),this.instances=[...this.instances],this.onRemove(o,i),this.readyInstances()}),this.instances.length||this.onAllInstancesRemoved()}removeAll(){this.instances.forEach(t=>this.onRemove(t,!1)),this.instances=[],this.readyInstances(),this.onAllInstancesRemoved()}onCreate(t){return t.options=this.mergeOptions(t.options),t.onClose=new ce,t}onRemove(t,i){t.onClose.next(i),t.onClose.complete()}onAllInstancesRemoved(){this._afterAllInstancesRemoved.next(),this._afterAllInstancesRemoved.complete()}readyInstances(){this.cdr.detectChanges()}mergeOptions(t){let{nzDuration:i,nzAnimate:r,nzPauseOnHover:o}=this.config;return Z({nzDuration:i,nzAnimate:r,nzPauseOnHover:o},t)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Oe({type:n})}return n})(),Ute=(()=>{class n{cdr=T(Mt);animationStateChanged=new ce;options;autoClose;closeTimer;userAction=!1;eraseTimer;eraseTimingStart;eraseTTL;ngOnInit(){this.options=this.instance.options,this.options.nzAnimate&&(this.instance.state="enter",this.animationStateChanged.pipe(xt(t=>t.phaseName==="done"&&t.toState==="leave"),Ei(1)).subscribe(()=>{clearTimeout(this.closeTimer),this.destroyed.next({id:this.instance.messageId,userAction:this.userAction})})),this.autoClose=this.options.nzDuration>0,this.autoClose&&(this.initErase(),this.startEraseTimeout())}ngOnDestroy(){this.autoClose&&this.clearEraseTimeout(),this.animationStateChanged.complete()}onEnter(){this.autoClose&&this.options.nzPauseOnHover&&(this.clearEraseTimeout(),this.updateTTL())}onLeave(){this.autoClose&&this.options.nzPauseOnHover&&this.startEraseTimeout()}destroy(t=!1){this.userAction=t,this.options.nzAnimate?(this.instance.state="leave",this.cdr.detectChanges(),this.closeTimer=setTimeout(()=>{this.closeTimer=void 0,this.destroyed.next({id:this.instance.messageId,userAction:t})},200)):this.destroyed.next({id:this.instance.messageId,userAction:t})}initErase(){this.eraseTTL=this.options.nzDuration,this.eraseTimingStart=Date.now()}updateTTL(){this.autoClose&&(this.eraseTTL-=Date.now()-this.eraseTimingStart)}startEraseTimeout(){this.eraseTTL>0?(this.clearEraseTimeout(),this.eraseTimer=setTimeout(()=>this.destroy(),this.eraseTTL),this.eraseTimingStart=Date.now()):this.destroy()}clearEraseTimeout(){this.eraseTimer!==null&&(clearTimeout(this.eraseTimer),this.eraseTimer=void 0)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Oe({type:n})}return n})(),Yte=(()=>{class n extends Ute{instance;destroyed=new pt;index;static \u0275fac=(()=>{let t;return function(r){return(t||(t=qi(n)))(r||n)}})();static \u0275cmp=Fe({type:n,selectors:[["nz-message"]],inputs:{instance:"instance"},outputs:{destroyed:"destroyed"},exportAs:["nzMessage"],features:[vi],decls:9,vars:9,consts:[[1,"ant-message-notice",3,"mouseenter","mouseleave"],[1,"ant-message-notice-content"],[1,"ant-message-custom-content"],["nzType","check-circle"],["nzType","info-circle"],["nzType","exclamation-circle"],["nzType","close-circle"],["nzType","loading"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],[3,"innerHTML"]],template:function(i,r){if(i&1&&(j(0,"div",0),We("@moveUpMotion.done",function(s){return r.animationStateChanged.next(s)})("mouseenter",function(){return r.onEnter()})("mouseleave",function(){return r.onLeave()}),j(1,"div",1)(2,"div",2),G(3,Rte,1,0,"nz-icon",3)(4,kte,1,0,"nz-icon",4)(5,Nte,1,0,"nz-icon",5)(6,Ote,1,0,"nz-icon",6)(7,Lte,1,0,"nz-icon",7)(8,Fte,2,1,"ng-container",8),q()()()),i&2){let o;$("@moveUpMotion",r.instance.state),O(2),si("ant-message-"+r.instance.type),O(),le((o=r.instance.type)==="success"?3:o==="info"?4:o==="warning"?5:o==="error"?6:o==="loading"?7:-1),O(5),$("nzStringTemplateOutlet",r.instance.content)("nzStringTemplateOutletContext",MS(6,Pte,r,r.instance.options==null?null:r.instance.options.nzData))}},dependencies:[wn,pn,xi,li],encapsulation:2,data:{animation:[yz]},changeDetection:0})}return n})(),E8="message",jte={nzAnimate:!0,nzDuration:3e3,nzMaxStack:7,nzPauseOnHover:!0,nzTop:24,nzDirection:"ltr"},Gte=(()=>{class n extends Bte{dir=this.nzConfigService.getConfigForComponent(E8)?.nzDirection||"ltr";top;constructor(){super(),this.updateConfig()}subscribeConfigChange(){this.nzConfigService.getConfigChangeEventForComponent(E8).pipe(_e(this.destroy$)).subscribe(()=>{this.updateConfig(),this.dir=this.nzConfigService.getConfigForComponent(E8)?.nzDirection||this.dir})}updateConfig(){this.config=Z(Z(Z({},jte),this.config),this.nzConfigService.getConfigForComponent(E8)),this.top=n1(this.config.nzTop),this.cdr.markForCheck()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["nz-message-container"]],exportAs:["nzMessageContainer"],features:[vi],decls:3,vars:4,consts:[[1,"ant-message"],[3,"instance"],[3,"destroyed","instance"]],template:function(i,r){i&1&&(j(0,"div",0),Xi(1,Vte,1,1,"nz-message",1,Ea),q()),i&2&&(Sn("top",r.top),ze("ant-message-rtl",r.dir==="rtl"),O(),Ki(r.instances))},dependencies:[Yte],encapsulation:2,changeDetection:0})}return n})();var wP=(()=>{class n extends Vy{componentPrefix="message-";constructor(t,i){super(t,i)}success(t,i){return this.createInstance({type:"success",content:t},i)}error(t,i){return this.createInstance({type:"error",content:t},i)}info(t,i){return this.createInstance({type:"info",content:t},i)}warning(t,i){return this.createInstance({type:"warning",content:t},i)}loading(t,i){return this.createInstance({type:"loading",content:t},i)}create(t,i,r){return this.createInstance({type:t,content:i},r)}createInstance(t,i){return this.container=this.withContainer(Gte),this.container.create(lt(Z({},t),{createdAt:new Date,messageId:this.getInstanceId(),options:i}))}static \u0275fac=function(i){return new(i||n)(Me(Pl),Me(Ln))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var $te=["rendererContainer"];function qte(n,e){if(n&1&&(j(0,"h2"),rt(1),q()),n&2){R();let t=dt(4);O(),Pn(t)}}function Xte(n,e){if(n&1&&(j(0,"span",37),rt(1),q()),n&2){let t=R();O(),Mo(" ",t.frontImage.name," ")}}function Kte(n,e){if(n&1&&(j(0,"span",37),rt(1),q()),n&2){let t=R();O(),Mo(" ",t.backImage.name," ")}}var D8=class n{constructor(e,t){this.message=e;this.iconService=t;this.iconService.addIcon(Qu,Zu,jf,$f,Wf,Gf)}rendererContainer;title="3D Card Generator";scene;camera;renderer;card;animationId;frontImage=null;backImage=null;frontImageUrl="";backImageUrl="";cardWidth=1080;cardHeight=1920;cardThickness=10;minZoom=.5;maxZoom=20;currentZoom=5;isLoading=!1;isExporting=!1;ngOnInit(){this.initThreeJS(),this.createCard(),this.animate(),this.fitCardToScreen()}ngOnDestroy(){this.animationId&&cancelAnimationFrame(this.animationId),this.renderer&&this.renderer.dispose()}initThreeJS(){let e=this.rendererContainer.nativeElement,t=e.clientWidth,i=e.clientHeight;this.scene=new gs,this.scene.background=new ot(1710618),this.camera=new ii(75,t/i,.1,1e3),this.camera.position.set(0,0,this.currentZoom),this.renderer=new X1({antialias:!0}),this.renderer.setSize(t,i),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=V1,e.appendChild(this.renderer.domElement);let r=new xl(16777215,1.2);this.scene.add(r);let o=new sr(16777215,1.5);o.position.set(5,5,5),o.castShadow=!0,this.scene.add(o);let s=new sr(16777215,1);s.position.set(-5,-5,5),this.scene.add(s);let a=new sr(16777215,1);a.position.set(0,10,0),this.scene.add(a);let c=new sr(16777215,1);c.position.set(0,0,10),this.scene.add(c),window.addEventListener("resize",()=>this.onWindowResize()),e.addEventListener("wheel",l=>this.onMouseWheel(l))}onMouseWheel(e){e.preventDefault();let t=.5,i=e.deltaY>0?1:-1;this.currentZoom+=i*t,this.currentZoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.currentZoom)),this.camera.position.z=this.currentZoom}zoomIn(){this.currentZoom=Math.min(this.maxZoom,this.currentZoom+1),this.camera.position.z=this.currentZoom}zoomOut(){this.currentZoom=Math.max(this.minZoom,this.currentZoom-1),this.camera.position.z=this.currentZoom}resetZoom(){this.currentZoom=5,this.camera.position.z=this.currentZoom}fitCardToScreen(){if(!this.card)return;let t=new Bi().setFromObject(this.card).getSize(new k),r=Math.max(t.x,t.y,t.z)*1.5;this.currentZoom=Math.max(this.minZoom,Math.min(this.maxZoom,r)),this.camera.position.z=this.currentZoom}createCard(){this.card&&this.scene.remove(this.card);let e=this.cardWidth/100,t=this.cardHeight/100,i=this.cardThickness/100,r=new ic(e,t,i),o=new Ui({color:13421772,metalness:0,roughness:.3,envMapIntensity:1});this.card=new ri(r,o),this.card.castShadow=!0,this.card.receiveShadow=!0,this.scene.add(this.card)}animate(){this.animationId=requestAnimationFrame(()=>this.animate()),this.card&&(this.card.rotation.y+=.01),this.renderer.render(this.scene,this.camera)}onWindowResize(){let e=this.rendererContainer.nativeElement,t=e.clientWidth,i=e.clientHeight;this.camera.aspect=t/i,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,i)}onFrontImageUpload(e){let t=e.target.files[0];t&&(this.frontImage=t,this.frontImageUrl=URL.createObjectURL(t),this.updateCardTexture())}onBackImageUpload(e){let t=e.target.files[0];t&&(this.backImage=t,this.backImageUrl=URL.createObjectURL(t),this.updateCardTexture())}onDimensionsChange(){console.log("Dimensions changed:",{width:this.cardWidth,height:this.cardHeight,thickness:this.cardThickness}),this.createCard(),this.updateCardTexture(),setTimeout(()=>this.fitCardToScreen(),100)}updateCardTexture(){if(!this.card)return;let e=new vl,t=[];for(let i=0;i<6;i++){let r;if(i===4)if(this.frontImageUrl){let o=e.load(this.frontImageUrl);r=new Ui({map:o,metalness:0,roughness:.3,envMapIntensity:1})}else r=new Ui({color:13421772,metalness:0,roughness:.3,envMapIntensity:1});else if(i===5)if(this.backImageUrl){let o=e.load(this.backImageUrl);r=new Ui({map:o,metalness:0,roughness:.3,envMapIntensity:1})}else r=new Ui({color:13421772,metalness:0,roughness:.3,envMapIntensity:1});else r=new Ui({color:8947848,metalness:0,roughness:.3,envMapIntensity:1});t.push(r)}this.card.material=t}exportGLB(){return Xt(this,null,function*(){if(!this.card){this.message.error("No card to export");return}this.isExporting=!0;try{let e=new Nl,t=yield new Promise((s,a)=>{e.parse(this.card,c=>s(c),c=>a(c),{binary:!0})}),i=new Blob([t],{type:"application/octet-stream"}),r=URL.createObjectURL(i),o=document.createElement("a");o.href=r,o.download="3d-card.glb",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r),this.message.success("3D card exported successfully!")}catch(e){console.error("Export error:",e),this.message.error("Failed to export 3D card")}finally{this.isExporting=!1}})}static \u0275fac=function(t){return new(t||n)(Y(wP),Y(Ba))};static \u0275cmp=Fe({type:n,selectors:[["app-card-creator"]],viewQuery:function(t,i){if(t&1&&Ai($te,7),t&2){let r;Wt(r=$t())&&(i.rendererContainer=r.first)}},decls:60,vars:14,consts:[["title",""],["rendererContainer",""],[1,"app-container"],[1,"sidebar"],[1,"control-panel"],[1,"upload-section"],[1,"upload-item"],[1,"file-input-container"],["type","file","accept","image/*","id","frontImageInput",1,"file-input",3,"change"],["for","frontImageInput",1,"file-input-label"],["nz-icon","","nzType","upload","nzTheme","outline"],["class","file-name",4,"ngIf"],["type","file","accept","image/*","id","backImageInput",1,"file-input",3,"change"],["for","backImageInput",1,"file-input-label"],[1,"dimensions-section"],[1,"dimension-item"],["nzPlaceHolder","Width (px)",1,"dimension-input",3,"ngModelChange","ngModel","nzStep","nzPrecision"],["nzPlaceHolder","Height (px)",1,"dimension-input",3,"ngModelChange","ngModel","nzStep","nzPrecision"],["nzPlaceHolder","Thickness (px)",1,"dimension-input",3,"ngModelChange","ngModel","nzStep","nzPrecision"],[1,"dimension-update"],["nz-button","","nzType","default","nzSize","small",1,"update-button",3,"click"],["nz-icon","","nzType","reload","nzTheme","outline"],[1,"export-section"],["nz-button","","nzType","primary","nzSize","large",1,"export-button",3,"click","nzLoading","disabled"],["nz-icon","","nzType","download","nzTheme","outline"],[1,"main-content"],[1,"renderer-container"],["nzTip","Loading 3D scene...",3,"nzSpinning"],[1,"zoom-controls"],["nz-button","","nzType","default","nzSize","small","title","Zoom In",1,"zoom-button",3,"click"],["nzType","zoom-in","nzTheme","outline"],["nz-button","","nzType","default","nzSize","small","title","Zoom Out",1,"zoom-button",3,"click"],["nzType","zoom-out","nzTheme","outline"],["nz-button","","nzType","default","nzSize","small","title","Fit to Screen",1,"zoom-button",3,"click"],["nzType","fullscreen","nzTheme","outline"],["nz-button","","nzType","default","nzSize","small","title","Reset Zoom",1,"zoom-button",3,"click"],["nzType","reload","nzTheme","outline"],[1,"file-name"]],template:function(t,i){if(t&1){let r=un();j(0,"div",2)(1,"div",3)(2,"nz-card",4),G(3,qte,2,1,"ng-template",null,0,Jt),j(5,"div",5)(6,"div",6)(7,"label"),rt(8,"Front Image:"),q(),j(9,"div",7)(10,"input",8),We("change",function(s){return je(r),Ge(i.onFrontImageUpload(s))}),q(),j(11,"label",9),me(12,"span",10),rt(13," Browse... "),q(),G(14,Xte,2,1,"span",11),q()(),j(15,"div",6)(16,"label"),rt(17,"Back Image:"),q(),j(18,"div",7)(19,"input",12),We("change",function(s){return je(r),Ge(i.onBackImageUpload(s))}),q(),j(20,"label",13),me(21,"span",10),rt(22," Browse... "),q(),G(23,Kte,2,1,"span",11),q()()(),j(24,"div",14)(25,"h3"),rt(26,"Card Dimensions (Pixels)"),q(),j(27,"div",15)(28,"label"),rt(29,"Width:"),q(),j(30,"nz-input-number",16),Oc("ngModelChange",function(s){return je(r),Iu(i.cardWidth,s)||(i.cardWidth=s),Ge(s)}),We("ngModelChange",function(){return je(r),Ge(i.onDimensionsChange())}),q()(),j(31,"div",15)(32,"label"),rt(33,"Height:"),q(),j(34,"nz-input-number",17),Oc("ngModelChange",function(s){return je(r),Iu(i.cardHeight,s)||(i.cardHeight=s),Ge(s)}),We("ngModelChange",function(){return je(r),Ge(i.onDimensionsChange())}),q()(),j(35,"div",15)(36,"label"),rt(37,"Thickness:"),q(),j(38,"nz-input-number",18),Oc("ngModelChange",function(s){return je(r),Iu(i.cardThickness,s)||(i.cardThickness=s),Ge(s)}),We("ngModelChange",function(){return je(r),Ge(i.onDimensionsChange())}),q()(),j(39,"div",19)(40,"button",20),We("click",function(){return je(r),Ge(i.onDimensionsChange())}),me(41,"span",21),rt(42," Update Card "),q()()(),j(43,"div",22)(44,"button",23),We("click",function(){return je(r),Ge(i.exportGLB())}),me(45,"span",24),rt(46," EXPORT GLB "),q()()()(),j(47,"div",25)(48,"div",26,1),me(50,"nz-spin",27),j(51,"div",28)(52,"button",29),We("click",function(){return je(r),Ge(i.zoomIn())}),me(53,"nz-icon",30),q(),j(54,"button",31),We("click",function(){return je(r),Ge(i.zoomOut())}),me(55,"nz-icon",32),q(),j(56,"button",33),We("click",function(){return je(r),Ge(i.fitCardToScreen())}),me(57,"nz-icon",34),q(),j(58,"button",35),We("click",function(){return je(r),Ge(i.resetZoom())}),me(59,"nz-icon",36),q()()()()()}t&2&&(O(14),$("ngIf",i.frontImage),O(9),$("ngIf",i.backImage),O(7),Nc("ngModel",i.cardWidth),$("nzStep",1)("nzPrecision",0),O(4),Nc("ngModel",i.cardHeight),$("nzStep",1)("nzPrecision",0),O(4),Nc("ngModel",i.cardThickness),$("nzStep",1)("nzPrecision",0),O(6),$("nzLoading",i.isExporting)("disabled",!i.frontImage&&!i.backImage),O(6),$("nzSpinning",i.isLoading))},dependencies:[Da,Ld,f3,c1,el,x3,rv,u1,ol,l1,b3,lP,_3,fP,wn,pn,S3,M3,vP,xy],styles:[".app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;background:#000;color:#fff;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.sidebar[_ngcontent-%COMP%]{position:fixed;left:0;top:0;width:350px;height:100vh;z-index:1000;padding:20px;background:#000000e6;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-right:1px solid rgba(255,255,255,.1)}.control-panel[_ngcontent-%COMP%]{background:#000c!important;border:1px solid rgba(255,255,255,.1)!important;border-radius:12px!important;box-shadow:0 8px 32px #00000080!important}.control-panel[_ngcontent-%COMP%]     .ant-card-head{background:transparent!important;border-bottom:1px solid rgba(255,255,255,.1)!important;padding:20px 24px 16px!important}.control-panel[_ngcontent-%COMP%]     .ant-card-head-title{color:#fff!important;font-size:24px!important;font-weight:600!important}.control-panel[_ngcontent-%COMP%]     .ant-card-body{padding:24px!important;background:transparent!important}.upload-section[_ngcontent-%COMP%]{margin-bottom:30px}.upload-item[_ngcontent-%COMP%]{margin-bottom:20px}.upload-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;color:#e0e0e0;font-weight:500;font-size:14px}.file-input-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;background:#ffffff0d;border:1px solid rgba(255,255,255,.2);border-radius:8px;padding:8px 12px;transition:all .3s ease}.file-input-container[_ngcontent-%COMP%]:hover{border-color:#fff6;background:#ffffff14}.file-input[_ngcontent-%COMP%]{position:absolute;opacity:0;width:100%;height:100%;cursor:pointer}.file-input-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#1890ff;font-weight:500;cursor:pointer;padding:8px 16px;background:#1890ff1a;border-radius:6px;transition:all .3s ease;border:1px solid rgba(24,144,255,.3)}.file-input-label[_ngcontent-%COMP%]:hover{background:#1890ff33;border-color:#1890ff80}.file-name[_ngcontent-%COMP%]{margin-left:12px;color:#e0e0e0;font-size:13px;flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.dimensions-section[_ngcontent-%COMP%]{margin-bottom:30px;padding:20px;background:#ffffff0d;border-radius:8px;border:1px solid rgba(255,255,255,.1)}.dimensions-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 15px;color:#e0e0e0;font-size:16px;font-weight:600}.dimension-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}.dimension-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.dimension-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#e0e0e0;font-weight:500;font-size:14px;min-width:80px}.dimension-input[_ngcontent-%COMP%]{width:120px!important}.dimension-input[_ngcontent-%COMP%]     .ant-input-number-input{background:#fff!important;border:1px solid rgba(255,255,255,.2)!important;color:#000!important;border-radius:6px!important}.dimension-input[_ngcontent-%COMP%]     .ant-input-number-input:focus{border-color:#1890ff!important;box-shadow:0 0 0 2px #1890ff33!important;background:#fff!important;color:#000!important}.dimension-input[_ngcontent-%COMP%]     .ant-input-number-handler-wrap{background:#fff!important;border-left:1px solid rgba(255,255,255,.2)!important}.dimension-input[_ngcontent-%COMP%]     .ant-input-number-handler{color:#666!important;border-bottom:1px solid rgba(255,255,255,.1)!important}.dimension-input[_ngcontent-%COMP%]     .ant-input-number-handler:hover{background:#1890ff33!important}.dimension-update[_ngcontent-%COMP%]{margin-top:15px;text-align:center}.update-button[_ngcontent-%COMP%]{background:#1890ff1a!important;border:1px solid rgba(24,144,255,.3)!important;color:#1890ff!important;border-radius:6px!important;transition:all .3s ease!important}.update-button[_ngcontent-%COMP%]:hover{background:#1890ff33!important;border-color:#1890ff80!important;color:#40a9ff!important}.export-section[_ngcontent-%COMP%]{text-align:center}.export-button[_ngcontent-%COMP%]{width:100%!important;height:48px!important;background:linear-gradient(135deg,#ff6b35,#f7931e)!important;border:none!important;border-radius:8px!important;font-size:16px!important;font-weight:600!important;color:#fff!important;transition:all .3s ease!important;box-shadow:0 4px 15px #ff6b354d!important}.export-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px)!important;box-shadow:0 6px 20px #ff6b3566!important;background:linear-gradient(135deg,#ff7a4a,#f8a23e)!important}.export-button[_ngcontent-%COMP%]:disabled{background:#ffffff1a!important;color:#ffffff4d!important;cursor:not-allowed!important;transform:none!important;box-shadow:none!important}.main-content[_ngcontent-%COMP%]{margin-left:350px;flex:1;display:flex;align-items:center;justify-content:center;padding:20px}.renderer-container[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:12px;overflow:hidden;background:#000;border:1px solid rgba(255,255,255,.1);position:relative}.renderer-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{width:100%!important;height:100%!important;display:block}.zoom-controls[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;display:flex;flex-direction:column;gap:8px;z-index:1000}.zoom-button[_ngcontent-%COMP%]{width:40px!important;height:40px!important;background:#000c!important;border:1px solid rgba(255,255,255,.2)!important;color:#fff!important;border-radius:8px!important;transition:all .3s ease!important;-webkit-backdrop-filter:blur(10px)!important;backdrop-filter:blur(10px)!important}.zoom-button[_ngcontent-%COMP%]:hover{background:#000000e6!important;border-color:#fff6!important;transform:scale(1.05)!important}.zoom-button[_ngcontent-%COMP%]:active{transform:scale(.95)!important}  .ant-spin-dot{color:#1890ff!important}  .ant-spin-text{color:#fff!important}  .ant-btn-primary{background:linear-gradient(135deg,#ff6b35,#f7931e)!important;border:none!important}  .ant-btn-primary:hover{background:linear-gradient(135deg,#ff7a4a,#f8a23e)!important}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{position:relative;width:100%;height:auto;padding:15px}.main-content[_ngcontent-%COMP%]{margin-left:0;height:60vh}.app-container[_ngcontent-%COMP%]{flex-direction:column}}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1}50%{opacity:.5}to{opacity:1}}.loading[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}"]})};var CP=[{path:"",redirectTo:"/card-creator",pathMatch:"full"},{path:"card-creator",component:D8},{path:"glb-viewer",component:f8}];var TP={providers:[TS({eventCoalescing:!0}),C5(CP),tT(),Kg(),M7([vE,RE,EE,Qu,jf,Oa,uE,Gf,Zu])]};var Zte=["nz-menu-item",""],DP=["*"],Qte=["nz-submenu-inline-child",""];function Jte(n,e){}var ene=["nz-submenu-none-inline-child",""];function tne(n,e){}var nne=["nz-submenu-title",""];function ine(n,e){if(n&1&&me(0,"nz-icon",0),n&2){let t=R();$("nzType",t.nzIcon)}}function rne(n,e){if(n&1&&(An(0),j(1,"span",4),rt(2),q(),In()),n&2){let t=R();O(2),Pn(t.nzTitle)}}function one(n,e){n&1&&me(0,"nz-icon",5)}function sne(n,e){n&1&&me(0,"nz-icon",6)}function ane(n,e){if(n&1&&(j(0,"span",2),G(1,one,1,0,"nz-icon",5)(2,sne,1,0,"nz-icon",6),q()),n&2){let t,i=R();O(),le((t=i.dir)==="rtl"?1:2)}}function cne(n,e){n&1&&me(0,"span",3)}var lne=["nz-submenu",""],une=[[["","title",""]],"*"],dne=["[title]","*"];function hne(n,e){n&1&&Rt(0)}function fne(n,e){if(n&1&&me(0,"div",3),n&2){let t=R(),i=dt(6);$("mode",t.mode)("nzOpen",t.nzOpen)("@.disabled",!!(t.noAnimation!=null&&t.noAnimation.nzNoAnimation))("nzNoAnimation",t.noAnimation==null?null:t.noAnimation.nzNoAnimation)("menuClass",t.nzMenuClassName)("templateOutlet",i)}}function pne(n,e){if(n&1){let t=un();j(0,"div",6),We("subMenuMouseState",function(r){je(t);let o=R(2);return Ge(o.setMouseEnterState(r))}),q()}if(n&2){let t=R(2),i=dt(6);$("theme",t.theme)("mode",t.mode)("nzOpen",t.nzOpen)("position",t.position)("nzDisabled",t.nzDisabled)("isMenuInsideDropDown",t.isMenuInsideDropDown)("nzTriggerSubMenuAction",t.nzTriggerSubMenuAction)("templateOutlet",i)("menuClass",t.nzMenuClassName)("@.disabled",!!(t.noAnimation!=null&&t.noAnimation.nzNoAnimation))("nzNoAnimation",t.noAnimation==null?null:t.noAnimation.nzNoAnimation)}}function mne(n,e){if(n&1){let t=un();G(0,pne,1,11,"ng-template",5),We("positionChange",function(r){je(t);let o=R();return Ge(o.onPositionChange(r))})("overlayOutsideClick",function(){je(t);let r=R();return Ge(r.setMouseEnterState(!1))})}if(n&2){let t=R(),i=dt(1);$("cdkConnectedOverlayPositions",t.overlayPositions)("cdkConnectedOverlayOrigin",i)("cdkConnectedOverlayWidth",t.triggerWidth)("cdkConnectedOverlayOpen",t.nzOpen)("cdkConnectedOverlayTransformOriginOn",".ant-menu-submenu")}}function gne(n,e){n&1&&Rt(0,1)}var vne=["titleElement"],yne=["nz-menu-group",""],_ne=["*",[["","title",""]]],bne=["*","[title]"];function xne(n,e){if(n&1&&(An(0),rt(1),In()),n&2){let t=R();O(),Pn(t.nzTitle)}}function Mne(n,e){n&1&&Rt(0,1)}var da=new de("NzIsInDropDownMenuToken"),zP=new de("NzMenuServiceLocalToken"),Ol=(()=>{class n{descendantMenuItemClick$=new ce;childMenuItemClick$=new ce;theme$=new Qt("light");mode$=new Qt("vertical");inlineIndent$=new Qt(24);isChildSubMenuOpen$=new Qt(!1);onDescendantMenuItemClick(t){this.descendantMenuItemClick$.next(t)}onChildMenuItemClick(t){this.childMenuItemClick$.next(t)}setMode(t){this.mode$.next(t)}setTheme(t){this.theme$.next(t)}setInlineIndent(t){this.inlineIndent$.next(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),Hy=(()=>{class n{nzMenuService=T(Ol);mode$=this.nzMenuService.mode$.pipe(Pe(t=>t==="inline"?"inline":t==="vertical"||this.nzHostSubmenuService?"vertical":"horizontal"));level=1;isMenuInsideDropDown=T(da);isCurrentSubMenuOpen$=new Qt(!1);isChildSubMenuOpen$=new Qt(!1);isMouseEnterTitleOrOverlay$=new ce;childMenuItemClick$=new ce;destroy$=new ce;nzHostSubmenuService=T(n,{optional:!0,skipSelf:!0});onChildMenuItemClick(t){this.childMenuItemClick$.next(t)}setOpenStateWithoutDebounce(t){this.isCurrentSubMenuOpen$.next(t)}setMouseEnterTitleOrOverlayState(t){this.isMouseEnterTitleOrOverlay$.next(t)}constructor(){this.nzHostSubmenuService&&(this.level=this.nzHostSubmenuService.level+1);let t=this.childMenuItemClick$.pipe(mn(()=>this.mode$),xt(o=>o!=="inline"||this.isMenuInsideDropDown),Pe(()=>!1)),i=ga(this.isMouseEnterTitleOrOverlay$,t);jo([this.isChildSubMenuOpen$,i]).pipe(Pe(([o,s])=>o||s),va(150),ki(),_e(this.destroy$)).pipe(ki()).subscribe(o=>{this.setOpenStateWithoutDebounce(o),this.nzHostSubmenuService?this.nzHostSubmenuService.isChildSubMenuOpen$.next(o):this.nzMenuService.isChildSubMenuOpen$.next(o)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),AP=(()=>{class n{nzMenuService;cdr;destroy$=new ce;nzSubmenuService=T(Hy,{optional:!0});directionality=T(Ut);routerLink=T(hh,{optional:!0});router=T(_r,{optional:!0});isMenuInsideDropDown=T(da);level=this.nzSubmenuService?this.nzSubmenuService.level+1:1;selected$=new ce;inlinePaddingLeft=null;dir="ltr";nzPaddingLeft;nzDisabled=!1;nzSelected=!1;nzDanger=!1;nzMatchRouterExact=!1;nzMatchRouter=!1;listOfRouterLink;clickMenuItem(t){this.nzDisabled?(t.preventDefault(),t.stopPropagation()):(this.nzMenuService.onDescendantMenuItemClick(this),this.nzSubmenuService?this.nzSubmenuService.onChildMenuItemClick(this):this.nzMenuService.onChildMenuItemClick(this))}setSelectedState(t){this.nzSelected=t,this.selected$.next(t)}updateRouterActive(){!this.listOfRouterLink||!this.router||!this.router.navigated||!this.nzMatchRouter||Promise.resolve().then(()=>{let t=this.hasActiveLinks();this.nzSelected!==t&&(this.nzSelected=t,this.setSelectedState(this.nzSelected),this.cdr.markForCheck())})}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.routerLink&&t(this.routerLink)||this.listOfRouterLink.some(t)}isLinkActive(t){return i=>t.isActive(i.urlTree||"",{paths:this.nzMatchRouterExact?"exact":"subset",queryParams:this.nzMatchRouterExact?"exact":"subset",fragment:"ignored",matrixParams:"ignored"})}constructor(t,i){this.nzMenuService=t,this.cdr=i,this.router&&this.router.events.pipe(_e(this.destroy$),xt(r=>r instanceof yr)).subscribe(()=>{this.updateRouterActive()})}ngOnInit(){jo([this.nzMenuService.mode$,this.nzMenuService.inlineIndent$]).pipe(_e(this.destroy$)).subscribe(([t,i])=>{this.inlinePaddingLeft=t==="inline"?this.level*i:null}),this.dir=this.directionality.value,this.directionality.change?.pipe(_e(this.destroy$)).subscribe(t=>{this.dir=t})}ngAfterContentInit(){this.listOfRouterLink.changes.pipe(_e(this.destroy$)).subscribe(()=>this.updateRouterActive()),this.updateRouterActive()}ngOnChanges(t){t.nzSelected&&this.setSelectedState(this.nzSelected)}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}static \u0275fac=function(i){return new(i||n)(Y(Ol),Y(Mt))};static \u0275cmp=Fe({type:n,selectors:[["","nz-menu-item",""]],contentQueries:function(i,r,o){if(i&1&&ai(o,hh,5),i&2){let s;Wt(s=$t())&&(r.listOfRouterLink=s)}},hostVars:20,hostBindings:function(i,r){i&1&&We("click",function(s){return r.clickMenuItem(s)}),i&2&&(Sn("padding-left",r.dir==="rtl"?null:r.nzPaddingLeft||r.inlinePaddingLeft,"px")("padding-right",r.dir==="rtl"?r.nzPaddingLeft||r.inlinePaddingLeft:null,"px"),ze("ant-dropdown-menu-item",r.isMenuInsideDropDown)("ant-dropdown-menu-item-selected",r.isMenuInsideDropDown&&r.nzSelected)("ant-dropdown-menu-item-danger",r.isMenuInsideDropDown&&r.nzDanger)("ant-dropdown-menu-item-disabled",r.isMenuInsideDropDown&&r.nzDisabled)("ant-menu-item",!r.isMenuInsideDropDown)("ant-menu-item-selected",!r.isMenuInsideDropDown&&r.nzSelected)("ant-menu-item-danger",!r.isMenuInsideDropDown&&r.nzDanger)("ant-menu-item-disabled",!r.isMenuInsideDropDown&&r.nzDisabled))},inputs:{nzPaddingLeft:[2,"nzPaddingLeft","nzPaddingLeft",t1],nzDisabled:[2,"nzDisabled","nzDisabled",fe],nzSelected:[2,"nzSelected","nzSelected",fe],nzDanger:[2,"nzDanger","nzDanger",fe],nzMatchRouterExact:[2,"nzMatchRouterExact","nzMatchRouterExact",fe],nzMatchRouter:[2,"nzMatchRouter","nzMatchRouter",fe]},exportAs:["nzMenuItem"],features:[$e],attrs:Zte,ngContentSelectors:DP,decls:2,vars:0,consts:[[1,"ant-menu-title-content"]],template:function(i,r){i&1&&(Zt(),j(0,"span",0),Rt(1),q())},encapsulation:2,changeDetection:0})}return n})(),Sne=(()=>{class n{elementRef;renderer;directionality;templateOutlet=null;menuClass="";mode="vertical";nzOpen=!1;listOfCacheClassName=[];expandState="collapsed";dir="ltr";destroy$=new ce;constructor(t,i,r){this.elementRef=t,this.renderer=i,this.directionality=r}calcMotionState(){this.nzOpen?this.expandState="expanded":this.expandState="collapsed"}ngOnInit(){this.calcMotionState(),this.dir=this.directionality.value,this.directionality.change?.pipe(_e(this.destroy$)).subscribe(t=>{this.dir=t})}ngOnChanges(t){let{mode:i,nzOpen:r,menuClass:o}=t;(i||r)&&this.calcMotionState(),o&&(this.listOfCacheClassName.length&&this.listOfCacheClassName.filter(s=>!!s).forEach(s=>{this.renderer.removeClass(this.elementRef.nativeElement,s)}),this.menuClass&&(this.listOfCacheClassName=this.menuClass.split(" "),this.listOfCacheClassName.filter(s=>!!s).forEach(s=>{this.renderer.addClass(this.elementRef.nativeElement,s)})))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(i){return new(i||n)(Y(Je),Y(Mn),Y(Ut))};static \u0275cmp=Fe({type:n,selectors:[["","nz-submenu-inline-child",""]],hostAttrs:[1,"ant-menu","ant-menu-inline","ant-menu-sub"],hostVars:3,hostBindings:function(i,r){i&2&&(w2("@collapseMotion",r.expandState),ze("ant-menu-rtl",r.dir==="rtl"))},inputs:{templateOutlet:"templateOutlet",menuClass:"menuClass",mode:"mode",nzOpen:"nzOpen"},exportAs:["nzSubmenuInlineChild"],features:[$e],attrs:Qte,decls:1,vars:1,consts:[[3,"ngTemplateOutlet"]],template:function(i,r){i&1&&G(0,Jte,0,0,"ng-template",0),i&2&&$("ngTemplateOutlet",r.templateOutlet)},dependencies:[ni],encapsulation:2,data:{animation:[gz]},changeDetection:0})}return n})(),wne=(()=>{class n{directionality;menuClass="";theme="light";templateOutlet=null;isMenuInsideDropDown=!1;mode="vertical";nzTriggerSubMenuAction="hover";position="right";nzDisabled=!1;nzOpen=!1;subMenuMouseState=new pt;constructor(t){this.directionality=t}setMouseState(t){!this.nzDisabled&&this.nzTriggerSubMenuAction==="hover"&&this.subMenuMouseState.next(t)}expandState="collapsed";dir="ltr";destroy$=new ce;ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}calcMotionState(){this.nzOpen?this.mode==="horizontal"?this.expandState="bottom":this.mode==="vertical"&&(this.expandState="active"):this.expandState="collapsed"}ngOnInit(){this.calcMotionState(),this.dir=this.directionality.value,this.directionality.change?.pipe(_e(this.destroy$)).subscribe(t=>{this.dir=t})}ngOnChanges(t){let{mode:i,nzOpen:r}=t;(i||r)&&this.calcMotionState()}static \u0275fac=function(i){return new(i||n)(Y(Ut))};static \u0275cmp=Fe({type:n,selectors:[["","nz-submenu-none-inline-child",""]],hostAttrs:[1,"ant-menu-submenu","ant-menu-submenu-popup"],hostVars:14,hostBindings:function(i,r){i&1&&We("mouseenter",function(){return r.setMouseState(!0)})("mouseleave",function(){return r.setMouseState(!1)}),i&2&&(w2("@slideMotion",r.expandState)("@zoomBigMotion",r.expandState),ze("ant-menu-light",r.theme==="light")("ant-menu-dark",r.theme==="dark")("ant-menu-submenu-placement-bottom",r.mode==="horizontal")("ant-menu-submenu-placement-right",r.mode==="vertical"&&r.position==="right")("ant-menu-submenu-placement-left",r.mode==="vertical"&&r.position==="left")("ant-menu-submenu-rtl",r.dir==="rtl"))},inputs:{menuClass:"menuClass",theme:"theme",templateOutlet:"templateOutlet",isMenuInsideDropDown:"isMenuInsideDropDown",mode:"mode",nzTriggerSubMenuAction:"nzTriggerSubMenuAction",position:"position",nzDisabled:"nzDisabled",nzOpen:"nzOpen"},outputs:{subMenuMouseState:"subMenuMouseState"},exportAs:["nzSubmenuNoneInlineChild"],features:[$e],attrs:ene,decls:2,vars:17,consts:[[3,"ngTemplateOutlet"]],template:function(i,r){i&1&&(j(0,"div"),G(1,tne,0,0,"ng-template",0),q()),i&2&&(si(r.menuClass),ze("ant-dropdown-menu",r.isMenuInsideDropDown)("ant-menu",!r.isMenuInsideDropDown)("ant-dropdown-menu-vertical",r.isMenuInsideDropDown)("ant-menu-vertical",!r.isMenuInsideDropDown)("ant-dropdown-menu-sub",r.isMenuInsideDropDown)("ant-menu-sub",!r.isMenuInsideDropDown)("ant-menu-rtl",r.dir==="rtl"),O(),$("ngTemplateOutlet",r.templateOutlet))},dependencies:[ni],encapsulation:2,data:{animation:[w3,_z]},changeDetection:0})}return n})(),IP=(()=>{class n{cdr;directionality;nzIcon=null;nzTitle=null;isMenuInsideDropDown=!1;nzDisabled=!1;paddingLeft=null;mode="vertical";nzTriggerSubMenuAction="hover";toggleSubMenu=new pt;subMenuMouseState=new pt;dir="ltr";destroy$=new ce;constructor(t,i){this.cdr=t,this.directionality=i}ngOnInit(){this.dir=this.directionality.value,this.directionality.change?.pipe(_e(this.destroy$)).subscribe(t=>{this.dir=t,this.cdr.detectChanges()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setMouseState(t){!this.nzDisabled&&this.nzTriggerSubMenuAction==="hover"&&this.subMenuMouseState.next(t)}clickTitle(){(this.mode==="inline"||this.nzTriggerSubMenuAction==="click")&&!this.nzDisabled&&(this.subMenuMouseState.next(!0),this.toggleSubMenu.emit())}static \u0275fac=function(i){return new(i||n)(Y(Mt),Y(Ut))};static \u0275cmp=Fe({type:n,selectors:[["","nz-submenu-title",""]],hostVars:8,hostBindings:function(i,r){i&1&&We("click",function(){return r.clickTitle()})("mouseenter",function(){return r.setMouseState(!0)})("mouseleave",function(){return r.setMouseState(!1)}),i&2&&(Sn("padding-left",r.dir==="rtl"?null:r.paddingLeft,"px")("padding-right",r.dir==="rtl"?r.paddingLeft:null,"px"),ze("ant-dropdown-menu-submenu-title",r.isMenuInsideDropDown)("ant-menu-submenu-title",!r.isMenuInsideDropDown))},inputs:{nzIcon:"nzIcon",nzTitle:"nzTitle",isMenuInsideDropDown:"isMenuInsideDropDown",nzDisabled:"nzDisabled",paddingLeft:"paddingLeft",mode:"mode",nzTriggerSubMenuAction:"nzTriggerSubMenuAction"},outputs:{toggleSubMenu:"toggleSubMenu",subMenuMouseState:"subMenuMouseState"},exportAs:["nzSubmenuTitle"],attrs:nne,ngContentSelectors:DP,decls:5,vars:3,consts:[[3,"nzType"],[4,"nzStringTemplateOutlet"],[1,"ant-dropdown-menu-submenu-expand-icon"],[1,"ant-menu-submenu-arrow"],[1,"ant-menu-title-content"],["nzType","left",1,"ant-dropdown-menu-submenu-arrow-icon"],["nzType","right",1,"ant-dropdown-menu-submenu-arrow-icon"]],template:function(i,r){i&1&&(Zt(),G(0,ine,1,1,"nz-icon",0)(1,rne,3,1,"ng-container",1),Rt(2),G(3,ane,3,1,"span",2)(4,cne,1,0,"span",3)),i&2&&(le(r.nzIcon?0:-1),O(),$("nzStringTemplateOutlet",r.nzTitle),O(2),le(r.isMenuInsideDropDown?3:4))},dependencies:[wn,pn,xi,li],encapsulation:2,changeDetection:0})}return n})(),EP=[Tn.rightTop,Tn.right,Tn.rightBottom,Tn.leftTop,Tn.left,Tn.leftBottom],Cne=[Tn.bottomLeft,Tn.bottomRight,Tn.topRight,Tn.topLeft],PP=(()=>{class n{nzMenuService;cdr;platform;nzMenuClassName="";nzPaddingLeft=null;nzTitle=null;nzIcon=null;nzTriggerSubMenuAction="hover";nzOpen=!1;nzDisabled=!1;nzPlacement="bottomLeft";nzOpenChange=new pt;cdkOverlayOrigin=null;listOfNzSubMenuComponent=null;listOfNzMenuItemDirective=null;nzSubmenuService=T(Hy);level=this.nzSubmenuService.level;destroy$=new ce;position="right";triggerWidth=null;theme="light";mode="vertical";inlinePaddingLeft=null;overlayPositions=EP;isSelected=!1;isActive=!1;dir="ltr";isMenuInsideDropDown=T(da);noAnimation=T(kl,{optional:!0,host:!0});directionality=T(Ut);setOpenStateWithoutDebounce(t){this.nzSubmenuService.setOpenStateWithoutDebounce(t)}toggleSubMenu(){this.setOpenStateWithoutDebounce(!this.nzOpen)}setMouseEnterState(t){this.isActive=t,this.mode!=="inline"&&this.nzSubmenuService.setMouseEnterTitleOrOverlayState(t)}setTriggerWidth(){this.mode==="horizontal"&&this.platform.isBrowser&&this.cdkOverlayOrigin&&this.nzPlacement==="bottomLeft"&&(this.triggerWidth=this.cdkOverlayOrigin.nativeElement.getBoundingClientRect().width)}onPositionChange(t){let i=A0(t);i==="rightTop"||i==="rightBottom"||i==="right"?this.position="right":(i==="leftTop"||i==="leftBottom"||i==="left")&&(this.position="left")}constructor(t,i,r){this.nzMenuService=t,this.cdr=i,this.platform=r}ngOnInit(){this.nzMenuService.theme$.pipe(_e(this.destroy$)).subscribe(t=>{this.theme=t,this.cdr.markForCheck()}),this.nzSubmenuService.mode$.pipe(_e(this.destroy$)).subscribe(t=>{this.mode=t,t==="horizontal"?this.overlayPositions=[Tn[this.nzPlacement],...Cne]:t==="vertical"&&(this.overlayPositions=EP),this.cdr.markForCheck()}),jo([this.nzSubmenuService.mode$,this.nzMenuService.inlineIndent$]).pipe(_e(this.destroy$)).subscribe(([t,i])=>{this.inlinePaddingLeft=t==="inline"?this.level*i:null,this.cdr.markForCheck()}),this.nzSubmenuService.isCurrentSubMenuOpen$.pipe(_e(this.destroy$)).subscribe(t=>{this.isActive=t,t!==this.nzOpen&&(this.setTriggerWidth(),this.nzOpen=t,this.nzOpenChange.emit(this.nzOpen),this.cdr.markForCheck())}),this.dir=this.directionality.value,this.directionality.change?.pipe(_e(this.destroy$)).subscribe(t=>{this.dir=t,this.cdr.markForCheck()})}ngAfterContentInit(){this.setTriggerWidth();let t=this.listOfNzMenuItemDirective,i=t.changes,r=ga(i,...t.map(o=>o.selected$));i.pipe(Di(t),Dn(()=>r),Di(!0),Pe(()=>t.some(o=>o.nzSelected)),_e(this.destroy$)).subscribe(o=>{this.isSelected=o,this.cdr.markForCheck()})}ngOnChanges(t){let{nzOpen:i}=t;i&&(this.nzSubmenuService.setOpenStateWithoutDebounce(this.nzOpen),this.setTriggerWidth())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(i){return new(i||n)(Y(Ol),Y(Mt),Y(Un))};static \u0275cmp=Fe({type:n,selectors:[["","nz-submenu",""]],contentQueries:function(i,r,o){if(i&1&&(ai(o,n,5),ai(o,AP,5)),i&2){let s;Wt(s=$t())&&(r.listOfNzSubMenuComponent=s),Wt(s=$t())&&(r.listOfNzMenuItemDirective=s)}},viewQuery:function(i,r){if(i&1&&Ai(ua,7,Je),i&2){let o;Wt(o=$t())&&(r.cdkOverlayOrigin=o.first)}},hostVars:34,hostBindings:function(i,r){i&2&&ze("ant-dropdown-menu-submenu",r.isMenuInsideDropDown)("ant-dropdown-menu-submenu-disabled",r.isMenuInsideDropDown&&r.nzDisabled)("ant-dropdown-menu-submenu-open",r.isMenuInsideDropDown&&r.nzOpen)("ant-dropdown-menu-submenu-selected",r.isMenuInsideDropDown&&r.isSelected)("ant-dropdown-menu-submenu-vertical",r.isMenuInsideDropDown&&r.mode==="vertical")("ant-dropdown-menu-submenu-horizontal",r.isMenuInsideDropDown&&r.mode==="horizontal")("ant-dropdown-menu-submenu-inline",r.isMenuInsideDropDown&&r.mode==="inline")("ant-dropdown-menu-submenu-active",r.isMenuInsideDropDown&&r.isActive)("ant-menu-submenu",!r.isMenuInsideDropDown)("ant-menu-submenu-disabled",!r.isMenuInsideDropDown&&r.nzDisabled)("ant-menu-submenu-open",!r.isMenuInsideDropDown&&r.nzOpen)("ant-menu-submenu-selected",!r.isMenuInsideDropDown&&r.isSelected)("ant-menu-submenu-vertical",!r.isMenuInsideDropDown&&r.mode==="vertical")("ant-menu-submenu-horizontal",!r.isMenuInsideDropDown&&r.mode==="horizontal")("ant-menu-submenu-inline",!r.isMenuInsideDropDown&&r.mode==="inline")("ant-menu-submenu-active",!r.isMenuInsideDropDown&&r.isActive)("ant-menu-submenu-rtl",r.dir==="rtl")},inputs:{nzMenuClassName:"nzMenuClassName",nzPaddingLeft:"nzPaddingLeft",nzTitle:"nzTitle",nzIcon:"nzIcon",nzTriggerSubMenuAction:"nzTriggerSubMenuAction",nzOpen:[2,"nzOpen","nzOpen",fe],nzDisabled:[2,"nzDisabled","nzDisabled",fe],nzPlacement:"nzPlacement"},outputs:{nzOpenChange:"nzOpenChange"},exportAs:["nzSubmenu"],features:[Rn([Hy]),$e],attrs:lne,ngContentSelectors:dne,decls:7,vars:9,consts:[["origin","cdkOverlayOrigin"],["subMenuTemplate",""],["nz-submenu-title","","cdkOverlayOrigin","",3,"subMenuMouseState","toggleSubMenu","nzIcon","nzTitle","mode","nzDisabled","isMenuInsideDropDown","paddingLeft","nzTriggerSubMenuAction"],["nz-submenu-inline-child","",3,"mode","nzOpen","nzNoAnimation","menuClass","templateOutlet"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayPositions","cdkConnectedOverlayOrigin","cdkConnectedOverlayWidth","cdkConnectedOverlayOpen","cdkConnectedOverlayTransformOriginOn"],["cdkConnectedOverlay","",3,"positionChange","overlayOutsideClick","cdkConnectedOverlayPositions","cdkConnectedOverlayOrigin","cdkConnectedOverlayWidth","cdkConnectedOverlayOpen","cdkConnectedOverlayTransformOriginOn"],["nz-submenu-none-inline-child","",3,"subMenuMouseState","theme","mode","nzOpen","position","nzDisabled","isMenuInsideDropDown","nzTriggerSubMenuAction","templateOutlet","menuClass","nzNoAnimation"]],template:function(i,r){if(i&1){let o=un();Zt(une),j(0,"div",2,0),We("subMenuMouseState",function(a){return je(o),Ge(r.setMouseEnterState(a))})("toggleSubMenu",function(){return je(o),Ge(r.toggleSubMenu())}),G(2,hne,1,0),q(),G(3,fne,1,6,"div",3)(4,mne,1,5,null,4)(5,gne,1,0,"ng-template",null,1,Jt)}i&2&&($("nzIcon",r.nzIcon)("nzTitle",r.nzTitle)("mode",r.mode)("nzDisabled",r.nzDisabled)("isMenuInsideDropDown",r.isMenuInsideDropDown)("paddingLeft",r.nzPaddingLeft||r.inlinePaddingLeft)("nzTriggerSubMenuAction",r.nzTriggerSubMenuAction),O(2),le(r.nzTitle?-1:2),O(),le(r.mode==="inline"?3:4))},dependencies:[IP,Sne,kl,wne,z0,Rl,ua],encapsulation:2,changeDetection:0})}return n})();function Tne(){let n=T(Ol,{skipSelf:!0,optional:!0}),e=T(zP);return n??e}function Ene(){return T(da,{skipSelf:!0,optional:!0})??!1}var RP=(()=>{class n{nzMenuService;cdr;listOfNzMenuItemDirective;isMenuInsideDropDown=T(da);listOfNzSubMenuComponent;nzInlineIndent=24;nzTheme="light";nzMode="vertical";nzInlineCollapsed=!1;nzSelectable=!this.isMenuInsideDropDown;nzClick=new pt;actualMode="vertical";dir="ltr";inlineCollapsed$=new Qt(this.nzInlineCollapsed);mode$=new Qt(this.nzMode);destroy$=new ce;listOfOpenedNzSubMenuComponent=[];directionality=T(Ut);setInlineCollapsed(t){this.nzInlineCollapsed=t,this.inlineCollapsed$.next(t)}updateInlineCollapse(){this.listOfNzMenuItemDirective&&(this.nzInlineCollapsed?(this.listOfOpenedNzSubMenuComponent=this.listOfNzSubMenuComponent.filter(t=>t.nzOpen),this.listOfNzSubMenuComponent.forEach(t=>t.setOpenStateWithoutDebounce(!1))):(this.listOfOpenedNzSubMenuComponent.forEach(t=>t.setOpenStateWithoutDebounce(!0)),this.listOfOpenedNzSubMenuComponent=[]))}constructor(t,i){this.nzMenuService=t,this.cdr=i}ngOnInit(){jo([this.inlineCollapsed$,this.mode$]).pipe(_e(this.destroy$)).subscribe(([t,i])=>{this.actualMode=t?"vertical":i,this.nzMenuService.setMode(this.actualMode),this.cdr.markForCheck()}),this.nzMenuService.descendantMenuItemClick$.pipe(_e(this.destroy$)).subscribe(t=>{this.nzClick.emit(t),this.nzSelectable&&!t.nzMatchRouter&&this.listOfNzMenuItemDirective.forEach(i=>i.setSelectedState(i===t))}),this.dir=this.directionality.value,this.directionality.change?.pipe(_e(this.destroy$)).subscribe(t=>{this.dir=t,this.nzMenuService.setMode(this.actualMode),this.cdr.markForCheck()})}ngAfterContentInit(){this.inlineCollapsed$.pipe(_e(this.destroy$)).subscribe(()=>{this.updateInlineCollapse(),this.cdr.markForCheck()})}ngOnChanges(t){let{nzInlineCollapsed:i,nzInlineIndent:r,nzTheme:o,nzMode:s}=t;i&&this.inlineCollapsed$.next(this.nzInlineCollapsed),r&&this.nzMenuService.setInlineIndent(this.nzInlineIndent),o&&this.nzMenuService.setTheme(this.nzTheme),s&&(this.mode$.next(this.nzMode),!t.nzMode.isFirstChange()&&this.listOfNzSubMenuComponent&&this.listOfNzSubMenuComponent.forEach(a=>a.setOpenStateWithoutDebounce(!1)))}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}static \u0275fac=function(i){return new(i||n)(Y(Ol),Y(Mt))};static \u0275dir=Oe({type:n,selectors:[["","nz-menu",""]],contentQueries:function(i,r,o){if(i&1&&(ai(o,AP,5),ai(o,PP,5)),i&2){let s;Wt(s=$t())&&(r.listOfNzMenuItemDirective=s),Wt(s=$t())&&(r.listOfNzSubMenuComponent=s)}},hostVars:34,hostBindings:function(i,r){i&2&&ze("ant-dropdown-menu",r.isMenuInsideDropDown)("ant-dropdown-menu-root",r.isMenuInsideDropDown)("ant-dropdown-menu-light",r.isMenuInsideDropDown&&r.nzTheme==="light")("ant-dropdown-menu-dark",r.isMenuInsideDropDown&&r.nzTheme==="dark")("ant-dropdown-menu-vertical",r.isMenuInsideDropDown&&r.actualMode==="vertical")("ant-dropdown-menu-horizontal",r.isMenuInsideDropDown&&r.actualMode==="horizontal")("ant-dropdown-menu-inline",r.isMenuInsideDropDown&&r.actualMode==="inline")("ant-dropdown-menu-inline-collapsed",r.isMenuInsideDropDown&&r.nzInlineCollapsed)("ant-menu",!r.isMenuInsideDropDown)("ant-menu-root",!r.isMenuInsideDropDown)("ant-menu-light",!r.isMenuInsideDropDown&&r.nzTheme==="light")("ant-menu-dark",!r.isMenuInsideDropDown&&r.nzTheme==="dark")("ant-menu-vertical",!r.isMenuInsideDropDown&&r.actualMode==="vertical")("ant-menu-horizontal",!r.isMenuInsideDropDown&&r.actualMode==="horizontal")("ant-menu-inline",!r.isMenuInsideDropDown&&r.actualMode==="inline")("ant-menu-inline-collapsed",!r.isMenuInsideDropDown&&r.nzInlineCollapsed)("ant-menu-rtl",r.dir==="rtl")},inputs:{nzInlineIndent:"nzInlineIndent",nzTheme:"nzTheme",nzMode:"nzMode",nzInlineCollapsed:[2,"nzInlineCollapsed","nzInlineCollapsed",fe],nzSelectable:[2,"nzSelectable","nzSelectable",fe]},outputs:{nzClick:"nzClick"},exportAs:["nzMenu"],features:[Rn([{provide:zP,useClass:Ol},{provide:Ol,useFactory:Tne},{provide:da,useFactory:Ene}]),$e]})}return n})();function Dne(){return T(da,{optional:!0,skipSelf:!0})??!1}var zne=(()=>{class n{elementRef;renderer;nzTitle;titleElement;isMenuInsideDropDown=T(da);constructor(t,i){this.elementRef=t,this.renderer=i;let r=this.isMenuInsideDropDown?"ant-dropdown-menu-item-group":"ant-menu-item-group";this.renderer.addClass(t.nativeElement,r)}ngAfterViewInit(){let t=this.titleElement.nativeElement.nextElementSibling;if(t){let i=this.isMenuInsideDropDown?"ant-dropdown-menu-item-group-list":"ant-menu-item-group-list";this.renderer.addClass(t,i)}}static \u0275fac=function(i){return new(i||n)(Y(Je),Y(Mn))};static \u0275cmp=Fe({type:n,selectors:[["","nz-menu-group",""]],viewQuery:function(i,r){if(i&1&&Ai(vne,5),i&2){let o;Wt(o=$t())&&(r.titleElement=o.first)}},inputs:{nzTitle:"nzTitle"},exportAs:["nzMenuGroup"],features:[Rn([{provide:da,useFactory:Dne}])],attrs:yne,ngContentSelectors:bne,decls:5,vars:6,consts:[["titleElement",""],[4,"nzStringTemplateOutlet"]],template:function(i,r){i&1&&(Zt(_ne),j(0,"div",null,0),G(2,xne,2,1,"ng-container",1)(3,Mne,1,0),q(),Rt(4)),i&2&&(ze("ant-menu-item-group-title",!r.isMenuInsideDropDown)("ant-dropdown-menu-item-group-title",r.isMenuInsideDropDown),O(2),$("nzStringTemplateOutlet",r.nzTitle),O(),le(r.nzTitle?-1:3))},dependencies:[xi,li],encapsulation:2,changeDetection:0})}return n})();var kP=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({imports:[PP,zne,IP]})}return n})();var z8=["*"],Ane=["nz-sider-trigger",""];function Ine(n,e){}function Pne(n,e){if(n&1&&G(0,Ine,0,0,"ng-template",2),n&2){let t=R(),i=dt(5);$("ngTemplateOutlet",t.nzZeroTrigger||i)}}function Rne(n,e){}function kne(n,e){if(n&1&&G(0,Rne,0,0,"ng-template",2),n&2){let t=R(),i=dt(3);$("ngTemplateOutlet",t.nzTrigger||i)}}function Nne(n,e){if(n&1&&me(0,"nz-icon",3),n&2){let t=R(2);$("nzType",t.nzCollapsed?"left":"right")}}function One(n,e){if(n&1&&me(0,"nz-icon",3),n&2){let t=R(2);$("nzType",t.nzCollapsed?"right":"left")}}function Lne(n,e){if(n&1&&G(0,Nne,1,1,"nz-icon",3)(1,One,1,1,"nz-icon",3),n&2){let t=R();le(t.nzReverseArrow?0:1)}}function Fne(n,e){n&1&&me(0,"nz-icon",4)}function Vne(n,e){if(n&1){let t=un();j(0,"div",2),We("click",function(){je(t);let r=R();return Ge(r.setCollapsed(!r.nzCollapsed))}),q()}if(n&2){let t=R();$("matchBreakPoint",t.matchBreakPoint)("nzCollapsedWidth",t.nzCollapsedWidth)("nzCollapsed",t.nzCollapsed)("nzBreakpoint",t.nzBreakpoint)("nzReverseArrow",t.nzReverseArrow)("nzTrigger",t.nzTrigger)("nzZeroTrigger",t.nzZeroTrigger)("siderWidth",t.widthSetting)}}var NP=(()=>{class n{elementRef;renderer;constructor(t,i){this.elementRef=t,this.renderer=i,this.renderer.addClass(this.elementRef.nativeElement,"ant-layout-content")}static \u0275fac=function(i){return new(i||n)(Y(Je),Y(Mn))};static \u0275cmp=Fe({type:n,selectors:[["nz-content"]],exportAs:["nzContent"],ngContentSelectors:z8,decls:1,vars:0,template:function(i,r){i&1&&(Zt(),Rt(0))},encapsulation:2,changeDetection:0})}return n})();var OP=(()=>{class n{elementRef;renderer;constructor(t,i){this.elementRef=t,this.renderer=i,this.renderer.addClass(this.elementRef.nativeElement,"ant-layout-header")}static \u0275fac=function(i){return new(i||n)(Y(Je),Y(Mn))};static \u0275cmp=Fe({type:n,selectors:[["nz-header"]],exportAs:["nzHeader"],ngContentSelectors:z8,decls:1,vars:0,template:function(i,r){i&1&&(Zt(),Rt(0))},encapsulation:2,changeDetection:0})}return n})(),LP=(()=>{class n{nzCollapsed=!1;nzReverseArrow=!1;nzZeroTrigger=null;nzTrigger=void 0;matchBreakPoint=!1;nzCollapsedWidth=null;siderWidth=null;nzBreakpoint=null;isZeroTrigger=!1;isNormalTrigger=!1;updateTriggerType(){this.isZeroTrigger=this.nzCollapsedWidth===0&&(this.nzBreakpoint&&this.matchBreakPoint||!this.nzBreakpoint),this.isNormalTrigger=this.nzCollapsedWidth!==0}ngOnInit(){this.updateTriggerType()}ngOnChanges(){this.updateTriggerType()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Fe({type:n,selectors:[["","nz-sider-trigger",""]],hostVars:10,hostBindings:function(i,r){i&2&&(Sn("width",r.isNormalTrigger?r.siderWidth:null),ze("ant-layout-sider-trigger",r.isNormalTrigger)("ant-layout-sider-zero-width-trigger",r.isZeroTrigger)("ant-layout-sider-zero-width-trigger-right",r.isZeroTrigger&&r.nzReverseArrow)("ant-layout-sider-zero-width-trigger-left",r.isZeroTrigger&&!r.nzReverseArrow))},inputs:{nzCollapsed:"nzCollapsed",nzReverseArrow:"nzReverseArrow",nzZeroTrigger:"nzZeroTrigger",nzTrigger:"nzTrigger",matchBreakPoint:"matchBreakPoint",nzCollapsedWidth:"nzCollapsedWidth",siderWidth:"siderWidth",nzBreakpoint:"nzBreakpoint"},exportAs:["nzSiderTrigger"],features:[$e],attrs:Ane,decls:6,vars:2,consts:[["defaultTrigger",""],["defaultZeroTrigger",""],[3,"ngTemplateOutlet"],[3,"nzType"],["nzType","bars"]],template:function(i,r){i&1&&G(0,Pne,1,1,null,2)(1,kne,1,1,null,2)(2,Lne,2,1,"ng-template",null,0,Jt)(4,Fne,1,0,"ng-template",null,1,Jt),i&2&&(le(r.isZeroTrigger?0:-1),O(),le(r.isNormalTrigger?1:-1))},dependencies:[ni,wn,pn],encapsulation:2,changeDetection:0})}return n})(),FP=(()=>{class n{platform;cdr;breakpointService;destroy$=new ce;nzMenuDirective=null;nzCollapsedChange=new pt;nzWidth=200;nzTheme="dark";nzCollapsedWidth=80;nzBreakpoint=null;nzZeroTrigger=null;nzTrigger=void 0;nzReverseArrow=!1;nzCollapsible=!1;nzCollapsed=!1;matchBreakPoint=!1;flexSetting=null;widthSetting=null;updateStyleMap(){this.widthSetting=this.nzCollapsed?`${this.nzCollapsedWidth}px`:n1(this.nzWidth),this.flexSetting=`0 0 ${this.widthSetting}`,this.cdr.markForCheck()}updateMenuInlineCollapsed(){this.nzMenuDirective&&this.nzMenuDirective.nzMode==="inline"&&this.nzCollapsedWidth!==0&&this.nzMenuDirective.setInlineCollapsed(this.nzCollapsed)}setCollapsed(t){t!==this.nzCollapsed&&(this.nzCollapsed=t,this.nzCollapsedChange.emit(t),this.updateMenuInlineCollapsed(),this.updateStyleMap(),this.cdr.markForCheck())}constructor(t,i,r){this.platform=t,this.cdr=i,this.breakpointService=r}ngOnInit(){this.updateStyleMap(),this.platform.isBrowser&&this.breakpointService.subscribe(BD,!0).pipe(_e(this.destroy$)).subscribe(t=>{let i=this.nzBreakpoint;i&&XE().subscribe(()=>{this.matchBreakPoint=!t[i],this.setCollapsed(this.matchBreakPoint),this.cdr.markForCheck()})})}ngOnChanges(t){let{nzCollapsed:i,nzCollapsedWidth:r,nzWidth:o}=t;(i||r||o)&&this.updateStyleMap(),i&&this.updateMenuInlineCollapsed()}ngAfterContentInit(){this.updateMenuInlineCollapsed()}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}static \u0275fac=function(i){return new(i||n)(Y(Un),Y(Mt),Y(UD))};static \u0275cmp=Fe({type:n,selectors:[["nz-sider"]],contentQueries:function(i,r,o){if(i&1&&ai(o,RP,5),i&2){let s;Wt(s=$t())&&(r.nzMenuDirective=s.first)}},hostAttrs:[1,"ant-layout-sider"],hostVars:18,hostBindings:function(i,r){i&2&&(Sn("flex",r.flexSetting)("max-width",r.widthSetting)("min-width",r.widthSetting)("width",r.widthSetting),ze("ant-layout-sider-zero-width",r.nzCollapsed&&r.nzCollapsedWidth===0)("ant-layout-sider-light",r.nzTheme==="light")("ant-layout-sider-dark",r.nzTheme==="dark")("ant-layout-sider-collapsed",r.nzCollapsed)("ant-layout-sider-has-trigger",r.nzCollapsible&&r.nzTrigger!==null))},inputs:{nzWidth:"nzWidth",nzTheme:"nzTheme",nzCollapsedWidth:"nzCollapsedWidth",nzBreakpoint:"nzBreakpoint",nzZeroTrigger:"nzZeroTrigger",nzTrigger:"nzTrigger",nzReverseArrow:[2,"nzReverseArrow","nzReverseArrow",fe],nzCollapsible:[2,"nzCollapsible","nzCollapsible",fe],nzCollapsed:[2,"nzCollapsed","nzCollapsed",fe]},outputs:{nzCollapsedChange:"nzCollapsedChange"},exportAs:["nzSider"],features:[$e],ngContentSelectors:z8,decls:3,vars:1,consts:[[1,"ant-layout-sider-children"],["nz-sider-trigger","",3,"matchBreakPoint","nzCollapsedWidth","nzCollapsed","nzBreakpoint","nzReverseArrow","nzTrigger","nzZeroTrigger","siderWidth"],["nz-sider-trigger","",3,"click","matchBreakPoint","nzCollapsedWidth","nzCollapsed","nzBreakpoint","nzReverseArrow","nzTrigger","nzZeroTrigger","siderWidth"]],template:function(i,r){i&1&&(Zt(),j(0,"div",0),Rt(1),q(),G(2,Vne,1,8,"div",1)),i&2&&(O(2),le(r.nzCollapsible&&r.nzTrigger!==null?2:-1))},dependencies:[LP],encapsulation:2,changeDetection:0})}return n})(),VP=(()=>{class n{directionality;listOfNzSiderComponent;dir="ltr";destroy$=new ce;constructor(t){this.directionality=t}ngOnInit(){this.dir=this.directionality.value,this.directionality.change?.pipe(_e(this.destroy$)).subscribe(t=>{this.dir=t})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(i){return new(i||n)(Y(Ut))};static \u0275cmp=Fe({type:n,selectors:[["nz-layout"]],contentQueries:function(i,r,o){if(i&1&&ai(o,FP,4),i&2){let s;Wt(s=$t())&&(r.listOfNzSiderComponent=s)}},hostAttrs:[1,"ant-layout"],hostVars:4,hostBindings:function(i,r){i&2&&ze("ant-layout-rtl",r.dir==="rtl")("ant-layout-has-sider",r.listOfNzSiderComponent.length>0)},exportAs:["nzLayout"],ngContentSelectors:z8,decls:1,vars:0,template:function(i,r){i&1&&(Zt(),Rt(0))},encapsulation:2,changeDetection:0})}return n})(),HP=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=ke({type:n});static \u0275inj=Re({imports:[FP,LP]})}return n})();var A8=class n{constructor(e,t){this.router=e;this.iconService=t;this.iconService.addIcon(hE,Oa),this.router.events.subscribe(()=>{this.router.url.includes("glb-viewer")?this.selectedIndex=1:this.selectedIndex=0})}selectedIndex=0;onMenuClick(e){let t=e.key;this.selectedIndex=t,t===0?this.router.navigate(["/card-creator"]):t===1&&this.router.navigate(["/glb-viewer"])}static \u0275fac=function(t){return new(t||n)(Y(_r),Y(Ba))};static \u0275cmp=Fe({type:n,selectors:[["app-root"]],decls:17,vars:4,consts:[[1,"app-container"],[1,"full-height"],[1,"app-header"],[1,"header-content"],[1,"app-title"],[1,"nav-menu"],["nz-button","","nzType","text",1,"nav-button",3,"click"],["nz-icon","","nzType","credit-card","nzTheme","outline"],["nz-icon","","nzType","eye","nzTheme","outline"],[1,"app-content"]],template:function(t,i){t&1&&(j(0,"div",0)(1,"nz-layout",1)(2,"nz-header",2)(3,"div",3)(4,"h1",4),rt(5,"3D Card Creator"),q(),j(6,"div",5)(7,"button",6),We("click",function(){return i.onMenuClick({key:0})}),me(8,"span",7),j(9,"span"),rt(10,"Card Creator"),q()(),j(11,"button",6),We("click",function(){return i.onMenuClick({key:1})}),me(12,"span",8),j(13,"span"),rt(14,"GLB Viewer"),q()()()()(),j(15,"nz-content",9),me(16,"router-outlet"),q()()()),t&2&&(O(7),ze("active",i.selectedIndex===0),O(4),ze("active",i.selectedIndex===1))},dependencies:[Da,E5,ch,HP,VP,OP,NP,kP,wn,pn],styles:[".app-container[_ngcontent-%COMP%]{height:100vh;background:#000;color:#fff;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.full-height[_ngcontent-%COMP%]{height:100vh}.app-header[_ngcontent-%COMP%]{background:#000000e6!important;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-bottom:1px solid rgba(255,255,255,.1)!important;padding:0!important;height:64px!important;line-height:64px!important}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 24px;height:100%}.app-title[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:24px;font-weight:600}.nav-menu[_ngcontent-%COMP%]{display:flex;gap:8px}.nav-button[_ngcontent-%COMP%]{cursor:pointer;color:#ffffffb3!important;border:none!important;background:transparent!important;padding:0 16px!important;border-radius:6px!important;transition:all .3s ease!important;display:flex!important;align-items:center!important;gap:8px!important}.nav-button[_ngcontent-%COMP%]:hover{color:#fff!important;background:#ffffff1a!important}.nav-button.active[_ngcontent-%COMP%]{color:#1890ff!important;background:#1890ff1a!important;border-bottom:2px solid #1890ff!important}.app-content[_ngcontent-%COMP%]{background:#000!important;padding:0!important;height:calc(100vh - 64px)}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;height:auto;padding:12px 16px}.app-title[_ngcontent-%COMP%]{font-size:20px;margin-bottom:8px}.app-header[_ngcontent-%COMP%]{height:auto!important;line-height:normal!important}.app-content[_ngcontent-%COMP%]{height:calc(100vh - 80px)}.nav-menu[_ngcontent-%COMP%]{gap:4px}.nav-button[_ngcontent-%COMP%]{padding:6px 12px!important;font-size:14px!important}}"]})};$g(A8,TP).catch(n=>console.error(n));
